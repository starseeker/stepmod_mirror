<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" description.file="mim_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="alternative_solution_mim schema_instance"/>
   <schema name="Alternative_solution_mim">
      <interface kind="use" schema="Person_organization_assignment_mim"/>
      <interface kind="use" schema="Product_occurrence_mim"/>
      <interface kind="use" schema="Physical_breakdown_mim"/>
      <interface kind="use" schema="qualified_measure_schema">
         <interfaced.item name="measure_representation_item"/>
      </interface>
      <interface kind="use" schema="measure_schema">
         <interfaced.item name="ratio_measure_with_unit"/>
      </interface>
      <type name="organization_item_solution">
         <select basedon="organization_item" selectitems="product_definition_formation"/>
      </type>
      <rule name="alternative_solution_requires_solution_definition" appliesto="product_definition_formation">
         <algorithm>LOCAL
      solution_versions: SET OF product_definition_formation := [];
    END_LOCAL;
    solution_versions :=  QUERY( pdf &lt;* product_definition_formation |
	  SIZEOF( QUERY( prpc &lt;* USEDIN(pdf.of_product, 'ALTERNATIVE_SOLUTION_MIM' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | 
      prpc.name = 'alternative solution')) = 1);</algorithm>
         <where label="WR1" expression="SIZEOF( QUERY( pdf &lt;* solution_versions |&#10;        SIZEOF( QUERY( pd &lt;* USEDIN(pdf, 'ALTERNATIVE_SOLUTION_MIM' + '.PRODUCT_DEFINITION.FORMATION') | &#10;        pd.frame_of_reference.name = 'alternative definition')) &lt;&gt; 1))= 0"/>
      </rule>
      <rule name="restrict_alternative_definition" appliesto="product_definition">
         <algorithm>LOCAL
      solution_definitions: SET OF product_definition := [];
    END_LOCAL;
      solution_definitions :=  QUERY( pd &lt;* product_definition |
	 (pd.frame_of_reference.name = 'alternative definition'));</algorithm>
         <where label="WR1" expression="SIZEOF ( QUERY ( pd &lt;* solution_definitions | &#10;	    ( SIZEOF ( QUERY ( pdr &lt;* USEDIN ( pd ,&#10;	    'ALTERNATIVE_SOLUTION_MIM' + '.PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION' ) | &#10;	    pdr.name = 'solution alternative definition' ) ) &lt;&gt;1 ) ) ) = 0"/>
         <where label="WR2" expression="SIZEOF ( QUERY ( pd &lt;* solution_definitions | &#10;	    NOT ( pd.name IN ['technical' , 'supplier' , 'technical supplier' , ''] ) ) ) = 0"/>
         <where label="WR3" expression="SIZEOF ( QUERY ( pd &lt;* solution_definitions | &#10;	    ( pd.name IN ['supplier' , 'technical supplier'] ) AND (&#10;	    SIZEOF ( QUERY ( aoa &lt;* USEDIN ( pd.formation ,&#10;	    'ALTERNATIVE_SOLUTION_MIM' + '.APPLIED_ORGANIZATION_ASSIGNMENT.ITEMS' ) | &#10;	    aoa.role.name = 'supplier' )) &lt;&gt;1 ) )) = 0"/>
      </rule>
      <rule name="restrict_product_definitions_for_base_element" appliesto="product_definition_relationship">
         <where label="WR1" expression="SIZEOF ( QUERY ( pdr &lt;* product_definition_relationship |&#10;       ( pdr. name = 'solution alternative definition' ) AND &#10;       ( NOT( pdr. relating_product_definition.frame_of_reference.name&#10;        IN [ 'alternative definition' , 'functional definition' , 'conceptual definition' ] ) OR &#10;       ( pdr.related_product_definition.frame_of_reference.name&lt;&gt;'alternative definition' ) ) ) ) =0"/>
      </rule>
      <rule name="solution_definition_requires_solution_category" appliesto="product_definition">
         <algorithm>LOCAL
      solution_definitions: SET OF product_definition := [];
    END_LOCAL;
      solution_definitions :=  QUERY( pd &lt;* product_definition |
        (pd.frame_of_reference.name = 'alternative definition'));</algorithm>
         <where label="WR1" expression="SIZEOF( QUERY( pd &lt;* solution_definitions | &#10;        (SIZEOF( QUERY( prpc &lt;* USEDIN(pd.formation.of_product, 'ALTERNATIVE_SOLUTION_MIM' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | &#10;	     prpc.name = 'alternative solution')) = 0 ) )) = 0"/>
      </rule>
   </schema>
</express>
