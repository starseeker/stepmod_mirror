<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.26 2002/12/23 10:00:14 goset1 Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  description.file="mim_descriptions.xml"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.26"
    source="../data/modules/ap203e2_config_control_3d_design_module/mim.exp"/>

  <schema name="Ap203e2_config_control_3d_design_module_mim">
    <interface
      kind="use"
      schema="Advanced_boundary_representation_mim">
    </interface>

    <interface
      kind="use"
      schema="Associative_text_mim">
    </interface>

    <interface
      kind="use"
      schema="Construction_geometry_mim">
    </interface>

    <interface
      kind="use"
      schema="Constructive_solid_geometry_3d_mim">
    </interface>

    <interface
      kind="use"
      schema="Default_tolerance_mim">
    </interface>

    <interface
      kind="use"
      schema="Derived_shape_element_mim">
    </interface>

    <interface
      kind="use"
      schema="Dimension_tolerance_mim">
    </interface>

    <interface
      kind="use"
      schema="Edge_based_wireframe_mim">
    </interface>

    <interface
      kind="use"
      schema="Faceted_boundary_representation_mim">
    </interface>

    <interface
      kind="use"
      schema="Geometric_tolerance_mim">
    </interface>

    <interface
      kind="use"
      schema="Geometric_validation_property_representation_mim">
    </interface>

    <interface
      kind="use"
      schema="Geometrically_bounded_surface_mim">
    </interface>

    <interface
      kind="use"
      schema="Geometrically_bounded_wireframe_mim">
    </interface>

    <interface
      kind="use"
      schema="Manifold_surface_mim">
    </interface>

    <interface
      kind="use"
      schema="Representation_with_uncertainty_mim">
    </interface>

    <interface
      kind="use"
      schema="Shape_appearance_layers_mim">
    </interface>

    <interface
      kind="use"
      schema="Shell_based_wireframe_mim">
    </interface>

    <interface
      kind="use"
      schema="Management_resource_information_mim">
    </interface>

    <interface
      kind="use"
      schema="Effectivity_application_mim">
    </interface>

    <interface
      kind="use"
      schema="Event_mim">
    </interface>

    <interface
      kind="use"
      schema="Time_interval_mim">
    </interface>

    <interface
      kind="use"
      schema="Document_management_mim">
    </interface>

    <interface
      kind="use"
      schema="Product_structure_mim">
    </interface>

    <interface
      kind="use"
      schema="Configuration_effectivity_mim">
    </interface>

    <interface
      kind="use"
      schema="Configuration_item_mim">
    </interface>

    <interface
      kind="use"
      schema="Product_concept_identification_mim">
    </interface>

    <interface
      kind="use"
      schema="Activity_mim">
    </interface>

    <interface
      kind="use"
      schema="Activity_method_mim">
    </interface>

    <interface
      kind="use"
      schema="Process_property_assignment_mim">
    </interface>

    <interface
      kind="use"
      schema="Work_order_mim">
    </interface>

    <interface
      kind="use"
      schema="Work_request_mim">
    </interface>

    <interface
      kind="use"
      schema="Incomplete_data_reference_mechanism_mim">
    </interface>

    <type name="action_item_203e2">
      <select
        basedon="action_items"
        selectitems="configuration_effectivity product_definition product_definition_formation product_definition_relationship">
      </select>

    </type>
    <type name="action_request_item_203e2">
      <select
        basedon="action_request_item"
        selectitems="product_definition product_definition_formation product_definition_relationship property_definition">
      </select>

    </type>
    <type name="approval_item_203e2">
      <select
        basedon="approval_item"
        selectitems="action applied_action_assignment certification configuration_effectivity contract product_definition product_definition_formation product_definition_relationship versioned_action_request">
      </select>

    </type>
    <type name="attribute_language_item_203e2">
      <select
        basedon="attribute_language_item"
        selectitems="alternate_product_relationship application_context approval_relationship assembly_component_usage_substitute attribute_value_assignment certification configuration_design configuration_item contract date_role date_time_role descriptive_representation_item document_relationship effectivity effectivity_relationship event_occurrence external_source general_property general_property_relationship geometric_representation_item identification_role mapped_item name_assignment organization_relationship organization_role organizational_project organizational_project_relationship person_and_organization_role product product_concept product_concept_relationship product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_related_product_category property_definition representation representation_relationship security_classification shape_aspect shape_aspect_relationship time_interval_role uncertainty_measure_with_unit uncertainty_qualifier">
      </select>

    </type>
    <type name="certification_item_203e2">
      <select
        basedon="certification_item"
        selectitems="product_definition_formation_relationship">
      </select>

    </type>
    <type name="classification_item_203e2">
      <select
        basedon="classification_item"
        selectitems="product_definition document_file">
      </select>

    </type>
    <type name="contract_item_203e2">
      <select
        basedon="contract_item"
        selectitems="action product_definition_formation">
      </select>

    </type>
    <type name="date_and_time_item_203e2">
      <select
        basedon="date_and_time_item"
        selectitems="action applied_action_assignment applied_person_and_organization_assignment applied_organization_assignment approval_person_organization certification contract organizational_project product_definition product_definition_formation security_classification versioned_action_request">
      </select>

    </type>
    <type name="date_item_203e2">
      <select
        basedon="date_item"
        selectitems="action applied_action_assignment applied_person_and_organization_assignment applied_organization_assignment approval_person_organization certification contract organizational_project product_definition product_definition_formation security_classification versioned_action_request">
      </select>

    </type>
    <type name="document_reference_item_203e2">
      <select
        basedon="document_reference_item"
        selectitems="action_method product_definition product_definition_formation_relationship product_definition_relationship shape_aspect shape_aspect_relationship versioned_action_request">
      </select>

    </type>
    <type name="effectivity_item_203e2">
      <select
        basedon="effectivity_item"
        selectitems="product_definition product_definition_formation product_definition_relationship">
      </select>

    </type>
    <type name="event_occurrence_item_203e2">
      <select
        basedon="event_occurrence_item"
        selectitems="organizational_project">
      </select>

    </type>
    <type name="external_identification_item_203e2">
      <select
        basedon="external_identification_item"
        selectitems="document_file product_definition">
      </select>

    </type>
    <type name="identification_item_203e2">
      <select
        basedon="identification_item"
        selectitems="approval_status document_file organization product product_definition product_definition_formation security_classification_level shape_aspect_relationship">
      </select>

    </type>
    <type name="multi_language_attribute_item_203e2">
      <select
        basedon="multi_language_attribute_item"
        selectitems="alternate_product_relationship application_context approval_relationship assembly_component_usage_substitute certification configuration_design configuration_item contract date_role date_time_role descriptive_representation_item document_relationship effectivity effectivity_relationship event_occurrence external_source general_property general_property_relationship geometric_representation_item identification_role mapped_item name_assignment organization_relationship organization_role organizational_project organizational_project_relationship person_and_organization_role product product_concept product_concept_relationship product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_related_product_category property_definition representation representation_relationship security_classification shape_aspect shape_aspect_relationship time_interval_role uncertainty_measure_with_unit uncertainty_qualifier">
      </select>

    </type>
    <type name="organization_item_203e2">
      <select
        basedon="organization_item"
        selectitems="action applied_action_assignment applied_identification_assignment approval configuration_item contract document_file product product_definition product_definition_formation security_classification versioned_action_request">
      </select>

    </type>
    <type name="organizational_project_item_203e2">
      <select
        basedon="project_item"
        selectitems="executed_action product_concept">
      </select>

    </type>
    <type name="person_and_organization_item_203e2">
      <select
        basedon="person_and_organization_item"
        selectitems="action applied_action_assignment configuration_item contract document_file product product_definition product_definition_formation security_classification versioned_action_request">
      </select>

    </type>
    <type name="security_classification_item_203e2">
      <select
        basedon="security_classification_item"
        selectitems="assembly_component_usage document_file product_definition product_definition_formation">
      </select>

    </type>
    <type name="time_interval_item_203e2">
      <select
        basedon="time_interval_item"
        selectitems="time_interval_based_effectivity">
      </select>

    </type>
    <rule
      name="approval_person_organization_requires_date_time"
      appliesto="approval_person_organization">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( apo &lt;* approval_person_organization | (     SIZEOF ( QUERY ( u &lt;* USEDIN ( apo , schema_name + '.APPLIED_DATE_ASSIGNMENT.ITEMS' ) | 	( u.role.name =  'sign off' ) ) ) +    SIZEOF ( QUERY ( u &lt;* USEDIN ( apo , schema_name + '.APPLIED_DATE_AND_TIME_ASSIGNMENT.ITEMS' ) | 	( u.role.name =  'sign off' ) ) ) ) &lt;&gt;1 ) ) =  0">
      </where>

    </rule>

    <rule
      name="approval_requires_approval_assignment"
      appliesto="approval">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( a &lt;* approval | 	SIZEOF(USEDIN( a, schema_name + '.APPROVAL_ASSIGNMENT.ASSIGNED_APPROVAL' )) =  0 )) =  0">
      </where>

    </rule>

    <rule
      name="coordinated_assembly_and_shape"
      appliesto="next_assembly_usage_occurrence">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( nauo &lt;* next_assembly_usage_occurrence| 	NOT ( assembly_shape_is_defined ( nauo ) ) ) ) = 0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_action_directive"
      appliesto="action_directive">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( a &lt;* action_directive | NOT ( SIZEOF (     USEDIN ( a , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_derived_unit"
      appliesto="derived_unit">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( d &lt;* derived_unit | NOT ( SIZEOF ( USEDIN     ( d , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_document_usage_role"
      appliesto="document_usage_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( d &lt;* document_usage_role | NOT ( SIZEOF (     USEDIN ( d , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_measure_with_unit"
      appliesto="measure_with_unit">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( m &lt;* measure_with_unit | NOT ( SIZEOF (     USEDIN ( m , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_named_unit"
      appliesto="named_unit">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( n &lt;* named_unit | NOT ( SIZEOF ( USEDIN (     n , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_precision_qualifier"
      appliesto="precision_qualifier">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( p &lt;* precision_qualifier | NOT ( SIZEOF (     USEDIN ( p , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_product_definition_context_role"
      appliesto="product_definition_context_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( p &lt;* product_definition_context_role |     NOT ( SIZEOF ( USEDIN ( p , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_shape_representation"
      appliesto="shape_representation">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="(SIZEOF(QUERY ( sr &lt;* shape_representation | (NOT (SIZEOF(USEDIN(             sr,'')) &gt;= 1)) )) = 0)">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_standard_uncertainty"
      appliesto="standard_uncertainty">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( s &lt;* standard_uncertainty | NOT ( SIZEOF     ( USEDIN ( s , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_time_interval_role"
      appliesto="time_interval_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( t &lt;* time_interval_role | NOT (     SIZEOF ( USEDIN ( t , '' ) ) &gt;0 ) ) ) =  0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_type_qualifier"
      appliesto="type_qualifier">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( t &lt;* type_qualifier | NOT ( SIZEOF (     USEDIN ( t , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dependent_instantiable_uncertainty_qualifier"
      appliesto="uncertainty_qualifier">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( u &lt;* uncertainty_qualifier | NOT ( SIZEOF     ( USEDIN ( u , '' ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="dimensionality_is_two_or_three"
      appliesto="geometric_representation_context">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( g &lt;* geometric_representation_context |     NOT ((g.coordinate_space_dimension =2 ) OR (g.coordinate_space_dimension =3 )))) =0">
      </where>

    </rule>

    <rule
      name="event_occurrence_requires_event_occurrence_assignment"
      appliesto="event_occurrence">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( eo &lt;* event_occurrence | 	( SIZEOF (USEDIN ( eo, schema_name + '.RELATIVE_EVENT_OCCURRENCE.BASE_EVENT' ) ) =0 ) AND 	( SIZEOF ( USEDIN ( eo ,     schema_name + '.EVENT_OCCURRENCE_ASSIGNMENT.ASSIGNED_EVENT_OCCURRENCE' ) ) =0 )) ) =0">
      </where>

    </rule>

    <rule
      name="executed_action_requires_action_status"
      appliesto="executed_action">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ea &lt;* executed_action | 	SIZEOF ( USEDIN (ea , schema_name + '.ACTION_STATUS.ASSIGNED_ACTION' ) ) &gt;1 ) ) =0">
      </where>

    </rule>

    <rule
      name="geometric_representation_item_3d"
      appliesto="geometric_representation_item">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="(SIZEOF(QUERY ( gri &lt;* geometric_representation_item | 	(NOT ((dimension_of(gri) = 3) OR 	(SIZEOF(bag_to_set(USEDIN(gri,'')) -        bag_to_set(USEDIN(gri,schema_name + '.DEFINITIONAL_REPRESENTATION.ITEMS'))) = 0))) ))       = 0)">
      </where>

    </rule>

    <rule
      name="global_length_and_angle_units_2d_or_3d"
      appliesto="global_unit_assigned_context">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( guac &lt;* global_unit_assigned_context |     SIZEOF ( guac. units ) &lt;2 ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( guac &lt;* global_unit_assigned_context | (     SIZEOF ( QUERY ( x &lt;* guac. units | 	schema_name + '.LENGTH_UNIT' IN TYPEOF ( x ) ) ) &lt;&gt;1 ) OR     ( SIZEOF(QUERY( x &lt;* guac. units | schema_name + '.PLANE_ANGLE_UNIT' IN TYPEOF(x))) &lt;&gt;1 ))) =0">
      </where>

    </rule>

    <rule
      name="person_requires_person_and_organization"
      appliesto="person">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( p &lt;* person | 	SIZEOF ( USEDIN ( p ,schema_name + '.PERSON_AND_ORGANIZATION.THE_PERSON' )) =  0 )) =  0">
      </where>

    </rule>

    <rule
      name="restrict_applied_action_assignment"
      appliesto="applied_action_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( aaa &lt;* applied_action_assignment | 	( aaa.role.description = 'activity element' ) AND NOT (     schema_name + '.EXECUTED_ACTION' IN TYPEOF ( aaa.assigned_action ) ) ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( aaa &lt;* applied_action_assignment | 	( aaa.role.description = 'activity element' ) AND NOT     item_correlation ( aaa. items , ['ACTION' , 'ACTION_METHOD',     'ACTION_PROPERTY' , 'ASSEMBLY_COMPONENT_USAGE_SUBSTITUTE',     'CONFIGURATION_ITEM' , 'CONFIGURATION_EFFECTIVITY' ,     'DOCUMENT_FILE' ,     'GENERAL_PROPERTY' ,      'PRODUCT' , 'PRODUCT_CONCEPT' ,     'PRODUCT_DEFINITION' , 'PRODUCT_DEFINITION_FORMATION' ,     'PRODUCT_DEFINITION_RELATIONSHIP' ,     'PROPERTY_DEFINITION' ,      'SHAPE_ASPECT' ,     'SHAPE_REPRESENTATION'] ) ) ) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF ( QUERY ( aaa &lt;* applied_action_assignment | 	( NOT EXISTS ( aaa.role ) OR 	( aaa.role.description ='activity element' ) ) AND 	( SIZEOF ( QUERY ( i &lt;* aaa.items | schema_name + '.APPLIED_ACTION_ASSIGNMENT'     IN TYPEOF ( i ) ) ) &gt;0 ) ) ) =0">
      </where>
      <where
        label="WR7"
        expression="SIZEOF ( QUERY ( aaa &lt;* applied_action_assignment | 	( aaa.role.name = 'test activity' ) AND 	NOT item_correlation (aaa.items , ['PROPERTY_DEFINITION'] ) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_applied_action_request_assignment"
      appliesto="applied_action_request_assignment object_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( aara &lt;* applied_action_request_assignment| 	aara. role.name&lt;&gt; 'scope' ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_applied_event_occurrence_assignment"
      appliesto="applied_event_occurrence_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( eo &lt;* applied_event_occurrence_assignment| 	( eo\event_occurrence_assignment.role.name ='event context' ) AND 	( SIZEOF ( eo.items ) &gt;1 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_applied_organizational_project_assignment"
      appliesto="applied_organizational_project_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( aopa &lt;* applied_organizational_project_assignment | 	( aopa.role.name = 'affecting project' ) AND 	NOT item_correlation( aopa. items , ['PRODUCT_CONCEPT', 'PRODUCT', 'PRODUCT_DEFINTION', 'PRODUCT_DEFINTION_FORMATION'] ) ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( aopa &lt;* applied_organizational_project_assignment | 	( aopa.role.name = 'work program' ) AND 	NOT item_correlation (aopa.items , ['EXECUTED_ACTION'] ) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_approval"
      appliesto="approval approval_date_time">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( a &lt;* approval | 	SIZEOF ( USEDIN ( a , schema_name + '.APPROVAL_DATE_TIME.DATED_APPROVAL' ) ) &gt;2 ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( adt &lt;* approval_date_time | 	( NOT EXISTS( adt.role ) ) OR 	( NOT ( adt.role.name IN ['actual' , 'planned'] ) ) ) ) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF ( QUERY ( a &lt;* approval | 	SIZEOF ( QUERY ( adt &lt;* USEDIN ( a , schema_name + '.APPROVAL_DATE_TIME.DATED_APPROVAL' ) | 	adt.role.name ='actual' ) ) &gt;1 ) ) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF ( QUERY ( a &lt;* approval | 	SIZEOF ( QUERY ( adt &lt;* USEDIN ( a , schema_name + '.APPROVAL_DATE_TIME.DATED_APPROVAL' ) | 	adt.role.name ='planned' ) ) &gt;1 ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_date_assignment"
      appliesto="applied_date_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF(QUERY(adr &lt;* applied_date_assignment |  (adr.role.name = 'actual end') AND   (NOT  item_correlation (adr.items, ['ORGANIZATIONAL_PROJECT', 'EFFECTIVITY'])) 	))=0">
      </where>

    </rule>

    <rule
      name="restrict_effectivity_for_effectivity_relationship"
      appliesto="effectivity_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( er &lt;* effectivity_relationship | 	( SIZEOF     ( [schema_name + '.LOT_EFFECTIVITY' ,     schema_name + '.SERIAL_NUMBERED_EFFECTIVITY' ,     schema_name + '.PRODUCT_DEFINITION_EFFECTIVITY']*TYPEOF( er.relating_effectivity ) ) &gt;0 ) OR 	( SIZEOF (     [schema_name + '.LOT_EFFECTIVITY' ,     schema_name + '.SERIAL_NUMBERED_EFFECTIVITY' ,     schema_name + '.PRODUCT_DEFINITION_EFFECTIVITY']*TYPEOF( er.related_effectivity ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_external_identification_assignment"
      appliesto="applied_external_identification_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF(QUERY(aeia &lt;* applied_external_identification_assignment |   (aeia.role.name = 'alternative document id and location') AND    (NOT item_correlation (aeia.items, ['DOCUMENT_FILE']))))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_action"
      appliesto="action">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* action | 	NOT allowed_translations (ent, ['description', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_action_directive"
      appliesto="action_directive">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* action_directive | 	NOT allowed_translations (ent, ['comment']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_action_method"
      appliesto="action_method">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* action_method | 	NOT allowed_translations (ent, ['description','name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_alternate_product_relationship"
      appliesto="alternate_product_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* alternate_product_relationship |	NOT allowed_translations (ent, ['basis']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_application_context"
      appliesto="application_context">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* application_context | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_approval_relationship"
      appliesto="approval_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* approval_relationship | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_assembly_component_usage_substitute"
      appliesto="assembly_component_usage_substitute">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* assembly_component_usage_substitute | 	NOT allowed_translations (ent, ['definition']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_certification"
      appliesto="certification">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* certification | 	NOT allowed_translations (ent, ['purpose', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_configuration_design"
      appliesto="configuration_design">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* configuration_design | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_configuration_item"
      appliesto="configuration_item">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* configuration_item | 	NOT allowed_translations (ent, ['name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_contract"
      appliesto="contract">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* contract | 	NOT allowed_translations (ent, ['purpose']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_date_role"
      appliesto="date_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* date_role | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_date_time_role"
      appliesto="date_time_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* date_time_role | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_descriptive_representation_item"
      appliesto="descriptive_representation_item">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* descriptive_representation_item |	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_document_relationship"
      appliesto="document_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* document_relationship | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_effectivity"
      appliesto="effectivity">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* effectivity | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_effectivity_relationship"
      appliesto="effectivity_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* effectivity_relationship | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_event_occurrence"
      appliesto="event_occurrence">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* event_occurrence | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_external_source"
      appliesto="external_source">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* external_source | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_general_property"
      appliesto="general_property">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* general_property | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_general_property_relationship"
      appliesto="general_property_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* general_property_relationship |	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_geometric_representation_item"
      appliesto="geometric_representation_item">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* geometric_representation_item |	NOT allowed_translations (ent, ['name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_group"
      appliesto="group">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* group | 	NOT allowed_translations (ent, ['description', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_identification_role"
      appliesto="identification_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* identification_role | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_mapped_item"
      appliesto="mapped_item">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* mapped_item | 	NOT allowed_translations (ent, ['name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_name_assignment"
      appliesto="name_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* name_assignment | 	NOT allowed_translations (ent, ['assigned_name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_organization_relationship"
      appliesto="organization_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* organization_relationship | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_organization_role"
      appliesto="organization_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* organization_role | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_organizational_project"
      appliesto="organizational_project">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* organizational_project | 	NOT allowed_translations (ent, ['description', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_organizational_project_relationship"
      appliesto="organizational_project_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* organizational_project_relationship | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_person_and_organization_role"
      appliesto="person_and_organization_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* person_and_organization_role |	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_product"
      appliesto="product">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* product | 	NOT allowed_translations (ent, ['description', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_product_concept"
      appliesto="product_concept">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* product_concept | 	NOT allowed_translations (ent, ['description', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_product_definition"
      appliesto="product_definition">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* product_definition | 	NOT allowed_translations (ent, ['description', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_product_definition_formation"
      appliesto="product_definition_formation">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* product_definition_formation |	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_product_definition_formation_relationship"
      appliesto="product_definition_formation_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;*     product_definition_formation_relationship | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_product_definition_relationship"
      appliesto="product_definition_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* product_definition_relationship |	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_product_related_product_category"
      appliesto="product_related_product_category">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* product_related_product_category |	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_property_definition"
      appliesto="property_definition">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* property_definition | 	NOT allowed_translations (ent, ['description', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_property_definition_relationship"
      appliesto="property_definition_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* property_definition_relationship |	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_representation"
      appliesto="representation">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* representation | 	NOT allowed_translations (ent, ['description', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_representation_relationship"
      appliesto="representation_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* representation_relationship |	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_security_classification"
      appliesto="security_classification">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* security_classification | 	NOT allowed_translations (ent, ['purpose', 'name']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_shape_aspect"
      appliesto="shape_aspect">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* shape_aspect | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_shape_aspect_relationship"
      appliesto="shape_aspect_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* shape_aspect_relationship | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_time_interval_role"
      appliesto="time_interval_role">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* time_interval_role | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_uncertainty_measure_with_unit"
      appliesto="uncertainty_measure_with_unit">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* uncertainty_measure_with_unit |	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_multi_language_for_uncertainty_qualifier"
      appliesto="uncertainty_qualifier">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* uncertainty_qualifier | 	NOT allowed_translations (ent, ['description']) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_organization_assignment"
      appliesto="applied_organization_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF(QUERY(aoa &lt;* applied_organization_assignment |  (SELF.role.name = 'organization in contract') AND   (NOT item_correlation (SELF.items, ['CONTRACT'])) 	))= 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(aoa &lt;* applied_organization_assignment |  (SELF.role.name = 'signing for contract') AND   (NOT item_correlation (SELF.items, ['APPLIED_ORGANIZATION_ASSIGNMENT'])) 	))= 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF(QUERY(aoa &lt;* applied_organization_assignment |  (SELF.role.name = 'validity context') AND  (NOT item_correlation (SELF.items, ['PROPERTY_DEFINITION'])) 	))= 0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF(QUERY(aoa &lt;* applied_organization_assignment | (SELF.role.name = 'alias scope') AND   (NOT  item_correlation (SELF.items, ['APPLIED_IDENTIFICATION_ASSIGNMENT']))	))= 0">
      </where>

    </rule>

    <rule
      name="restrict_product_definition_context_for_product"
      appliesto="product_definition">
      <algorithm>
      </algorithm>

      <where
        label="WR7"
        expression="SIZEOF ( QUERY ( pd &lt;* product_definition | 	( pd.frame_of_reference.name IN ['physical document definition',	'digital document definition']) AND 	( SIZEOF ( QUERY ( prpc &lt;* USEDIN ( pd.formation.of_product ,     schema_name + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS' ) | 	prpc.name ='document' ) ) =0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_product_definitions_for_product_definition_relationship"
      appliesto="product_definition_relationship">
      <algorithm>
      </algorithm>

      <where
        label="WR3"
        expression="SIZEOF ( QUERY ( pdr &lt;* product_definition_relationship |     ( schema_name + '.ASSEMBLY_COMPONENT_USAGE' IN TYPEOF ( pdr ) ) AND 	( ( pdr.relating_product_definition.frame_of_reference.name &lt;&gt; 'part definition' ) OR 	( pdr.related_product_definition.frame_of_reference.name &lt;&gt; 'part definition' ) ) AND 	( ( pdr.relating_product_definition.frame_of_reference.name &lt;&gt;'physical occurrence' ) OR 	( pdr.related_product_definition.frame_of_reference.name &lt;&gt;'physical occurrence' ) ) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_properties_of_document_file"
      appliesto="document_file">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( df &lt;* document_file | 	SIZEOF ( QUERY ( pd &lt;* USEDIN ( df ,schema_name + '.PROPERTY_DEFINITION.DEFINITION' )| 	pd.name = 'document property' ) ) &gt;1 ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( df &lt;* document_file | 	SIZEOF ( QUERY ( rt&lt;* df.representation_types | 	( schema_name + '.DOCUMENT_REPRESENTATION_TYPE' IN TYPEOF ( rt ) ) AND 	( rt.name IN ['digital' , 'physical'] ) ) ) =0 ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_properties_of_document_representation"
      appliesto="product_definition">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( pd &lt;* product_definition | 	(pd.frame_of_reference.name IN 	  ['physical document definition', 'digital document definition' ,'physical model occurrence' ] ) AND 	( SIZEOF ( QUERY ( pd1 &lt;* USEDIN ( pd , schema_name + '.PROPERTY_DEFINITION.DEFINITION' )| 	pd1.name = 'document property' ) ) &gt;1 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_representation_for_document_content_property"
      appliesto="representation representation_item">
      <algorithm>
LOCAL
  document_content_representations: SET OF representation := [];
END_LOCAL;
  document_content_representations :=  QUERY( r &lt;* representation |
	(r.name ='document content' ));
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( r &lt;* document_content_representations | 	( ( SIZEOF ( r.items ) &lt;1 ) OR ( SIZEOF ( r.items ) &gt;3 ) ) ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( ri &lt;* representation_item | 	( SIZEOF (QUERY ( r &lt;* USEDIN ( ri , schema_name + '.REPRESENTATION.ITEMS' ) | 	r.name ='document content' ) ) &gt;0 ) AND 	NOT ( ri. name IN ['detail level' , 'geometry type' , 'real world scale' ] ) )) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF ( QUERY ( r &lt;* document_content_representations | 	( SIZEOF ( QUERY ( it &lt;* r.items |( it.name = 'detail level' ) AND 	( schema_name + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF ( it ) ) ) ) &gt;1) ) ) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF ( QUERY ( r &lt;* document_content_representations | 	( SIZEOF ( QUERY ( it &lt;* r.items |     ( it.name = 'geometry type' ) AND 	( schema_name + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF ( it ) ) ) ) &gt;1 ) ) ) =0">
      </where>
      <where
        label="WR5"
        expression="SIZEOF ( QUERY ( r &lt;* document_content_representations | 	( SIZEOF ( QUERY ( it &lt;* r.items |( it.name = 'real world scale' ) AND 	( SIZEOF (     [schema_name + '.MEASURE_REPRESENTATION_ITEM' ,     schema_name + '.VALUE_REPRESENTATION_ITEM']* TYPEOF( it ) ) =1 ) ) ) &gt;1 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_representation_for_document_creation_property"
      appliesto="representation representation_item">
      <algorithm>
LOCAL
  document_creation_representations: SET OF representation := [];
END_LOCAL;
  document_creation_representations :=  QUERY( r &lt;* representation |
	(r.name ='document creation' ));
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( r &lt;* document_creation_representations | 	( ( SIZEOF ( r.items ) &lt;1 ) OR (SIZEOF ( r.items ) &gt;3 ) ) ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( ri &lt;* representation_item | 	( SIZEOF (QUERY ( r &lt;* USEDIN ( ri ,schema_name + '.REPRESENTATION.ITEMS' ) | 	r.name ='document creation' ) ) &gt;0 ) AND 	NOT ( ri. name IN [ 'creating interface' , 'creating system' ,'operating system' ] ) ) ) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF ( QUERY ( r &lt;* document_creation_representations | 	( SIZEOF ( QUERY ( i &lt;* r.items |     ( i.name = 'creating interface' ) AND (     schema_name + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF ( i )))) &gt;1 ) ) ) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF ( QUERY ( r &lt;* document_creation_representations | 	( SIZEOF ( QUERY ( i &lt;* r.items |     ( i.name = 'creating system' ) AND 	( schema_name + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF ( i )))) &lt;&gt;1 ) ) ) =0">
      </where>
      <where
        label="WR5"
        expression="SIZEOF ( QUERY ( r &lt;* document_creation_representations | 	( SIZEOF ( QUERY ( i &lt;* r.items |     ( i.name = 'operating system' ) AND 	( schema_name + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF ( i )))) &gt;1) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_representation_for_document_format_property"
      appliesto="representation representation_item">
      <algorithm>
LOCAL
  document_format_representations: SET OF representation := [];
END_LOCAL;
  document_format_representations :=  QUERY( r &lt;* representation |
	(r.name ='document format' ));
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( r &lt;* document_format_representations | 	( ( SIZEOF ( r.items ) &lt;1 ) OR (SIZEOF ( r.items ) &gt;3 ) ) ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( ri &lt;* representation_item | 	( SIZEOF (QUERY ( r &lt;* USEDIN ( ri ,schema_name + '.REPRESENTATION.ITEMS' ) | 	r.name ='document format' ) ) &gt;0 ) AND 	NOT ( ri. name IN ['character code' , 'data format' ] ) ) ) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF ( QUERY ( r &lt;* document_format_representations | 	( SIZEOF ( QUERY ( i &lt;* r.items | (i.name = 'character code' ) AND 	( schema_name + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF ( i ) ) ) ) &gt;1) ) ) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF ( QUERY ( r &lt;* document_format_representations | 	( SIZEOF ( QUERY ( i &lt;* r.items | (i.name = 'data format' ) AND 	( schema_name + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF ( i ) ) ) ) &gt;1) ) ) =0">
      </where>
      <where
        label="WR5"
        expression="SIZEOF ( QUERY ( r &lt;* document_format_representations | 	( SIZEOF ( QUERY ( i &lt;* r.items| ( i.name =  'size format' ) AND 	( schema_name + '.PLANAR_EXTENT' IN TYPEOF ( i ) ) ) ) &gt;1 ) ) ) =  0">
      </where>

    </rule>

    <rule
      name="restrict_representation_for_document_properties"
      appliesto="property_definition representation representation_context">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( pd &lt;* property_definition | 	( pd. name ='document property' ) AND 	( SIZEOF ( QUERY ( pdr &lt;* USEDIN( pd ,     schema_name + '.PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') | 	NOT ( pdr.used_representation.name IN ['document content' , 'document creation' ,     'document format' , 'document size' ] ) ) ) &gt;0 ) ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( r &lt;* representation | 	( r.name IN [ 'document content' , 'document creation' , 'document format' , 'document size' ] ) AND 	( SIZEOF (QUERY ( pdr &lt;* USEDIN ( r ,     schema_name + '.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | 	( schema_name + '.PROPERTY_DEFINITION' IN TYPEOF( pdr. definition ) ) AND 	( pdr. definition.name = 'document property' ) ) ) =0 ) ) ) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF ( QUERY ( r &lt;* representation | 	( r.name IN ['document content' , 'document creation' , 'document format' , 'document size' ] ) AND 	(r.context_of_items.context_type&lt;&gt; 'document parameters' )) ) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF ( QUERY ( rc &lt;* representation_context | 	( rc.context_type = 'document parameters' ) AND 	( SIZEOF ( QUERY( r &lt;* USEDIN ( rc ,schema_name + '.REPRESENTATION.CONTEXT_OF_ITEMS' ) | 	NOT( r.name IN [ 'document content' , 'document creation' ,     'document format' , 'document size' ] ) ) ) &gt;0 ) ) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_representation_for_document_size_property"
      appliesto="representation representation_item">
      <algorithm>
LOCAL
  document_size_representations: SET OF representation := [];
END_LOCAL;
  document_size_representations :=  QUERY( r &lt;* representation |
	(r.name ='document size'));
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( r &lt;* document_size_representations | 	( ( SIZEOF ( r.items ) &lt;1 ) OR (SIZEOF ( r.items ) &gt;2 ) ) ) ) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF ( QUERY ( ri &lt;* representation_item | ( SIZEOF (     QUERY ( r &lt;* USEDIN ( ri ,schema_name + '.REPRESENTATION.ITEMS' ) | 	r.name ='document size' ) ) &gt;0 ) AND 	NOT ( ri. name IN ['file size' , 'page count' ] ) ) ) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF ( QUERY ( r &lt;* document_size_representations| 	( SIZEOF ( QUERY ( i &lt;* r.items | (i.name = 'file size' ) AND 	( SIZEOF (	[schema_name + '.MEASURE_REPRESENTATION_ITEM' ,	schema_name + '.VALUE_RANGE' , 	schema_name + '.VALUE_REPRESENTATION_ITEM']* TYPEOF ( i ) ) =1 ) ) ) &gt;1 ) ) ) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF ( QUERY ( r &lt;* document_size_representations | 	( SIZEOF ( QUERY ( i &lt;* r.items | ( i.name = 'page count' ) AND 	( SIZEOF ( 	[schema_name + '.MEASURE_REPRESENTATION_ITEM' ,	schema_name + '.VALUE_RANGE' , 	schema_name + '.VALUE_REPRESENTATION_ITEM']* TYPEOF ( i ) ) =1 ) ) ) &gt;1 )) ) =0">
      </where>

    </rule>

    <rule
      name="restrict_version_assignment_for_applied_identification_assignment"
      appliesto="applied_identification_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* applied_identification_assignment| 	NOT at_most_one_version_id (ent) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_version_assignment_for_configuration_item"
      appliesto="configuration_item">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* configuration_item | 	NOT at_most_one_version_id (ent) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_version_assignment_for_document_file"
      appliesto="document_file">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* document_file | 	NOT at_most_one_version_id (ent) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_version_assignment_for_effectivity"
      appliesto="effectivity">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* effectivity | 	NOT at_most_one_version_id (ent) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_version_assignment_for_general_property"
      appliesto="general_property">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* general_property | 	NOT at_most_one_version_id (ent) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_version_assignment_for_product_concept"
      appliesto="product_concept">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* product_concept | 	NOT at_most_one_version_id (ent) ))=0">
      </where>

    </rule>

    <rule
      name="restrict_version_assignment_for_shape_representation"
      appliesto="shape_representation">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ent &lt;* shape_representation | 	NOT at_most_one_version_id (ent) ))=0">
      </where>

    </rule>

    <rule
      name="security_classification_requires_security_classification_assignment"
      appliesto="security_classification">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( sc &lt;* security_classification | 	SIZEOF (USEDIN ( sc ,     schema_name + '.SECURITY_CLASSIFICATION_ASSIGNMENT.ASSIGNED_SECURITY_CLASSIFICATION' ) ) =0 ) ) =0">
      </where>

    </rule>

    <rule
      name="subtype_exclusiveness_classification_assignment"
      appliesto="classification_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ca &lt;* classification_assignment | NOT (     type_check_function ( ca , 	[schema_name + '.APPLIED_CLASSIFICATION_ASSIGNMENT' , 	schema_name + '.LANGUAGE_ASSIGNMENT'] , 3 ) ) ) ) =0">
      </where>

    </rule>

    <rule
      name="subtype_exclusiveness_effectivity"
      appliesto="effectivity">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( e &lt;* effectivity | NOT (     type_check_function ( e , 	[schema_name + '.PRODUCT_DEFINITION_EFFECTIVITY' , 	schema_name + '.TIME_INTERVAL_BASED_EFFECTIVITY'] , 3 ) ) ) ) =0">
      </where>

    </rule>

    <rule
      name="subtype_exclusiveness_identification_assignment"
      appliesto="identification_assignment">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ia &lt;* identification_assignment | NOT (     type_check_function ( ia , 	[schema_name + '.APPLIED_IDENTIFICATION_ASSIGNMENT' , 	schema_name + '.EXTERNAL_IDENTIFICATION_ASSIGNMENT'] , 3 ) ) ) ) =0">
      </where>

    </rule>

    <rule
      name="subtype_exclusiveness_property_definition"
      appliesto="property_definition">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( pd &lt;* property_definition | NOT (     type_check_function ( pd , 	[schema_name + '.MATERIAL_PROPERTY' , 	schema_name + '.PRODUCT_DEFINITION_SHAPE'] , 3 ) ) ) ) =0">
      </where>

    </rule>

    <rule
      name="subtype_exclusiveness_property_definition_representation"
      appliesto="property_definition_representation">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( pdr &lt;* property_definition_representation| 	NOT ( type_check_function ( pdr , 	[schema_name + '.MATERIAL_PROPERTY_REPRESENTATION' ,     schema_name + '.SHAPE_DEFINITION_REPRESENTATION'] ,3 ) ) ) ) =0">
      </where>

    </rule>

    <rule
      name="subtype_exclusiveness_representation"
      appliesto="representation">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF(QUERY (r &lt;* representation |  NOT (type_check_function(r, [schema_name + '.CONSTRUCTIVE_GEOMETRY_REPRESENTATION',  schema_name + '.DEFINITIONAL_REPRESENTATION',  schema_name + '.DIRECTION_SHAPE_REPRESENTATION',  schema_name + '.SHAPE_REPRESENTATION',  schema_name + '.TEXT_STRING_REPRESENTATION' ] , 3 ) ))) = 0">
      </where>

    </rule>

    <rule
      name="subtype_exclusiveness_representation_item"
      appliesto="representation_item">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ri &lt;* representation_item | NOT (     type_check_function ( ri , 	[schema_name + '.COMPOUND_REPRESENTATION_ITEM' , 	schema_name + '.MEASURE_REPRESENTATION_ITEM' , 	schema_name + '.REP_ITEM_GROUP' , 	schema_name + '.VALUE_REPRESENTATION_ITEM'] , 3 ) ) ) ) =0">
      </where>

    </rule>

    <rule
      name="subtype_mandatory_address"
      appliesto="address">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( a &lt;* address | NOT ( type_check_function( a , 	[schema_name + '.ORGANIZATIONAL_ADDRESS' ,     schema_name + '.PERSONAL_ADDRESS'] , 0 ) ) ) ) =0">
      </where>

    </rule>

    <rule
      name="subtype_mandatory_document_product_association"
      appliesto="document_product_association">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( dpa &lt;* document_product_association | NOT     ( type_check_function ( dpa , 	[schema_name + '.DOCUMENT_PRODUCT_EQUIVALENCE'] , 0 ) ) ) ) =0">
      </where>

    </rule>

    <rule
      name="versioned_action_request_requires_status"
      appliesto="versioned_action_request">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( ar &lt;* versioned_action_request | NOT (     SIZEOF ( QUERY ( ars &lt;* action_request_status | ar:=:ars.assigned_request )) =1 ))) 	=0">
      </where>

    </rule>

    <function
      name="at_most_one_version_id">
      <parameter
        name="ent">
        <builtintype
          type="GENERIC_ENTITY"/>
      </parameter>
      <builtintype
        type="LOGICAL"/>
      <algorithm>
RETURN(
  SIZEOF ( QUERY ( ia &lt;* USEDIN ( ent , schema_name + '.APPLIED_IDENTIFICATION_ASSIGNMENT.ITEMS' ) | 
	ia.role.name ='version' ) ) &lt;=1 );
      </algorithm>

    </function>

    <function
      name="item_correlation">
      <parameter
        name="items">
        <aggregate
          type="SET"/>
        <builtintype
          type="GENERIC_ENTITY"/>
      </parameter>
      <parameter
        name="c_items">
        <aggregate
          type="SET"/>
        <builtintype
          type="STRING"/>
      </parameter>
      <builtintype
        type="LOGICAL"/>
      <algorithm>
LOCAL
  c_types   : SET OF STRING := [];
  c_hit     : INTEGER := 0;
END_LOCAL;
 
REPEAT i:=1 TO HIINDEX(c_items);
  c_types := c_types + [schema_name + '.' + c_items[i]];
END_REPEAT;

REPEAT i:=1 TO HIINDEX(items);
  IF (SIZEOF(c_types * TYPEOF(items[i])) = 1) THEN
    c_hit := c_hit + 1;
  END_IF;
END_REPEAT;

RETURN (SIZEOF(items) = c_hit);
      </algorithm>

    </function>

    <function
      name="allowed_translations">
      <parameter
        name="ent">
        <builtintype
          type="GENERIC_ENTITY"/>
      </parameter>
      <parameter
        name="translatable_attributes">
        <aggregate
          type="SET"/>
        <builtintype
          type="STRING"/>
      </parameter>
      <builtintype
        type="LOGICAL"/>
      <algorithm>
LOCAL
  mlaa: SET OF multi_language_attribute_assignment;
  ala: SET OF attribute_language_assignment;
END_LOCAL;

IF (SIZEOF(translatable_attributes)=0) THEN
  RETURN(UNKNOWN);
END_IF;

mlaa:= USEDIN ( ent , schema_name + '.MULTI_LANGUAGE_ATTRIBUTE_ASSIGNMENT.ITEMS' );

REPEAT i:=1 TO HIINDEX(mlaa);
  IF NOT (mlaa[i].attribute_name IN translatable_attributes) THEN
	RETURN(FALSE);
  END_IF;
END_REPEAT;

ala:= USEDIN ( ent , schema_name + '.ATTRIBUTE_LANGUAGE_ASSIGNMENT.ITEMS' );

REPEAT i:=1 TO HIINDEX(ala);
  IF NOT (ala[i].attribute_name IN translatable_attributes) THEN
	RETURN(FALSE);
  END_IF;
END_REPEAT;

RETURN(TRUE);
      </algorithm>

    </function>

    <function
      name="value_range_aggregate_rep_item">
      <parameter
        name="agg">
        <aggregate
          type="AGGREGATE"/>
        <typename
          name="representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
  FUNCTION cri (agg : AGGREGATE OF representation_item) : BOOLEAN; 
  BEGIN 
  IF (SIZEOF(agg) = 3) AND 
	(SIZEOF(QUERY(i1 &lt;* agg | (schema_name + '.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i1)) )) = 3) THEN 
	  RETURN (TRUE); 
   ELSE 
	RETURN (FALSE); 
   END_IF; 
   END; 
      </algorithm>

    </function>

  </schema>

</express>
