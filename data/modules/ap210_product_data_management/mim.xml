<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="2005-03-30T15:55:27" rcs.revision="1.0" description.file="mim_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="ap210_product_data_management_mim schema_instance"/>
   <schema name="AP210_PRODUCT_DATA_MANAGEMENT_MIM">
      <interface kind="use" schema="ALIAS_IDENTIFICATION_MIM"/>
      <interface kind="use" schema="APPROVAL_MIM"/>
      <interface kind="use" schema="CERTIFICATION_MIM"/>
      <interface kind="use" schema="CLASS_MIM"/>
      <interface kind="use" schema="CLASSIFICATION_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="CONFIGURATION_EFFECTIVITY_MIM"/>
      <interface kind="use" schema="CLASSIFICATION_WITH_ATTRIBUTES_MIM"/>
      <interface kind="use" schema="CONTRACT_MIM"/>
      <interface kind="use" schema="DATE_TIME_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="DOCUMENT_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="DOCUMENT_STRUCTURE_MIM"/>
      <interface kind="use" schema="EFFECTIVITY_APPLICATION_MIM"/>
      <interface kind="use" schema="EVENT_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="EXTERNAL_CLASS_MIM"/>
      <interface kind="use" schema="EXTERNAL_ITEM_IDENTIFICATION_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="FILE_IDENTIFICATION_MIM"/>
      <interface kind="use" schema="INDEPENDENT_PROPERTY_REPRESENTATION_MIM"/>
      <interface kind="use" schema="MULTI_LINGUISM_MIM"/>
      <interface kind="use" schema="GENERIC_MATERIAL_ASPECTS_MIM"/>
      <interface kind="use" schema="GROUP_MIM"/>
      <interface kind="use" schema="PERSON_ORGANIZATION_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="PROCESS_PROPERTY_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="PRODUCT_IDENTIFICATION_MIM"/>
      <interface kind="use" schema="PART_OCCURRENCE_MIM"/>
      <interface kind="use" schema="PLIB_CLASS_REFERENCE_MIM"/>
      <interface kind="use" schema="PRE_DEFINED_PRODUCT_DATA_MANAGEMENT_SPECIALISATIONS_MIM"/>
      <interface kind="use" schema="PRODUCT_REPLACEMENT_MIM"/>
      <interface kind="use" schema="PRODUCT_VIEW_DEFINITION_MIM"/>
      <interface kind="use" schema="PROJECT_MIM"/>
      <interface kind="use" schema="PROPERTY_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="REQUIREMENT_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="REQUIREMENT_VIEW_DEFINITION_RELATIONSHIP_MIM"/>
      <interface kind="use" schema="SECURITY_CLASSIFICATION_MIM"/>
      <interface kind="use" schema="SHAPE_PROPERTY_ASSIGNMENT_MIM"/>
      <interface kind="use" schema="WORK_ORDER_MIM"/>
      <interface kind="use" schema="TEST_SELECT_PRODUCT_MIM"/>
      <interface kind="use" schema="PROMISSORY_USAGE_IN_PRODUCT_CONCEPT_MIM"/>
      <interface kind="use" schema="CONTRACT_SCHEMA">
         <interfaced.item name="contract_type"/>
      </interface>
      <interface kind="use" schema="DOCUMENT_SCHEMA">
         <interfaced.item name="document_type"/>
      </interface>
      <interface kind="use" schema="PRODUCT_DEFINITION_SCHEMA">
         <interfaced.item name="product_definition_formation_with_specified_source"/>
      </interface>
      <interface kind="use" schema="PRODUCT_STRUCTURE_SCHEMA">
         <interfaced.item name="make_from_usage_option"/>
      </interface>
      <interface kind="use" schema="REPRESENTATION_SCHEMA">
         <interfaced.item name="parametric_representation_context"/>
      </interface>
      <type name="pdm_action_items">
         <select extensible="YES" genericentity="YES" basedon="action_items" selectitems="configuration_effectivity product_definition product_definition_formation product_definition_relationship"/>
      </type>
      <type name="pdm_action_request_item">
         <select extensible="YES" genericentity="YES" basedon="action_request_item" selectitems="property_definition product_definition_formation product_definition product_definition_relationship versioned_action_request"/>
      </type>
      <type name="pdm_approval_item">
         <select extensible="YES" genericentity="YES" basedon="approval_item" selectitems="action action_directive certification configuration_effectivity configuration_item contract date directed_action document effectivity general_property_relationship product product_definition product_definition_formation_relationship product_definition_relationship product_definition_formation representation requirement_assignment security_classification shape_aspect_relationship versioned_action_request"/>
      </type>
      <type name="pdm_attribute_language_item">
         <select extensible="YES" genericentity="YES" basedon="attribute_language_item" selectitems="applied_document_reference applied_document_usage_constraint_assignment applied_external_identification_assignment approval approval_relationship approval_status certification contract document_relationship organizational_project organizational_project_relationship organization_relationship person_and_organization product product_category product_definition product_definition_formation"/>
      </type>
      <type name="pdm_certification_item">
         <select extensible="YES" genericentity="YES" basedon="certification_item" selectitems="alternate_product_relationship product_definition_formation product_definition_formation_relationship make_from_usage_option"/>
      </type>
      <type name="pdm_classification_item">
         <select extensible="YES" genericentity="YES" basedon="classification_item" selectitems="action_directive action_method action_property action_relationship action_request_solution action_request_status alternate_product_relationship applied_action_assignment applied_action_request_assignment applied_approval_assignment applied_contract_assignment applied_document_reference applied_document_usage_constraint_assignment applied_event_occurrence_assignment applied_external_identification_assignment applied_identification_assignment applied_organization_assignment applied_organizational_project_assignment applied_person_and_organization_assignment applied_security_classification_assignment approval approval_person_organization approval_relationship approval_status assembly_component_usage_substitute calendar_date certification class configuration_item context_dependent_unit contract conversion_based_unit date_and_time date_and_time_assignment date_assignment derived_unit descriptive_representation_item directed_action document_file document_relationship effectivity event_occurrence executed_action general_property general_property_relationship language material_designation measure_representation_item measure_with_unit multi_language_attribute_assignment organization organizational_project organizational_project_relationship organization_relationship person person_and_organization_address product product_category product_concept product_definition property_definition product_definition_context product_definition_formation product_definition_formation_relationship product_definition_relationship property_definition_representation representation representation_context representation_item security_classification versioned_action_request"/>
      </type>
      <type name="pdm_contract_item">
         <select extensible="YES" genericentity="YES" basedon="contract_item" selectitems="action_directive alternate_product_relationship directed_action person_and_organization product product_definition_formation"/>
      </type>
      <type name="pdm_date_and_time_item">
         <select extensible="YES" genericentity="YES" basedon="date_and_time_item" selectitems="action_directive applied_action_assignment approval_person_organization certification contract directed_action document executed_action product_definition security_classification versioned_action_request"/>
      </type>
      <type name="pdm_date_item">
         <select extensible="YES" genericentity="YES" basedon="date_item" selectitems="action_directive applied_action_assignment product_definition versioned_action_request directed_action approval_person_organization contract document executed_action security_classification certification"/>
      </type>
      <type name="pdm_document_reference_item">
         <select extensible="YES" genericentity="YES" basedon="document_reference_item" selectitems="action_method applied_external_identification_assignment assembly_component_usage characterized_object configuration_item descriptive_representation_item executed_action externally_defined_item material_designation measure_representation_item product product_category product_definition product_definition_formation product_definition_formation_relationship property_definition representation representation_item shape_aspect shape_aspect_relationship versioned_action_request"/>
      </type>
      <type name="pdm_effectivity_item">
         <select extensible="YES" genericentity="YES" basedon="effectivity_item" selectitems="product_definition product_definition_formation product_definition_relationship"/>
      </type>
      <type name="pdm_event_occurrence_item">
         <select extensible="YES" genericentity="YES" basedon="event_occurrence_item" selectitems="organizational_project"/>
      </type>
      <type name="pdm_groupable_item">
         <select extensible="YES" genericentity="YES" basedon="groupable_item" selectitems="product_definition product_definition_formation property_definition_representation representation representation_item shape_aspect shape_aspect_relationship"/>
      </type>
      <type name="pdm_identification_item">
         <select extensible="YES" genericentity="YES" basedon="identification_item" selectitems="characterized_class configuration_item material_designation person_and_organization product product_category product_concept product_definition_formation organization shape_aspect_relationship"/>
      </type>
      <type name="pdm_multi_language_attribute_item">
         <select extensible="YES" genericentity="YES" basedon="multi_language_attribute_item" selectitems="applied_document_reference applied_document_usage_constraint_assignment applied_external_identification_assignment approval approval_relationship approval_status certification contract document_relationship organizational_project organizational_project_relationship organization_relationship person_and_organization product product_category product_definition product_definition_formation"/>
      </type>
      <type name="pdm_name_item">
         <select extensible="YES" genericentity="YES" basedon="name_item" selectitems="external_class_library product product_definition"/>
      </type>
      <type name="pdm_organization_item">
         <select extensible="YES" genericentity="YES" basedon="organization_item" selectitems="action_directive applied_action_assignment applied_identification_assignment approval certification configuration_item contract directed_action document versioned_action_request product product_definition product_definition_formation product_definition_formation_relationship representation security_classification"/>
      </type>
      <type name="pdm_person_and_organization_item">
         <select extensible="YES" genericentity="YES" basedon="person_and_organization_item" selectitems="action_directive applied_action_assignment applied_identification_assignment approval certification configuration_item contract document product product_definition_formation product_definition_formation_relationship product_definition directed_action security_classification versioned_action_request"/>
      </type>
      <type name="pdm_project_item">
         <select extensible="YES" genericentity="YES" basedon="project_item" selectitems="executed_action product_concept"/>
      </type>
      <type name="pdm_requirement_assigned_item">
         <select extensible="YES" genericentity="YES" basedon="requirement_assigned_item" selectitems="descriptive_representation_item configuration_item product_definition product_definition_formation product shape_aspect representation"/>
      </type>
      <type name="pdm_security_classification_item">
         <select extensible="YES" genericentity="YES" basedon="security_classification_item" selectitems="assembly_component_usage document make_from_usage_option product_definition_formation product_definition"/>
      </type>
      <type name="promissory_usage_in_product_model_assigned_item">
         <select selectitems="product_concept product_definition"/>
      </type>
      <rule name="approval_requires_approval_date_time" appliesto="approval approval_date_time">
         <where label="wr1" expression=" sizeof ( query ( app &lt;* approval | not ( sizeof ( query ( adt &lt;* approval_date_time | app :=: adt . dated_approval ) ) = 1 ) ) ) = 0 "/>
      </rule>
      <rule name="approval_requires_approval_person_organization" appliesto="approval approval_person_organization">
         <where label="wr1" expression=" sizeof ( query ( app &lt;* approval | not ( sizeof ( query ( apo &lt;* approval_person_organization | app :=: apo . authorized_approval ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="approval_role_constraint" appliesto="approval_role">
         <where label="wr1" expression=" sizeof ( query ( apr &lt;* approval_role | not ( apr \ approval_role . role = 'authorizer' ) ) ) = 0 "/>
      </rule>
      <rule name="approvals_are_assigned" appliesto="approval approval_assignment">
         <where label="wr1" expression=" sizeof ( query ( app &lt;* approval | not ( sizeof ( query ( aa &lt;* approval_assignment | app :=: aa . assigned_approval ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="certification_requires_date_or_date_and_time" appliesto="certification applied_date_and_time_assignment applied_date_assignment">
         <where label="wr1" expression=" sizeof ( query ( cert &lt;* certification | not ( ( sizeof ( query ( adata &lt;* applied_date_and_time_assignment | cert in adata . items ) ) = 1 ) or ( sizeof ( query ( ada &lt;* applied_date_assignment | cert in ada . items ) ) = 1 ) ) ) ) = 0 "/>
      </rule>
      <rule name="certification_unique_constraint" appliesto="certification">
         <algorithm> local r : bag of certification := query ( r &lt;* certification | true ) ; pass : boolean := true ; name_bag : bag of string := [ ] ; end_local ; repeat i := 1 to sizeof ( r ) by 1 ; if exists ( r [ i ] \ certification . name ) then if ( r [ i ] \ certification . name in name_bag ) then pass := false ; escape ; else name_bag := name_bag + r [ i ] \ certification . name ; end_if ; end_if ; end_repeat ; </algorithm>
         <where label="wr1" expression=" pass "/>
      </rule>
      <rule name="configuration_item_requires_person_organization" appliesto="configuration_item applied_person_and_organization_assignment applied_organization_assignment">
         <where label="wr1" expression=" sizeof ( query ( ci &lt;* configuration_item | not ( ( sizeof ( query ( apaoa &lt;* applied_person_and_organization_assignment | ci in apaoa . items ) ) = 1 ) or ( sizeof ( query ( aoa &lt;* applied_organization_assignment | ci in aoa . items ) ) = 1 ) ) ) ) = 0 "/>
      </rule>
      <rule name="contract_unique_constraint" appliesto="contract">
         <algorithm> local r : bag of contract := query ( r &lt;* contract | true ) ; pass : boolean := true ; name_bag : bag of string := [ ] ; end_local ; repeat i := 1 to sizeof ( r ) by 1 ; if exists ( r [ i ] \ contract . name ) then if ( r [ i ] \ contract . name in name_bag ) then pass := false ; escape ; else name_bag := name_bag + r [ i ] \ contract . name ; end_if ; end_if ; end_repeat ; </algorithm>
         <where label="wr1" expression=" pass "/>
      </rule>
      <rule name="date_and_time_require_minute_and_second" appliesto="date_and_time">
         <where label="wr1" expression=" sizeof ( query ( dat &lt;* date_and_time | not ( exists ( dat . time_component . minute_component ) ) ) ) = 0 "/>
         <where label="wr2" expression=" sizeof ( query ( dat &lt;* date_and_time | not ( exists ( dat . time_component . second_component ) ) ) ) = 0 "/>
      </rule>
      <rule name="date_constraint" appliesto="date">
         <where label="wr1" expression=" sizeof ( query ( d &lt;* date | d . year_component &lt; 1856 ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_action_directive" appliesto="action_directive">
         <where label="wr1" expression=" sizeof ( query ( ad &lt;* action_directive | not ( sizeof ( usedin ( ad , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_approval_status" appliesto="approval_status">
         <where label="wr1" expression=" sizeof ( query ( ast &lt;* approval_status | not ( sizeof ( usedin ( ast , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_certification_type" appliesto="certification_type">
         <where label="wr1" expression=" sizeof ( query ( ct &lt;* certification_type | not ( sizeof ( usedin ( ct , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_contract_type" appliesto="contract_type">
         <where label="wr1" expression=" sizeof ( query ( ct &lt;* contract_type | not ( sizeof ( usedin ( ct , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_date" appliesto="date">
         <where label="wr1" expression=" sizeof ( query ( dt &lt;* date | not ( sizeof ( usedin ( dt , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_date_role" appliesto="date_role">
         <where label="wr1" expression=" sizeof ( query ( dr &lt;* date_role | not ( sizeof ( usedin ( dr , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_date_time_role" appliesto="date_time_role">
         <where label="wr1" expression=" sizeof ( query ( dtr &lt;* date_time_role | not ( sizeof ( usedin ( dtr , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_document_type" appliesto="document_type">
         <where label="wr1" expression=" sizeof ( query ( dt &lt;* document_type | not ( sizeof ( usedin ( dt , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_named_unit" appliesto="named_unit">
         <where label="wr1" expression=" sizeof ( query ( nu &lt;* named_unit | not ( sizeof ( usedin ( nu , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_organization_role" appliesto="organization_role">
         <where label="wr1" expression=" sizeof ( query ( org &lt;* organization_role | not ( sizeof ( usedin ( org , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_parametric_representation_context" appliesto="parametric_representation_context">
         <where label="wr1" expression=" sizeof ( query ( prc &lt;* parametric_representation_context | not ( sizeof ( usedin ( prc , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_person_and_organization_role" appliesto="person_and_organization_role">
         <where label="wr1" expression=" sizeof ( query ( poar &lt;* person_and_organization_role | not ( sizeof ( usedin ( poar , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_representation_item" appliesto="representation_item">
         <where label="wr1" expression=" sizeof ( query ( ri &lt;* representation_item | not ( sizeof ( usedin ( ri , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_security_classification_level" appliesto="security_classification_level">
         <where label="wr1" expression=" sizeof ( query ( scl &lt;* security_classification_level | not ( sizeof ( usedin ( scl , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="dependent_instantiable_shape_representation" appliesto="shape_representation">
         <where label="wr1" expression=" sizeof ( query ( sr &lt;* shape_representation | not ( sizeof ( usedin ( sr , '' ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="directed_action_requires_approval" appliesto="directed_action applied_approval_assignment">
         <where label="wr1" expression=" sizeof ( query ( da &lt;* directed_action | not ( sizeof ( query ( aaa &lt;* applied_approval_assignment | da in aaa . items ) ) = 1 ) ) ) = 0 "/>
      </rule>
      <rule name="directed_action_requires_date_or_date_and_time" appliesto="directed_action applied_date_and_time_assignment applied_date_assignment">
         <where label="wr1" expression=" sizeof ( query ( da &lt;* directed_action | not ( ( sizeof ( query ( adata &lt;* applied_date_and_time_assignment | ( da in adata . items ) and ( adata . role \ date_time_role . name = 'start date' ) ) ) = 1 ) or ( sizeof ( query ( ada &lt;* applied_date_assignment | ( da in ada . items ) and ( ada . role \ date_role . name = 'start date' ) ) ) = 1 ) ) ) ) = 0 "/>
      </rule>
      <rule name="ee_product_configuration_unique_constraint" appliesto="configuration_item">
         <algorithm> local id_bag : bag of string := [ ] ; ci_bag : bag of configuration_item ; cd_bag : bag of configuration_design ; pass : boolean := true ; pdf_bag : bag of product_definition_formation ; end_local ; repeat i := 1 to sizeof ( configuration_item ) by 1 ; if exists ( configuration_item [ i ] . id ) then if ( not ( configuration_item [ i ] . id in id_bag ) ) then id_bag := id_bag + configuration_item [ i ] . id ; end_if ; end_if ; end_repeat ; repeat i := 1 to sizeof ( id_bag ) by 1 ; if ( not pass ) then escape ; end_if ; pdf_bag := [ ] ; ci_bag := query ( ci &lt;* configuration_item | ( ci . id = id_bag [ i ] ) ) ; repeat j := 1 to sizeof ( ci_bag ) by 1 ; if ( not pass ) then escape ; end_if ; cd_bag := usedin ( ci_bag [ j ] , 'ap210_product_data_management_mim.' + 'configuration_design.configuration' ) ; repeat k := 1 to sizeof ( cd_bag ) by 1 ; if exists ( cd_bag [ k ] . design ) then if ( cd_bag [ k ] . design in pdf_bag ) then pass := false ; escape ; else pdf_bag := pdf_bag + cd_bag [ k ] . design ; end_if ; end_if ; end_repeat ; end_repeat ; end_repeat ; </algorithm>
         <where label="wr1" expression=" pass "/>
      </rule>
      <rule name="ee_product_constraint" appliesto="product">
         <where label="wr1" expression=" sizeof ( query ( prod &lt;* product | not ( ( sizeof ( query ( aoa &lt;* usedin ( prod , 'ap210_product_data_management_mim.' + 'applied_organization_assignment.items' ) | ( aoa . role \ organization_role . name = 'design owner' ) ) ) = 1 ) or ( sizeof ( query ( apaoa &lt;* usedin ( prod , 'ap210_product_data_management_mim.' + 'applied_person_and_organization_assignment.items' ) | ( apaoa . role \ person_and_organization_role . name = 'design owner' ) ) ) = 1 ) ) ) ) = 0 "/>
         <where label="wr2" expression=" sizeof ( query ( p &lt;* product | sizeof ( usedin ( p , 'ap210_product_data_management_mim.' + 'product_definition_formation.of_product' ) ) = 0 ) ) = 0 "/>
      </rule>
      <rule name="ee_product_definition_constraint" appliesto="product_definition_with_associated_documents">
         <where label="wr1" expression=" sizeof ( query ( pdwad &lt;* product_definition_with_associated_documents | not ( ( sizeof ( query ( adata &lt;* usedin ( pdwad , 'ap210_product_data_management_mim.' + 'applied_date_and_time_assignment.items' ) | ( adata . role \ date_time_role . name = 'creation date' ) ) ) = 1 ) ) ) ) = 0 "/>
         <where label="wr2" expression=" sizeof ( query ( pdwad &lt;* product_definition_with_associated_documents | not ( ( sizeof ( query ( aoa &lt;* usedin ( pdwad , 'ap210_product_data_management_mim.' + 'applied_organization_assignment.items' ) | ( aoa . role \ organization_role . name = 'creator' ) ) ) = 1 ) or ( sizeof ( query ( apaoa &lt;* usedin ( pdwad , 'ap210_product_data_management_mim.' + 'applied_person_and_organization_assignment.items' ) | ( apaoa . role \ person_and_organization_role . name = 'creator' ) ) ) = 1 ) ) ) ) = 0 "/>
         <where label="wr3" expression=" sizeof ( query ( pdwad &lt;* product_definition_with_associated_documents | not ( ( sizeof ( usedin ( pdwad , 'ap210_product_data_management_mim.' + 'applied_approval_assignment.items' ) ) = 1 ) ) ) ) = 0 "/>
         <where label="wr4" expression=" sizeof ( query ( pdwad &lt;* product_definition_with_associated_documents | not ( ( sizeof ( usedin ( pdwad , 'ap210_product_data_management_mim.' + 'applied_security_classification_assignment.items' ) ) = 1 ) ) ) ) = 0 "/>
      </rule>
      <rule name="ee_product_model_unique_constraint" appliesto="product_concept">
         <algorithm> local r : bag of product_concept := query ( r &lt;* product_concept | true ) ; pass : boolean := true ; id_bag : bag of string := [ ] ; end_local ; repeat i := 1 to sizeof ( r ) by 1 ; if exists ( r [ i ] . id ) then if ( r [ i ] \ product_concept . id in id_bag ) then pass := false ; escape ; else id_bag := id_bag + r [ i ] . id ; end_if ; end_if ; end_repeat ; </algorithm>
         <where label="wr1" expression=" pass "/>
      </rule>
      <rule name="ee_product_unique_constraint" appliesto="product">
         <algorithm> local id_bag : bag of string := [ ] ; p_bag : bag of product ; aoa_bag : bag of applied_organization_assignment ; apaoa_bag : bag of applied_person_and_organization_assignment ; pass : boolean := true ; o_bag : bag of organization ; pao_bag : bag of person_and_organization ; end_local ; repeat i := 1 to sizeof ( product ) by 1 ; if exists ( product [ i ] . id ) then if ( not ( product [ i ] . id in id_bag ) ) then id_bag := id_bag + product [ i ] . id ; end_if ; end_if ; end_repeat ; repeat i := 1 to sizeof ( id_bag ) by 1 ; if ( not pass ) then escape ; end_if ; o_bag := [ ] ; pao_bag := [ ] ; p_bag := query ( p &lt;* product | ( p . id = id_bag [ i ] ) ) ; repeat j := 1 to sizeof ( p_bag ) by 1 ; if ( not pass ) then escape ; end_if ; aoa_bag := query ( aoa &lt;* usedin ( p_bag [ j ] , 'ap210_product_data_management_mim.' + 'applied_organization_assignment.items' ) | ( ( 'ap210_product_data_management_mim.' + 'organization' in typeof ( aoa . assigned_organization ) ) and ( aoa . role \ organization_role . name = 'design owner' ) ) ) ; repeat k := 1 to sizeof ( aoa_bag ) by 1 ; if exists ( aoa_bag [ k ] . assigned_organization ) then if ( aoa_bag [ k ] . assigned_organization in o_bag ) then pass := false ; escape ; else o_bag := o_bag + aoa_bag [ k ] . assigned_organization ; end_if ; end_if ; end_repeat ; apaoa_bag := query ( apaoa &lt;* usedin ( p_bag [ j ] , 'ap210_product_data_management_mim.' + 'applied_person_and_organization_assignment.items' ) | ( ( 'ap210_product_data_management_mim.' + 'person_and_organization' in typeof ( apaoa . assigned_person_and_organization ) ) and ( apaoa . role \ person_and_organization_role . name = 'design owner' ) ) ) ; repeat k := 1 to sizeof ( apaoa_bag ) by 1 ; if exists ( apaoa_bag [ k ] . assigned_person_and_organization ) then if ( apaoa_bag [ k ] . assigned_person_and_organization in pao_bag ) then pass := false ; escape ; else pao_bag := pao_bag + apaoa_bag [ k ] . assigned_person_and_organization ; end_if ; end_if ; end_repeat ; end_repeat ; end_repeat ; </algorithm>
         <where label="wr1" expression=" pass "/>
      </rule>
      <rule name="ee_product_version_supersedence_constraint" appliesto="product_definition_formation_relationship">
         <where label="wr1" expression=" sizeof ( query ( pdfr &lt;* product_definition_formation_relationship | ( ( pdfr \ product_definition_formation_relationship . name = 'product version supersedence' ) and ( not ( pdfr . relating_product_definition_formation . of_product :=: pdfr . related_product_definition_formation . of_product ) ) ) ) ) = 0 "/>
      </rule>
      <rule name="next_higher_assembly_relationship_constraint" appliesto="next_assembly_usage_occurrence">
         <where label="wr1" expression=" sizeof ( query ( nauo &lt;* next_assembly_usage_occurrence | not ( sizeof ( query ( pd &lt;* usedin ( nauo , 'ap210_product_data_management_mim.' + 'property_definition.definition' ) | ( ( sizeof ( query ( pdr &lt;* usedin ( pd , 'ap210_product_data_management_mim.' + 'property_definition_representation.definition' ) | ( 'ap210_product_data_management_mim.' + 'component_location' in typeof ( pdr . used_representation ) ) and ( pdr . used_representation . context_of_items \ geometric_representation_context . coordinate_space_dimension = 3 ) ) ) &lt;= 1 ) and ( sizeof ( query ( pdr &lt;* usedin ( pd , 'ap210_product_data_management_mim.' + 'property_definition_representation.definition' ) | ( 'ap210_product_data_management_mim.' + 'component_location' in typeof ( pdr . used_representation ) ) and ( pdr . used_representation . context_of_items \ geometric_representation_context . coordinate_space_dimension = 2 ) ) ) &lt;= 1 ) ) ) ) &lt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="organization_unique_constraint" appliesto="organization">
         <algorithm> local r : bag of organization := query ( r &lt;* organization | true ) ; pass : boolean := true ; id_bag : bag of string := [ ] ; end_local ; repeat i := 1 to sizeof ( r ) by 1 ; if exists ( r [ i ] . id ) then if ( r [ i ] \ organization . id in id_bag ) then pass := false ; escape ; else id_bag := id_bag + r [ i ] . id ; end_if ; end_if ; end_repeat ; </algorithm>
         <where label="wr1" expression=" pass "/>
      </rule>
      <rule name="planned_effectivity_constraint" appliesto="configuration_effectivity">
         <where label="wr1" expression=" sizeof ( query ( ce &lt;* configuration_effectivity | not ( ( 'ap210_product_data_management_mim.' + 'assembly_component_usage' in typeof ( ce . usage ) ) and ( ce . usage \ product_definition_relationship . name = 'assembly composition' ) ) ) ) = 0 "/>
         <where label="wr2" expression=" sizeof ( query ( ce &lt;* configuration_effectivity | sizeof ( usedin ( ce , 'ap210_product_data_management_mim.' + 'applied_approval_assignment.items' ) ) = 0 ) ) = 0 "/>
      </rule>
      <rule name="planned_effectivity_unique_constraint" appliesto="configuration_effectivity">
         <algorithm> local ce_bag : bag of configuration_effectivity ; ci_bag : bag of configuration_item := [ ] ; pass : boolean := true ; acu_bag : bag of assembly_component_usage ; end_local ; repeat i := 1 to sizeof ( configuration_effectivity ) by 1 ; if exists ( configuration_effectivity [ i ] . configuration . configuration ) then if ( not ( configuration_effectivity [ i ] . configuration . configuration in ci_bag ) ) then ci_bag := ci_bag + configuration_effectivity [ i ] . configuration . configuration ; end_if ; end_if ; end_repeat ; repeat i := 1 to sizeof ( ci_bag ) by 1 ; if ( not pass ) then escape ; end_if ; ce_bag := query ( r &lt;* configuration_effectivity | ( ( r . configuration . configuration :=: ci_bag [ i ] ) and ( r . usage \ product_definition_relationship . name = 'assembly composition' ) and ( 'ap210_product_data_management_mim.' + 'assembly_component_usage' in typeof ( r . usage ) ) ) ) ; acu_bag := [ ] ; repeat j := 1 to sizeof ( ce_bag ) by 1 ; if exists ( ce_bag [ j ] . usage ) then if ( ce_bag [ j ] . usage in acu_bag ) then pass := false ; escape ; else acu_bag := acu_bag + ce_bag [ j ] . usage ; end_if ; end_if ; end_repeat ; end_repeat ; </algorithm>
         <where label="wr1" expression=" pass "/>
      </rule>
      <rule name="product_concept_requires_configuration_item" appliesto="product_concept configuration_item">
         <where label="wr1" expression=" sizeof ( query ( pc &lt;* product_concept | not ( sizeof ( query ( ci &lt;* configuration_item | pc :=: ci . item_concept ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="product_definition_formation_requires_person_organization" appliesto="product_definition applied_person_and_organization_assignment applied_organization_assignment">
         <where label="wr1" expression=" sizeof ( query ( pd &lt;* product_definition | ( not ( 'ap210_product_data_management_mim.' + 'assembly_group_component_definition' in typeof ( pd ) ) ) and ( not ( ( sizeof ( query ( apaoa &lt;* applied_person_and_organization_assignment | ( pd . formation in apaoa . items ) and ( apaoa . role \ person_and_organization_role . name = 'creator' ) ) ) = 1 ) or ( sizeof ( query ( aoa &lt;* applied_organization_assignment | ( pd . formation in aoa . items ) and ( aoa . role \ organization_role . name = 'creator' ) ) ) = 1 ) ) ) ) ) = 0 "/>
      </rule>
      <rule name="product_requires_person_organization" appliesto="product applied_person_and_organization_assignment applied_organization_assignment">
         <where label="wr1" expression=" sizeof ( query ( prod &lt;* product | not ( ( sizeof ( query ( apaoa &lt;* applied_person_and_organization_assignment | prod in apaoa . items ) ) = 1 ) or ( sizeof ( query ( aoa &lt;* applied_organization_assignment | prod in aoa . items ) ) = 1 ) ) ) ) = 0 "/>
      </rule>
      <rule name="product_requires_product_definition_formation" appliesto="product product_definition_formation">
         <where label="wr1" expression=" sizeof ( query ( prod &lt;* product | not ( sizeof ( query ( pdf &lt;* product_definition_formation | prod :=: pdf . of_product ) ) &gt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="restrict_action_request_status" appliesto="action_request_status">
         <where label="wr1" expression=" sizeof ( query ( ars &lt;* action_request_status | not ( ars \ action_request_status . status in [ 'proposed' , 'in work' , 'issued' , 'hold' ] ) ) ) = 0 "/>
      </rule>
      <rule name="restrict_approval_status" appliesto="approval_status">
         <where label="wr1" expression=" sizeof ( query ( ast &lt;* approval_status | not ( ast \ approval_status . name in [ 'approved' , 'not yet approved' , 'disapproved' , 'withdrawn' ] ) ) ) = 0 "/>
      </rule>
      <rule name="restrict_date_role" appliesto="date_role">
         <where label="wr1" expression=" sizeof ( query ( dr &lt;* date_role | not ( dr \ date_role . name in [ 'creation date' , 'request date' , 'release date' , 'start date' , 'contract date' , 'certification date' , 'sign off date' , 'classification date' , 'declassification date' ] ) ) ) = 0 "/>
      </rule>
      <rule name="security_classification_constraint" appliesto="security_classification applied_date_and_time_assignment applied_date_assignment applied_person_and_organization_assignment applied_approval_assignment">
         <where label="wr1" expression=" sizeof ( query ( sc &lt;* security_classification | not ( ( sizeof ( query ( adata &lt;* applied_date_and_time_assignment | ( sc in adata . items ) and ( 'classification date' = adata . role \ date_time_role . name ) ) ) = 1 ) or ( sizeof ( query ( ada &lt;* applied_date_assignment | ( sc in ada . items ) and ( 'classification date' = ada . role \ date_role . name ) ) ) = 1 ) ) ) ) = 0 "/>
         <where label="wr2" expression=" sizeof ( query ( sc &lt;* security_classification | sizeof ( query ( apa &lt;* applied_person_and_organization_assignment | ( sc in apa . items ) and ( apa . role \ person_and_organization_role . name = 'classification officer' ) ) ) = 0 ) ) = 0 "/>
         <where label="wr3" expression=" sizeof ( query ( sc &lt;* security_classification | sizeof ( query ( aaa &lt;* applied_approval_assignment | ( sc in aaa . items ) ) ) = 0 ) ) = 0 "/>
      </rule>
      <rule name="subtype_exclusive_action_request_assignment" appliesto="action_request_assignment">
         <where label="wr1" expression=" sizeof ( query ( ara &lt;* action_request_assignment | not ( sizeof ( [ 'ap210_product_data_management_mim.' + 'change_request' , 'ap210_product_data_management_mim.' + 'start_request' ] * typeof ( ara ) ) &lt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="subtype_exclusive_property_definition_representation" appliesto="property_definition_representation">
         <where label="wr1" expression=" sizeof ( query ( pdr &lt;* property_definition_representation | not ( sizeof ( [ 'ap210_product_data_management_mim.' + 'shape_definition_representation' , 'ap210_product_data_management_mim.' + 'material_property_representation' ] * typeof ( pdr ) ) &lt;= 1 ) ) ) = 0 "/>
      </rule>
      <rule name="subtype_mandatory_address" appliesto="address">
         <where label="wr1" expression=" sizeof ( query ( add &lt;* address | not ( sizeof ( [ 'ap210_product_data_management_mim.' + 'personal_address' , 'ap210_product_data_management_mim.' + 'organizational_address' ] * typeof ( add ) ) = 1 ) ) ) = 0 "/>
      </rule>
      <rule name="subtype_mandatory_date" appliesto="date">
         <where label="wr1" expression=" sizeof ( query ( d &lt;* date | not ( 'ap210_product_data_management_mim.' + 'calendar_date' in typeof ( d ) ) ) ) = 0 "/>
      </rule>
      <rule name="subtype_mandatory_product_definition_usage" appliesto="product_definition_usage">
         <where label="wr1" expression=" sizeof ( query ( pdu &lt;* product_definition_usage | not ( sizeof ( [ 'ap210_product_data_management_mim.' + 'assembly_component_usage' , 'ap210_product_data_management_mim.' + 'make_from_usage_option' ] * typeof ( pdu ) ) = 1 ) ) ) = 0 "/>
      </rule>
      <rule name="versioned_action_request_requires_approval" appliesto="versioned_action_request applied_approval_assignment">
         <where label="wr1" expression=" sizeof ( query ( varq &lt;* versioned_action_request | not ( sizeof ( query ( aaa &lt;* applied_approval_assignment | varq in aaa . items ) ) = 1 ) ) ) = 0 "/>
      </rule>
      <rule name="versioned_action_request_requires_date_or_date_and_time" appliesto="versioned_action_request applied_date_and_time_assignment applied_date_assignment">
         <where label="wr1" expression=" sizeof ( query ( varq &lt;* versioned_action_request | not ( ( sizeof ( query ( adata &lt;* applied_date_and_time_assignment | varq in adata . items ) ) = 1 ) or ( sizeof ( query ( ada &lt;* applied_date_assignment | varq in ada . items ) ) = 1 ) ) ) ) = 0 "/>
      </rule>
      <rule name="versioned_action_request_requires_person_organization" appliesto="versioned_action_request applied_person_and_organization_assignment applied_organization_assignment">
         <where label="wr1" expression=" sizeof ( query ( varq &lt;* versioned_action_request | not ( ( sizeof ( query ( apaoa &lt;* applied_person_and_organization_assignment | varq in apaoa . items ) ) &gt;= 1 ) or ( sizeof ( query ( aoa &lt;* applied_organization_assignment | varq in aoa . items ) ) &gt;= 1 ) ) ) ) = 0 "/>
      </rule>
      <rule name="versioned_action_request_requires_status" appliesto="versioned_action_request action_request_status">
         <where label="wr1" expression=" sizeof ( query ( ar &lt;* versioned_action_request | not ( sizeof ( query ( ars &lt;* action_request_status | ar :=: ars . assigned_request ) ) = 1 ) ) ) = 0 "/>
      </rule>
      <rule name="work_request_unique_constraint" appliesto="versioned_action_request">
         <algorithm> local r : bag of versioned_action_request := query ( r &lt;* versioned_action_request | ( sizeof ( query ( ara &lt;* usedin ( r , 'ap210_product_data_management_mim.' + 'action_request_assignment.assigned_action_request' ) | ( ( ( 'ap210_product_data_management_mim.' + 'change_request' ) in typeof ( ara ) ) or ( ( 'ap210_product_data_management_mim.' + 'start_request' ) in typeof ( ara ) ) ) ) ) &gt; 0 ) ) ; pass : boolean := true ; id_bag : bag of string := [ ] ; end_local ; repeat i := 1 to sizeof ( r ) by 1 ; if exists ( r [ i ] . id ) then if ( r [ i ] . id in id_bag ) then pass := false ; escape ; else id_bag := id_bag + r [ i ] . id ; end_if ; end_if ; end_repeat ; </algorithm>
         <where label="wr1" expression=" pass "/>
      </rule>
   </schema>
</express>
