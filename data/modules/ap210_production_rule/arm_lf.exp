(*
   $Id: arm_lf.exp,v 1.9 2006/10/27 09:22:20 liutkus Exp $
   ISO TC184/SC4/WG3 N2071 - ISO/TS 10303-1630 AP210 production rule - EXPRESS ARM
   Supersedes ISO TC184/SC4/WG3 N1738
*)

SCHEMA Ap210_production_rule_arm_LF;

CONSTANT

Pre_defined_approval_status_types : SET OF STRING := [
 'approved',
 'disapproved',
 'withdrawn',
 'not yet approved']	;

Pre_defined_security_classification_types : SET OF STRING := [
 'unclassified',
 'classified',
 'proprietary',
 'confidential',
 'secret',
 'top secret'];

Pre_defined_address_assignment_types : SET OF STRING := [
 'delivery address',
 'postal address',
 'visitor address'];

Pre_defined_organization_or_person_in_organization_assignment_types : SET OF STRING := [
 'author',
 'classification officer',
 'creator',
 'custodian',
 'customer',
 'design supplier',
 'editor',
 'id owner',
 'location',
 'manufacturer',
 'owner',
 'read access',
 'supplier',
 'wholesaler',
 'write access',
 'organization in contract'];

Pre_defined_activity_relationship_types : SET OF STRING := [
 'alternative',
 'decomposition',
 'derivation',
 'exclusiveness',
 'precedence',
 'sequence',
 'simultaneity'];

Pre_defined_approval_types : SET OF STRING := [
 'disposition',
 'equipment order',
 'planning'];

Pre_defined_date_or_date_time_assignment_types : SET OF STRING := [
 'creation',
 'installation',
 'production',
 'registration',
 'update',
 'planned',
 'actual',
 'start date',
 'end date',
 'release date',
 'request date'];

Pre_defined_work_request_types : SET OF STRING := [
 'change of standard',
 'cost reduction',
 'customer rejection',
 'customer request',
 'durability improvement',
 'government regulation',
 'production alignment',
 'procurement alignment',
 'production relief',
 'production requirement',
 'quality improvement',
 'security reason',
 'standardization',
 'supplier request',
 'technical improvement',
 'tool improvement'];

Pre_defined_work_request_status_types : SET OF STRING := [
 'in work',
 'issued',
 'proposed',
 'resolved'];

END_CONSTANT;

TYPE any_string_value = STRING;
END_TYPE; 

(* Pruned unused type: design_pdm_affected_item_select  *)


(* Pruned unused type: design_pdm_assigned_name_select  *)


(* Pruned unused type: design_approval_item  *)


(* Pruned unused type: design_pdm_certification_item  *)


(* Pruned unused type: design_pdm_classification_item  *)


(* Pruned unused type: design_pdm_classified_attribute_select  *)


(* Pruned unused type: design_pdm_contract_item  *)


(* Pruned unused type: design_pdm_date_or_date_time_item  *)


(* Pruned unused type: design_pdm_documented_element_select  *)


(* Pruned unused type: design_pdm_identification_item  *)


(* Pruned unused type: design_pdm_groupable_item  *)


(* Pruned unused type: design_pdm_material_item_select  *)


(* Pruned unused type: design_pdm_organization_or_person_in_organization_item  *)


(* Pruned unused type: design_pdm_requirement_assignment_item  *)


(* Pruned unused type: design_pdm_requirement_source_item  *)


(* Pruned unused type: design_pdm_security_classification_item  *)


(* Pruned unused type: pr_identification_item  *)


(* Pruned unused type: pr_organization_or_person_in_organization_item  *)


TYPE clause_select = SELECT (Simple_clause, Complex_clause);
END_TYPE;

TYPE constants = SELECT (
   any_number_value,
   any_string_value,
   Logical_representation_item);
END_TYPE;


TYPE function_symbol = SELECT (any_string_value, built_in_functions);
END_TYPE;

TYPE built_in_functions = ENUMERATION OF (
   attr_val);
END_TYPE;


TYPE expression_syntax = ENUMERATION OF (
   express);
END_TYPE;


(* Pruned unused type: pr_documented_element_select  *)


TYPE predicate_symbol = STRING;
END_TYPE;

TYPE scope_select = SELECT (Rule_definition, Rule_set, Rule_set_group);
END_TYPE;

TYPE term_select = SELECT (Symbol, constants, Func, Scalar_variable, Row_value, Row_variable); 
END_TYPE;

(* Pruned unused type: pdm_activity_item  *)


(* Pruned unused type: pdm_affected_item_select  *)


(* Pruned unused type: pdm_approval_item  *)


(* Pruned unused type: pdm_certification_item  *)


(* Pruned unused type: pdm_classification_item  *)


(* Pruned unused type: pdm_date_or_date_time_item  *)


(* Pruned unused type: pdm_documented_element_select  *)


(* Pruned unused type: pdm_effectivity_item  *)


(* Pruned unused type: pdm_event_item  *)


(* Pruned unused type: pdm_external_class_assigned_name_select  *)


(* Pruned unused type: pdm_identification_item  *)


(* Pruned unused type: pdm_organization_or_person_in_organization_item  *)


(* Pruned unused type: pdm_project_item  *)


(* Pruned unused type: pdm_security_classification_item  *)


(* Pruned unused type: pdm_string_select  *)


(* Pruned unused type: pdm_time_interval_item  *)


(* Pruned unused type: classification_item_extended  *)


TYPE classified_element_select = SELECT (
   Product,
   Product_version,
   Product_view_definition);
END_TYPE;


TYPE external_class_select = SELECT(Plib_class_reference, External_class);
END_TYPE;

TYPE definable_objects = SELECT (
 Product, 
 Product_version, 
 Product_view_definition);
END_TYPE;

TYPE classification_item = SELECT (
   Activity,
   Activity_method,
   Activity_method_assignment,
   Activity_property,
   Activity_relationship,
   Address,
   Address_assignment,
   Affected_items_assignment,
   Alternate_product_relationship,
   Applied_activity_assignment,
   Approval,
   Approval_assignment,
   Approval_relationship,
   Approval_status,
   Approving_person_organization,
   Assembly_relationship_substitution,
   Assigned_property,
   Attribute_translation_assignment,
   Calendar_date,
   Certification,
   Certification_assignment,
   Characterizable_object,
   Class,
   classified_element_select,
   Context_dependent_unit,
   Contract,
   Contract_assignment,
   Conversion_based_unit,
   Date_or_date_time_assignment,
   Date_time,
   definable_objects,
   Derived_unit,
   Digital_document_definition,
   Digital_file,
   Directed_activity,
   Document_assignment,
   Effectivity,
   Event,
   Event_assignment,
   External_source_identification,
   File,
   File_relationship,
   Identification_assignment,
   Independent_property,
   Independent_property_relationship,
   Independent_property_representation,
   Language,
   Numerical_item_with_unit,
   Organization,
   Organization_or_person_in_organization_assignment,
   Organization_relationship,
   Part_view_definition,
   Person,
   Product,
   Product_category,
   Product_concept,
   Product_configuration,
   Product_version,
   Product_version_relationship,
   Product_view_definition,
   Project,
   Project_assignment,
   Project_relationship,
   Representation,
   Representation_context,
   Representation_item,
   Security_classification,
   Security_classification_assignment,
   String_representation_item,
   Uncertainty_with_unit,
   Value_with_unit,
   View_definition_context,
   View_definition_relationship,
   Work_order,
   Work_request,
   Work_request_status);
END_TYPE;


(* Pruned unused type: external_class_assigned_name_select  *)


TYPE limit_qualifier_list = ENUMERATION OF 
   (minimum,
    maximum);
END_TYPE; 

TYPE material_item_select = SELECT (
   Part_view_definition);
END_TYPE;


TYPE material_property_select = SELECT (Material_property, General_material_property);
END_TYPE;

TYPE dependent_or_independent_property_representation = SELECT(
  Independent_property_representation,
  Property_representation);
END_TYPE;

TYPE groupable_item = SELECT (
   Group_relationship);
   WHERE
  WR1: NOT ('AP210_PRODUCTION_RULE_ARM_LF.GROUP' IN TYPEOF(SELF));
END_TYPE; 

(* Pruned unused type: pdpdms_external_identification_item  *)


TYPE requirement_assignment_item = SELECT (
   Product,
   Product_configuration,
   Product_version,
   Product_view_definition,
   View_definition_relationship);
END_TYPE;


TYPE requirement_source_item = SELECT (
   Characterizable_object,
   Group,
   Group_relationship,
   Product,
   Product_version,
   Product_view_definition,
   Shape_element,
   View_definition_relationship);
END_TYPE;


TYPE activity_method_item = SELECT (
   Document,
   Document_version);
END_TYPE;


TYPE classified_attribute_select = SELECT (
   Activity,
   Activity_method,
   Activity_method_assignment,
   Activity_property,
   Activity_property_representation,
   Activity_relationship,
   Address_assignment,
   Affected_items_assignment,
   Alternate_part_relationship,
   Applied_activity_assignment,
   Approval,
   Approval_assignment,
   Approval_relationship,
   Approval_status,
   Approving_person_organization,
   Assigned_property,
   Certification,
   Certification_assignment,
   Context_dependent_unit,
   Contract,
   Date_or_date_time_assignment,
   Descriptive_document_property,
   Digital_file,
   Document_assignment,
   Document_definition_relationship,
   Document_location_identification,
   Document_property_representation,
   Effectivity,
   Effectivity_assignment,
   Event_assignment,
   Event_relationship,
   External_item_identification,
   External_source_identification,
   File_location_identification,
   File_relationship,
   Group,
   Group_relationship,
   Hardcopy,
   Identification_assignment,
   Independent_property,
   Independent_property_relationship,
   Independent_property_representation,
   Language,
   Market,
   Numerical_document_property,
   Organization_or_person_in_organization_assignment,
   Organization_relationship,
   Part_view_definition,
   Partial_document_assignment,
   Person_in_organization,
   Product,
   Product_category,
   Product_concept,
   Product_version,
   Product_version_relationship,
   Product_view_definition,
   Project_assignment,
   Project_relationship,
   Property_representation,
   Representation,
   Representation_context,
   Representation_item,
   Security_classification,
   Time_interval_relationship,
   Uncertainty_with_unit,
   Unit,
   Value_with_unit,
   View_definition_context,
   View_definition_relationship,
   Work_order,
   Work_request,
   Work_request_status);
END_TYPE;


(* Pruned unused type: sd_documented_element_select  *)


TYPE date_or_date_time_item = SELECT (
   Activity,
   Applied_activity_assignment,
   Certification,
   Contract,
   Digital_document_definition,
   Digital_file,
   Document_definition,
   Document_definition_relationship,
   Document_version,
   Hardcopy,
   Organization_or_person_in_organization_assignment,
   Physical_document_definition,
   Product_view_definition,
   Security_classification,
   Security_classification_assignment,
   Work_order,
   Work_request);
END_TYPE;


TYPE date_or_date_time_select = SELECT
   (Calendar_date, 
    Date_time);
END_TYPE; 

TYPE day_in_month_number = INTEGER;
WHERE
  WR1: {1 <= SELF <= 31};
END_TYPE; 

TYPE hour_in_day = INTEGER;
WHERE
  WR1: { 0 <= SELF < 24 };
END_TYPE; 

TYPE minute_in_hour = INTEGER;
WHERE
  WR1: { 0 <= SELF <= 59 };
END_TYPE; 

TYPE month_in_year_number = INTEGER;
WHERE
  WR1: { 1 <= SELF <= 12 };
END_TYPE; 

TYPE offset_orientation = ENUMERATION OF 
   (ahead,
    exact,
    behind);
END_TYPE; 

TYPE second_in_minute = REAL;
WHERE
  WR1: { 0 <= SELF <= 60.0 };
END_TYPE; 

TYPE year_number = INTEGER;
END_TYPE; 

TYPE activity_item = SELECT (
   Item_usage_effectivity,
   Product_version,
   Product_view_definition,
   View_definition_relationship);
END_TYPE;


TYPE identification_item = SELECT (
   alias_identification_item,
   Approval_status,
   Contract,
   Digital_document_definition,
   Digital_file,
   Document,
   Document_version,
   Group,
   Group_relationship,
   Hardcopy,
   Material_identification,
   Organization,
   Physical_document_definition,
   Product,
   Product_category,
   product_class,
   Product_concept,
   Product_configuration,
   Product_version,
   Requirement,
   Requirement_version,
   Requirement_view_definition,
   Rule_set,
   Security_classification,
   Shape_element_relationship);
END_TYPE;


TYPE approval_item = SELECT (
   Activity,
   Applied_activity_assignment,
   Certification,
   Contract,
   Digital_document_definition,
   Document_definition,
   Document_definition_relationship,
   Document_version,
   Effectivity,
   Group,
   Group_relationship,
   Independent_property_relationship,
   Item_usage_effectivity,
   Physical_document_definition,
   Product_configuration,
   Product_version,
   Product_view_definition,
   Requirement_assignment,
   Security_classification,
   Supplied_part_relationship,
   Work_order,
   Work_request);
END_TYPE;


TYPE organization_or_person_in_organization_select = SELECT
   (Organization, 
    Person_in_organization);
END_TYPE; 

TYPE any_number_value = NUMBER;
END_TYPE; 

(* Pruned unused type: design_activity_method_item  *)


TYPE length_measure = REAL;
END_TYPE; 

TYPE measure_value = SELECT (
   any_number_value,
   any_string_value,
   length_measure,
   plane_angle_measure);
END_TYPE;


TYPE plane_angle_measure = REAL;
END_TYPE; 

TYPE certification_item = SELECT (
   Alternate_product_relationship,
   Product_version,
   Product_version_relationship);
END_TYPE;


TYPE version_or_definition = SELECT
   (Product_version, 
    Product_view_definition);
END_TYPE; 

TYPE contract_item = SELECT (
   Document_version,
   organization_or_person_in_organization_select,
   Product_version,
   Work_order);
END_TYPE;


TYPE assigned_document_select = SELECT 
  (Document,
   Document_definition,
   Document_version,
   File);
END_TYPE;

TYPE documented_element_select = SELECT (
   Activity,
   Activity_method,
   Class_with_attributes,
   External_item_identification,
   Group,
   Group_relationship,
   Material_identification,
   Part,
   Part_version,
   Part_view_definition,
   Product,
   Product_category,
   Product_configuration,
   Product_version,
   Product_version_relationship,
   Product_view_definition,
   Property_value_representation,
   Representation_item,
   Rule_set,
   Shape_element,
   Shape_element_relationship,
   Work_request);
END_TYPE;


(* Pruned unused type: document_location_select  *)


(* Pruned unused type: located_select  *)


(* Pruned unused type: document_management_alias_identification_item  *)


(* Pruned unused type: document_management_approval_item  *)


(* Pruned unused type: document_management_contract_item  *)


(* Pruned unused type: document_management_date_or_date_time_item  *)


(* Pruned unused type: document_management_identification_item  *)


(* Pruned unused type: document_management_person_and_organization_item  *)


(* Pruned unused type: document_management_security_classification_item  *)


(* Pruned unused type: document_management_string_select  *)


(* Pruned unused type: ai_identification_item  *)


TYPE alias_identification_item = SELECT (
   Approval_status,
   Contract,
   Digital_document_definition,
   Digital_file,
   Document,
   Document_version,
   Hardcopy,
   Organization,
   Physical_document_definition,
   Security_classification);
END_TYPE;


TYPE external_identification_item = SELECT (
   Document_definition,
   Externally_defined_activity_relationship,
   Externally_defined_address_assignment,
   Externally_defined_approval,
   Externally_defined_approval_status,
   Externally_defined_date_or_date_time_assignment,
   Externally_defined_organization_or_person_in_organization_assignment,
   Externally_defined_security_classification,
   Externally_defined_work_request,
   Externally_defined_work_request_status,
   File);
END_TYPE;


TYPE descriptive_or_numerical = SELECT
   (Descriptive_document_property, 
    Numerical_document_property);
END_TYPE; 

TYPE document_property_item = property_assignment_select;
WHERE
  wr1 : NOT ('AP210_PRODUCTION_RULE_ARM.PART_VIEW_DEFINITION' IN TYPEOF(SELF));
  wr2 : NOT ('AP210_PRODUCTION_RULE_ARM.PRODUCT_VIEW_DEFINITION' IN TYPEOF(SELF));
  wr3 : NOT ('AP210_PRODUCTION_RULE_ARM.VIEW_DEFINITION_RELATIONSHIP' IN TYPEOF(SELF));
END_TYPE;


(* Pruned unused type: mri_alias_identification_item  *)


(* Pruned unused type: mri_approval_item  *)


(* Pruned unused type: mri_date_or_date_time_item  *)


(* Pruned unused type: mri_identification_item  *)


(* Pruned unused type: mri_organization_or_person_in_organization_item  *)


(* Pruned unused type: mri_string_select  *)


TYPE security_classification_item = SELECT (
   Assembly_component_relationship,
   Digital_document_definition,
   Digital_file,
   Document,
   Document_definition,
   Document_version,
   Hardcopy,
   Physical_document_definition,
   Product_version,
   Product_view_definition,
   Promissory_usage);
END_TYPE;


TYPE effectivity_item = SELECT (
   Product_version,
   Product_view_definition,
   View_definition_relationship);
END_TYPE;


TYPE date_or_event = SELECT
   (Calendar_date, 
    Date_time, 
    Event);
END_TYPE; 

TYPE event_item = SELECT (
   Project);
END_TYPE;


TYPE assigned_name_select = SELECT (
   External_class_library,
   Group,
   Group_relationship,
   Product,
   Product_view_definition);
END_TYPE;


TYPE cartesian_transformation = SELECT (Cartesian_transformation_2d, Cartesian_transformation_3d);
END_TYPE;

(* Pruned unused type: geometric_mapping_target  *)


(* Pruned unused type: idrm_marked_item  *)


TYPE property_assignment_select = SELECT (
   Document_definition,
   File,
   Part_view_definition,
   Product_view_definition,
   View_definition_relationship);
END_TYPE;


TYPE represented_definition = SELECT (
   Assigned_property,
   Independent_property);
END_TYPE;


TYPE string_select = SELECT (
   Approval,
   Approval_relationship,
   Approval_status,
   Certification,
   Contract,
   Date_or_date_time_assignment,
   Digital_document_definition,
   Document,
   Document_assignment,
   Document_definition_relationship,
   Document_version,
   External_item_identification,
   External_source_identification,
   File_relationship,
   Identification_assignment,
   Organization_relationship,
   Person_in_organization,
   Physical_document_definition,
   Product,
   Product_category,
   Product_version,
   Product_view_definition,
   Project,
   Project_assignment,
   Project_relationship,
   View_definition_relationship);
END_TYPE;


TYPE organization_or_person_in_organization_item = SELECT (
   Activity,
   Alias_identification,
   Applied_activity_assignment,
   Approval,
   Classification_assignment,
   Classification_association,
   Contract,
   Digital_document_definition,
   Digital_file,
   Document,
   Document_definition,
   Document_version,
   Hardcopy,
   Identification_assignment,
   Part,
   Part_version,
   Part_view_definition,
   Physical_document_definition,
   Product_configuration,
   Rule_action,
   Security_classification,
   Security_classification_assignment,
   Supplied_part_relationship,
   Work_order,
   Work_request);
END_TYPE;


TYPE project_item = SELECT (
   Activity,
   Product_concept);
END_TYPE;


TYPE characterized_activity_definition = SELECT (
   Activity,
   Activity_method);
END_TYPE;


(* Pruned unused type: ps_product_property_assignment  *)


(* Pruned unused type: product_property_assignment  *)


TYPE shape_dependent_select = SELECT
   (Item_shape, 
    Shape_element);
END_TYPE; 

TYPE shape_model = SELECT
   (External_geometric_model, 
    Geometric_model);
END_TYPE; 

TYPE shape_select = SELECT
   (Item_shape, 
    Shape_element, 
    Shape_element_relationship);
END_TYPE; 

TYPE shapeable_item = SELECT
   (Characterizable_object, 
    Product_view_definition, 
    View_definition_usage);
END_TYPE; 

(* Pruned unused type: spr_documented_element_select  *)


(* Pruned unused type: spr_product_property_assignment  *)


(* Pruned unused type: spr_organization_or_person_in_organization_item  *)


TYPE time_interval_item = SELECT (
   Activity);
END_TYPE;


TYPE affected_item_select = SELECT (
   Assigned_property,
   Product_version,
   Product_view_definition,
   View_definition_relationship,
   Work_request);
END_TYPE;


TYPE extended_value_with_unit = SELECT (
   Value_limit,
   Value_range,
   Value_with_unit);
END_TYPE;


(* Pruned unused type: requirement_view_definition_identification_item  *)


(* Pruned unused type: requirement_identification_and_version_identification_item  *)


  TYPE characteristic = SELECT
    (String_representation_item,
    Numerical_item_with_unit,
    Value_list,
    Value_set);
  END_TYPE;

(* Pruned unused type: c_documented_element_select  *)


	TYPE list_characteristic = LIST[1:?] OF characteristic;
	END_TYPE; 

  TYPE range_class = ENUMERATION OF
    (closed,
     lower_open,
     upper_open,
     open);
  END_TYPE;

(* Pruned unused type: scalar_or_coordinated_characteristics  *)


  TYPE value_qualifier = SELECT
    (Precision_qualifier,
     Type_qualifier,
     Uncertainty_qualifier);
  END_TYPE;

TYPE string_representation_item_select = SELECT(
    String_representation_item, 
    Included_text_block,
    Structured_text_composition);
END_TYPE; 

TYPE string_representation_item_list = LIST[1:?] OF
string_representation_item_select;
END_TYPE;

TYPE string_representation_item_set = SET[1:?] OF string_representation_item_select;
END_TYPE;

TYPE string_representation_item_list_or_set =
 SELECT(string_representation_item_list, string_representation_item_set); 
END_TYPE;

(* Pruned unused type: template_instance  *)


TYPE template_definition_select = SELECT (
   Geometric_model);
END_TYPE;


TYPE expression_operator = ENUMERATION OF (or_operator, and_operator, oneof_operator, not_operator);
END_TYPE;

TYPE specification_operand_select = SELECT
		(Specification_expression, Specification);
END_TYPE;

(* Pruned unused type: id_for_class  *)


(* Pruned unused type: specification_for_category  *)


(* Pruned unused type: constructive_element_select  *)


(* Pruned unused type: point_select  *)


ENTITY Document_location_identification
  SUBTYPE OF (External_source_identification);
WHERE
  WR1: 'AP210_PRODUCTION_RULE_ARM_LF.DOCUMENT_DEFINITION' IN TYPEOF(SELF\External_source_identification.item);
END_ENTITY;

ENTITY Atomic_formula
   ABSTRACT SUPERTYPE OF (ONEOF (
                        RULE_CONDITION,
                        GROUND_FACT));
  predicate_symbol : predicate_symbol;  
  terms : LIST OF term_select;
END_ENTITY;

ENTITY Attribute_assertion
  SUBTYPE OF (Fact_type);
   entity_type : STRING;
   attribute : STRING;
END_ENTITY; 

ENTITY Back_chaining_rule
  SUBTYPE OF (Rule_definition);
  head : Rule_condition;
  body : LIST OF Rule_condition;
 WHERE
  WR1: SELF.head.positive = TRUE;
  WR2:  local_vars_of(SELF.head) <= local_vars_of(SELF.body);
END_ENTITY;

ENTITY Complex_clause
   ABSTRACT SUPERTYPE OF (ONEOF (
                        COMPLEX_CONJUNCTIVE_CLAUSE,
                        COMPLEX_DISJUNCTIVE_CLAUSE));
  clauses : LIST [2:?] OF clause_select;
END_ENTITY;

ENTITY Complex_conjunctive_clause
  SUBTYPE OF (Complex_clause); 
END_ENTITY;

ENTITY Complex_disjunctive_clause
  SUBTYPE OF (Complex_clause); 
END_ENTITY;

ENTITY Entity_assertion
  SUBTYPE OF (Fact_type);
END_ENTITY;

ENTITY Enum_reference_prefix;
 prefix : STRING;
END_ENTITY;

ENTITY Extent;
  source : STRING;
  variable_id : OPTIONAL STRING;
  query_expression : STRING;
  syntax : OPTIONAL expression_syntax;
END_ENTITY;

ENTITY Fact_type
   ABSTRACT SUPERTYPE OF (ONEOF (
                        ENTITY_ASSERTION,
                        ATTRIBUTE_ASSERTION));
   source : Extent;
   predicate_symbol : STRING;
END_ENTITY;

ENTITY Forward_chaining_rule
  SUBTYPE OF (Rule_definition);
  premise : clause_Select; 
  conclusion : Literal_conjunction;
  WHERE
  WR1:  local_vars_of(SELF.conclusion) <= local_vars_of(SELF.premise);
END_ENTITY;

ENTITY Func;
 func_sym : function_symbol;
 terms : LIST OF term_select;
END_ENTITY;

ENTITY Global_assignment;
  variable : Abstract_variable;
  val : term_select;
 WHERE
  WR1: NOT(contains_variable(SELF.val));
END_ENTITY;

ENTITY Ground_fact
 SUBTYPE OF (Atomic_formula);
 WHERE
  WR1: SIZEOF(QUERY(r <* SELF\Atomic_formula.terms | contains_variable(r))) = 0;
END_ENTITY;

ENTITY Literal_conjunction
  SUBTYPE OF (Simple_clause);
END_ENTITY;

ENTITY Literal_disjunction
  SUBTYPE OF (Simple_clause);
END_ENTITY;

ENTITY Row_value;
  values : LIST OF term_select;
 WHERE
  WR1: SIZEOF(QUERY(v <* SELF.values | contains_variable(v))) = 0;
  WR2: SIZEOF(QUERY(v <* SELF.values | 'AP210_PRODUCTION_RULE_ARM_LF.ROW_VALUE' IN TYPEOF(v))) = 0;
END_ENTITY;

ENTITY Row_variable
 SUBTYPE OF (Abstract_variable);
END_ENTITY;

ENTITY Rule_action
    ABSTRACT SUPERTYPE OF (ONEOF (
                        RULE_SUBMISSION,
                        RULE_ADOPTION,
                        RULE_REJECTION,
                        RULE_SUPERSEDENCE,
                        RULE_CREATION,
                        RULE_EXPIRATION,
                        RULE_CHANGE_REQUEST,
                        RULE_REQUEST,
                        RULE_MODIFICATION));
   subject_rule : Rule_version;
DERIVE
   subject_action_assignment : SET[0:?] OF Organization_or_person_in_organization_assignment := 
         bag_to_set(QUERY(temp <* USEDIN ( SELF , 'AP210_PRODUCTION_RULE_ARM_LF.' + 
                                       'ORGANIZATION_OR_PERSON_IN_ORGANIZATION_ASSIGNMENT.ITEMS' ) 
                    | ( temp.role = 'subject action assignment')));
  UNIQUE
   UR1: SELF\Rule_action.subject_rule, SELF\Rule_action.subject_action_assignment;
  WHERE
   WR1: EXISTS (subject_action_assignment) AND (SIZEOF(subject_action_assignment) = 1 );
END_ENTITY;

ENTITY Rule_adoption
   SUBTYPE OF (Rule_action);
END_ENTITY;

ENTITY Rule_change_request
   SUBTYPE OF (Rule_action);
   change_reason : STRING;
END_ENTITY;

ENTITY Rule_condition
 SUBTYPE OF (Atomic_formula);
  positive : BOOLEAN;
END_ENTITY;

ENTITY Rule_creation
    SUBTYPE OF (Rule_action);
END_ENTITY;

ENTITY Rule_definition
   ABSTRACT SUPERTYPE OF (ONEOF (
                        FORWARD_CHAINING_RULE,
                        BACK_CHAINING_RULE))
  SUBTYPE OF (Rule_software_definition);
END_ENTITY; 

ENTITY Rule_expiration
   SUBTYPE OF (Rule_action);
   expiration_rationale : STRING;
END_ENTITY;

ENTITY Rule_justification
   SUBTYPE OF (Rule_action);
   justified_action : Rule_action;
   justification_rationale : STRING;
WHERE
   WR1: SELF <> justified_action ;
END_ENTITY;

ENTITY Rule_modification
   SUBTYPE OF (Rule_action);
   modification_rationale : Rule_change_request;
END_ENTITY;

ENTITY Rule_priority;
   priority : INTEGER;
   prioritized_rule : Rule_definition;
WHERE
   WR1: priority >= 0 ;
END_ENTITY;

ENTITY Rule_product
   SUBTYPE OF (Software);
WHERE
   WR1: SIZEOF ( [ 'rule' ] * types_of_product ( SELF ) ) = 1 ;
END_ENTITY;

ENTITY Rule_rejection
   SUBTYPE OF (Rule_action);
   rejection_reason : STRING;
END_ENTITY;

ENTITY Rule_request
   SUBTYPE OF (Rule_action);
END_ENTITY;

ENTITY Rule_set
   SUBTYPE OF (Rule_software_definition);
   conflict_resolution_strategy : OPTIONAL STRING;
   rule_member : SET[1:?] OF Rule_priority;
 DERIVE  
   engine: SET[1:1] OF Document_definition :=
		get_document_definition(SELF, 'engine', 
		'AP210_PRODUCTION_RULE_ARM_LF.LANGUAGE_REFERENCE_MANUAL');
 INVERSE
   purpose : Identification_assignment FOR items;
 WHERE
   WR1: purpose.role = 'purpose' ;
END_ENTITY;

ENTITY Rule_set_group
  SUBTYPE OF (Rule_software_definition);
  elements : SET[2:?] OF Rule_set;
END_ENTITY;

ENTITY Rule_software_definition
   SUPERTYPE OF (ONEOF (
              RULE_DEFINITION,
              RULE_SET_GROUP,
              RULE_SET))
  SUBTYPE OF (Software_definition);
   SELF\Product_view_definition.defined_version : Rule_version;
END_ENTITY;

ENTITY Rule_submission
   SUBTYPE OF (Rule_action);
   submission_rationale : STRING;
END_ENTITY;

ENTITY Rule_supersedence
   SUBTYPE OF (Rule_action);
   superseded_rule : Rule_version;
END_ENTITY;

ENTITY Rule_version
   SUBTYPE OF (Software_version);
   SELF\Product_version.of_product : Rule_product;
INVERSE
   management_action : SET[1:?] OF Rule_action FOR subject_rule;
   product_definition : SET[1:?] OF Rule_software_definition FOR defined_version;
END_ENTITY;

ENTITY Scalar_variable
 SUBTYPE OF (Abstract_variable);
END_ENTITY;

ENTITY Simple_clause
   ABSTRACT SUPERTYPE OF (ONEOF (
                        LITERAL_CONJUNCTION,
                        LITERAL_DISJUNCTION));
  formulas : LIST [1:?] OF Rule_condition;
END_ENTITY;

ENTITY Symbol
  SUBTYPE OF(Representation_item);
 UNIQUE
  UR1 : SELF\Representation_item.name;
END_ENTITY;

ENTITY Class_with_attributes
SUBTYPE OF (Class);
  version_id: OPTIONAL STRING;
  used_classification_system: OPTIONAL Classification_system;
INVERSE
  characterization_attributes: SET[0:?] OF Classification_attribute FOR characterized_class;
END_ENTITY;

ENTITY Class_hierarchy;
  super_class: Class_with_attributes;
  sub_class: Class_with_attributes;
END_ENTITY;

ENTITY Classification_association
SUBTYPE OF (Classification_assignment);
   SELF\Classification_assignment.assigned_class: Class_with_attributes;
   definitional: LOGICAL;
WHERE
WR1: SIZEOF(QUERY(it<* SELF\Classification_assignment.items |
     NOT('AP210_PRODUCTION_RULE_ARM_LF.DEFINABLE_OBJECTS' IN TYPEOF(it)) AND definitional ))=0;
WR2: SIZEOF(QUERY(it<* SELF\Classification_assignment.items |
     NOT('AP210_PRODUCTION_RULE_ARM_LF.CLASSIFIED_ELEMENT_SELECT' IN TYPEOF(it)) )) =0;
END_ENTITY;

ENTITY Classification_attribute;
   id: STRING;
   name: OPTIONAL STRING;
   description: OPTIONAL STRING;
   allowed_values: OPTIONAL SET[1:?] OF Measure_item;
   characterized_class: Class_with_attributes;
   attribute_definition: Independent_property;
END_ENTITY;

ENTITY Classification_system;
  id: STRING;
  description: OPTIONAL STRING;
END_ENTITY;

ENTITY External_class_with_attributes
SUBTYPE OF (Class_with_attributes);
  source: external_class_select;
END_ENTITY;

ENTITY Class
  SUPERTYPE OF (ONEOF (
              CLASS_BY_EXTENSION,
              CLASS_BY_INTENSION));
  id : STRING;
  name : STRING;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Class_by_extension
  SUBTYPE OF (Class);
END_ENTITY;

ENTITY Class_by_intension
  SUBTYPE OF (Class);
END_ENTITY;

ENTITY Classification_assignment;
  assigned_class : Class;
  items : SET[1:?] OF classification_item;
  role : OPTIONAL STRING;
END_ENTITY;

ENTITY External_class
  SUBTYPE OF (Class);
  external_source : External_class_library;
END_ENTITY;

ENTITY External_class_library;
  id : STRING;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Measure_item_with_precision
  SUBTYPE OF (Measure_item);
  significant_digits : INTEGER;
END_ENTITY;

ENTITY Qualified_property_value_representation
  SUBTYPE OF (Property_value_representation);
  value_determination : OPTIONAL STRING;
  qualifier : OPTIONAL STRING;
END_ENTITY;

ENTITY Value_limit
  SUBTYPE OF (Measure_item);
  limit_qualifier : limit_qualifier_list;
  limit : Value_with_unit;
END_ENTITY;

ENTITY Value_limit_with_global_unit
  SUBTYPE OF (Measure_item);
  limit : Numerical_item_with_global_unit;
  limit_qualifier : limit_qualifier_list;
END_ENTITY;

ENTITY Value_list
  SUBTYPE OF (Measure_item);
  values : LIST[1:?] OF Measure_item;
END_ENTITY;

ENTITY Value_range
  SUBTYPE OF (Measure_item);
  lower_limit : Numerical_item_with_unit;
  upper_limit : Numerical_item_with_unit;
END_ENTITY;

ENTITY Value_range_with_global_unit
  SUBTYPE OF (Measure_item);
  lower_limit : Numerical_item_with_global_unit;
  upper_limit : Numerical_item_with_global_unit;
END_ENTITY;

ENTITY Value_set
  SUBTYPE OF (Measure_item);
  values : SET[1:?] OF Measure_item;
END_ENTITY;

ENTITY Value_with_tolerances
  SUBTYPE OF (Measure_item);
  item_value : Numerical_item_with_unit;
  lower_limit : REAL;
  upper_limit : REAL;
END_ENTITY;

ENTITY Plib_class_reference;
  code : STRING;
  supplier_bsu : STRING;
  version : STRING;
END_ENTITY;

ENTITY Product;
  id : STRING;
  name : OPTIONAL STRING;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Product_category_assignment;
  category : Product_category;
  products : SET[1:?] OF Product;
END_ENTITY;

ENTITY Product_version;
  id : STRING;
  description : OPTIONAL STRING;
  of_product : Product;
END_ENTITY;

ENTITY Product_view_definition;
  id              	: OPTIONAL STRING;
  name  	      	: OPTIONAL STRING;
  additional_characterization	      : OPTIONAL STRING;
  initial_context 	: View_definition_context;
  additional_contexts   : SET [0:?] OF View_definition_context;
  defined_version  	: Product_version;
WHERE
  WR1: NOT (initial_context IN additional_contexts);
  WR2: EXISTS(id) OR (TYPEOF(SELF\Product_view_definition) <> TYPEOF(SELF));
END_ENTITY;

ENTITY View_definition_context;
  application_domain	: STRING;
  life_cycle_stage 	: STRING;
  description	 	: OPTIONAL STRING;
WHERE
  WR1: (SIZEOF (USEDIN(SELF, 'AP210_PRODUCTION_RULE_ARM_LF.' +
    'PRODUCT_VIEW_DEFINITION.INITIAL_CONTEXT')) > 0) OR
    (SIZEOF (USEDIN(SELF, 'AP210_PRODUCTION_RULE_ARM_LF.' +
    'PRODUCT_VIEW_DEFINITION.ADDITIONAL_CONTEXTS')) > 0);
END_ENTITY;

ENTITY Independent_property;
  id : STRING;
  property_type : STRING;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Independent_property_relationship;
  relation_type : STRING;
  description : OPTIONAL STRING;
  relating : Independent_property;
  related : Independent_property;
END_ENTITY;

 ENTITY Applied_independent_material_property SUBTYPE OF
    (Material_property, Applied_independent_property);
     SELF\Applied_independent_property.base_independent_property: General_material_property;
  END_ENTITY;

 ENTITY Data_environment;
  environment_name : STRING;
  description : OPTIONAL STRING;
  environment_characterization: SET[1:?] OF dependent_or_independent_property_representation;
 END_ENTITY;

 ENTITY Material_identification;
  material_name : STRING;
  items : SET[1:?] OF material_item_select;
 END_ENTITY;

 ENTITY Material_property
  SUBTYPE OF (Assigned_property);
 END_ENTITY;

 ENTITY Material_property_association;
  described_material : Material_identification;
  associated_property_value : Material_property_value_representation;
  definitional : OPTIONAL BOOLEAN;
 END_ENTITY;

 ENTITY Material_property_value_representation
  SUBTYPE OF (Property_definition_representation);
    environment_condition                                               : Data_environment;

    SELF\Property_definition_representation.definition : material_property_select;  -- property : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
    DERIVE
      property : MATERIAL_PROPERTY_SELECT := SELF\Property_definition_representation.definition;  -- DEFINITION : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE

 END_ENTITY;

 ENTITY General_material_property
  SUBTYPE OF (Independent_property);
  WHERE
    WR1:  SIZEOF(QUERY( aip <* USEDIN(SELF,'AP210_PRODUCTION_RULE_ARM_LF.APPLIED_INDEPENDENT_PROPERTY.'+
                     'BASE_INDEPENDENT_PROPERTY') |
               NOT
			('AP210_PRODUCTION_RULE_ARM_LF.APPLIED_INDEPENDENT_MATERIAL_PROPERTY' IN
                    TYPEOF(aip)))) = 0;
 END_ENTITY;

ENTITY Group;
  id : OPTIONAL STRING;
  name : STRING;
  description : OPTIONAL STRING;
  elements : SET[0:?] OF groupable_item;
  membership_meaning : OPTIONAL STRING;
END_ENTITY;

ENTITY Group_relationship;
  description : OPTIONAL STRING;
  relation_type : STRING;
  relating_group : Group;
  related_group : Group;
END_ENTITY;

ENTITY Definition_based_part_occurrence
  SUBTYPE OF (Definition_based_product_occurrence, Part_occurrence);
  SELF\Definition_based_product_occurrence.derived_from : Part_view_definition;
END_ENTITY;

ENTITY Part_occurrence
   ABSTRACT SUPERTYPE
  SUBTYPE OF (Product_occurrence);
  SELF\Product_view_definition.defined_version : Part_version;
END_ENTITY;

ENTITY Part_occurrence_definition_relationship
  SUBTYPE OF (View_definition_relationship);
  SELF\View_definition_relationship.relating_view : Part_view_definition;
  SELF\View_definition_relationship.related_view : Part_occurrence;
DERIVE
  SELF\View_definition_relationship.id : STRING :=
SELF\View_definition_relationship.related_view\Product_view_definition.id;
WHERE
  WR1: NOT (('AP210_PRODUCTION_RULE_ARM_LF.ASSEMBLY_COMPONENT_RELATIONSHIP' IN
TYPEOF(SELF))AND (EXISTS(SELF\Assembly_component_relationship.quantity)));
END_ENTITY;

ENTITY Specification_based_part_occurrence
  SUBTYPE OF (Specification_based_product_occurrence, Part_occurrence);
END_ENTITY;

ENTITY Externally_defined_activity_relationship
    SUBTYPE OF (Activity_relationship);
INVERSE
  source : External_source_identification FOR item;
WHERE
  WR1: NOT (SELF\Activity_relationship.name IN Pre_defined_activity_relationship_types);
END_ENTITY;

ENTITY Externally_defined_security_classification
    SUBTYPE OF (Security_classification);
INVERSE
  source : External_source_identification FOR item;
WHERE
  WR1: NOT (SELF\Security_classification.classification_level IN Pre_defined_security_classification_types);
END_ENTITY;

ENTITY Externally_defined_address_assignment
    SUBTYPE OF (Address_assignment);
INVERSE
  source : External_source_identification FOR item;
WHERE
  WR1: (EXISTS(SELF\Address_assignment.address_type)) AND
       (NOT (SELF\Address_assignment.address_type IN Pre_defined_address_assignment_types));
END_ENTITY;

ENTITY Externally_defined_organization_or_person_in_organization_assignment
  SUBTYPE OF (Organization_or_person_in_organization_assignment);
INVERSE
  source : External_source_identification FOR item;
WHERE
  WR1: NOT (SELF\Organization_or_person_in_organization_assignment.role IN Pre_defined_organization_or_person_in_organization_assignment_types);
END_ENTITY;

ENTITY Externally_defined_approval_status
  SUBTYPE OF (Approval_status);
INVERSE
  source : External_source_identification FOR item;
WHERE
  WR1: NOT (SELF\Approval_status.status_name IN Pre_defined_approval_status_types);
END_ENTITY;

ENTITY Externally_defined_approval
  SUBTYPE OF (Approval);
INVERSE
  source : External_source_identification FOR item;
WHERE
  WR1: NOT (SELF\Approval.purpose IN Pre_defined_approval_types);
END_ENTITY;

ENTITY Externally_defined_date_or_date_time_assignment
  SUBTYPE OF (Date_or_date_time_assignment);
INVERSE
  source : External_source_identification FOR item;
WHERE
  WR1: NOT (SELF\Date_or_date_time_assignment.role IN Pre_defined_date_or_date_time_assignment_types);
END_ENTITY;

ENTITY Externally_defined_work_request
  SUBTYPE OF (Work_request);
INVERSE
  source : External_source_identification FOR item;
WHERE
  WR1: NOT (SELF\Work_request.purpose IN Pre_defined_work_request_types);
END_ENTITY;

ENTITY Externally_defined_work_request_status
  SUBTYPE OF (Work_request_status);
INVERSE
  source : External_source_identification FOR item;
WHERE
  WR1: NOT (SELF\Work_request_status.status IN Pre_defined_work_request_status_types);
END_ENTITY;

ENTITY Person_in_organization_relationship;
  description : OPTIONAL STRING; 
  relating : Person_in_organization;
  related : Person_in_organization;
  relation_type : STRING;
END_ENTITY;

ENTITY Pre_defined_activity_relationship
	SUBTYPE OF (Activity_relationship);
WHERE
  WR1: SELF\Activity_relationship.name IN Pre_defined_activity_relationship_types;
END_ENTITY;

ENTITY Pre_defined_security_classification
  SUBTYPE OF (Security_classification);
WHERE
  WR1: SELF\Security_classification.classification_level IN Pre_defined_security_classification_types;
END_ENTITY;

ENTITY Pre_defined_address_assignment
  SUBTYPE OF (Address_assignment);
WHERE
  WR1: SELF\Address_assignment.address_type IN Pre_defined_address_assignment_types;
END_ENTITY;

ENTITY Pre_defined_organization_or_person_in_organization_assignment
  SUBTYPE OF (Organization_or_person_in_organization_assignment);
WHERE
  WR1: SELF\Organization_or_person_in_organization_assignment.role IN Pre_defined_organization_or_person_in_organization_assignment_types; 
END_ENTITY;

ENTITY Pre_defined_approval_status
  SUBTYPE OF (Approval_status);
WHERE
  WR1: SELF\Approval_status.status_name IN Pre_defined_approval_status_types;
END_ENTITY;

ENTITY Pre_defined_approval
  SUBTYPE OF (Approval);
WHERE
  WR1: SELF\Approval.purpose IN Pre_defined_approval_types;
END_ENTITY;

ENTITY Pre_defined_date_or_date_time_assignment
  SUBTYPE OF (Date_or_date_time_assignment);
WHERE
  WR1: SELF\Date_or_date_time_assignment.role IN Pre_defined_date_or_date_time_assignment_types;
END_ENTITY;

ENTITY Pre_defined_work_request
  SUBTYPE OF (Work_request);
WHERE
  WR1: SELF\Work_request.purpose IN Pre_defined_work_request_types;
END_ENTITY;

ENTITY Pre_defined_work_request_status
  SUBTYPE OF (Work_request_status);
WHERE
  WR1: SELF\Work_request_status.status IN Pre_defined_work_request_status_types;
END_ENTITY;

ENTITY Requirement_assignment;
  id : STRING;
  description : OPTIONAL STRING;
  assigned_requirement : Requirement_view_definition;
  assigned_to : requirement_assignment_item;
END_ENTITY;

ENTITY Requirement_source;
  id : STRING;
  description : OPTIONAL STRING;
  source : requirement_source_item;
  sourced_requirement : Requirement_view_definition;
END_ENTITY;

ENTITY Requirement_collection_relationship
  SUBTYPE OF (View_definition_relationship);
  SELF\View_definition_relationship.relating_view : Requirement_view_definition;  -- collection : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
  SELF\View_definition_relationship.related_view : Requirement_view_definition;  -- member : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
    DERIVE
      collection : REQUIREMENT_VIEW_DEFINITION := SELF\View_definition_relationship.relating_view;  -- RELATING_VIEW : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE
      member : REQUIREMENT_VIEW_DEFINITION := SELF\View_definition_relationship.related_view;  -- RELATED_VIEW : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE

END_ENTITY;

ENTITY Tracing_relationship
  SUBTYPE OF (View_definition_relationship);
  SELF\View_definition_relationship.relating_view : Requirement_view_definition;  -- traces_from : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
  SELF\View_definition_relationship.related_view : Requirement_view_definition;  -- traces_to : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
    DERIVE
      traces_from : REQUIREMENT_VIEW_DEFINITION := SELF\View_definition_relationship.relating_view;  -- RELATING_VIEW : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE
      traces_to : REQUIREMENT_VIEW_DEFINITION := SELF\View_definition_relationship.related_view;  -- RELATED_VIEW : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE

END_ENTITY;

  ENTITY Test_select_product
    SUBTYPE OF (Alternate_product_relationship);
  WHERE
    WR1: NOT EXISTS (SELF\Alternate_product_relationship.criteria);
  END_ENTITY;

ENTITY Activity_method_relationship;
  name : STRING;
  description : OPTIONAL STRING;
  relating_method : Activity_method;
  related_method : Activity_method;
END_ENTITY;

ENTITY Applied_activity_method_assignment;
  assigned_activity_method : Activity_method;
  items : SET[1:?] OF activity_method_item;
  role : STRING;
END_ENTITY;

ENTITY Activity_method;
  name : STRING;
  description : OPTIONAL STRING;
  consequence : OPTIONAL STRING;
  purpose : STRING;
END_ENTITY;

ENTITY Attribute_classification;
  allowed_value : Class;
  attribute_name : STRING;
  classified_entity : SET[1:?] OF classified_attribute_select;
END_ENTITY;

  ENTITY Design_specification
    SUPERTYPE OF (
              INTERFACE_SPECIFICATION_DOCUMENT_DEFINITION)
  SUBTYPE OF (Specification_definition);
    WHERE
      WR1 : NOT EXISTS(SELF\Product_view_definition.additional_characterization);
  END_ENTITY;

  ENTITY Fabrication_technology_specification
    SUBTYPE OF (Process_specification);
  END_ENTITY;

  ENTITY Interface_specification_document_definition
    SUBTYPE OF (Design_specification);
  END_ENTITY;

  ENTITY Language_reference_manual
    SUBTYPE OF (Specification_definition);
    WHERE
      WR1 : NOT EXISTS(SELF\Product_view_definition.additional_characterization);
  END_ENTITY;

  ENTITY Material_specification
    SUBTYPE OF (Specification_definition);
    WHERE
      WR1 : NOT EXISTS(SELF\Product_view_definition.additional_characterization);
  END_ENTITY;

  ENTITY Partial_document_with_structured_text_representation_assignment
    SUBTYPE OF(Partial_document_assignment);
      structured_portion : string_representation_item_select;
    UNIQUE
      UR1: SELF\Partial_document_assignment.document_portion,
      SELF\Document_assignment.assigned_document;
  END_ENTITY;

  ENTITY Process_specification
    SUBTYPE OF (Specification_definition);
    WHERE
      WR1 : NOT EXISTS(SELF\Product_view_definition.additional_characterization);
  END_ENTITY;

  ENTITY Specification_allocation
  	SUBTYPE OF (Document_assignment);
      SELF\Document_assignment.assigned_document : Specification_definition;  -- allocated_specification : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
      purpose                      : STRING;
    DERIVE
      allocated_specification : SPECIFICATION_DEFINITION := SELF\Document_assignment.assigned_document;  -- ASSIGNED_DOCUMENT : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE

  END_ENTITY;

  ENTITY Specification_definition
  	SUPERTYPE OF (ONEOF (
              DESIGN_SPECIFICATION,
              PROCESS_SPECIFICATION,
              MATERIAL_SPECIFICATION,
              TEST_SPECIFICATION,
              LANGUAGE_REFERENCE_MANUAL))
  SUBTYPE OF (Document_definition);
	DERIVE
  		source: SET[0:?] OF Organization_or_person_in_organization_assignment :=
         bag_to_set(QUERY(temp <* USEDIN(SELF,'AP210_PRODUCTION_RULE_ARM_LF.'+
         'ORGANIZATION_OR_PERSON_IN_ORGANIZATION_ASSIGNMENT.ITEMS') |
                         (temp.role = 'document source') ));
	WHERE
      WR1: EXISTS (source) AND (SIZEOF(source) = 1);
  END_ENTITY;

  ENTITY Surface_finish_specification
    SUBTYPE OF (Material_specification);
  END_ENTITY;

  ENTITY Test_specification
    SUBTYPE OF (Specification_definition);
    WHERE
      WR1 : NOT EXISTS(SELF\Product_view_definition.additional_characterization);
  END_ENTITY;

  ENTITY Software 
    SUBTYPE OF (Information_product);
    UNIQUE 
      UR1: SELF\Product.id;
  	WHERE 
	  WR1 :  SIZEOF(['software', 'information'] * types_of_product(SELF)) = 2;
  END_ENTITY;

  ENTITY Software_definition 
    SUBTYPE OF (Information_definition);
    SELF\Product_view_definition.defined_version : Software_version;
  END_ENTITY;

  ENTITY Software_version
    SUBTYPE OF (Information_version);
    SELF\Product_version.of_product : Software;
  END_ENTITY;

ENTITY Date_or_date_time_assignment  SUPERTYPE OF (ONEOF (
               PRE_DEFINED_DATE_OR_DATE_TIME_ASSIGNMENT,
               EXTERNALLY_DEFINED_DATE_OR_DATE_TIME_ASSIGNMENT) ) ;
  assigned_date : date_or_date_time_select;
  role          : STRING;
  items         : SET [1:?] OF date_or_date_time_item;
END_ENTITY;

ENTITY Calendar_date;
  year_component : year_number;
  month_component : month_in_year_number;
  day_component : day_in_month_number;
END_ENTITY;

ENTITY Date_time;
  date_component : Calendar_date;
  time_component : Local_time;
END_ENTITY;

ENTITY Local_time;
  hour_component : hour_in_day;
  minute_component : OPTIONAL minute_in_hour;
  second_component : OPTIONAL second_in_minute;
  zone : Time_offset;
END_ENTITY;

ENTITY Time_offset;
  hour_offset : INTEGER;
  minute_offset : OPTIONAL INTEGER;
  sense : offset_orientation;
DERIVE
  actual_minute_offset : INTEGER := NVL(minute_offset,0);
WHERE
  WR1: { 0 <= hour_offset < 24 };
  WR2: { 0 <= actual_minute_offset <= 59 };
  WR3: NOT (((hour_offset <> 0) OR (actual_minute_offset <>0)) AND (sense = exact));
END_ENTITY;

ENTITY Activity;
  id : STRING;
  name : STRING;
  description : OPTIONAL STRING;
  chosen_method : Activity_method;
END_ENTITY;

ENTITY Activity_relationship  SUPERTYPE OF (ONEOF (
               PRE_DEFINED_ACTIVITY_RELATIONSHIP,
               EXTERNALLY_DEFINED_ACTIVITY_RELATIONSHIP) ) ;
  name : STRING;
  description : OPTIONAL STRING;
  relating_activity : Activity;
  related_activity : Activity;
END_ENTITY;

ENTITY Activity_status;
  assigned_activity : Activity;
  status : STRING;
END_ENTITY;

ENTITY Applied_activity_assignment;
  assigned_activity : Activity;
  items : SET[1:?] OF activity_item;
  role : STRING;
END_ENTITY;

ENTITY Identification_assignment;
  identifier  : STRING;
  role        : STRING;
  description : OPTIONAL STRING;
  items       : SET [1:?] OF identification_item;
END_ENTITY;

ENTITY Product_category;  
  id		: OPTIONAL STRING;
  name	: STRING;
  description : OPTIONAL STRING;  
END_ENTITY;   

ENTITY Product_category_hierarchy;  
  super_category : Product_category;  
  sub_category   : Product_category;
END_ENTITY;   

ENTITY Approval  SUPERTYPE OF (ONEOF (
               PRE_DEFINED_APPROVAL,
               EXTERNALLY_DEFINED_APPROVAL) ) ;
  status : Approval_status;
  purpose : STRING;
  planned_date : OPTIONAL date_or_date_time_select;
  actual_date : OPTIONAL date_or_date_time_select;
END_ENTITY;

ENTITY Approval_assignment;
  assigned_approval : Approval;
  items : SET[1:?] OF approval_item;
  role : OPTIONAL STRING;
END_ENTITY;

ENTITY Approval_relationship;
  relation_type : STRING;
  description : OPTIONAL STRING;
  relating_approval : Approval;
  related_approval : Approval;
END_ENTITY;

ENTITY Approval_status  SUPERTYPE OF (ONEOF (
               PRE_DEFINED_APPROVAL_STATUS,
               EXTERNALLY_DEFINED_APPROVAL_STATUS) ) ;
  status_name : STRING;
END_ENTITY;

ENTITY Approving_person_organization;
  person_organization : organization_or_person_in_organization_select;
  approval_date : OPTIONAL date_or_date_time_select;
  authorized_approval : Approval;
  role : OPTIONAL STRING;
END_ENTITY;

ENTITY Address;
  name : OPTIONAL STRING;
  street_number : OPTIONAL STRING;
  street : OPTIONAL STRING;
  postal_box : OPTIONAL STRING;
  town : OPTIONAL STRING;
  region : OPTIONAL STRING;
  postal_code : OPTIONAL STRING;
  country : OPTIONAL STRING;
  internal_location : OPTIONAL STRING;
  facsimile_number : OPTIONAL STRING;
  telephone_number : OPTIONAL STRING;
  electronic_mail_address : OPTIONAL STRING;
  telex_number : OPTIONAL STRING;
  url : OPTIONAL STRING;
WHERE
  WR1: (EXISTS (street_number) OR EXISTS (street) OR EXISTS (postal_box) OR EXISTS (town) OR EXISTS (region) OR EXISTS (postal_code) OR EXISTS (country) OR EXISTS (internal_location) OR EXISTS (facsimile_number) OR EXISTS (telephone_number) OR EXISTS (electronic_mail_address) OR EXISTS (telex_number));
END_ENTITY;

ENTITY Address_assignment  SUPERTYPE OF (ONEOF (
               PRE_DEFINED_ADDRESS_ASSIGNMENT,
               EXTERNALLY_DEFINED_ADDRESS_ASSIGNMENT) ) ;
  address_type : OPTIONAL STRING;
  assigned_address : Address;
  located_person_organizations : SET[1:?] OF organization_or_person_in_organization_select;
END_ENTITY;

ENTITY Organization;
  id : OPTIONAL STRING;
  name : STRING;
END_ENTITY;

ENTITY Organization_relationship;
  relation_type : STRING;
  description : OPTIONAL STRING;
  relating_organization : Organization;
  related_organization : Organization;
END_ENTITY;

ENTITY Person;
  last_name : STRING;
  first_name : OPTIONAL STRING;
  middle_names : OPTIONAL LIST[1:?] OF STRING;
  prefix_titles : OPTIONAL LIST[1:?] OF STRING;
  suffix_titles : OPTIONAL LIST[1:?] OF STRING;
END_ENTITY;

ENTITY Person_in_organization;
  concerned_person : Person;
  containing_organization : Organization;
  role : STRING;
END_ENTITY;

ENTITY Assembly_component_relationship
   ABSTRACT SUPERTYPE OF (ONEOF (
                        NEXT_ASSEMBLY_USAGE,
                        PROMISSORY_USAGE,
                        COMPONENT_UPPER_LEVEL_IDENTIFICATION))
  SUBTYPE OF (View_definition_usage);
  quantity : OPTIONAL Value_with_unit;
  location_indicator : OPTIONAL STRING;
WHERE
  WR1: NOT(EXISTS(quantity)) OR ((NOT ('NUMBER' IN TYPEOF(quantity.value_component))) XOR (quantity.value_component > 0));
END_ENTITY;

ENTITY Next_assembly_usage
  SUBTYPE OF (Assembly_component_relationship);
END_ENTITY;

ENTITY Promissory_usage
  SUBTYPE OF (Assembly_component_relationship);
END_ENTITY;

ENTITY Component_upper_level_identification
  SUBTYPE OF (Assembly_component_relationship);
  upper_assembly_relationship : Assembly_component_relationship;
  sub_assembly_relationship : Next_assembly_usage;
UNIQUE
  UR1: upper_assembly_relationship, sub_assembly_relationship;
WHERE
  WR1: SELF :<>: upper_assembly_relationship ;
  WR2: SELF\View_definition_relationship.relating_view :=: upper_assembly_relationship\View_definition_relationship.relating_view;
  WR3: SELF\View_definition_relationship.related_view :=: sub_assembly_relationship\View_definition_relationship.related_view;
  WR4: (upper_assembly_relationship\View_definition_relationship.related_view :=: sub_assembly_relationship\View_definition_relationship.relating_view) OR (SIZEOF (QUERY (pdr <* USEDIN (upper_assembly_relationship\View_definition_relationship.related_view , 'AP210_PRODUCTION_RULE_ARM_LF.VIEW_DEFINITION_RELATIONSHIP.RELATED_VIEW') | pdr.relating_view :=: sub_assembly_relationship\View_definition_relationship.relating_view)) = 1);
  WR5: SIZEOF (['AP210_PRODUCTION_RULE_ARM_LF.NEXT_ASSEMBLY_USAGE', 'AP210_PRODUCTION_RULE_ARM_LF.COMPONENT_UPPER_LEVEL_IDENTIFICATION'] * TYPEOF(upper_assembly_relationship)) = 1;
END_ENTITY;

ENTITY View_definition_relationship;
  id : OPTIONAL STRING;
  relation_type : OPTIONAL STRING;
  description : OPTIONAL STRING;
  relating_view : Product_view_definition;
  related_view : Product_view_definition;
END_ENTITY;

ENTITY View_definition_usage
  SUBTYPE OF (View_definition_relationship);
END_ENTITY;

ENTITY Amount_of_substance_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Context_dependent_unit
  SUBTYPE OF (Unit);
WHERE
  WR1: EXISTS(SELF\Unit.name);
END_ENTITY;

ENTITY Conversion_based_unit
  SUBTYPE OF (Unit);
  conversion_factor : Value_with_unit;
WHERE
  WR1: EXISTS(SELF\Unit.name);
END_ENTITY;

ENTITY Derived_unit
  SUBTYPE OF (Unit);
  elements : SET[1:?] OF Derived_unit_element;
END_ENTITY;

ENTITY Derived_unit_element;
  base_unit : Unit;
  exponent : REAL;
END_ENTITY;

ENTITY Duration
  SUBTYPE OF (Value_with_unit);
WHERE
  WR1: 'AP210_PRODUCTION_RULE_ARM_LF.' + 'TIME_UNIT' IN TYPEOF(SELF\Value_with_unit.unit);
END_ENTITY;

ENTITY Electric_current_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Length_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Luminous_intensity_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Mass_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Plane_angle_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Ratio_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Solid_angle_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Thermodynamic_temperature_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Time_unit
  SUBTYPE OF (Unit);
END_ENTITY;

ENTITY Uncertainty_with_unit
  SUBTYPE OF (Value_with_unit);
  name : STRING;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Unit
  SUPERTYPE OF (ONEOF (
              AMOUNT_OF_SUBSTANCE_UNIT,
              ELECTRIC_CURRENT_UNIT,
              LENGTH_UNIT,
              LUMINOUS_INTENSITY_UNIT,
              MASS_UNIT,
              PLANE_ANGLE_UNIT,
              RATIO_UNIT,
              SOLID_ANGLE_UNIT,
              THERMODYNAMIC_TEMPERATURE_UNIT,
              TIME_UNIT));
  name : STRING;
  si_unit : BOOLEAN;
END_ENTITY;

ENTITY Value_with_unit  SUPERTYPE OF (ONEOF (
               ABSORBED_DOSE_DATA_ELEMENT,
               ACTIVITY_DATA_ELEMENT,
               AMOUNT_OF_SUBSTANCE_DATA_ELEMENT,
               ANGLE_DATA_ELEMENT,
               AREA_DATA_ELEMENT,
               CAPACITANCE_DATA_ELEMENT,
               CELSIUS_TEMPERATURE_DATA_ELEMENT,
               CONDUCTANCE_DATA_ELEMENT,
               DOSE_EQUIVALENT_DATA_ELEMENT,
               ELECTRIC_CHARGE_DATA_ELEMENT,
               ELECTRIC_CURRENT_DATA_ELEMENT,
               ELECTROMOTIVE_FORCE_DATA_ELEMENT,
               ENERGY_DATA_ELEMENT,
               FORCE_DATA_ELEMENT,
               FREQUENCY_DATA_ELEMENT,
               ILLUMINANCE_DATA_ELEMENT,
               INDUCTANCE_DATA_ELEMENT,
               LENGTH_DATA_ELEMENT,
               LUMINOUS_FLUX_DATA_ELEMENT,
               LUMINOUS_INTENSITY_DATA_ELEMENT,
               MAGNETIC_FLUX_DATA_ELEMENT,
               MAGNETIC_FLUX_DENSITY_DATA_ELEMENT,
               MASS_DATA_ELEMENT,
               POWER_DATA_ELEMENT,
               PRESSURE_DATA_ELEMENT,
               RATIO_DATA_ELEMENT,
               RESISTANCE_DATA_ELEMENT,
               SCATTERING_PARAMETER_DATA_ELEMENT,
               SOLID_ANGLE_DATA_ELEMENT,
               THERMODYNAMIC_TEMPERATURE_DATA_ELEMENT,
               VOLUME_DATA_ELEMENT) ) ;
  unit : Unit;
  value_component : measure_value;
END_ENTITY;

ENTITY Certification;
  name : STRING;
  description : OPTIONAL STRING;
  kind : STRING;
END_ENTITY;

ENTITY Certification_assignment;
  assigned_certification : Certification;
  items : SET[1:?] OF certification_item;
  role : STRING;
END_ENTITY;

ENTITY Item_usage_effectivity;
  effectivity_domain : Effectivity;
  item_usage_relationship : View_definition_usage;
  resolved_configuration : Item_design_association;
END_ENTITY;

ENTITY Item_design_association;
  configuration : Product_configuration;
  design : version_or_definition;
UNIQUE
  UR1: configuration, design;
END_ENTITY;

ENTITY Product_configuration;
  id : STRING;
  name : STRING;
  description : OPTIONAL STRING;
  item_context : Product_concept;
INVERSE
  corresponding_design : SET[0:1] OF Item_design_association FOR configuration;
END_ENTITY;

ENTITY Dated_effectivity
  SUBTYPE OF (Effectivity);
  start_bound : date_or_event;
  end_bound   : OPTIONAL date_or_event;
END_ENTITY;

ENTITY Effectivity
  SUPERTYPE OF (ONEOF (
              SERIAL_EFFECTIVITY,
              DATED_EFFECTIVITY,
              LOT_EFFECTIVITY,
              TIME_INTERVAL_EFFECTIVITY));
  id             : STRING;
  name           : STRING;
  description    : OPTIONAL STRING;
END_ENTITY;

ENTITY Effectivity_relationship;
  relation_type : STRING;
  description   : OPTIONAL STRING;
  relating_effectivity  : Effectivity;
  related_effectivity  : Effectivity;
END_ENTITY;

ENTITY Lot_effectivity
  SUBTYPE OF (Effectivity);
  lot_id    : STRING;
  lot_size  : Value_with_unit;
END_ENTITY;

ENTITY Serial_effectivity
  SUBTYPE OF (Effectivity);
  start_id : STRING;
  end_id   : OPTIONAL STRING;
END_ENTITY;

ENTITY Time_interval_effectivity
  SUBTYPE OF (Effectivity);
  effectivity_period : Time_interval;
END_ENTITY;   

ENTITY Market;
  name                      : STRING;
  market_segment_type       : OPTIONAL STRING;
END_ENTITY;

ENTITY Product_concept;
  id                        : STRING;
  name                      : STRING;
  description               : OPTIONAL STRING;
  target_market             : OPTIONAL Market;
UNIQUE
  UR1: id;
END_ENTITY;

ENTITY Contract;
  id             : STRING;
  purpose        : STRING;
  kind	     : STRING;
END_ENTITY;

ENTITY Contract_assignment;
  assigned_contract  : Contract;
  items              : SET [1:?] OF contract_item;
END_ENTITY;

ENTITY Document_assignment;
  assigned_document : assigned_document_select;
  is_assigned_to : documented_element_select;
  role : STRING;
END_ENTITY;

ENTITY Partial_document_assignment
SUBTYPE OF (Document_assignment);
  document_portion : STRING;
END_ENTITY;

ENTITY Document
  SUBTYPE OF (Product);
END_ENTITY;

ENTITY Document_version
  SUBTYPE OF (Product_version);
  SELF\Product_version.of_product : Document;
END_ENTITY;

ENTITY Digital_document_definition
  SUBTYPE OF (Document_definition);
  files : SET[0:?] OF Digital_file;
END_ENTITY;

ENTITY Document_definition
  SUPERTYPE OF (ONEOF (
              DIGITAL_DOCUMENT_DEFINITION,
              PHYSICAL_DOCUMENT_DEFINITION))
  SUBTYPE OF (Product_view_definition);
  SELF\Product_view_definition.defined_version : Document_version;  -- associated_document_version : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
    DERIVE
      associated_document_version : DOCUMENT_VERSION := SELF\Product_view_definition.defined_version;  -- DEFINED_VERSION : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE
      description : STRING := SELF\Product_view_definition.name;  -- NAME : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE

END_ENTITY;

ENTITY Abstract_variable
   ABSTRACT SUPERTYPE OF (ONEOF (
                        SCALAR_VARIABLE,
                        ROW_VARIABLE));
  name : STRING;
  scope : scope_select;
 UNIQUE 
  UR1 : name, scope;
END_ENTITY;

ENTITY Physical_document_definition
  SUBTYPE OF (Document_definition);
  components : SET[0:?] OF Hardcopy;
END_ENTITY;

ENTITY Digital_file
SUBTYPE OF (File);
END_ENTITY;

ENTITY File
 ABSTRACT SUPERTYPE OF (ONEOF (
                        DIGITAL_FILE,
                        HARDCOPY));
  id : STRING;
  version : OPTIONAL STRING;
  contained_data_type : OPTIONAL STRING;
END_ENTITY;

ENTITY Hardcopy
SUBTYPE OF (File);
END_ENTITY;

ENTITY File_location_identification
SUBTYPE OF (External_item_identification);
WHERE
WR1: 'AP210_PRODUCTION_RULE_ARM_LF.FILE' IN TYPEOF(SELF\External_source_identification.item);
END_ENTITY;

ENTITY Alias_identification
SUBTYPE OF (Identification_assignment);
  SELF\Identification_assignment.items : SET [1 : ?] OF alias_identification_item;
DERIVE
  SELF\Identification_assignment.role : STRING := 'alias';
END_ENTITY;

ENTITY External_item_identification
SUBTYPE OF (External_source_identification);
  external_id : STRING;
END_ENTITY;

ENTITY External_source_identification;
  source_id	  : STRING;
  source_type : STRING;
  item 	  : external_identification_item;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Assigned_document_property
  SUBTYPE OF (Assigned_property);
  SELF\Assigned_property.described_element : document_property_item;
DERIVE
  SELF\Assigned_property.name : STRING := 'document property';
UNIQUE
  UR1: SELF\Assigned_property.described_element;
WHERE
  WR1: SIZEOF(['AP210_PRODUCTION_RULE_ARM_LF.DOCUMENT_DEFINITION', 'AP210_PRODUCTION_RULE_ARM_LF.FILE']*TYPEOF(SELF\Assigned_property.described_element)) = 1;
END_ENTITY;

ENTITY Descriptive_document_property
  SUBTYPE OF (String_representation_item);
INVERSE
  valued_characteristic : SET[1:1] OF Document_property_representation FOR items;
END_ENTITY;

ENTITY Document_property_representation
  SUBTYPE OF (Representation);
  SELF\Representation.items : SET[1:?] OF descriptive_or_numerical;
WHERE
  WR1: SIZEOF(QUERY( pr <* USEDIN(SELF, 'AP210_PRODUCTION_RULE_ARM_LF.PROPERTY_DEFINITION_REPRESENTATION.REP') | 'AP210_PRODUCTION_RULE_ARM_LF.ASSIGNED_PROPERTY' IN TYPEOF (pr\Property_representation.property)))> 0;
  WR2: SELF\Representation.context_of_items.kind = 'document parameters';
  WR3: valid_document_property_representation(SELF);
  WR4: SIZEOF(QUERY(it1 <* SELF\Representation.items | SIZEOF(QUERY(it2 <* SELF\Representation.items | it1.name = it2.name)) > 1 ))= 0;
END_ENTITY;

ENTITY Numerical_document_property
  SUBTYPE OF (Numerical_item_with_unit);
INVERSE
  valued_characteristic : SET[1:1] OF Document_property_representation FOR items;
END_ENTITY;

ENTITY Document_definition_relationship;
  relation_type : STRING;
  description : OPTIONAL STRING;
  relating_document_definition : Document_definition;
  related_document_definition : Document_definition;
WHERE
  WR1: relating_document_definition :<>: related_document_definition;
END_ENTITY;

ENTITY File_relationship;
  relation_type : STRING;
  description : OPTIONAL STRING;
  relating_document_file : File;
  related_document_file : File;
WHERE
  WR1: relating_document_file:<>: related_document_file;
END_ENTITY;

ENTITY Security_classification  SUPERTYPE OF (ONEOF (
               PRE_DEFINED_SECURITY_CLASSIFICATION,
               EXTERNALLY_DEFINED_SECURITY_CLASSIFICATION) ) ;
  classification_level : STRING;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Security_classification_assignment;
  classification : Security_classification;
  items : SET[1:?] OF security_classification_item;
END_ENTITY;

ENTITY Effectivity_assignment;
  assigned_effectivity  : Effectivity;
  role                  : STRING;
  items                 : SET [1:?] OF effectivity_item;
END_ENTITY;

ENTITY Time_interval;
  id : STRING;
  name : STRING;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Time_interval_relationship;
  relation_type : STRING;
  description : STRING;
  relating_time_interval : Time_interval;
  related_time_interval : Time_interval;
END_ENTITY;

ENTITY Time_interval_with_bounds
  SUBTYPE OF (Time_interval);
  primary_bound : OPTIONAL date_or_event;
  secondary_bound : OPTIONAL date_or_event;
  duration_from_primary_bound : OPTIONAL Duration;
WHERE
  WR1: NOT (EXISTS (secondary_bound) AND EXISTS (duration_from_primary_bound));
  WR2: EXISTS (primary_bound) OR EXISTS (secondary_bound);
END_ENTITY;

ENTITY Event;
  id : STRING;
  name : STRING;
  description : OPTIONAL STRING;
  actual_start_date : OPTIONAL date_or_date_time_select;
  planned_start_date : OPTIONAL date_or_date_time_select;
END_ENTITY;

ENTITY Event_relationship;
  relation_type : STRING;
  description : OPTIONAL STRING;
  relating_event : Event;
  related_event : Event;
END_ENTITY;

ENTITY Relative_event
  SUBTYPE OF (Event);
  base_event : Event;
  offset : Duration;
END_ENTITY;

ENTITY Event_assignment;
  assigned_event : Event;
  items : SET[1:?] OF event_item;
  role : STRING;
END_ENTITY;

ENTITY Name_assignment;
  name : STRING;
  role : STRING;
  items : assigned_name_select;
END_ENTITY;

ENTITY External_geometric_model
SUBTYPE OF (Geometric_model);
   SELF\Representation.items: SET[1:1] OF Axis_placement;
   external_file: Digital_file;
WHERE
WR1: SELF\Representation.context_of_items.dimension_count = 3;
WR2: SELF\Representation.context_of_items.kind = 'external';
END_ENTITY;

ENTITY Geometric_coordinate_space
SUBTYPE OF (Numerical_representation_context);
  dimension_count: INTEGER;
WHERE
WR1: dimension_count >0;
END_ENTITY;

ENTITY Geometric_model
SUBTYPE OF (Representation);
  version_id    : OPTIONAL STRING;
  model_extent  : OPTIONAL length_measure;
  SELF\Representation.context_of_items : Geometric_coordinate_space;
  SELF\Representation.items: SET[1:?] OF Detailed_geometric_model_element;
END_ENTITY;

ENTITY Detailed_geometric_model_element
  ABSTRACT SUPERTYPE OF ( ( ONEOF (
                        CARTESIAN_POINT,
                        DIRECTION,
                        AXIS_PLACEMENT,
                        CARTESIAN_TRANSFORMATION_2D,
                        CARTESIAN_TRANSFORMATION_3D) )ANDOR( ONEOF (
                        CARTESIAN_POINT,
                        DIRECTION,
                        AXIS_PLACEMENT,
                        CARTESIAN_TRANSFORMATION_2D,
                        CARTESIAN_TRANSFORMATION_3D,
                        CURVE,
                        POINT_ON_CURVE,
                        POINT_ON_SURFACE,
                        SURFACE,
                        VECTOR) )ANDOR( ONEOF (
                        CARTESIAN_POINT,
                        DIRECTION,
                        AXIS_PLACEMENT,
                        CARTESIAN_TRANSFORMATION_2D,
                        CARTESIAN_TRANSFORMATION_3D,
                        CURVE,
                        POINT_ON_CURVE,
                        POINT_ON_SURFACE,
                        SURFACE) )  ) 

SUBTYPE OF (Representation_item);
END_ENTITY;

ENTITY Cartesian_point
SUBTYPE OF (Detailed_geometric_model_element);
  coordinates: LIST[1:3] OF length_measure;
END_ENTITY;

ENTITY Direction
SUBTYPE OF (Detailed_geometric_model_element);
  coordinates: LIST[2:3] OF length_measure;  
END_ENTITY;

ENTITY Axis_placement
  SUPERTYPE OF (ONEOF (
               AXIS_PLACEMENT_2D,
               AXIS_PLACEMENT_3D) ) 
    
SUBTYPE OF (Detailed_geometric_model_element);
  origin: Cartesian_point;
  x_axis: Direction;
  y_axis: Direction;
DERIVE
  dim: INTEGER := SIZEOF(origin.coordinates);
WHERE
WR1: dim >1;
WR2: dim = SIZEOF(x_axis.coordinates);
WR3: dim = SIZEOF(y_axis.coordinates);
END_ENTITY;

ENTITY Cartesian_transformation_2d
SUBTYPE OF (Detailed_geometric_model_element);
   multiplication_matrix: ARRAY[1:2] OF Direction;
   translation: Cartesian_point;
WHERE
WR1: SIZEOF(multiplication_matrix[1]\Direction.coordinates)=2;
WR2: SIZEOF(multiplication_matrix[2]\Direction.coordinates)=2;
WR3: SIZEOF(translation.coordinates)=2;
END_ENTITY;

ENTITY Cartesian_transformation_3d
SUBTYPE OF (Detailed_geometric_model_element);
   multiplication_matrix: ARRAY[1:3] OF Direction;
   translation: Cartesian_point;
WHERE
WR1: SIZEOF(multiplication_matrix[1]\Direction.coordinates)=3;
WR2: SIZEOF(multiplication_matrix[2]\Direction.coordinates)=3;
WR3: SIZEOF(multiplication_matrix[3]\Direction.coordinates)=3;
WR4: SIZEOF(translation.coordinates)=3;
END_ENTITY;

ENTITY Axis_placement_mapping;
  source: Axis_placement;
  target: Axis_placement;
WHERE
WR1: source\Axis_placement.dim = target\Axis_placement.dim;
END_ENTITY;

ENTITY Numerical_representation_context
  SUBTYPE OF (Representation_context);
  units : OPTIONAL SET[1:?] OF Unit;
  accuracies : OPTIONAL SET[1:?] OF Uncertainty_with_unit;
END_ENTITY;

ENTITY Representation;
  id : OPTIONAL STRING;
  name : OPTIONAL STRING;
  description : OPTIONAL STRING;
  context_of_items : Representation_context;
  items : SET[1:?] OF Representation_item;
WHERE
  WR1 : EXISTS(name) OR (TYPEOF(SELF\Representation) <> TYPEOF(SELF));
END_ENTITY;

ENTITY Representation_context;
  id : STRING;
  kind : STRING;
INVERSE
  representations_in_context : SET[1:?] OF Representation FOR context_of_items;
END_ENTITY;

ENTITY Representation_item
   ABSTRACT SUPERTYPE;
  name : OPTIONAL STRING;
END_ENTITY;

ENTITY Representation_relationship;
  relation_type : OPTIONAL STRING;
  description : OPTIONAL STRING;
  rep_1 : Representation;
  rep_2 : Representation;
WHERE
  WR1 : EXISTS(relation_type) OR (TYPEOF(SELF\Representation_relationship) <> TYPEOF(SELF));
  WR2 : EXISTS(description) OR (TYPEOF(SELF\Representation_relationship) <> TYPEOF(SELF));
END_ENTITY;

ENTITY String_representation_item
    SUPERTYPE OF (ONEOF (
               TAGGED_TEXT_ITEM,
               UNIFORM_RESOURCE_IDENTIFIER) ) 
      SUBTYPE OF (Representation_item);
  string_value : STRING;
END_ENTITY;

ENTITY Incomplete_reference_marking
SUBTYPE OF (Classification_assignment);
WHERE
WR1: SIZEOF (QUERY( item <* SELF\Classification_assignment.items | 
	NOT ('AP210_PRODUCTION_RULE_ARM_LF.CLASSIFICATION_ITEM' IN TYPEOF(item) ) )) = 0;

WR2: SELF\Classification_assignment.assigned_class.id = 'reference';
END_ENTITY;

ENTITY Part_view_definition
  SUBTYPE OF (Product_view_definition);
  SELF\Product_view_definition.defined_version : Part_version;
END_ENTITY;

ENTITY Independent_property_representation
  SUBTYPE OF (Property_definition_representation);
    SELF\Property_definition_representation.definition : Independent_property;  -- property : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
    DERIVE
      property : INDEPENDENT_PROPERTY := SELF\Property_definition_representation.definition;  -- DEFINITION : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE

END_ENTITY;

ENTITY Applied_independent_property
  SUBTYPE OF (Assigned_property);
  base_independent_property : Independent_property;
DERIVE
  SELF\Assigned_property.name : STRING := base_independent_property.property_type;
END_ENTITY;

ENTITY Assigned_property;
  id : OPTIONAL STRING;
  name : STRING;
  description : OPTIONAL STRING;
  described_element : property_assignment_select;
END_ENTITY;

ENTITY Property_definition_representation
   ABSTRACT SUPERTYPE;
    description : OPTIONAL STRING;
    definition : represented_definition;
    rep : Representation;
    role : OPTIONAL STRING;
END_ENTITY;

ENTITY Property_representation
  SUBTYPE OF (Property_definition_representation);
    SELF\Property_definition_representation.definition : Assigned_property;  -- property : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
    DERIVE
      property : ASSIGNED_PROPERTY := SELF\Property_definition_representation.definition;  -- DEFINITION : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE

END_ENTITY;

ENTITY Language;
  language_code : STRING;
  country_code : OPTIONAL STRING;
UNIQUE
  UR1: language_code;
END_ENTITY;

ENTITY Language_indication;
   considered_instance: string_select;
   considered_attribute: STRING;
   used_language:  Language;
END_ENTITY;

ENTITY Attribute_translation_assignment;
   considered_instance: string_select;
   considered_attribute: STRING;
   translation_text : STRING;
   translation_language: Language;
UNIQUE
  UR1: considered_instance, considered_attribute, translation_language;
END_ENTITY;

ENTITY Organization_or_person_in_organization_assignment  SUPERTYPE OF (ONEOF (
               PRE_DEFINED_ORGANIZATION_OR_PERSON_IN_ORGANIZATION_ASSIGNMENT,
               EXTERNALLY_DEFINED_ORGANIZATION_OR_PERSON_IN_ORGANIZATION_ASSIGNMENT) ) ;
  assigned_entity : organization_or_person_in_organization_select;
  role            : STRING;
  items           : SET [1:?] OF organization_or_person_in_organization_item;
END_ENTITY;

ENTITY Project;
  id : STRING;
  name : STRING;
  description : OPTIONAL STRING;
  responsible_organizations : SET[0:?] OF Organization;
  planned_start_date : OPTIONAL date_or_event;
  planned_end_date : OPTIONAL date_or_event;
  actual_start_date : OPTIONAL date_or_date_time_select;
  actual_end_date : OPTIONAL date_or_date_time_select;
END_ENTITY;

ENTITY Project_assignment;
  assigned_project : Project;
  role : STRING;
  items : SET[1:?] OF project_item;
END_ENTITY;

ENTITY Project_relationship;
  relation_type : STRING;
  description : OPTIONAL STRING;
  relating_project : Project;
  related_project : Project;
END_ENTITY;

ENTITY Measure_item
    ABSTRACT SUPERTYPE OF (ONEOF (
                        MEASURE_ITEM_WITH_PRECISION,
                        NUMERICAL_ITEM_WITH_GLOBAL_UNIT,
                        NUMERICAL_ITEM_WITH_UNIT,
                        VALUE_LIMIT,
                        VALUE_LIMIT_WITH_GLOBAL_UNIT,
                        VALUE_LIST,
                        VALUE_RANGE,
                        VALUE_RANGE_WITH_GLOBAL_UNIT,
                        VALUE_SET,
                        VALUE_WITH_TOLERANCES) ) 
  SUBTYPE OF (Representation_item);
WHERE
  WR1: SIZEOF(USEDIN(SELF, 'AP210_PRODUCTION_RULE_ARM_LF.REPRESENTATION.ITEMS'))>0;
END_ENTITY;

ENTITY Numerical_item_with_global_unit
  SUBTYPE OF (Measure_item);
  value_component : measure_value;
WHERE
  WR1: SIZEOF(QUERY(pvr <* QUERY ( r <* USEDIN(SELF, 'AP210_PRODUCTION_RULE_ARM_LF.REPRESENTATION.ITEMS')| 'AP210_PRODUCTION_RULE_ARM_LF.PROPERTY_VALUE_REPRESENTATION' IN TYPEOF(r)) | EXISTS(pvr.context_of_items.units) )) > 0;
END_ENTITY;

ENTITY Numerical_item_with_unit
  SUBTYPE OF (Measure_item, Value_with_unit);
END_ENTITY;

ENTITY Property_value_representation
    SUPERTYPE OF (ONEOF (
               RANGE_CHARACTERISTIC,
               TOLERANCE_CHARACTERISTIC) ) 
      SUBTYPE OF (Representation);
  SELF\Representation.context_of_items : Numerical_representation_context;
END_ENTITY;

ENTITY Make_from_relationship
  SUBTYPE OF (View_definition_usage);
  SELF\View_definition_relationship.relating_view: Part_view_definition;
  SELF\View_definition_relationship.related_view: Part_view_definition;
  quantity  : OPTIONAL Value_with_unit;
  priority  : OPTIONAL INTEGER;
WHERE
WR1: SELF\View_definition_relationship.relating_view :<>: 
  SELF\View_definition_relationship.related_view ;
WR2: NOT(EXISTS(quantity)) XOR 
	((NOT ('NUMBER' IN TYPEOF(quantity.value_component))) XOR (quantity.value_component > 0));
END_ENTITY;

ENTITY Activity_property;
  name : STRING;
  description : STRING;
  described_element : characterized_activity_definition;
END_ENTITY;

ENTITY Activity_property_representation;
  description : OPTIONAL STRING;
  property : Activity_property;
  rep : Representation;
  role : STRING;
END_ENTITY;

ENTITY Applied_independent_activity_property
  SUBTYPE OF (Activity_property);
  base_element_property : Independent_property;
DERIVE
  SELF\Activity_property.name : STRING := base_element_property.property_type;
END_ENTITY;

ENTITY Alternate_product_relationship;
   name : OPTIONAL STRING;
   description : OPTIONAL STRING;
   alternate_product : Product;
   base_product : Product;
   criteria : OPTIONAL STRING;
UNIQUE
   UR1: alternate_product , base_product ;
WHERE
   WR1: alternate_product  :<>: base_product ;
   WR2: EXISTS(criteria) OR (TYPEOF(SELF\Alternate_product_relationship) <> TYPEOF(SELF));
END_ENTITY;

ENTITY Assembly_relationship_substitution;
  name : OPTIONAL STRING;
  description : OPTIONAL STRING;
  base_relationship        : Assembly_component_relationship;
  substitute_relationship  : Assembly_component_relationship;
UNIQUE
  UR1 : base_relationship, substitute_relationship;
WHERE
  WR1: base_relationship.relating_view :=: substitute_relationship.relating_view;
  WR2: base_relationship :<>: substitute_relationship;
END_ENTITY;

ENTITY Alternate_part_relationship
  SUBTYPE OF (Alternate_product_relationship);
  SELF\Alternate_product_relationship.alternate_product : Part;
  SELF\Alternate_product_relationship.base_product : Part;
END_ENTITY;

ENTITY Product_version_relationship;
  relation_type : OPTIONAL STRING;
  description : OPTIONAL STRING;
  relating_version : Product_version;
  related_version : Product_version;
WHERE
  WR1: relating_version :<>: related_version;
  WR2: EXISTS(relation_type) OR (TYPEOF(SELF\Product_version_relationship) <> TYPEOF(SELF));
END_ENTITY;

ENTITY Supplied_part_relationship
  SUBTYPE OF (Product_version_relationship);
WHERE
  WR1: SELF\Product_version_relationship.relation_type IN ['supplied item', 'supplied document'];
END_ENTITY;

ENTITY Contextual_item_shape
  SUBTYPE OF (Item_shape);
  SELF\Item_shape.described_element : View_definition_usage;
DERIVE
  shaped_product : Product_view_definition := described_element\View_definition_relationship.related_view;
END_ENTITY;

ENTITY Item_shape;
  id : OPTIONAL STRING;
  description : OPTIONAL STRING;
  described_element : shapeable_item;
END_ENTITY;

ENTITY Shape_dependent_property_representation;
  characteristic_type : STRING;
  description : OPTIONAL STRING;
  described_element : shape_dependent_select;
  property_representation : Representation;
END_ENTITY;

ENTITY Shape_description_association;
  represented_characteristic : shape_select;
  representation : shape_model;
  role : OPTIONAL STRING;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Shape_element;
  id : OPTIONAL STRING;
  element_name : OPTIONAL STRING;
  description : OPTIONAL STRING;
  containing_shape : Item_shape;
WHERE
  WR1: EXISTS(element_name) OR (TYPEOF(SELF\Shape_element) <> TYPEOF(SELF));
END_ENTITY;

ENTITY Shape_element_relationship;
  relation_type : OPTIONAL STRING;
  description : OPTIONAL STRING;
  relating : Shape_element;
  related : Shape_element;
WHERE
  WR1: EXISTS(relation_type) OR (TYPEOF(SELF\Shape_element_relationship) <> TYPEOF(SELF));
END_ENTITY;

ENTITY Time_interval_assignment;
  assigned_time_interval : Time_interval;
  role : Time_interval_role;
  items : SET[1:?] OF time_interval_item;
END_ENTITY;

ENTITY Time_interval_role;
  name : STRING;
  description : STRING;
END_ENTITY;

ENTITY Directed_activity
  SUBTYPE OF (Activity);
  directive : Work_order;
END_ENTITY;

ENTITY Work_order;
  name : STRING;
  description : OPTIONAL STRING;
  in_response_to : SET[0:?] OF Work_request;
END_ENTITY;

ENTITY Activity_method_assignment;
  relation_type : STRING;
  assigned_method : Activity_method;
  associated_request : Work_request;
END_ENTITY;

ENTITY Affected_items_assignment;
  assigned_work_request : Work_request;
  items : SET[1:?] OF affected_item_select;
END_ENTITY;

ENTITY Work_request  SUPERTYPE OF (ONEOF (
               PRE_DEFINED_WORK_REQUEST,
               EXTERNALLY_DEFINED_WORK_REQUEST) ) ;
  request_id : STRING;
  version_id : STRING;
  description : OPTIONAL STRING;
  purpose : STRING;
END_ENTITY;

ENTITY Work_request_status  SUPERTYPE OF (ONEOF (
               PRE_DEFINED_WORK_REQUEST_STATUS,
               EXTERNALLY_DEFINED_WORK_REQUEST_STATUS) ) ;
  status : STRING;
  work_request : Work_request;
END_ENTITY;

	ENTITY Definition_based_product_occurrence
		 ABSTRACT SUPERTYPE
		SUBTYPE OF (Product_occurrence);
  		derived_from: Product_view_definition;
  	WHERE
			WR1: SELF\Product_view_definition.defined_version = derived_from.defined_version;
	END_ENTITY;

ENTITY Product_occurrence
 ABSTRACT SUPERTYPE OF (ONEOF (
                        PRODUCT_OCCURRENCE_WITH_QUANTITY,
                        SINGLE_INSTANCE)
                        AND (ONEOF (
                        DEFINITION_BASED_PRODUCT_OCCURRENCE,
                        SPECIFICATION_BASED_PRODUCT_OCCURRENCE)))

SUBTYPE OF (Product_view_definition);
INVERSE
  occurrence_contexts: SET[1:?] OF View_definition_relationship FOR related_view;
END_ENTITY;

ENTITY Product_occurrence_with_quantity
   ABSTRACT SUPERTYPE OF (ONEOF (
                        QUANTIFIED_INSTANCE,
                        SELECTED_INSTANCE))
  SUBTYPE OF (Product_occurrence);
  occurrence_quantity : OPTIONAL extended_value_with_unit;
END_ENTITY;

ENTITY Quantified_instance
  SUBTYPE OF (Product_occurrence_with_quantity);
  SELF\Product_occurrence_with_quantity.occurrence_quantity : Value_with_unit;
END_ENTITY;

ENTITY Selected_instance
  SUBTYPE OF (Product_occurrence_with_quantity);
  quantity_criterion : OPTIONAL STRING;
END_ENTITY;

ENTITY Single_instance
  SUBTYPE OF (Product_occurrence);
END_ENTITY;

ENTITY Specification_based_product_occurrence
   ABSTRACT SUPERTYPE
  SUBTYPE OF (Product_occurrence);
  SELF\Product_view_definition.defined_version : Specification_based_product_version;
END_ENTITY;

ENTITY Product_specification
SUBTYPE OF (Product_configuration);
  version_id: OPTIONAL STRING;
  SELF\Product_configuration.item_context: Product_class;
  defining_specifications: SET [0:?] OF Specification;
END_ENTITY;

ENTITY Specification_based_product_version
SUBTYPE OF (Product_version);
INVERSE
  specification_source: Item_design_association FOR design;
WHERE
WR1 : 'AP210_PRODUCTION_RULE_ARM_LF.PRODUCT_SPECIFICATION' IN TYPEOF(specification_source.configuration);
END_ENTITY;

ENTITY Requirement_view_definition
  SUBTYPE OF (Product_view_definition);
    SELF\Product_view_definition.defined_version : Requirement_version;
END_ENTITY;

ENTITY Requirement
  SUBTYPE OF (Product);
END_ENTITY;

ENTITY Requirement_version
  SUBTYPE OF (Product_version);
  SELF\Product_version.of_product : Requirement;
END_ENTITY;

ENTITY Requirement_version_relationship
  SUBTYPE OF (Product_version_relationship);
  SELF\Product_version_relationship.relating_version : Requirement_version;  -- predecessor : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
  SELF\Product_version_relationship.related_version : Requirement_version;  -- successor : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
    DERIVE
      predecessor : REQUIREMENT_VERSION := SELF\Product_version_relationship.relating_version;  -- RELATING_VERSION : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE
      successor : REQUIREMENT_VERSION := SELF\Product_version_relationship.related_version;  -- RELATED_VERSION : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE

END_ENTITY;

  ENTITY Characteristic_data_table
    SUBTYPE OF (Characterizable_object, Measure_item);
      property_value : LIST[1:?] OF Characteristic_data_table_row;
      index_value    : LIST[1:?] OF INTEGER;
    UNIQUE
      UR1: SELF\Characterizable_object.name;
    WHERE
      WR1: SIZEOF(property_value) = SIZEOF(index_value);
      WR2: SIZEOF(QUERY( pv <* property_value |
                  NOT (SIZEOF(pv.property_value) = SIZEOF(property_value[1].property_value))
                  )) = 0;
      WR3: SIZEOF(USEDIN
                 (SELF,'AP210_PRODUCTION_RULE_ARM_LF.ASSIGNED_PROPERTY.DESCRIBED_ELEMENT')) = 0;
  END_ENTITY;

  ENTITY Characteristic_data_table_row
    SUBTYPE OF (Measure_item);
      property_value : LIST[1:?] OF list_characteristic;
  END_ENTITY;

  ENTITY Expanded_uncertainty
    SUBTYPE OF (Standard_uncertainty);
      coverage_factor : REAL;
  END_ENTITY;

  ENTITY Length_tolerance_characteristic
    SUBTYPE OF(Tolerance_characteristic);
    WHERE
      WR1 : ('AP210_PRODUCTION_RULE_ARM_LF.STATISTICAL_TOLERANCE_CHARACTERISTIC' IN TYPEOF(SELF)) OR
            ('AP210_PRODUCTION_RULE_ARM_LF.SYMMETRICAL_TOLERANCE_CHARACTERISTIC' IN TYPEOF(SELF)) OR
            ('AP210_PRODUCTION_RULE_ARM_LF.PLUS_MINUS_TOLERANCE_CHARACTERISTIC' IN TYPEOF(SELF)) OR
        (SIZEOF(QUERY(it <* SELF\Representation.items |
          NOT('AP210_PRODUCTION_RULE_ARM_LF.LENGTH_DATA_ELEMENT' IN TYPEOF(it))
         )) = 0);
      WR2 : NOT('AP210_PRODUCTION_RULE_ARM_LF.SYMMETRICAL_TOLERANCE_CHARACTERISTIC' IN TYPEOF(SELF)) OR
        (SIZEOF(QUERY(it <* SELF\Representation.items |
        ('AP210_PRODUCTION_RULE_ARM_LF.LENGTH_DATA_ELEMENT' IN TYPEOF(it))
           )) = 1);
      WR3 : NOT('AP210_PRODUCTION_RULE_ARM_LF.STATISTICAL_TOLERANCE_CHARACTERISTIC' IN TYPEOF(SELF)) OR
        (SIZEOF(QUERY(it <* SELF\Representation.items |
        ('AP210_PRODUCTION_RULE_ARM_LF.LENGTH_DATA_ELEMENT' IN TYPEOF(it))
           )) = 1);
      WR4 : NOT EXISTS(SELF\Representation.description);
      WR5 : ('AP210_PRODUCTION_RULE_ARM_LF.PLUS_MINUS_TOLERANCE_CHARACTERISTIC' IN TYPEOF(SELF)) OR
        (SIZEOF(QUERY(it <* SELF\Representation.items |
          NOT(('AP210_PRODUCTION_RULE_ARM_LF.VALUE_WITH_TOLERANCES' IN TYPEOF(it)) AND
             ('AP210_PRODUCTION_RULE_ARM_LF.LENGTH_DATA_ELEMENT' IN TYPEOF(it\Value_with_tolerances.item_value)))
         )) = 0);
  END_ENTITY;

  ENTITY Logical_representation_item
    SUBTYPE OF (String_representation_item);
    WHERE 
      WR1: SELF\Representation_item.name IN ['.BOOLEAN.', '.LOGICAL.'];
      WR2: SELF\String_representation_item.string_value IN ['.TRUE.', '.FALSE.','.UNKNOWN.', '.UNDEFINED.'];
      WR3: NOT (SELF\Representation_item.name = '.BOOLEAN.') OR
        (SELF\String_representation_item.string_value IN ['.TRUE.', '.FALSE.', '.UNDEFINED.']);
  END_ENTITY;

  ENTITY Maximum_tolerance_characteristic
    SUBTYPE OF (Tolerance_characteristic);
      SELF\Representation.items : SET [1:1] OF Value_limit;
    WHERE
      WR1: SELF\Representation.items[1]\Value_limit.limit_qualifier = limit_qualifier_list.maximum;
  END_ENTITY;

  ENTITY Measure_qualification;
      name              : STRING; 
      description       : STRING; 
      qualified_measure : Value_with_unit;
      qualifiers        : SET[1:?] OF value_qualifier;
  END_ENTITY;

  ENTITY Minimum_tolerance_characteristic
    SUBTYPE OF (Tolerance_characteristic);
      SELF\Representation.items : SET [1:1] OF Value_limit;
    WHERE
      WR1: SELF\Representation.items[1]\Value_limit.limit_qualifier = limit_qualifier_list.minimum;
  END_ENTITY;

  ENTITY Nominal_tolerance_characteristic
    SUBTYPE OF (Tolerance_characteristic);
      SELF\Representation.items : SET[1:1] OF Numerical_item_with_unit;
  END_ENTITY;

  ENTITY Plus_minus_tolerance_characteristic
    SUBTYPE OF (Tolerance_characteristic);
      SELF\Representation.items : SET [1:1] OF Value_with_tolerances;
  END_ENTITY;

  ENTITY Precision_qualifier;
      precision_value : INTEGER;
  END_ENTITY;

  ENTITY Qualitative_uncertainty
    SUBTYPE OF (Uncertainty_qualifier);
      uncertainty_value : STRING; 
  END_ENTITY;

  ENTITY Range_characteristic
    SUBTYPE OF (Property_value_representation);
      SELF\Representation.items : SET[2:2] OF Numerical_item_with_unit;
      range_type				: range_class;
  WHERE
    WR1 : TYPEOF(SELF\Representation.items[1]) =
          TYPEOF(SELF\Representation.items[2]);
    WR2 : TYPEOF(SELF\Representation.items[1]\Value_with_unit.unit) =
          TYPEOF(SELF\Representation.items[2]\Value_with_unit.unit);
    WR3 : valid_range(SELF\Representation.items[1],
                      SELF\Representation.items[2]);          
  END_ENTITY;

  ENTITY Standard_uncertainty
    SUPERTYPE OF (
              EXPANDED_UNCERTAINTY)
  SUBTYPE OF (Uncertainty_qualifier);
      uncertainty_value : REAL;
  END_ENTITY;

  ENTITY Statistical_tolerance_characteristic
    SUBTYPE OF (Tolerance_characteristic);
      SELF\Representation.items : SET [2:?] OF Numerical_item_with_unit;
  END_ENTITY;

  ENTITY Symmetrical_tolerance_characteristic
    SUBTYPE OF (Tolerance_characteristic);
      SELF\Representation.items : SET[2:2] OF Numerical_item_with_unit;
    WHERE
      WR1: SIZEOF(QUERY( ri <* 
         SELF\representation.items |
        'AP210_PRODUCTION_RULE_ARM_LF.RATIO_DATA_ELEMENT' IN TYPEOF(ri))) = 1;
  END_ENTITY;

  ENTITY Text_representation_item
  	SUBTYPE OF (String_representation_item);
  END_ENTITY;

  ENTITY Tolerance_characteristic
     ABSTRACT SUPERTYPE OF ((ONEOF (
                        MINIMUM_TOLERANCE_CHARACTERISTIC,
                        STATISTICAL_TOLERANCE_CHARACTERISTIC,
                        SYMMETRICAL_TOLERANCE_CHARACTERISTIC,
                        MAXIMUM_TOLERANCE_CHARACTERISTIC,
                        PLUS_MINUS_TOLERANCE_CHARACTERISTIC,
                        NOMINAL_TOLERANCE_CHARACTERISTIC))
                        ANDOR 
                        LENGTH_TOLERANCE_CHARACTERISTIC)
  SUBTYPE OF (Property_value_representation);
    WHERE
      WR1: SELF\Representation.context_of_items\Representation_context.id = 'tolerance values';
      WR2 : NOT EXISTS(SELF\Representation.name);
  END_ENTITY;

  ENTITY Type_qualifier;
      name : STRING;
  END_ENTITY;

  ENTITY Uncertainty_qualifier
    SUPERTYPE OF (ONEOF (
              STANDARD_UNCERTAINTY,
              QUALITATIVE_UNCERTAINTY));
      measure_name : STRING; 
      description  : STRING; 
  END_ENTITY;

ENTITY Characterizable_object;
  name : STRING;
  description : OPTIONAL STRING;
END_ENTITY;

ENTITY Absorbed_dose_data_element
  SUBTYPE OF (Value_with_unit);
END_ENTITY;

  ENTITY Activity_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Amount_of_substance_data_element
    SUBTYPE OF (Value_with_unit);
    WHERE
		WR1 : 'AP210_PRODUCTION_RULE_ARM_LF.AMOUNT_OF_SUBSTANCE_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);
  END_ENTITY;

  ENTITY Angle_data_element
    SUBTYPE OF (Value_with_unit);
    WHERE
		WR1 : 'AP210_PRODUCTION_RULE_ARM_LF.PLANE_ANGLE_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);
  END_ENTITY;

  ENTITY Area_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Capacitance_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Celsius_temperature_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Conductance_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Dose_equivalent_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Electric_charge_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Electric_current_data_element
    SUBTYPE OF (Value_with_unit);
    WHERE
		WR1 : 'AP210_PRODUCTION_RULE_ARM_LF.ELECTRIC_CURRENT_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);
  END_ENTITY;

  ENTITY Electromotive_force_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Energy_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Force_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Frequency_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Illuminance_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Inductance_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Length_data_element
    SUBTYPE OF (Value_with_unit);
    WHERE
      WR1 : SELF\Value_with_unit.value_component >= 0.0;
	  WR2 : 'AP210_PRODUCTION_RULE_ARM_LF.LENGTH_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);
  END_ENTITY;

  ENTITY Luminous_flux_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Luminous_intensity_data_element
    SUBTYPE OF (Value_with_unit);
    WHERE
		WR1 : 'AP210_PRODUCTION_RULE_ARM_LF.LUMINOUS_INTENSITY_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);
  END_ENTITY;

  ENTITY Magnetic_flux_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Magnetic_flux_density_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Mass_data_element
    SUBTYPE OF (Value_with_unit);
    WHERE
		WR1 : 'AP210_PRODUCTION_RULE_ARM_LF.MASS_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);
  END_ENTITY;

  ENTITY Power_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Pressure_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Ratio_data_element
    SUBTYPE OF (Value_with_unit);
    WHERE
		WR1 : 'AP210_PRODUCTION_RULE_ARM_LF.RATIO_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);
  END_ENTITY;

  ENTITY Resistance_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

  ENTITY Scattering_parameter_data_element
    SUBTYPE OF (Value_with_unit);
      angle : REAL;

      SELF\Value_with_unit.value_component : REAL;            -- radius : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, an attribute with the new name is in the DERIVE clause
    DERIVE
      radius : REAL := SELF\Value_with_unit.value_component;  -- VALUE_COMPONENT : This ATTRIBUTE was RENAMED in the EXPRESS E2 source, this is the new name implemented as DERIVE
 WHERE
      WR1 : radius >= 0;
      WR2 : {0<=angle<6.28218519999};
  END_ENTITY;

  ENTITY Solid_angle_data_element
    SUBTYPE OF (Value_with_unit);
    WHERE
		WR1 : 'AP210_PRODUCTION_RULE_ARM_LF.SOLID_ANGLE_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);
  END_ENTITY;

  ENTITY Thermodynamic_temperature_data_element
    SUBTYPE OF (Value_with_unit);
    WHERE
		WR1 : 'AP210_PRODUCTION_RULE_ARM_LF.THERMODYNAMIC_TEMPERATURE_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);
  END_ENTITY;

  ENTITY Volume_data_element
    SUBTYPE OF (Value_with_unit);
  END_ENTITY;

ENTITY Included_text_block
  SUBTYPE OF (Representation_item);
  source : Structured_text_representation;
END_ENTITY;

 ENTITY Structured_text_composition
   SUBTYPE OF (Representation_item);
  content: string_representation_item_list_or_set;
 END_ENTITY;

ENTITY Structured_text_representation
  SUBTYPE OF (Representation);
  SELF\Representation.items : SET [1:1] OF string_representation_item_select; 
END_ENTITY;

ENTITY Tagged_text_item
  SUBTYPE OF (String_representation_item);
WHERE
  WR1: SIZEOF (QUERY (using_rep <* USEDIN(SELF,
       'AP210_PRODUCTION_RULE_ARM_LF.REPRESENTATION.ITEMS') |
  NOT ('AP210_PRODUCTION_RULE_ARM_LF.TAGGED_TEXT_FORMAT' IN
  TYPEOF (using_rep.context_of_items))
       )) = 0;
END_ENTITY;

ENTITY Tagged_text_format
  SUBTYPE OF (Representation_context);
END_ENTITY;

ENTITY Uniform_resource_identifier
  SUBTYPE OF (String_representation_item);
END_ENTITY;

ENTITY Information_product
   ABSTRACT SUPERTYPE
 	SUBTYPE OF (Product);
  WHERE
    WR1 : SIZEOF(['document', 'information'] * types_of_product(SELF)) = 0;
END_ENTITY;

ENTITY Information_version
  SUBTYPE OF (Product_version);
  SELF\Product_version.of_product : Information_product;
END_ENTITY;

ENTITY Information_definition
  SUBTYPE OF (Product_view_definition);
  SELF\Product_view_definition.defined_version : Information_version;
END_ENTITY;

ENTITY Part
  SUBTYPE OF (Product);
WHERE
  WR1: SIZEOF(['part', 'raw material', 'tool']*types_of_product(SELF))=1;
END_ENTITY;

ENTITY Part_version
  SUBTYPE OF (Product_version);
  SELF\Product_version.of_product : Part;
END_ENTITY;

ENTITY Contextual_shape_representation;
   contextual_shape : Contextual_item_shape;
   representing_relationship : Geometric_model_relationship;
 DERIVE
   context_representation : Geometric_model := representing_relationship.rep_2 ;
   positioned_representation : Geometric_model := representing_relationship.rep_1 ;
END_ENTITY;

ENTITY Geometric_composition_with_operator_transformation
  SUBTYPE OF (Geometric_relationship_with_operator_transformation,
Definitional_representation_relationship);
END_ENTITY;

ENTITY Geometric_composition_with_placement_transformation
  SUBTYPE OF (Geometric_relationship_with_placement_transformation,
Definitional_representation_relationship);
END_ENTITY; 

ENTITY Geometric_placement
  SUBTYPE OF (Geometric_placement_operation);
   target : Axis_placement;
END_ENTITY; 

ENTITY Geometric_placement_model
  SUBTYPE OF (Geometric_model);
  SELF\Representation.items : SET[1:1] OF Geometric_placement_operation;
END_ENTITY;

ENTITY Geometric_placement_operation
   ABSTRACT SUPERTYPE OF (ONEOF (
                        GEOMETRIC_PLACEMENT,
                        GEOMETRIC_OPERATOR_TRANSFORMATION))
  SUBTYPE OF (Detailed_geometric_model_element);
   source : Axis_placement;  
   template_definition : template_definition_select;
END_ENTITY; 

ENTITY Geometric_model_relationship_with_transformation
   ABSTRACT SUPERTYPE OF (ONEOF (
                        GEOMETRIC_RELATIONSHIP_WITH_PLACEMENT_TRANSFORMATION,
                        GEOMETRIC_RELATIONSHIP_WITH_OPERATOR_TRANSFORMATION))
  SUBTYPE OF (Geometric_model_relationship);
WHERE  
  WR1: rep_1.context_of_items <> rep_2.context_of_items;
END_ENTITY;

ENTITY Geometric_operator_transformation
  SUBTYPE OF (Geometric_placement_operation);
   target : cartesian_transformation;
END_ENTITY; 

ENTITY Geometric_relationship_with_operator_transformation
  SUBTYPE OF (Geometric_model_relationship_with_transformation);
  transformation: cartesian_transformation;
WHERE
  WR1:  rep_1.context_of_items\Geometric_coordinate_space.dimension_count :=:
        rep_2.context_of_items\Geometric_coordinate_space.dimension_count;
END_ENTITY;

ENTITY Geometric_relationship_with_placement_transformation
  SUBTYPE OF (Geometric_model_relationship_with_transformation);
  transformation: Axis_placement_mapping;
WHERE
  WR1:  rep_1.context_of_items\Geometric_coordinate_space.dimension_count :=:
        rep_2.context_of_items\Geometric_coordinate_space.dimension_count;
END_ENTITY;

ENTITY Shape_placement_association
  SUBTYPE OF (Shape_description_association);
  SELF\Shape_description_association.representation : Geometric_placement_model;
  SELF\Shape_description_association.represented_characteristic : Contextual_item_shape;
END_ENTITY;

  ENTITY Axis_placement_2d
    SUBTYPE OF (Axis_placement);
--  WHERE
--    WR1: NOT EXISTS (SELF\Representation_item.name);
  END_ENTITY;

  ENTITY Axis_placement_3d
    SUBTYPE OF (Axis_placement);
--  WHERE
--    WR1: NOT EXISTS (SELF\Representation_item.name);
  END_ENTITY;

  ENTITY Definitional_representation_relationship
    SUBTYPE OF (Representation_relationship);
   WHERE
    WR1: acyclic_representation_relationship(SELF,
       [SELF\representation_relationship.rep_2],
       'AP210_PRODUCTION_RULE_ARM_LF.'+
       'REPRESENTATION');
  END_ENTITY;  

  ENTITY Detailed_geometric_model_element_relationship;
    item_1: Detailed_geometric_model_element;
    item_2: Detailed_geometric_model_element;
   WHERE 
    WR1: item_1 <> item_2;
  END_ENTITY;

  ENTITY Geometric_model_relationship
   SUBTYPE OF (Representation_relationship);
      SELF\Representation_relationship.rep_1 : Geometric_model;
      SELF\Representation_relationship.rep_2 : Geometric_model;
    WHERE
      WR1 : rep_1 <> rep_2;
  END_ENTITY;

  ENTITY Geometric_model_element_relationship
    SUBTYPE OF (Detailed_geometric_model_element_relationship, Detailed_geometric_model_element);
  END_ENTITY;

 ENTITY Vector
    SUBTYPE OF (Detailed_geometric_model_element);
      orientation: Direction;
      magnitude: length_measure;
    WHERE
      WR1 : magnitude >= 0.0 ;
--      WR2: NOT EXISTS (SELF\Representation_item.name);
 END_ENTITY;

 ENTITY Class_category_association;
  associated_product_class : Product_class;
  mandatory : BOOLEAN;
  associated_category : Specification_category;
 END_ENTITY;

 ENTITY Class_condition_association;
  condition_type : STRING;
  associated_product_class : Product_class;
  description : OPTIONAL STRING;
  associated_condition : Specification_expression;
 END_ENTITY;

 ENTITY Class_inclusion_association;
  associated_product_class : Product_class;
  description : OPTIONAL STRING;
  associated_inclusion : Specification_inclusion;
 END_ENTITY;

 ENTITY Class_specification_association;
  associated_product_class : Product_class;
  association_type : STRING;
  associated_specification : Specification;
 END_ENTITY;

ENTITY Product_class
  SUBTYPE OF (Product_concept);
  version_id : OPTIONAL STRING;
  level_type : OPTIONAL STRING;
WHERE
WR1: NOT EXISTS(SELF\Product_concept.target_market);
END_ENTITY;

 ENTITY Product_class_relationship;
  description : OPTIONAL STRING;
  relating : Product_class;
  related : Product_class;
  relation_type : STRING;
 END_ENTITY;

 ENTITY Specification;
  id : STRING;
  version_id : OPTIONAL STRING;
  name : OPTIONAL STRING;
  description : OPTIONAL STRING;
  category : Specification_category;
  package : BOOLEAN;
 END_ENTITY;

 ENTITY Specification_category;
  id : STRING;
  description : STRING;
  implicit_exclusive_condition : BOOLEAN;
 END_ENTITY;

 ENTITY Specification_category_hierarchy;
  sub_category : Specification_category;
  super_category : Specification_category;
 END_ENTITY;

 ENTITY Specification_expression;
  id : OPTIONAL STRING;
  description : OPTIONAL STRING;
  operation : expression_operator;
  operand : SET[1:?] OF specification_operand_select;
 WHERE
 WR1: (operation <> not_operator) OR (SIZEOF(operand)=1); 
 END_ENTITY;

 ENTITY Specification_inclusion;
  id : OPTIONAL STRING;
  description : OPTIONAL STRING;
  if_condition : specification_operand_select;
  included_specification : specification_operand_select;
 END_ENTITY;

     ENTITY Curve
       SUBTYPE OF (Detailed_geometric_model_element);
--       WHERE
--         WR1: NOT EXISTS (SELF\Representation_item.name);
     END_ENTITY;

     ENTITY Line
       SUBTYPE OF (Curve);
     END_ENTITY;

     ENTITY Plane
       SUBTYPE OF (Surface);
     END_ENTITY;

     ENTITY Point_on_curve
       SUBTYPE OF (Detailed_geometric_model_element);
       supporting_curve : Curve;
--       WHERE
--         WR1: NOT EXISTS (SELF\Representation_item.name);
     END_ENTITY;

     ENTITY Point_on_surface
       SUBTYPE OF (Detailed_geometric_model_element);
       supporting_surface : Surface;
--       WHERE
--         WR1: NOT EXISTS (SELF\Representation_item.name);
     END_ENTITY;

     ENTITY Surface
       SUBTYPE OF (Detailed_geometric_model_element);
--     WHERE
--       WR1: NOT EXISTS (SELF\Representation_item.name);
     END_ENTITY;

FUNCTION types_of_product
 (obj : Product) : SET OF STRING; 
 LOCAL
 	category_assignments: BAG OF Product_category_assignment;
 	categories: SET OF STRING:=[];
 	i: INTEGER;
 END_LOCAL;
 
 category_assignments := USEDIN(obj,'AP210_PRODUCTION_RULE_ARM_LF.' + 'PRODUCT_CATEGORY_ASSIGNMENT.PRODUCTS');
    
 REPEAT i := LOINDEX(category_assignments) TO HIINDEX(category_assignments) BY 1;
       categories := categories + category_assignments[i].category.name;
 END_REPEAT;
 
 RETURN(categories);
       END_FUNCTION; 

FUNCTION local_vars_aux (thing : GENERIC; accum : SET [0:?] OF Scalar_variable) 
                                                : SET [0:?] OF Scalar_variable;
  LOCAL i,j,k : INTEGER; END_LOCAL;
  IF (('AP210_PRODUCTION_RULE_ARM_LF.ABSTRACT_VARIABLE' IN TYPEOF(thing)) AND 
      ('AP210_PRODUCTION_RULE_ARM_LF.RULE_DEFINITION' IN (TYPEOF(thing.scope))))
   THEN accum := accum + thing;
   ELSE IF ('AP210_PRODUCTION_RULE_ARM_LF.RULE_CONDITION' IN TYPEOF(thing))
        THEN REPEAT i := 1 TO HIINDEX(thing\Atomic_formula.terms);
                accum := local_vars_aux(thing\Atomic_formula.terms[i],accum);
             END_REPEAT;
        ELSE IF ('AP210_PRODUCTION_RULE_ARM_LF.SIMPLE_CLAUSE' IN TYPEOF(thing))
             THEN REPEAT j := 1 TO HIINDEX(thing.formulas);
                        accum := local_vars_aux(thing.formulas[j],accum);
                  END_REPEAT;
             ELSE IF ('AP210_PRODUCTION_RULE_ARM_LF.COMPLEX_CLAUSE' IN TYPEOF(thing))
                  THEN REPEAT k := 1 TO HIINDEX(thing.clauses);
                        accum := local_vars_aux(thing.clauses[k],accum);
                       END_REPEAT;
                  END_IF;
             END_IF;
        END_IF;
  END_IF;
  RETURN(accum);
END_FUNCTION;

FUNCTION contains_variable (x : Term_select) : BOOLEAN;
  IF ('AP210_PRODUCTION_RULE_ARM_LF.ABSTRACT_VARIABLE' IN TYPEOF(x)) THEN RETURN (TRUE);
      ELSE IF (('AP210_PRODUCTION_RULE_ARM_LF.FUNC' IN TYPEOF(X)) AND
              (SIZEOF(QUERY(y <* x.terms | contains_variable(y))) > 0)) 
              THEN RETURN (TRUE);
              ELSE RETURN (FALSE);
           END_IF;
  END_IF;
END_FUNCTION;

  FUNCTION bag_to_set(
    the_bag : BAG OF GENERIC : intype
  ) : SET OF GENERIC : intype;

    LOCAL
      the_set : SET OF GENERIC : intype := [];
      i       : INTEGER;
    END_LOCAL;

    IF SIZEOF(the_bag) > 0 THEN
      REPEAT i := 1 TO HIINDEX(the_bag);
        the_set := the_set + the_bag[i];
      END_REPEAT;
    END_IF;
    RETURN(the_set);
  END_FUNCTION;

FUNCTION local_vars_of (thing : GENERIC) : SET [0:?] OF Scalar_variable;
  LOCAL
    accum : SET [0:?] OF Scalar_variable := [];
  END_LOCAL;
  RETURN (local_vars_aux(thing, accum));
END_FUNCTION;

FUNCTION get_document_definition(
	input : documented_element_select;
	role : STRING;
	type_name : STRING
) : SET OF Document_definition; 

LOCAL
	dd : SET[0:?] OF Document_definition := [];  --this gives us access to the information base
	da : SET[0:?] OF Document_assignment :=[];
END_LOCAL;
	da := bag_to_set(QUERY(dr <* USEDIN (input, 'AP210_PRODUCTION_RULE_ARM_LF.'+
	'DOCUMENT_ASSIGNMENT.IS_ASSIGNED_TO') | (dr.role = role)));

	-- iterate over da
	REPEAT i := 1 to SIZEOF(da) by 1;
		IF(type_name IN TYPEOF (da[i].assigned_document))THEN
			dd := dd + da[i].assigned_document;
		END_IF;
	END_REPEAT;
	RETURN(dd);
END_FUNCTION;

FUNCTION valid_document_property_representation
 (rep : Document_property_representation) : LOGICAL; 

CASE rep.name OF
'document content': 
   BEGIN
RETURN (
  SIZEOF(QUERY( items <* rep\Representation.items | 
  NOT (items.name IN ['detail level', 'geometry type', 'real world scale'])))= 0
 );
   END;

'document creation': 
   BEGIN
IF NOT (SIZEOF(QUERY( items <* rep\Representation.items | 
  NOT (items.name IN ['creating interface', 'creating system', 'operating system'])))= 0
 ) THEN
  RETURN(FALSE);
END_IF;
IF NOT (SIZEOF(QUERY( items <* rep\Representation.items | 
  NOT (items.name IN ['creating system'])))= 1
 ) THEN
  RETURN(FALSE);
ELSE
  RETURN(TRUE);
END_IF;

   END;

'document format': 
   BEGIN
RETURN (
  SIZEOF(QUERY( items <* rep\Representation.items | 
  NOT (items.name IN ['character code', 'data format', 'size format', 'size format standard'])))= 0
 );
   END;

'document size': 
   BEGIN
RETURN (
  SIZEOF(QUERY( items <* rep\Representation.items | 
  NOT (items.name IN ['file size', 'page count'])))= 0
 );
   END;

OTHERWISE:
  RETURN(UNKNOWN);
END_CASE;
        END_FUNCTION; 

  FUNCTION valid_range(input1 : Numerical_item_with_unit;
                       input2 : Numerical_item_with_unit) : BOOLEAN;
   RETURN(TRUE);
  END_FUNCTION; 

FUNCTION acyclic_representation_relationship
 (relation : representation_relationship; relatives : SET[1:?] OF representation; specific_relation : STRING) : BOOLEAN; 
 LOCAL
      x : SET OF representation_relationship;
    END_LOCAL;

    IF relation.rep_1 IN relatives THEN
      RETURN (FALSE);
    END_IF;
    x := QUERY(r <* bag_to_set(USEDIN(relation.rep_1, 'AP210_PRODUCTION_RULE_ARM_LF.' + 'REPRESENTATION_RELATIONSHIP.' + 'REP_2')) | specific_relation IN TYPEOF(r));
    REPEAT i := 1 TO HIINDEX(x);
      IF NOT acyclic_representation_relationship(x[i], relatives + relation.rep_1, specific_relation) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
    RETURN (TRUE);
END_FUNCTION; 

RULE rule_software_definition_constraint FOR (Product_view_definition);
WHERE
   WR1: SIZEOF (QUERY ( pvd <* Product_view_definition | ( NOT('AP210_PRODUCTION_RULE_ARM_LF.' + 'RULE_SOFTWARE_DEFINITION' 
                       IN TYPEOF(pvd))) 
                       AND ('AP210_PRODUCTION_RULE_ARM_LF.' + 'RULE_VERSION' IN TYPEOF (pvd . defined_version)))) = 0 ;
END_RULE; 

RULE unique_product_version_id FOR
    (Product);
WHERE
  WR1:  SIZEOF(QUERY (p <* Product | 
   (SIZEOF (QUERY (pv1 <*
USEDIN(p,'AP210_PRODUCTION_RULE_ARM_LF.PRODUCT_VERSION.OF_PRODUCT') |  
   (SIZEOF (QUERY (pv2 <*
USEDIN(p,'AP210_PRODUCTION_RULE_ARM_LF.PRODUCT_VERSION.OF_PRODUCT')
|  pv1.id = pv2.id)) > 1)
     )) > 0)
   )) = 0;  
END_RULE;

RULE unique_product_view_definition_id FOR
    (Product_version);
WHERE
  WR1:  SIZEOF(QUERY (pv <* Product_version | 
   (SIZEOF (QUERY (pvd1 <*
USEDIN(pv,'AP210_PRODUCTION_RULE_ARM_LF.PRODUCT_VIEW_DEFINITION.DEFINED_VERSION') |  
     (SIZEOF (QUERY (pvd2 <*
USEDIN(pv,'AP210_PRODUCTION_RULE_ARM_LF.PRODUCT_VIEW_DEFINITION.DEFINED_VERSION')
|  pvd1.id = pvd2.id)) > 1)
     )) > 0)
   )) = 0;  
END_RULE;

RULE unique_document_id FOR
    (Document);
WHERE
  WR1:  SIZEOF(QUERY (p1 <* Document | SIZEOF(QUERY (p2 <* Document | 
              (NOT(p1 :=: p2) AND (p1.id = p2.id)))) > 0 )) = 0;
END_RULE;

RULE unique_requirement_id FOR
    (Requirement);
WHERE
  WR1:  SIZEOF(QUERY (p1 <* Requirement | SIZEOF(QUERY (p2 <* Requirement | 
              (NOT(p1 :=: p2) AND (p1.id = p2.id)))) > 0 )) = 0;
END_RULE;

RULE unique_part_id FOR
    (Part);
WHERE
  WR1:  SIZEOF(QUERY (p1 <* Part | SIZEOF(QUERY (p2 <* Part | 
              (NOT(p1 :=: p2) AND (p1.id = p2.id)))) > 0 )) = 0;
END_RULE;

RULE rule_version_constraint FOR (Product_version);
WHERE
   WR1: SIZEOF (QUERY(pv <* Product_version | (NOT('AP210_PRODUCTION_RULE_ARM_LF.' + 'RULE_VERSION' IN TYPEOF(pv))) 
                      AND ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'RULE_PRODUCT' IN TYPEOF(pv.of_product)))) = 0 ;
END_RULE;

RULE max_one_entity_prefix FOR (Enum_reference_prefix);
 WHERE
   SIZEOF(QUERY(x <* Enum_reference_prefix | TRUE)) <= 1;
END_RULE;

RULE software_version_constraint FOR 
(Product_version);
WHERE
  WR1: SIZEOF ( QUERY ( pv <* Product_version | ( NOT ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'SOFTWARE_VERSION' IN TYPEOF ( pv) ) ) AND ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'SOFTWARE' IN TYPEOF ( pv.of_product) ) ) ) =0 ;
END_RULE; 

RULE document_version_constraint FOR 
(Product_version);
WHERE
  WR1: SIZEOF ( QUERY ( pv <* Product_version | ( NOT ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'DOCUMENT_VERSION' IN TYPEOF ( pv) ) ) AND ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'DOCUMENT' IN TYPEOF ( pv.of_product) ) ) ) = 0 ;
END_RULE; 

RULE software_definition_constraint FOR 
(Product_view_definition);
WHERE
  WR1: SIZEOF ( QUERY ( pvd <* Product_view_definition | ( NOT ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'SOFTWARE_DEFINITION' IN TYPEOF (pvd) ) ) AND ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'SOFTWARE_VERSION' IN TYPEOF ( pvd.defined_version) ) ) ) =0 ;
END_RULE; 

RULE document_definition_constraint FOR 
(Product_view_definition);
WHERE
  WR1: SIZEOF ( QUERY ( dd <* Product_view_definition | ( NOT ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'DOCUMENT_DEFINITION' IN TYPEOF (dd) ) ) AND ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'DOCUMENT_VERSION' IN TYPEOF ( dd.defined_version) ) ) ) =0;
END_RULE; 

RULE part_version_constraint FOR 
(Product_version);
WHERE
  WR1: SIZEOF ( QUERY ( pv <* Product_version | ( NOT ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'PART_VERSION' IN TYPEOF ( pv) ) ) AND ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'PART' IN TYPEOF ( pv.of_product) ) ) ) =0 ;
END_RULE; 

RULE part_view_definition_constraint FOR 
(Product_view_definition);
WHERE
  WR1: SIZEOF ( QUERY ( pvd <* Product_view_definition | ( NOT ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'PART_VIEW_DEFINITION' IN TYPEOF (pvd) ) ) AND ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'PART_VERSION' IN TYPEOF ( pvd.defined_version) ) ) ) =0 ;
END_RULE; 

RULE Information_product_version_constraint FOR
(Product_version);
WHERE
  WR1: SIZEOF ( QUERY ( pv <* Product_version | ( NOT (
  'AP210_PRODUCTION_RULE_ARM_LF.' + 'INFORMATION_VERSION' IN TYPEOF
  ( pv) ) ) AND ( 'AP210_PRODUCTION_RULE_ARM_LF.' + 'INFORMATION_PRODUCT' IN TYPEOF (
pv.of_product) ) ) ) =0 ;
END_RULE; 

(* E2: SUBTYPE_CONSTRAINT alternate_geometry_items FOR DETAILED_GEOMETRIC_MODEL_ELEMENT; *)

(* E2: SUBTYPE_CONSTRAINT exclusive_property_value_representation_characteristic FOR PROPERTY_VALUE_REPRESENTATION; *)

(* E2: SUBTYPE_CONSTRAINT ttr_string_representation_item_subtypes FOR STRING_REPRESENTATION_ITEM; *)

(* E2: SUBTYPE_CONSTRAINT pdpdms_approval_subtypes FOR APPROVAL; *)

(* E2: SUBTYPE_CONSTRAINT pdpdms_approval_status_subtypes FOR APPROVAL_STATUS; *)

(* E2: SUBTYPE_CONSTRAINT pdpdms_address_assignment_subtypes FOR ADDRESS_ASSIGNMENT; *)

(* E2: SUBTYPE_CONSTRAINT pdpdms_security_classification_subtypes FOR SECURITY_CLASSIFICATION; *)

(* E2: SUBTYPE_CONSTRAINT alternate_extended_geometry_items FOR DETAILED_GEOMETRIC_MODEL_ELEMENT; *)

(* E2: SUBTYPE_CONSTRAINT alternate_measure_items FOR MEASURE_ITEM; *)

(* E2: SUBTYPE_CONSTRAINT axis_placement_subtypes FOR AXIS_PLACEMENT; *)

(* E2: SUBTYPE_CONSTRAINT pdpdms_organization_or_person_in_organization_assignment_subtypes FOR ORGANIZATION_OR_PERSON_IN_ORGANIZATION_ASSIGNMENT; *)

(* E2: SUBTYPE_CONSTRAINT pdpdms_work_request_subtypes FOR WORK_REQUEST; *)

(* E2: SUBTYPE_CONSTRAINT pdpdms_work_request_status_subtypes FOR WORK_REQUEST_STATUS; *)

(* E2: SUBTYPE_CONSTRAINT pdpdms_activity_relationship_subtypes FOR ACTIVITY_RELATIONSHIP; *)

(* E2: SUBTYPE_CONSTRAINT pdpdms_date_or_date_time_assignment_subtypes FOR DATE_OR_DATE_TIME_ASSIGNMENT; *)

(* E2: SUBTYPE_CONSTRAINT value_with_unit_subtypes FOR VALUE_WITH_UNIT; *)


END_SCHEMA;

