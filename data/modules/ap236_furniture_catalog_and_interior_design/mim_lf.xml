<?xml version='1.0' encoding='UTF-8'?>
<!-- $Id: express2xml.js,v 1.38 2004/08/24 16:58:55 thendrix Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml2.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.38"
    source="../data/modules/ap236_furniture_catalog_and_interior_design/mim_lf.exp"/>

  <schema name="AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF">

    <constant name="dummy_gri"
      expression="representation_item('')|| geometric_representation_item()">
      <typename
        name="geometric_representation_item"/>
    </constant>

    <constant name="dummy_tri"
      expression="representation_item('')|| topological_representation_item()">
      <typename
        name="topological_representation_item"/>
    </constant>

    <type name="property_variable_rep_select">
      <select
        selectitems="dimensional_size representation">
      </select>
    </type>

    <type name="expression_extension_select">
      <select
        selectitems="expression_extension_string expression_extension_numeric">
      </select>
    </type>

    <entity
      name="expression_extension_numeric"
      supertypes="measure_with_unit numeric_expression">
    </entity>

    <entity
      name="expression_extension_string"
      supertypes="measure_with_unit string_expression">
    </entity>

    <entity
      name="expression_extension_to_select">
      <explicit
        name="type_expression_associated">
        <typename
          name="expression_extension_select"/>
      </explicit>
    </entity>

    <entity
      name="variable_expression"
      supertypes="variable_semantics">
      <explicit
        name="property_associated">
        <typename
          name="property_variable_rep_select"/>
      </explicit>
    </entity>

    <type name="element_component_classification_item">
      <select
        basedon="classification_item"
        selectitems="opening">
      </select>
    </type>

    <entity
      name="element_component_classification_group"
      supertypes="group">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ga &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'CLASSIFICATION_ASSIGNMENT.ASSIGNED_CLASS') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'APPLIED_CLASSIFICATION_ASSIGNMENT' IN TYPEOF (ga)))&gt;= 1">
      </where>
    </entity>

    <entity
      name="negative_component"
      supertypes="shape_aspect">
      <where
        label="WR1"
        expression="SIZEOF (TYPEOF (SELF.of_shape.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT' ]) = 1">
      </where>
    </entity>

    <entity
      name="opening"
      supertypes="negative_component">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (aca &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ELEMENT_COMPONENT_CLASSIFICATION_GROUP' IN TYPEOF(aca\classification_assignment.assigned_class))) = 1">
      </where>
    </entity>

    <entity
      name="positive_component"
      supertypes="shape_aspect">
      <where
        label="WR1"
        expression="SIZEOF (TYPEOF (SELF.of_shape.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT' ]) = 1">
      </where>
    </entity>

    <entity
      name="recess"
      supertypes="negative_component">
    </entity>

    <entity
      name="building_element"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION' IN TYPEOF (pdr.relating_product_definition)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT' IN TYPEOF (pdr.relating_product_definition))))) = 1">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION.DEFINITION') | SIZEOF (QUERY (sa &lt;* USEDIN(pd, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'SHAPE_ASPECT.OF_SHAPE') |(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_COMPONENT' IN TYPEOF (sa)) AND(sa.description = 'main')))) = 1)) = 1">
      </where>
    </entity>

    <entity
      name="fixture_equipment_element"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION' IN TYPEOF (pdr.relating_product_definition)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT' IN TYPEOF (pdr.relating_product_definition))))) = 1">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pds &lt;* QUERY (pd &lt;* USEDIN (SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION.DEFINITION') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_SHAPE' IN TYPEOF (pd)) | SIZEOF (QUERY (sa &lt;* USEDIN (pds, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'SHAPE_ASPECT.OF_SHAPE') |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_COMPONENT' IN TYPEOF (sa)) AND(sa.description = 'main'))) = 1)) = 1">
      </where>
    </entity>

    <entity
      name="service_element"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION' IN TYPEOF (pdr.relating_product_definition)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT' IN TYPEOF (pdr.relating_product_definition))))) = 1">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pds &lt;* QUERY (pd &lt;* USEDIN (SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION.DEFINITION') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_SHAPE' IN TYPEOF (pd)) | SIZEOF (QUERY (sa &lt;* USEDIN(pds, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'SHAPE_ASPECT.OF_SHAPE') |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_COMPONENT' IN TYPEOF (sa)) AND(sa.description = 'main'))) = 1)) = 1">
      </where>
    </entity>

    <entity
      name="space_element"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION' IN TYPEOF (pdr.relating_product_definition))) = 1">
      </where>
    </entity>

    <entity
      name="structure_enclosure_element"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION' IN TYPEOF (pdr.relating_product_definition)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT' IN TYPEOF (pdr.relating_product_definition))))) = 1">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pds &lt;* QUERY (pd &lt;* USEDIN (SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION.DEFINITION') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_SHAPE' IN TYPEOF (pd)) | SIZEOF (QUERY (sa &lt;* USEDIN (pds, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'SHAPE_ASPECT.OF_SHAPE') |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_COMPONENT' IN TYPEOF (sa)) AND(sa.description = 'main'))) = 1)) = 1">
      </where>
    </entity>

    <type name="building_design_organization_item">
      <select
        basedon="organization_item"
        selectitems="building">
      </select>
    </type>

    <type name="building_design_person_item">
      <select
        basedon="person_and_organization_item"
        selectitems="building">
      </select>
    </type>

    <entity
      name="building"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (bdpa &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'APPLIED_PERSON_AND_ORGANIZATION_ASSIGNMENT.ITEMS') | bdpa.role.name = 'owner')) + SIZEOF (QUERY (bdoa &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'APPLIED_ORGANIZATION_ASSIGNMENT.ITEMS') | bdoa.role.name = 'owner')) = 1">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PRODUCT_DEFINITION_RELATIONSHIP.RELATING_PRODUCT_DEFINITION') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION' IN TYPEOF (pdr.related_product_definition))) &gt;= 1">
      </where>
    </entity>

    <entity
      name="building_element_assembly"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (acu &lt;* QUERY (pdr &lt;* USEDIN (SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_RELATIONSHIP.' +'RELATING_PRODUCT_DEFINITION') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ASSEMBLY_COMPONENT_USAGE' IN TYPEOF (pdr)) | SIZEOF (TYPEOF (acu.related_product_definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FIXTURE_EQUIPMENT_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SERVICE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRUCTURE_ENCLOSURE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT_ASSEMBLY']) = 1)) &gt;= 1">
      </where>
    </entity>

    <entity
      name="building_level"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION' IN TYPEOF (pdr.relating_product_definition))) = 1">
      </where>
    </entity>

    <entity
      name="building_section"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN(SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING' IN TYPEOF (pdr.relating_product_definition))) = 1">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN (SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DEFINITION_RELATIONSHIP.RELATING_PRODUCT_DEFINITION') | SIZEOF (TYPEOF (pdr.related_product_definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_LEVEL','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FIXTURE_EQUIPMENT_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SERVICE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRUCTURE_ENCLOSURE_ELEMENT']) = 1)) &gt;= 1">
      </where>
    </entity>

    <rule
      name="building_element_maps_into_building_section_or_space"
      appliesto="mapped_item representation_relationship_with_transformation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (mi &lt;* mapped_item |(SIZEOF (QUERY (pdr &lt;* USEDIN(mi.mapping_source.mapped_representation,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FIXTURE_EQUIPMENT_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SERVICE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRUCTURE_ENCLOSURE_ELEMENT']) = 1)) &gt;= 1) AND(SIZEOF (QUERY (r &lt;* USEDIN (mi,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION.ITEMS') | SIZEOF (QUERY (pdr &lt;* USEDIN(r,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT']) &gt;= 1))=1))= 0))) = 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (rrwt &lt;* representation_relationship_with_transformation |(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt\representation_relationship.rep_2,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FIXTURE_EQUIPMENT_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SERVICE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRUCTURE_ENCLOSURE_ELEMENT']) = 1)) &gt;= 1) AND(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt\representation_relationship.rep_1,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT']) &gt;= 1)) = 0))) = 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (rrwt_1 &lt;* representation_relationship_with_transformation | SIZEOF (QUERY (rrwt_2 &lt;* representation_relationship_with_transformation |(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt_1\representation_relationship.rep_2,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FIXTURE_EQUIPMENT_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SERVICE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRUCTURE_ENCLOSURE_ELEMENT']) = 1)) &gt;= 1) AND(rrwt_1\representation_relationship.rep_2 :=: rrwt_2\representation_relationship.rep_2))) &gt;= 1)) = 0">
      </where>
    </rule>

    <rule
      name="space_or_building_level_maps_into_building_section"
      appliesto="mapped_item representation_relationship_with_transformation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (mi &lt;* mapped_item |(SIZEOF (QUERY (pdr &lt;* USEDIN(mi.mapping_source.mapped_representation,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_LEVEL']) = 1)) &gt;= 1) AND(NOT (SIZEOF (QUERY (r &lt;* USEDIN (mi,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION.ITEMS') | SIZEOF (QUERY (pdr &lt;* USEDIN(r,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION' IN TYPEOF(pdr.definition.definition)))) &gt;= 1)) = 1)))) = 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (rrwt &lt;* representation_relationship_with_transformation |(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt\representation_relationship.rep_2,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_LEVEL']) = 1)) &gt;= 1) AND(NOT (SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt\representation_relationship.rep_1,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_SECTION' IN TYPEOF (pdr.definition.definition)))) = 1)))) = 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (rrwt_1 &lt;* representation_relationship_with_transformation | SIZEOF (QUERY (rrwt_2 &lt;* representation_relationship_with_transformation |(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt_1\representation_relationship.rep_2,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPACE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_LEVEL']) = 1)) &gt;= 1) AND(rrwt_1\representation_relationship.rep_2 :=: rrwt_2\representation_relationship.rep_2))) &gt;= 1)) = 0">
      </where>
    </rule>

    <rule
      name="building_element_component_maps_into_building_element"
      appliesto="mapped_item representation_relationship_with_transformation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (mi &lt;* mapped_item |(SIZEOF (QUERY (pdr &lt;* USEDIN(mi.mapping_source.mapped_representation,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NEGATIVE_COMPOMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_COMPOMENT']) = 1)) &gt;= 1) AND(SIZEOF (QUERY (r &lt;* USEDIN (mi,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION.ITEMS') | SIZEOF (QUERY (pdr &lt;* USEDIN(r,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FIXTURE_EQUIPMENT_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SERVICE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRUCTURE_ENCLOSURE_ELEMENT']) &gt;= 1))=1))= 0))) = 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (rrwt &lt;* representation_relationship_with_transformation |(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt\representation_relationship.rep_2,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NEGATIVE_COMPOMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_COMPOMENT']) = 1)) &gt;= 1) AND(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt\representation_relationship.rep_1,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BUILDING_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FIXTURE_EQUIPMENT_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SERVICE_ELEMENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRUCTURE_ENCLOSURE_ELEMENT']) &gt;= 1)) = 0))) = 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (rrwt_1 &lt;* representation_relationship_with_transformation | SIZEOF (QUERY (rrwt_2 &lt;* representation_relationship_with_transformation |(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt_1\representation_relationship.rep_2,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NEGATIVE_COMPONENT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_COMPONENT']) = 1)) &gt;= 1) AND(rrwt_1\representation_relationship.rep_2 :=: rrwt_2\representation_relationship.rep_2))) &gt;= 1)) = 0">
      </where>
    </rule>

    <rule
      name="building_section_maps_into_building"
      appliesto="mapped_item representation_relationship_with_transformation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (mi &lt;* mapped_item |(SIZEOF (QUERY (pdr &lt;* USEDIN(mi.mapping_source.mapped_representation,'FURNITURE_INTERIOR_DECORATION_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['FURNITURE_INTERIOR_DECORATION_MIM_LF.BUILDING_SECTION']) = 1)) &gt;= 1) AND(NOT (SIZEOF (QUERY (r &lt;* USEDIN (mi,'FURNITURE_INTERIOR_DECORATION_MIM_LF.'+'REPRESENTATION.ITEMS') | SIZEOF (QUERY (pdr &lt;* USEDIN(r,'FURNITURE_INTERIOR_DECORATION_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |('FURNITURE_INTERIOR_DECORATION_MIM_LF.BUILDING' IN TYPEOF (pdr.definition.definition)))) &gt;= 1)) = 1)))) = 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (rrwt &lt;* representation_relationship_with_transformation |(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt\representation_relationship.rep_2,'FURNITURE_INTERIOR_DECORATION_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) *['FURNITURE_INTERIOR_DECORATION_MIM_LF.BUILDING_SECTION']) = 1)) &gt;= 1) AND(NOT (SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt\representation_relationship.rep_1,'FURNITURE_INTERIOR_DECORATION_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |('FURNITURE_INTERIOR_DECORATION_MIM_LF.BUILDING' IN TYPEOF (pdr.definition.definition)))) = 1)))) = 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (rrwt_1 &lt;* representation_relationship_with_transformation | SIZEOF (QUERY (rrwt_2 &lt;* representation_relationship_with_transformation |(SIZEOF (QUERY (pdr &lt;* USEDIN(rrwt_1\representation_relationship.rep_2,'FURNITURE_INTERIOR_DECORATION_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | SIZEOF (TYPEOF (pdr.definition.definition) * ['FURNITURE_INTERIOR_DECORATION_MIM_LF.BUILDING_SECTION']) = 1)) &gt;= 1) AND(rrwt_1\representation_relationship.rep_2 :=: rrwt_2\representation_relationship.rep_2))) &gt;= 1)) = 0">
      </where>
    </rule>

    <type name="attribute_language_item_236cc2">
      <select
        extensible="YES"
        basedon="attribute_language_item_236cc1"
        selectitems="geometric_tolerance topological_representation_item">
      </select>
    </type>

    <type name="multi_language_attribute_item_236cc2">
      <select
        extensible="YES"
        basedon="multi_language_attribute_item_236cc1"
        selectitems="geometric_tolerance topological_representation_item">
      </select>
    </type>

    <rule
      name="dependent_instantiable_dimensional_size"
      appliesto="dimensional_size">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (d &lt;* dimensional_size | NOT (SIZEOF (USEDIN (d , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_tolerance_value"
      appliesto="tolerance_value">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (t &lt;* tolerance_value | NOT (SIZEOF (USEDIN (t , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_geometric_tolerance"
      appliesto="geometric_tolerance">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* geometric_tolerance | NOT allowed_translations (ent, ['description', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_topological_representation_item"
      appliesto="topological_representation_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* topological_representation_item | NOT allowed_translations (ent, ['name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_representation_item_for_hybrid_geometric_model_3d"
      appliesto="shape_representation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (sr &lt;* shape_representation |(sr. name ='hybrid 3d shape representation') AND(SIZEOF (QUERY (i &lt;* sr. items | NOT ('CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.GEOMETRIC_REPRESENTATION_ITEM' IN TYPEOF (i)))) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="restrict_zone_boundary"
      appliesto="tolerance_zone_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (tzd &lt;* tolerance_zone_definition | SIZEOF(tzd. boundaries) &gt;2)) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_founded_item"
      appliesto="founded_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (fi &lt;* founded_item | NOT (type_check_function (fi ,['CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.COMPOSITE_CURVE_SEGMENT' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.SURFACE_PATCH' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.VIEW_VOLUME'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_representation"
      appliesto="representation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (r &lt;* representation | NOT (type_check_function (r ,['CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.CONSTRUCTIVE_GEOMETRY_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.CONTACT_RATIO_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.DEFAULT_TOLERANCE_TABLE' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.DEFINITIONAL_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.HARDNESS_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.MOMENTS_OF_INERTIA_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.PRESENTATION_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.SHAPE_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.SURFACE_TEXTURE_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.SYMBOL_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.TACTILE_APPEARANCE_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.TEXT_STRING_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.VISUAL_APPEARANCE_REPRESENTATION'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_shape_aspect_relationship"
      appliesto="shape_aspect_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (sar &lt;* shape_aspect_relationship | NOT (type_check_function (sar ,['CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.DIMENSIONAL_LOCATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.SHAPE_ASPECT_ASSOCIATIVITY' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.SHAPE_ASPECT_DERIVING_RELATIONSHIP'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_shape_representation_geometry"
      appliesto="shape_representation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (sr &lt;* shape_representation | NOT (type_check_function (sr ,['CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.ADVANCED_BREP_SHAPE_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.CSG_SHAPE_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.EDGE_BASED_WIREFRAME_SHAPE_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.FACETED_BREP_SHAPE_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.GEOMETRICALLY_BOUNDED_2D_WIREFRAME_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.GEOMETRICALLY_BOUNDED_SURFACE_SHAPE_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.GEOMETRICALLY_BOUNDED_WIREFRAME_SHAPE_REPRESENTATION' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.MANIFOLD_SURFACE_SHAPE_REPRESENTATION'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_mandatory_founded_item"
      appliesto="founded_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (fi &lt;* founded_item | NOT (type_check_function (fi ,['CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.COMPOSITE_CURVE_SEGMENT' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.SURFACE_PATCH' ,'CATALOG_DATA_INFORMATION_AND_SHAPE_REPRESENTATION' + '.VIEW_VOLUME'] , 0)))) =0">
      </where>
    </rule>

    <entity
      name="placed_datum_target_feature"
      supertypes="datum_target">
      <derived
        name="representation_associations"
        expression="get_shape_aspect_property_definition_representations(SELF)">
        <aggregate
          type="SET"
          lower="0"
          upper="?"/>
        <typename
          name="property_definition_representation"/>
      </derived>
      <where
        label="WR1"
        expression="SELF.description IN ['point','line','rectangle','circle', 'circular line']">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pdr &lt;* representation_associations | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_REPRESENTATION_WITH_PARAMETERS' IN TYPEOF (pdr.used_representation))) = 1">
      </where>
      <where
        label="WR3"
        expression="valid_datum_target_parameters(SELF)">
      </where>
    </entity>

    <entity
      name="shape_representation_with_parameters"
      supertypes="shape_representation">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(i &lt;* SELF.items | SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLACEMENT', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DESCRIPTIVE_REPRESENTATION_ITEM'] * TYPEOF(i)) = 1)) = SIZEOF(SELF.items)">
      </where>
    </entity>

    <rule
      name="subtype_exclusiveness_geometric_tolerance"
      appliesto="geometric_tolerance">
      <where
        label="WR1"
        expression="SIZEOF(QUERY (gt &lt;* geometric_tolerance | NOT (type_check_function(gt, ['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANGULARITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CIRCULAR_RUNOUT_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COAXIALITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CONCENTRICITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CYLINDRICITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FLATNESS_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LINE_PROFILE_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PARALLELISM_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PERPENDICULARITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITION_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ROUNDNESS_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRAIGHTNESS_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_PROFILE_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMMETRY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TOTAL_RUNOUT_TOLERANCE'] , 3)))) = 0">
      </where>
    </rule>

    <rule
      name="subtype_mandatory_geometric_tolerance"
      appliesto="geometric_tolerance">
      <where
        label="WR1"
        expression="SIZEOF(QUERY (gt &lt;* geometric_tolerance | NOT (type_check_function(gt, ['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANGULARITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CIRCULAR_RUNOUT_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COAXIALITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CONCENTRICITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CYLINDRICITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FLATNESS_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LINE_PROFILE_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PARALLELISM_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PERPENDICULARITY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITION_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ROUNDNESS_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRAIGHTNESS_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_PROFILE_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMMETRY_TOLERANCE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TOTAL_RUNOUT_TOLERANCE'] , 0)))) = 0">
      </where>
    </rule>

    <function
      name="get_shape_aspect_property_definition_representations">
      <parameter
        name="s_a_instance">
        <typename
          name="shape_aspect"/>
      </parameter>
      <aggregate
        type="SET"/>
      <typename
        name="property_definition_representation"/>
      <algorithm>
LOCAL
pd_set : SET OF property_definition := [];
pdr_set : SET OF property_definition_representation := [] ;
END_LOCAL;
pd_set := bag_to_set(USEDIN(s_a_instance, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION.DEFINITION'));
IF (SIZEOF(pd_set) &lt; 1) THEN
RETURN (pdr_set);
END_IF;
REPEAT i := 1 TO HIINDEX(pd_set);
pdr_set := pdr_set + (QUERY(pdr &lt;* USEDIN(pd_set[i], 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PROPERTY_DEFINITION_REPRESENTATION.' + 'DEFINITION') |
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_DEFINITION_REPRESENTATION' IN TYPEOF(pdr)));
END_REPEAT;
RETURN (pdr_set);
      </algorithm>
    </function>

    <function
      name="valid_datum_target_parameters">
      <parameter
        name="pdf">
        <typename
          name="placed_datum_target_feature"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
LOCAL
rep_set : SET OF representation := [] ;
parameter_representations: SET OF representation;
END_LOCAL;
REPEAT i := 1 TO HIINDEX(pdf.representation_associations);
rep_set := rep_set + pdf.representation_associations[i].used_representation;
END_REPEAT;
parameter_representations := QUERY(rep &lt;* rep_set |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_REPRESENTATION_WITH_PARAMETERS' IN
TYPEOF(rep)));
IF (SIZEOF(QUERY(srwp &lt;* parameter_representations |
(SIZEOF(QUERY(i &lt;* srwp.items |
(i.name='orientation') AND
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLACEMENT' IN TYPEOF(i)))) = 1))) &lt;&gt; 1) THEN
RETURN(FALSE);
END_IF;
CASE pdf\shape_aspect.description OF
'point': RETURN(SIZEOF(QUERY(srwp &lt;* parameter_representations |
(SIZEOF(srwp.items) = 1))) = 1);
'circle': RETURN((SIZEOF(QUERY(srwp &lt;* parameter_representations |
(SIZEOF(srwp.items) = 2))) = 1) AND
(SIZEOF(QUERY(srwp &lt;* parameter_representations |
(SIZEOF(QUERY(i &lt;* srwp.items |
(i.name='target diameter') AND
(SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM',
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LENGTH_MEASURE_WITH_UNIT']*TYPEOF(i)
) = 2))) = 1))) = 1));
'line': RETURN(SIZEOF(QUERY(srwp &lt;* parameter_representations |
(SIZEOF(QUERY(i &lt;* srwp.items |
(i.name='target length') AND
(SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM',
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LENGTH_MEASURE_WITH_UNIT']*TYPEOF(i)
) = 2))) = 1))) = 1);
'rectangle': RETURN((SIZEOF(QUERY(srwp &lt;* parameter_representations |
(SIZEOF(srwp.items)= 3))) = 1) AND
(SIZEOF(QUERY(srwp &lt;* parameter_representations |
(SIZEOF(QUERY(i &lt;* srwp.items |
(i.name='target length') AND
(SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM',
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LENGTH_MEASURE_WITH_UNIT']*TYPEOF(i)
) = 2))) = 1))) = 1) AND
(SIZEOF(QUERY(srwp &lt;* parameter_representations |
(SIZEOF(QUERY(i &lt;* srwp.items |
(i.name='target width') AND
(SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM',
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LENGTH_MEASURE_WITH_UNIT']*TYPEOF(i)
) = 2))) = 1))) = 1));
OTHERWISE : RETURN(FALSE);
END_CASE;
      </algorithm>
    </function>

    <entity
      name="contact_ratio_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="(SIZEOF (SELF.items) =1) AND (SIZEOF (QUERY (i &lt;* SELF.items | (SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'MEASURE_REPRESENTATION_ITEM' , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'VALUE_RANGE']* TYPEOF (i)) =1) AND (i.name ='ratio value'))) =1)">
      </where>
      <where
        label="WR2"
        expression="(SIZEOF (QUERY (pdr &lt;* USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION') | pdr. name ='contact ratio reference')) =1) AND (SIZEOF (QUERY (pdr &lt;* USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION') | (pdr. name ='contact ratio reference') AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PHYSICALLY_MODELLED_PRODUCT_DEFINITION' IN TYPEOF (pdr. definition.definition)))) =1)">
      </where>
      <where
        label="WR3"
        expression="(SIZEOF (USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION')) =1) AND (SIZEOF (QUERY (pdr&lt;* USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION') | SIZEOF (QUERY (gpa &lt;* USEDIN (pdr. definition ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY_ASSOCIATION.'+'DERIVED_DEFINITION') | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY' IN TYPEOF (gpa. base_definition)) AND(gpa. base_definition.name ='surface_condition'))) =1)) =1)">
      </where>
    </entity>

    <entity
      name="hardness_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="({2&lt;= SIZEOF (SELF.items) &lt;=4}) AND (SIZEOF (QUERY (i &lt;* items | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i)) AND (i.name IN [ 'measuring method' , 'measuring position' ]))) + SIZEOF (QUERY (i &lt;* items | (SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'MEASURE_REPRESENTATION_ITEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'VALUE_RANGE']* TYPEOF (i)) =1) AND (i.name IN ['depth' , 'hardness']))) = SIZEOF (SELF.items))">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | i.name ='measuring method')) =1">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | i.name ='hardness'))=1">
      </where>
      <where
        label="WR4"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | i.name ='measuring position')) &lt;=1">
      </where>
      <where
        label="WR5"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | i.name ='depth'))&lt;=1">
      </where>
      <where
        label="WR6"
        expression="(SIZEOF (USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION')) =1) AND (SIZEOF (QUERY (pdr&lt;* USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION') | SIZEOF (QUERY (gpa &lt;* USEDIN (pdr. definition ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY_ASSOCIATION.'+'DERIVED_DEFINITION') | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY' IN TYPEOF (gpa. base_definition)) AND(gpa. base_definition.name ='surface_condition'))) =1)) =1)">
      </where>
    </entity>

    <entity
      name="physically_modelled_product_definition"
      supertypes="product_definition">
      <where
        label="WR1"
        expression="SELF.frame_of_reference\application_context_element.name = 'physical model occurrence'">
      </where>
      <where
        label="WR2"
        expression="'document' IN categories_of_product(SELF\product_definition.formation.of_product)">
      </where>
    </entity>

    <entity
      name="surface_texture_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'MEASURE_REPRESENTATION_ITEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'VALUE_RANGE' , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'DESCRIPTIVE_REPRESENTATION_ITEM']* TYPEOF (i)) &lt;&gt;1))=0">
      </where>
      <where
        label="WR2"
        expression="(SIZEOF (QUERY (i &lt;* SELF.items | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i))) =1) AND (SIZEOF (QUERY (i &lt;* SELF.items | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i)) AND (i.name = 'measuring method'))) =1)">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'MEASURE_REPRESENTATION_ITEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'VALUE_RANGE']* TYPEOF (i)) =1))&gt;0">
      </where>
      <where
        label="WR4"
        expression="(SIZEOF (USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION_RELATIONSHIP.'+'REP_1')) &lt;=1) AND (SIZEOF (USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION_RELATIONSHIP.'+'REP_2')) =0) AND (SIZEOF (QUERY (rr &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION_RELATIONSHIP.'+'REP_1') | rr. rep_2.name = 'measuring direction')) = SIZEOF (USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION_RELATIONSHIP.'+'REP_1')))">
      </where>
      <where
        label="WR5"
        expression="(SIZEOF (USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION')) =1) AND (SIZEOF (QUERY (pdr&lt;* USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION') | SIZEOF (QUERY (gpa &lt;* USEDIN (pdr. definition ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY_ASSOCIATION.'+'DERIVED_DEFINITION') | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY' IN TYPEOF (gpa. base_definition)) AND(gpa. base_definition.name ='surface_condition'))) =1)) =1)">
      </where>
    </entity>

    <entity
      name="tactile_appearance_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'MEASURE_REPRESENTATION_ITEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'VALUE_RANGE']* TYPEOF (i)) &lt;&gt;1)) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | name ='depth')) &lt;=1">
      </where>
      <where
        label="WR3"
        expression="(SIZEOF (USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION')) =1) AND (SIZEOF (QUERY (pdr&lt;* USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION') | SIZEOF (QUERY (gpa &lt;* USEDIN (pdr. definition ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY_ASSOCIATION.'+'DERIVED_DEFINITION') | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY' IN TYPEOF (gpa. base_definition)) AND(gpa. base_definition.name ='surface_condition'))) =1)) =1)">
      </where>
    </entity>

    <entity
      name="visual_appearance_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="({2&lt;= SIZEOF (SELF.items) &lt;=5}) AND (SIZEOF (QUERY (i &lt;* items | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i)) AND (i.name IN [ 'colour id' , 'colour name' , 'lustre' ,'pattern' , 'transparency']))) = SIZEOF (SELF.items))">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | i.name = 'colour id')) =1">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | i.name ='lustre'))=1">
      </where>
      <where
        label="WR4"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | i.name = 'colour name')) &lt;=1">
      </where>
      <where
        label="WR5"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | i.name ='pattern'))&lt;=1">
      </where>
      <where
        label="WR6"
        expression="SIZEOF (QUERY (i &lt;* SELF.items | i.name ='transparency')) &lt;=1">
      </where>
      <where
        label="WR7"
        expression="(SIZEOF (USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION')) =1) AND (SIZEOF (QUERY (pdr&lt;* USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'PROPERTY_DEFINITION_REPRESENTATION.'+'USED_REPRESENTATION') | SIZEOF (QUERY (gpa &lt;* USEDIN (pdr. definition ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY_ASSOCIATION.'+'DERIVED_DEFINITION') | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'GENERAL_PROPERTY' IN TYPEOF (gpa. base_definition)) AND(gpa. base_definition.name ='surface_condition'))) =1)) =1)">
      </where>
    </entity>

    <function
      name="surface_condition_correlation">
      <parameter
        name="pd">
        <typename
          name="property_definition"/>
      </parameter>
      <parameter
        name="rep">
        <typename
          name="representation"/>
      </parameter>
      <builtintype
        type="LOGICAL"/>
      <algorithm>
CASE pd.name OF
'visual appearance', 'tactile appearance', 'contact ratio', 'hardness', 'treatment result', 'surface texture' :
RETURN(pd.name = rep.name);
OTHERWISE : RETURN(UNKNOWN);
END_CASE;
      </algorithm>
    </function>

    <rule
      name="restrict_representation_for_surface_condition"
      appliesto="property_definition_representation">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(pdr &lt;* property_definition_representation | NOT surface_condition_correlation(pdr.definition, pdr.used_representation)))=0">
      </where>
    </rule>

    <rule
      name="restrict_treatment_result"
      appliesto="representation">
      <algorithm>
LOCAL
treatment_results: SET OF representation := [];
END_LOCAL;
treatment_results:= QUERY(r &lt;* representation |
(r.name = 'treatment result'));
      </algorithm>
      <where
        label="WR1"
        expression="(SIZEOF(QUERY(r &lt;* treatment_results | (SIZEOF(r.items) &gt; 2))) = 0) AND(SIZEOF(QUERY(r &lt;* treatment_results |(SIZEOF(QUERY(i &lt;* r.items | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(i)))) &gt; 0)))= 0)">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(r &lt;* treatment_results |(SIZEOF(QUERY(i &lt;* r.items | i.name = 'result')) = 0))) = 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF(QUERY(r &lt;* treatment_results |(SIZEOF(QUERY(i &lt;* r.items | i.name = 'purpose')) &gt; 1))) = 0">
      </where>
    </rule>

    <rule
      name="material_for_coating_layer"
      appliesto="shape_aspect">
      <algorithm>
LOCAL
coating_layers: SET OF shape_aspect := [];
END_LOCAL;
coating_layers:= QUERY(r &lt;* shape_aspect |
(r.name = 'coating layer'));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(r &lt;* coating_layers | SIZEOF(USEDIN(r , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MATERIAL_DESIGNATION.DEFINITIONS'))&lt;&gt;1)) = 0">
      </where>
    </rule>

    <type name="approval_item_236cc1">
      <select
        extensible="YES"
        basedon="approval_item"
        selectitems="alternate_product_relationship applied_classification_assignment assembly_component_usage_substitute certification class class_system configuration_design configuration_effectivity configured_effectivity_assignment contract document_file general_property material_designation organizational_project product product_concept product_concept_feature product_concept_feature_association product_concept_feature_category product_concept_feature_category_usage product_definition product_definition_formation product_definition_relationship product_definition_substitute property_definition shape_representation">
      </select>
    </type>

    <type name="attribute_language_item_236cc1">
      <select
        extensible="YES"
        basedon="attribute_language_item"
        selectitems="alternate_product_relationship application_context approval_relationship assembly_component_usage_substitute attribute_value_assignment certification configuration_design configuration_item contract date_role date_time_role descriptive_representation_item document_relationship effectivity effectivity_relationship event_occurrence external_source general_property general_property_relationship geometric_representation_item group group_relationship identification_role mapped_item organization_relationship organization_role organizational_project organizational_project_relationship person_and_organization_role product product_concept product_concept_feature product_concept_feature_association product_concept_relationship product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_definition_substitute product_related_product_category property_definition representation representation_relationship shape_aspect shape_aspect_relationship time_interval_role uncertainty_measure_with_unit uncertainty_qualifier">
      </select>
    </type>

    <type name="certification_item_236cc1">
      <select
        extensible="YES"
        basedon="certification_item"
        selectitems="product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship">
      </select>
    </type>

    <type name="classification_item_236cc1">
      <select
        extensible="YES"
        basedon="classification_item"
        selectitems="approval_status class configuration_item contract document_file document_type general_property material_designation organizational_project planar_extent product product_concept product_concept_feature_category product_definition product_definition_formation product_definition_relationship property_definition shape_aspect">
      </select>
    </type>

    <type name="contract_item_236cc1">
      <select
        extensible="YES"
        basedon="contract_item"
        selectitems="product_definition_formation">
      </select>
    </type>

    <type name="date_and_time_item_236cc1">
      <select
        extensible="YES"
        basedon="date_and_time_item"
        selectitems="alternate_product_relationship applied_classification_assignment applied_organization_assignment applied_person_and_organization_assignment approval_person_organization approval_status assembly_component_usage_substitute certification class class_system configuration_design configuration_item configured_effectivity_assignment contract document_file effectivity event_occurrence general_property material_designation organization_relationship organizational_project person_and_organization product product_concept product_concept_feature product_concept_feature_association product_concept_feature_category product_concept_feature_category_usage product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_definition_substitute property_definition shape_representation">
      </select>
    </type>

    <type name="date_item_236cc1">
      <select
        extensible="YES"
        basedon="date_item"
        selectitems="alternate_product_relationship applied_classification_assignment applied_organization_assignment applied_person_and_organization_assignment approval_person_organization approval_status assembly_component_usage_substitute certification class class_system configuration_design configuration_item configured_effectivity_assignment contract document_file effectivity event_occurrence general_property material_designation organization_relationship organizational_project person_and_organization product product_concept product_concept_feature product_concept_feature_association product_concept_feature_category product_concept_feature_category_usage product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_definition_substitute property_definition shape_representation">
      </select>
    </type>

    <type name="document_reference_item_236cc1">
      <select
        extensible="YES"
        basedon="document_reference_item"
        selectitems="approval certification class class_system configuration_design configuration_item contract descriptive_representation_item general_property material_designation organization organizational_project person product product_concept product_concept_feature product_concept_feature_category product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_definition_substitute product_related_product_category property_definition representation shape_aspect shape_aspect_relationship">
      </select>
    </type>

    <type name="effectivity_item_236cc1">
      <select
        extensible="YES"
        basedon="effectivity_item"
        selectitems="assembly_component_usage_substitute class_system configuration_design configuration_item configured_effectivity_assignment document_file general_property material_designation product product_concept product_concept_feature product_concept_feature_association product_concept_feature_category product_concept_feature_category_usage product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_definition_substitute property_definition shape_aspect shape_representation">
      </select>
    </type>

    <type name="event_occurrence_item_236cc1">
      <select
        extensible="YES"
        basedon="event_occurrence_item"
        selectitems="alternate_product_relationship applied_classification_assignment applied_person_and_organization_assignment approval_status assembly_component_usage_substitute certification class class_system configuration_design configuration_effectivity configuration_item configured_effectivity_assignment contract document_file general_property material_designation organization_relationship organizational_project person_and_organization product product_concept product_concept_feature product_concept_feature_association product_concept_feature_category product_concept_feature_category_usage product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_definition_substitute property_definition shape_representation">
      </select>
    </type>

    <type name="external_identification_item_236cc1">
      <select
        extensible="YES"
        basedon="external_identification_item"
        selectitems="document_file externally_defined_class externally_defined_general_property product_definition">
      </select>
    </type>

    <type name="identification_item_236cc1">
      <select
        extensible="YES"
        basedon="identification_item"
        selectitems="applied_identification_assignment approval_status class class_system configuration_item document_file document_type effectivity general_property measure_representation_item organization person_and_organization product product_concept product_concept_feature product_concept_feature_category product_definition product_definition_formation product_definition_relationship property_definition shape_aspect_relationship shape_representation">
      </select>
    </type>

    <type name="multi_language_attribute_item_236cc1">
      <select
        extensible="YES"
        basedon="multi_language_attribute_item"
        selectitems="alternate_product_relationship application_context approval_relationship assembly_component_usage_substitute certification configuration_design configuration_item contract date_role date_time_role descriptive_representation_item document_relationship effectivity effectivity_relationship event_occurrence external_source general_property general_property_relationship geometric_representation_item group group_relationship identification_role mapped_item organization_relationship organization_role organizational_project organizational_project_relationship person_and_organization_role product product_concept product_concept_feature product_concept_feature_association product_concept_relationship product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_definition_substitute product_related_product_category property_definition representation representation_relationship shape_aspect shape_aspect_relationship time_interval_role uncertainty_measure_with_unit uncertainty_qualifier">
      </select>
    </type>

    <type name="organization_item_236cc1">
      <select
        extensible="YES"
        basedon="organization_item"
        selectitems="alternate_product_relationship applied_classification_assignment applied_identification_assignment applied_organization_assignment applied_person_and_organization_assignment approval approval_status assembly_component_usage_substitute certification class class_system configuration_design configuration_effectivity configuration_item configured_effectivity_assignment contract document_file effectivity event_occurrence executed_action general_property material_designation organization_relationship organizational_project person_and_organization product product_concept product_concept_feature product_concept_feature_association product_concept_feature_category product_concept_feature_category_usage product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_definition_substitute property_definition shape_representation">
      </select>
    </type>

    <type name="person_and_organization_item_236cc1">
      <select
        extensible="YES"
        basedon="person_and_organization_item"
        selectitems="alternate_product_relationship applied_classification_assignment applied_organization_assignment applied_person_and_organization_assignment approval_status assembly_component_usage_substitute certification class class_system configuration_design configuration_effectivity configuration_item configured_effectivity_assignment contract document_file event_occurrence executed_action general_property material_designation organization_relationship organizational_project person_and_organization product product_concept product_concept_feature product_concept_feature_association product_concept_feature_category product_concept_feature_category_usage product_definition product_definition_formation product_definition_formation_relationship product_definition_relationship product_definition_substitute property_definition shape_representation">
      </select>
    </type>

    <rule
      name="approval_person_organization_requires_date_time"
      appliesto="approval_person_organization">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (apo &lt;* approval_person_organization | (SIZEOF (QUERY (u &lt;* USEDIN (apo , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_DATE_ASSIGNMENT.ITEMS') |(u.role.name = 'sign off'))) + SIZEOF (QUERY (u &lt;* USEDIN (apo , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_DATE_AND_TIME_ASSIGNMENT.ITEMS') |(u.role.name = 'sign off')))) &lt;&gt;1)) = 0">
      </where>
    </rule>

    <rule
      name="approval_requires_approval_assignment"
      appliesto="approval">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (a &lt;* approval | SIZEOF(USEDIN(a, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPROVAL_ASSIGNMENT.ASSIGNED_APPROVAL')) = 0)) = 0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_derived_unit"
      appliesto="derived_unit">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (d &lt;* derived_unit | NOT (SIZEOF (USEDIN(d , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_document_usage_role"
      appliesto="document_usage_role">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (d &lt;* document_usage_role | NOT (SIZEOF (USEDIN (d , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_measure_with_unit"
      appliesto="measure_with_unit">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (m &lt;* measure_with_unit | NOT (SIZEOF (USEDIN (m , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_named_unit"
      appliesto="named_unit">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (n &lt;* named_unit | NOT (SIZEOF (USEDIN (n , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_precision_qualifier"
      appliesto="precision_qualifier">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (p &lt;* precision_qualifier | NOT (SIZEOF (USEDIN (p , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_product_definition_context_role"
      appliesto="product_definition_context_role">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (p &lt;* product_definition_context_role | NOT (SIZEOF (USEDIN (p , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_standard_uncertainty"
      appliesto="standard_uncertainty">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (s &lt;* standard_uncertainty | NOT (SIZEOF(USEDIN (s , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_time_interval_role"
      appliesto="time_interval_role">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (t &lt;* time_interval_role | NOT (SIZEOF (USEDIN (t , '')) &gt;0))) = 0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_type_qualifier"
      appliesto="type_qualifier">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (t &lt;* type_qualifier | NOT (SIZEOF (USEDIN (t , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dependent_instantiable_uncertainty_qualifier"
      appliesto="uncertainty_qualifier">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (u &lt;* uncertainty_qualifier | NOT (SIZEOF(USEDIN (u , '')) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="dimensionality_is_two_or_three"
      appliesto="geometric_representation_context">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (g &lt;* geometric_representation_context | NOT ((g.coordinate_space_dimension =2) OR (g.coordinate_space_dimension =3)))) =0">
      </where>
    </rule>

    <rule
      name="event_occurrence_requires_event_occurrence_assignment"
      appliesto="event_occurrence">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (eo &lt;* event_occurrence |(SIZEOF (USEDIN (eo, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.RELATIVE_EVENT_OCCURRENCE.BASE_EVENT')) =0) AND(SIZEOF (USEDIN (eo ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EVENT_OCCURRENCE_ASSIGNMENT.ASSIGNED_EVENT_OCCURRENCE')) =0))) =0">
      </where>
    </rule>

    <rule
      name="global_length_and_angle_units_2d_or_3d"
      appliesto="global_unit_assigned_context">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (guac &lt;* global_unit_assigned_context | SIZEOF (guac. units) &lt;2)) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (guac &lt;* global_unit_assigned_context | (SIZEOF (QUERY (x &lt;* guac. units |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.LENGTH_UNIT' IN TYPEOF (x))) &lt;&gt;1) OR(SIZEOF(QUERY(x &lt;* guac. units | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PLANE_ANGLE_UNIT' IN TYPEOF(x))) &lt;&gt;1))) =0">
      </where>
    </rule>

    <rule
      name="externally_defined_class_with_known_source_requirement"
      appliesto="externally_defined_class">
      <algorithm>
LOCAL
known_sourced_classes : SET OF externally_defined_class;
END_LOCAL;
known_sourced_classes := QUERY(edc &lt;* externally_defined_class |
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.KNOWN_SOURCE' IN TYPEOF(edc.source));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF (QUERY (edc &lt;* known_sourced_classes |(SIZEOF (QUERY (aoa &lt;* USEDIN (edc ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_ORGANIZATION_ASSIGNMENT.ITEMS')| aoa.role.name = 'class supplier')) = 0))) = 0">
      </where>
    </rule>

    <rule
      name="restrict_name_for_known_source"
      appliesto="known_source">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(ks &lt;* known_source | (ks.name &lt;&gt; 'ISO 13584 library'))) = 0">
      </where>
    </rule>

    <rule
      name="plib_class_reference_requires_version"
      appliesto="externally_defined_class">
      <algorithm>
LOCAL
known_sourced_classes : SET OF externally_defined_class;
END_LOCAL;
known_sourced_classes := QUERY(edc &lt;* externally_defined_class |
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.KNOWN_SOURCE' IN TYPEOF(edc.source));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(edc &lt;* known_sourced_classes |(SIZEOF(QUERY(aei &lt;* USEDIN(edc,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_EXTERNAL_IDENTIFICATION_ASSIGNMENT.ITEMS') | aei.role.name = 'version')) &lt;&gt; 1))) = 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(edc &lt;* known_sourced_classes |(SIZEOF(QUERY(aei &lt;* USEDIN(edc,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_IDENTIFICATION_ASSIGNMENT.ITEMS') | aei.role.name = 'version')) &gt; 0))) = 0">
      </where>
    </rule>

    <rule
      name="person_requires_person_and_organization"
      appliesto="person">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (p &lt;* person | SIZEOF (USEDIN (p ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PERSON_AND_ORGANIZATION.THE_PERSON')) = 0)) = 0">
      </where>
    </rule>

    <rule
      name="restrict_applied_event_occurrence_assignment"
      appliesto="applied_event_occurrence_assignment">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (eo &lt;* applied_event_occurrence_assignment|(eo\event_occurrence_assignment.role.name ='event context') AND(SIZEOF (eo.items) &gt;1))) =0">
      </where>
    </rule>

    <rule
      name="restrict_applied_organizational_project_assignment"
      appliesto="applied_organizational_project_assignment">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (aopa &lt;* applied_organizational_project_assignment |(aopa.role.name = 'affecting project') AND NOT item_correlation(aopa. items ,['PRODUCT_CONCEPT', 'PRODUCT', 'PRODUCT_DEFINITION', 'PRODUCT_DEFINITION_FORMATION']))) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (aopa &lt;* applied_organizational_project_assignment |(aopa.role.name = 'work program') AND NOT item_correlation (aopa.items , ['EXECUTED_ACTION']))) =0">
      </where>
    </rule>

    <rule
      name="restrict_approval"
      appliesto="approval approval_date_time">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (a &lt;* approval | SIZEOF (USEDIN (a , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPROVAL_DATE_TIME.DATED_APPROVAL')) &gt;2)) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (adt &lt;* approval_date_time |(NOT EXISTS(adt.role)) OR(NOT (adt.role.name IN ['actual' , 'planned'])))) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (a &lt;* approval | SIZEOF (QUERY (adt &lt;* USEDIN (a , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPROVAL_DATE_TIME.DATED_APPROVAL') | adt.role.name ='actual')) &gt;1)) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF (QUERY (a &lt;* approval | SIZEOF (QUERY (adt &lt;* USEDIN (a , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPROVAL_DATE_TIME.DATED_APPROVAL') | adt.role.name ='planned')) &gt;1)) =0">
      </where>
    </rule>

    <rule
      name="restrict_class_system_assignment_for_approval_status"
      appliesto="approval_status">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* approval_status | NOT at_most_one_class_system(ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_class_system_assignment_for_class"
      appliesto="class">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (c &lt;* class | SIZEOF (QUERY (aca &lt;* USEDIN (c , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CLASSIFICATION_ASSIGNMENT.ASSIGNED_CLASS') |((aca.role.name ='class system membership') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_CLASSIFICATION_ASSIGNMENT' IN TYPEOF (aca))))) &gt;1)) =0">
      </where>
    </rule>

    <rule
      name="restrict_class_system_assignment_for_descriptive_representation_item"
      appliesto="descriptive_representation_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* descriptive_representation_item | NOT at_most_one_class_system(ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_class_system_assignment_for_document_type"
      appliesto="document_type">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* document_type | NOT at_most_one_class_system(ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_class_system_assignment_for_planar_extent"
      appliesto="planar_extent">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pe &lt;* planar_extent |(pe\representation_item.name = 'size format') AND NOT at_most_one_class_system(pe)))=0">
      </where>
    </rule>

    <rule
      name="restrict_class_system_assignment_for_security_classification_level"
      appliesto="security_classification_level">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* security_classification_level | NOT at_most_one_class_system(ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_configuration_design_for_specified_individual"
      appliesto="configuration_design">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (cd &lt;* configuration_design |(cd. name ='physical instance basis') AND(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION' IN TYPEOF (cd.design)) OR(cd. design\product_definition.frame_of_reference.name&lt;&gt; 'physical occurrence')))) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (cd &lt;* configuration_design |(cd. name ='physical instance basis') AND(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_IDENTIFICATION' IN TYPEOF (cd.configuration))))) =0">
      </where>
    </rule>

    <rule
      name="restrict_date_assignment"
      appliesto="applied_date_assignment">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(adr &lt;* applied_date_assignment |(adr.role.name = 'actual end') AND(NOT item_correlation (adr.items, ['ORGANIZATIONAL_PROJECT', 'EFFECTIVITY']))))=0">
      </where>
    </rule>

    <rule
      name="restrict_document_reference"
      appliesto="applied_document_reference">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(adr &lt;* applied_document_reference |(adr.role.name = 'general tolerance definition') AND(NOT item_correlation (adr.items, ['REPRESENTATION']))))=0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(adr &lt;* applied_document_reference | NOT ((adr.role.name = 'general tolerance definition') OR item_correlation (adr.items,['APPROVAL','CERTIFICATION','CLASS','CLASS_SYSTEM','CONFIGURATION_DESIGN','CONFIGURATION_ITEM','CONTRACT','GENERAL_PROPERTY','MATERIAL_DESIGNATION','ORGANIZATION','ORGANIZATIONAL_PROJECT','PERSON','PRODUCT_CONCEPT','PRODUCT_CONCEPT_FEATURE', 'PRODUCT_CONCEPT_FEATURE_CATEGORY','PRODUCT_DEFINITION','PRODUCT_DEFINITION_FORMATION','PRODUCT_DEFINITION_FORMATION_RELATIONSHIP','PRODUCT_DEFINITION_RELATIONSHIP','PRODUCT_DEFINITION_SUBSTITUTE','PRODUCT_RELATED_PRODUCT_CATEGORY','PROPERTY_DEFINITION', 'REPRESENTATION','SECURITY_CLASSIFICATION','SHAPE_ASPECT', 'SHAPE_ASPECT_RELATIONSHIP']))))=0">
      </where>
    </rule>

    <rule
      name="restrict_effectivity_assignment_for_class_category_usage"
      appliesto="applied_effectivity_assignment">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(aea &lt;* applied_effectivity_assignment |((SIZEOF(QUERY(i &lt;* aea.items |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_CONCEPT_FEATURE_CATEGORY_USAGE' IN TYPEOF(i)))) &gt; 0) AND((SIZEOF(QUERY(i &lt;* aea.items |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_CONCEPT_FEATURE_CATEGORY_USAGE' IN TYPEOF(i)))) &lt;&gt; SIZEOF(aea.items)) OR(SIZEOF(TYPEOF(aea.assigned_effectivity) *['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.TIME_INTERVAL_BASED_EFFECTIVITY','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DATED_EFFECTIVITY','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.SERIAL_NUMBERED_EFFECTIVITY','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.LOT_EFFECTIVITY','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_EFFECTIVITY']) &gt; 0) OR(aea.assigned_effectivity.id &lt;&gt; 'class usage') OR(SIZEOF(QUERY (cueca &lt;* USEDIN(aea,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EFFECTIVITY_CONTEXT_ASSIGNMENT.ASSIGNED_EFFECTIVITY_ASSIGNMENT') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CLASS_USAGE_EFFECTIVITY_CONTEXT_ASSIGNMENT' IN TYPEOF (cueca))) = 0))))) = 0">
      </where>
    </rule>

    <rule
      name="restrict_effectivity_for_effectivity_relationship"
      appliesto="effectivity_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (er &lt;* effectivity_relationship |(SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.LOT_EFFECTIVITY' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.SERIAL_NUMBERED_EFFECTIVITY' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_EFFECTIVITY']*TYPEOF(er.relating_effectivity)) &gt;0) OR(SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.LOT_EFFECTIVITY' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.SERIAL_NUMBERED_EFFECTIVITY' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_EFFECTIVITY']*TYPEOF(er.related_effectivity)) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="restrict_effectivity_usage"
      appliesto="effectivity">
      <algorithm>
LOCAL
other_effectivities : SET OF effectivity ;
END_LOCAL;
other_effectivities := QUERY(e &lt;* effectivity |
(SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DATED_EFFECTIVITY', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.TIME_INTERVAL_BASED_EFFECTIVITY'] * TYPEOF(e)) = 0));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(e &lt;* other_effectivities |((SIZEOF(QUERY(er &lt;* USEDIN(e,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EFFECTIVITY_RELATIONSHIP.' + 'RELATED_EFFECTIVITY') | er.name = 'inheritance')) = 0) OR((e.id = 'configuration validity') AND(SIZEOF(QUERY (cea &lt;* USEDIN(e,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EFFECTIVITY_ASSIGNMENT.ASSIGNED_EFFECTIVITY') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CONFIGURED_EFFECTIVITY_ASSIGNMENT' IN TYPEOF (cea))) = 0)) OR((e.id = 'class usage') AND(SIZEOF(QUERY(aea &lt;* USEDIN(e,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EFFECTIVITY_ASSIGNMENT.ASSIGNED_EFFECTIVITY') |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_EFFECTIVITY_ASSIGNMENT' IN TYPEOF (aea)) AND(SIZEOF(QUERY(i &lt;* aea.items | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_CONCEPT_FEATURE_CATEGORY_USAGE' IN TYPEOF(i))) &gt; 0))) = 0))))) = 0">
      </where>
    </rule>

    <rule
      name="restrict_externally_defined_item_relationship"
      appliesto="externally_defined_item_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (edir &lt;* externally_defined_item_relationship |(edir. name = 'name scope') AND(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_GENERAL_PROPERTY' IN TYPEOF (edir.relating_item)) OR NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.KNOWN_SOURCE' IN TYPEOF (edir. relating_item.source)) OR NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_CLASS' IN TYPEOF (edir. related_item)) OR NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.KNOWN_SOURCE' IN TYPEOF (edir.related_item.source))))) =0">
      </where>
    </rule>

    <rule
      name="restrict_external_identification_assignment"
      appliesto="applied_external_identification_assignment">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(aeia &lt;* applied_external_identification_assignment |(aeia.role.name = 'alternative document id and location') AND(NOT item_correlation (aeia.items, ['DOCUMENT_FILE']))))=0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(aeia &lt;* applied_external_identification_assignment |(aeia.role.name = 'version') AND(NOT item_correlation (aeia.items, ['EXTERNALLY_DEFINED_CLASS', 'EXTERNALLY_DEFINED_GENERAL_PROPERTY']))))=0">
      </where>
    </rule>

    <rule
      name="restrict_group_assignment"
      appliesto="applied_group_assignment">
      <where
        label="WR2"
        expression="SIZEOF(QUERY(aeia &lt;* applied_group_assignment |(aeia.role.name = 'group membership') AND(NOT item_correlation (aeia.items, ['GEOMETRIC_REPRESENTATION_ITEM', 'SHAPE_ASPECT']))))=0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF(QUERY(aeia &lt;* applied_group_assignment |(aeia.role.name = 'group membership') AND(NOT ((SIZEOF(aeia.items) = SIZEOF(QUERY(i &lt;* aeia.items | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.GEOMETRIC_REPRESENTATION_ITEM' IN TYPEOF(i)))) OR(SIZEOF(aeia.items) = SIZEOF(QUERY(i &lt;* aeia.items | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.SHAPE_ASPECT' IN TYPEOF(i))))))))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_alternate_product_relationship"
      appliesto="alternate_product_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* alternate_product_relationship | NOT allowed_translations (ent, ['basis'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_application_context"
      appliesto="application_context">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* application_context | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_approval_relationship"
      appliesto="approval_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* approval_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_assembly_component_usage_substitute"
      appliesto="assembly_component_usage_substitute">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* assembly_component_usage_substitute | NOT allowed_translations (ent, ['definition'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_certification"
      appliesto="certification">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* certification | NOT allowed_translations (ent, ['purpose', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_configuration_design"
      appliesto="configuration_design">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* configuration_design | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_configuration_item"
      appliesto="configuration_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* configuration_item | NOT allowed_translations (ent, ['name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_contract"
      appliesto="contract">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* contract | NOT allowed_translations (ent, ['purpose'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_data_environment"
      appliesto="data_environment">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* data_environment | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_date_role"
      appliesto="date_role">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* date_role | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_date_time_role"
      appliesto="date_time_role">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* date_time_role | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_descriptive_representation_item"
      appliesto="descriptive_representation_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* descriptive_representation_item | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_document_relationship"
      appliesto="document_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* document_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_effectivity"
      appliesto="effectivity">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* effectivity | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_effectivity_relationship"
      appliesto="effectivity_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* effectivity_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_event_occurrence"
      appliesto="event_occurrence">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* event_occurrence | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_external_source"
      appliesto="external_source">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* external_source | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_general_property"
      appliesto="general_property">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* general_property | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_general_property_relationship"
      appliesto="general_property_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* general_property_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_geometric_representation_item"
      appliesto="geometric_representation_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* geometric_representation_item | NOT allowed_translations (ent, ['name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_group"
      appliesto="group">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* group | NOT allowed_translations (ent, ['description', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_group_relationship"
      appliesto="group_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* group_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_identification_role"
      appliesto="identification_role">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* identification_role | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_mapped_item"
      appliesto="mapped_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* mapped_item | NOT allowed_translations (ent, ['name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_organization_relationship"
      appliesto="organization_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* organization_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_organization_role"
      appliesto="organization_role">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* organization_role | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_organizational_project"
      appliesto="organizational_project">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* organizational_project | NOT allowed_translations (ent, ['description', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_organizational_project_relationship"
      appliesto="organizational_project_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* organizational_project_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_person_and_organization_role"
      appliesto="person_and_organization_role">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* person_and_organization_role | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product"
      appliesto="product">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product | NOT allowed_translations (ent, ['description', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_concept"
      appliesto="product_concept">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_concept | NOT allowed_translations (ent, ['description', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_concept_feature"
      appliesto="product_concept_feature">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_concept_feature | NOT allowed_translations (ent, ['description', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_concept_feature_association"
      appliesto="product_concept_feature_association">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_concept_feature_association | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_concept_relationship"
      appliesto="product_concept_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_concept_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_definition"
      appliesto="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_definition | NOT allowed_translations (ent, ['description', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_definition_formation"
      appliesto="product_definition_formation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_definition_formation | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_definition_formation_relationship"
      appliesto="product_definition_formation_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_definition_formation_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_definition_relationship"
      appliesto="product_definition_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_definition_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_definition_substitute"
      appliesto="product_definition_substitute">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_definition_substitute | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_product_related_product_category"
      appliesto="product_related_product_category">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_related_product_category | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_property_definition"
      appliesto="property_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* property_definition | NOT allowed_translations (ent, ['description', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_representation"
      appliesto="representation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* representation | NOT allowed_translations (ent, ['description', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_representation_relationship"
      appliesto="representation_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* representation_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_security_classification"
      appliesto="security_classification">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* security_classification | NOT allowed_translations (ent, ['purpose', 'name'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_shape_aspect"
      appliesto="shape_aspect">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* shape_aspect | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_shape_aspect_relationship"
      appliesto="shape_aspect_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* shape_aspect_relationship | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_time_interval_role"
      appliesto="time_interval_role">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* time_interval_role | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_uncertainty_measure_with_unit"
      appliesto="uncertainty_measure_with_unit">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* uncertainty_measure_with_unit | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_multi_language_for_uncertainty_qualifier"
      appliesto="uncertainty_qualifier">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* uncertainty_qualifier | NOT allowed_translations (ent, ['description'])))=0">
      </where>
    </rule>

    <rule
      name="restrict_name_for_known_source"
      appliesto="known_source">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ks &lt;* known_source |(ks.name&lt;&gt;'ISO 13584 library'))) =0">
      </where>
    </rule>

    <rule
      name="restrict_organization_assignment"
      appliesto="applied_organization_assignment">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(aoa &lt;* applied_organization_assignment |(aoa.role.name = 'organization in contract') AND(NOT item_correlation (aoa.items, ['CONTRACT']))))= 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(aoa &lt;* applied_organization_assignment |(aoa.role.name = 'signing for contract') AND(NOT item_correlation (aoa.items, ['APPLIED_ORGANIZATION_ASSIGNMENT']))))= 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF(QUERY(aoa &lt;* applied_organization_assignment |(aoa.role.name = 'validity context') AND(NOT item_correlation (aoa.items, ['PROPERTY_DEFINITION']))))= 0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF(QUERY(aoa &lt;* applied_organization_assignment |(aoa.role.name = 'alias scope') AND(NOT item_correlation (aoa.items, ['APPLIED_IDENTIFICATION_ASSIGNMENT']))))= 0">
      </where>
    </rule>

    <rule
      name="restrict_person_and_organization_assignment"
      appliesto="applied_person_and_organization_assignment">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(aoa &lt;* applied_person_and_organization_assignment |(aoa.role.name = 'signing for contract') AND(NOT item_correlation (aoa.items, ['APPLIED_ORGANIZATION_ASSIGNMENT']))))= 0">
      </where>
    </rule>

    <rule
      name="restrict_product_categories_for_tool_part_relationship"
      appliesto="product_definition_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* product_definition_relationship |(pdr.name = 'tool part relationship') AND((SIZEOF (QUERY (prpc &lt;* USEDIN (pdr.relating_product_definition.formation.of_product ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name ='tool')) &lt;1) OR(SIZEOF (QUERY (prpc &lt;* USEDIN (pdr. related_product_definition.formation.of_product ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name ='part')) &lt;1)))) =0">
      </where>
    </rule>

    <rule
      name="restrict_product_category_for_product"
      appliesto="product">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(p &lt;* product | SIZEOF(QUERY(prpc &lt;* USEDIN(p, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name IN ['part','document','functionality', 'conceptual product','alternative solution','requirement', 'physically realized product','tool','raw material']))&lt;&gt; 1)) = 0">
      </where>
    </rule>

    <rule
      name="restrict_product_definition_context_for_external_properties"
      appliesto="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pd &lt;* product_definition |(SIZEOF (QUERY (propd &lt;* USEDIN (pd, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PROPERTY_DEFINITION.DEFINITION') | SIZEOF (QUERY (gpa &lt;* USEDIN (propd , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.GENERAL_PROPERTY_ASSOCIATION.DERIVED_DEFINITION')|'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_GENERAL_PROPERTY' IN TYPEOF (gpa.base_definition))) &gt; 0)) &gt; 0) AND(SIZEOF (QUERY (pdca &lt;* USEDIN (pd, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_CONTEXT_ASSOCIATION.DEFINITION')|(pdca.frame_of_reference.name = 'external') AND(pdca.role.name = 'external'))) = 0))) = 0">
      </where>
    </rule>

    <rule
      name="restrict_product_definition_context_for_product"
      appliesto="product_definition">
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pd &lt;* product_definition |(pd.frame_of_reference.name = 'functional definition') AND(SIZEOF (QUERY (prpc &lt;* USEDIN (pd. formation.of_product,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name ='functionality')) =0))) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (pd &lt;* product_definition |(pd.frame_of_reference.name = 'conceptual definition') AND(SIZEOF (QUERY (prpc &lt;* USEDIN (pd. formation.of_product,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'conceptual product')) =0))) =0">
      </where>
      <where
        label="WR7"
        expression="SIZEOF (QUERY (pd &lt;* product_definition |(pd.frame_of_reference.name IN ['physical document definition','digital document definition','physical model_occurrence']) AND(SIZEOF (QUERY (prpc &lt;* USEDIN (pd.formation.of_product ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name ='document')) =0))) =0">
      </where>
    </rule>

    <rule
      name="restrict_product_definition_substitute"
      appliesto="product_definition_substitute">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pds &lt;* product_definition_substitute |(SIZEOF (USEDIN (pds ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_EFFECTIVITY_ASSIGNMENT.ITEMS')) =0))) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pds &lt;* product_definition_substitute | pds.substitute_definition.frame_of_reference.name &lt;&gt; 'part occurrence')) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (pds &lt;* product_definition_substitute | (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.ASSEMBLY_COMPONENT_USAGE' IN TYPEOF (pds.context_relationship)) AND(SIZEOF (USEDIN (pds.context_relationship , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_OCCURRENCE_RELATIONSHIP.OCCURRENCE_USAGE')) =0)) AND(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_RELATIONSHIP' IN TYPEOF (pds.context_relationship)) AND(pds.context_relationship.related_product_definition.frame_of_reference.name &lt;&gt; 'part occurrence')))) =0">
      </where>
    </rule>

    <rule
      name="restrict_product_definitions_for_product_definition_relationship"
      appliesto="product_definition_relationship">
      <where
        label="WR3"
        expression="SIZEOF (QUERY (pdr &lt;* product_definition_relationship |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.ASSEMBLY_COMPONENT_USAGE' IN TYPEOF (pdr)) AND((pdr.relating_product_definition.frame_of_reference.name &lt;&gt; 'part definition') OR(pdr.related_product_definition.frame_of_reference.name &lt;&gt; 'part definition')) AND((pdr.relating_product_definition.frame_of_reference.name &lt;&gt;'physical occurrence') OR(pdr.related_product_definition.frame_of_reference.name &lt;&gt;'physical occurrence')))) =0">
      </where>
      <where
        label="WR5"
        expression="SIZEOF(QUERY(pdr &lt;* product_definition_relationship |(pdr.name = 'physical realization') AND((pdr.relating_product_definition.frame_of_reference.name &lt;&gt; 'part definition') OR(pdr.related_product_definition.frame_of_reference.name &lt;&gt; 'physical occurrence')))) = 0">
      </where>
      <where
        label="WR6"
        expression="SIZEOF(QUERY(pdr &lt;* product_definition_relationship |(pdr.name = 'physical occurrence usage') AND(NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.ASSEMBLY_COMPONENT_USAGE' IN TYPEOF(pdr)) OR(pdr.relating_product_definition.frame_of_reference.name &lt;&gt; 'physical occurrence') OR(pdr.related_product_definition.frame_of_reference.name &lt;&gt; 'physical occurrence')))) = 0">
      </where>
    </rule>

    <rule
      name="restrict_properties_of_document_file"
      appliesto="document_file">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (df &lt;* document_file | SIZEOF (QUERY (pd &lt;* USEDIN (df ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PROPERTY_DEFINITION.DEFINITION')| pd.name = 'document property')) &gt;1)) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (df &lt;* document_file | SIZEOF (QUERY (rt&lt;* df.representation_types |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DOCUMENT_REPRESENTATION_TYPE' IN TYPEOF (rt)) AND(rt.name IN ['digital' , 'physical']))) =0)) =0">
      </where>
    </rule>

    <rule
      name="restrict_properties_of_document_representation"
      appliesto="product_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pd &lt;* product_definition |(pd.frame_of_reference.name IN['physical document definition', 'digital document definition' ,'physical model occurrence' ]) AND(SIZEOF (QUERY (pd1 &lt;* USEDIN (pd , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PROPERTY_DEFINITION.DEFINITION')| pd1.name = 'document property')) &gt;1))) =0">
      </where>
    </rule>

    <rule
      name="restrict_representation_for_document_content_property"
      appliesto="representation representation_item">
      <algorithm>
LOCAL
document_content_representations: SET OF representation := [];
END_LOCAL;
document_content_representations := QUERY(r &lt;* representation |
(r.name ='document content'));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF (QUERY (r &lt;* document_content_representations |((SIZEOF (r.items) &lt;1) OR (SIZEOF (r.items) &gt;3)))) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (ri &lt;* representation_item |(SIZEOF (QUERY (r &lt;* USEDIN (ri , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.REPRESENTATION.ITEMS') | r.name ='document content')) &gt;0) AND NOT (ri. name IN ['detail level' , 'geometry type' , 'real world scale' ]))) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (r &lt;* document_content_representations |(SIZEOF (QUERY (it &lt;* r.items |(it.name = 'detail level') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (it)))) &gt;1))) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF (QUERY (r &lt;* document_content_representations |(SIZEOF (QUERY (it &lt;* r.items |(it.name = 'geometry type') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (it)))) &gt;1))) =0">
      </where>
      <where
        label="WR5"
        expression="SIZEOF (QUERY (r &lt;* document_content_representations |(SIZEOF (QUERY (it &lt;* r.items |(it.name = 'real world scale') AND(SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.MEASURE_REPRESENTATION_ITEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.VALUE_REPRESENTATION_ITEM']* TYPEOF(it)) =1))) &gt;1))) =0">
      </where>
    </rule>

    <rule
      name="restrict_representation_for_document_creation_property"
      appliesto="representation representation_item">
      <algorithm>
LOCAL
document_creation_representations: SET OF representation := [];
END_LOCAL;
document_creation_representations := QUERY(r &lt;* representation |
(r.name ='document creation'));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF (QUERY (r &lt;* document_creation_representations |((SIZEOF (r.items) &lt;1) OR (SIZEOF (r.items) &gt;3)))) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (ri &lt;* representation_item |(SIZEOF (QUERY (r &lt;* USEDIN (ri ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.REPRESENTATION.ITEMS') | r.name ='document creation')) &gt;0) AND NOT (ri. name IN [ 'creating interface' , 'creating system' ,'operating system' ]))) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (r &lt;* document_creation_representations |(SIZEOF (QUERY (i &lt;* r.items |(i.name = 'creating interface') AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i)))) &gt;1))) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF (QUERY (r &lt;* document_creation_representations |(SIZEOF (QUERY (i &lt;* r.items |(i.name = 'creating system') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i)))) &lt;&gt;1))) =0">
      </where>
      <where
        label="WR5"
        expression="SIZEOF (QUERY (r &lt;* document_creation_representations |(SIZEOF (QUERY (i &lt;* r.items |(i.name = 'operating system') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i)))) &gt;1))) =0">
      </where>
    </rule>

    <rule
      name="restrict_representation_for_document_format_property"
      appliesto="representation representation_item">
      <algorithm>
LOCAL
document_format_representations: SET OF representation := [];
END_LOCAL;
document_format_representations := QUERY(r &lt;* representation |
(r.name ='document format'));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF (QUERY (r &lt;* document_format_representations |((SIZEOF (r.items) &lt;1) OR (SIZEOF (r.items) &gt;3)))) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (ri &lt;* representation_item |(SIZEOF (QUERY (r &lt;* USEDIN (ri ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.REPRESENTATION.ITEMS') | r.name ='document format')) &gt;0) AND NOT (ri. name IN ['character code' , 'data format' ]))) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (r &lt;* document_format_representations |(SIZEOF (QUERY (i &lt;* r.items | (i.name = 'character code') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i)))) &gt;1))) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF (QUERY (r &lt;* document_format_representations |(SIZEOF (QUERY (i &lt;* r.items | (i.name = 'data format') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i)))) &gt;1))) =0">
      </where>
      <where
        label="WR5"
        expression="SIZEOF (QUERY (r &lt;* document_format_representations |(SIZEOF (QUERY (i &lt;* r.items| (i.name = 'size format') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PLANAR_EXTENT' IN TYPEOF (i)))) &gt;1))) = 0">
      </where>
    </rule>

    <rule
      name="restrict_representation_for_document_properties"
      appliesto="property_definition representation representation_context">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pd &lt;* property_definition |(pd. name ='document property') AND(SIZEOF (QUERY (pdr &lt;* USEDIN(pd ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') | NOT (pdr.used_representation.name IN ['document content' , 'document creation' ,'document format' , 'document size' ]))) &gt;0))) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (r &lt;* representation |(r.name IN [ 'document content' , 'document creation' , 'document format' , 'document size' ]) AND(SIZEOF (QUERY (pdr &lt;* USEDIN (r ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PROPERTY_DEFINITION' IN TYPEOF(pdr. definition)) AND(pdr. definition.name = 'document property'))) =0))) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (r &lt;* representation |(r.name IN ['document content' , 'document creation' , 'document format' , 'document size' ]) AND(r.context_of_items.context_type&lt;&gt; 'document parameters'))) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF (QUERY (rc &lt;* representation_context |(rc.context_type = 'document parameters') AND(SIZEOF (QUERY(r &lt;* USEDIN (rc ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.REPRESENTATION.CONTEXT_OF_ITEMS') | NOT(r.name IN [ 'document content' , 'document creation' ,'document format' , 'document size' ]))) &gt;0))) =0">
      </where>
    </rule>

    <rule
      name="restrict_representation_for_document_size_property"
      appliesto="representation representation_item">
      <algorithm>
LOCAL
document_size_representations: SET OF representation := [];
END_LOCAL;
document_size_representations := QUERY(r &lt;* representation |
(r.name ='document size'));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF (QUERY (r &lt;* document_size_representations |((SIZEOF (r.items) &lt;1) OR (SIZEOF (r.items) &gt;2)))) =0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (ri &lt;* representation_item | (SIZEOF (QUERY (r &lt;* USEDIN (ri ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.REPRESENTATION.ITEMS') | r.name ='document size')) &gt;0) AND NOT (ri. name IN ['file size' , 'page count' ]))) =0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (r &lt;* document_size_representations|(SIZEOF (QUERY (i &lt;* r.items | (i.name = 'file size') AND(SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.MEASURE_REPRESENTATION_ITEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.VALUE_RANGE' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.VALUE_REPRESENTATION_ITEM']* TYPEOF (i)) =1))) &gt;1))) =0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF (QUERY (r &lt;* document_size_representations |(SIZEOF (QUERY (i &lt;* r.items | (i.name = 'page count') AND(SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.MEASURE_REPRESENTATION_ITEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.VALUE_RANGE' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.VALUE_REPRESENTATION_ITEM']* TYPEOF (i)) =1))) &gt;1))) =0">
      </where>
    </rule>

    <rule
      name="restrict_version_assignment_for_applied_identification_assignment"
      appliesto="applied_identification_assignment">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* applied_identification_assignment| NOT at_most_one_version_id (ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_version_assignment_for_class"
      appliesto="class">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* class | NOT at_most_one_version_id (ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_version_assignment_for_configuration_item"
      appliesto="configuration_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* configuration_item | NOT at_most_one_version_id (ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_version_assignment_for_document_file"
      appliesto="document_file">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* document_file | NOT at_most_one_version_id (ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_version_assignment_for_effectivity"
      appliesto="effectivity">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* effectivity | NOT at_most_one_version_id (ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_version_assignment_for_general_property"
      appliesto="general_property">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* general_property | NOT at_most_one_version_id (ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_version_assignment_for_product_concept"
      appliesto="product_concept">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_concept | NOT at_most_one_version_id (ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_version_assignment_for_product_concept_feature"
      appliesto="product_concept_feature">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* product_concept_feature | NOT at_most_one_version_id (ent)))=0">
      </where>
    </rule>

    <rule
      name="restrict_version_assignment_for_shape_representation"
      appliesto="shape_representation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ent &lt;* shape_representation | NOT at_most_one_version_id (ent)))=0">
      </where>
    </rule>

    <rule
      name="security_classification_requires_security_classification_assignment"
      appliesto="security_classification">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (sc &lt;* security_classification | SIZEOF (USEDIN (sc ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.SECURITY_CLASSIFICATION_ASSIGNMENT.ASSIGNED_SECURITY_CLASSIFICATION')) =0)) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_characterized_object"
      appliesto="characterized_object">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (co &lt;* characterized_object | NOT (type_check_function (co ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CHARACTERIZED_CLASS' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DOCUMENT_FILE' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.FEATURE_COMPONENT_DEFINITION' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.FEATURE_DEFINITION' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_CLASS' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_IDENTIFICATION'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_classification_assignment"
      appliesto="classification_assignment">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ca &lt;* classification_assignment | NOT (type_check_function (ca ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_CLASSIFICATION_ASSIGNMENT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.LANGUAGE_ASSIGNMENT'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_compound_representation_item"
      appliesto="compound_representation_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (cri &lt;* compound_representation_item | NOT(type_check_function (cri ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DEFAULT_TOLERANCE_TABLE_CELL' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.VALUE_RANGE'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_document_reference"
      appliesto="document_reference">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (dr &lt;* document_reference | NOT (type_check_function (dr ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_DOCUMENT_REFERENCE' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DRAUGHTING_SPECIFICATION_REFERENCE'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_effectivity"
      appliesto="effectivity">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (e &lt;* effectivity | NOT (type_check_function (e ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_EFFECTIVITY' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.TIME_INTERVAL_BASED_EFFECTIVITY'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_effectivity_assignment"
      appliesto="effectivity_assignment">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ea &lt;* effectivity_assignment | NOT (type_check_function (ea ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_EFFECTIVITY_ASSIGNMENT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_INEFFECTIVITY_ASSIGNMENT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CONFIGURED_EFFECTIVITY_ASSIGNMENT'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_effectivity_context_assignment"
      appliesto="effectivity_context_assignment">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (eca &lt;* effectivity_context_assignment | NOT (type_check_function (eca ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CLASS_USAGE_EFFECTIVITY_CONTEXT_ASSIGNMENT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CONFIGURED_EFFECTIVITY_CONTEXT_ASSIGNMENT'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_externally_defined_item"
      appliesto="externally_defined_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (edi &lt;* externally_defined_item | NOT (type_check_function (edi ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_CHARACTER_GLYPH' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_CLASS' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_CURVE_FONT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_FEATURE_DEFINITION' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_GENERAL_PROPERTY','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_HATCH_STYLE' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_STYLE' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_SYMBOL' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_TEXT_FONT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_TILE_STYLE'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_group"
      appliesto="group">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (g &lt;* group | NOT (type_check_function (g ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CLASS' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CLASS_SYSTEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.LANGUAGE' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_CONCEPT_FEATURE_CATEGORY' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.REP_ITEM_GROUP'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_group_assignment"
      appliesto="group_assignment">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ga &lt;* group_assignment | NOT (type_check_function (ga ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_GROUP_ASSIGNMENT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_CONCEPT_FEATURE_CATEGORY_USAGE'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_identification_assignment"
      appliesto="identification_assignment">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ia &lt;* identification_assignment | NOT (type_check_function (ia ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_IDENTIFICATION_ASSIGNMENT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNAL_IDENTIFICATION_ASSIGNMENT'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_property_definition"
      appliesto="property_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pd &lt;* property_definition | NOT (type_check_function (pd ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.MATERIAL_PROPERTY' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_SHAPE'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_property_definition_representation"
      appliesto="property_definition_representation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* property_definition_representation| NOT (type_check_function (pdr ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.MATERIAL_PROPERTY_REPRESENTATION' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.SHAPE_DEFINITION_REPRESENTATION'] ,3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_representation"
      appliesto="representation">
      <where
        label="WR1"
        expression="SIZEOF(QUERY (r &lt;* representation | NOT (type_check_function(r,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CONSTRUCTIVE_GEOMETRY_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.CONTACT_RATIO_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DEFAULT_TOLERANCE_TABLE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DEFINITIONAL_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DIRECTION_SHAPE_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.HARDNESS_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.MOMENTS_OF_INERTIA_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.SHAPE_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.SURFACE_TEXTURE_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.TACTILE_APPEARANCE_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.TEXT_STRING_REPRESENTATION','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.VISUAL_APPEARANCE_REPRESENTATION'] , 3)))) = 0">
      </where>
    </rule>

    <rule
      name="subtype_exclusiveness_representation_item"
      appliesto="representation_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ri &lt;* representation_item | NOT (type_check_function (ri ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.COMPOUND_REPRESENTATION_ITEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.MEASURE_REPRESENTATION_ITEM' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.REP_ITEM_GROUP' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.VALUE_REPRESENTATION_ITEM'] , 3)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_mandatory_address"
      appliesto="address">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (a &lt;* address | NOT (type_check_function(a ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.ORGANIZATIONAL_ADDRESS' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PERSONAL_ADDRESS'] , 0)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_mandatory_configurable_item"
      appliesto="configurable_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (ci &lt;* configurable_item | NOT (type_check_function (ci ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_SPECIFICATION'] , 0)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_mandatory_document_product_association"
      appliesto="document_product_association">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (dpa &lt;* document_product_association | NOT(type_check_function (dpa ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.DOCUMENT_PRODUCT_EQUIVALENCE'] , 0)))) =0">
      </where>
    </rule>

    <rule
      name="subtype_mandatory_externally_defined_item"
      appliesto="externally_defined_item">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (edi &lt;* externally_defined_item | NOT (type_check_function (edi ,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_CHARACTER_GLYPH' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_CLASS' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_CURVE_FONT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_FEATURE_DEFINITION' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_GENERAL_PROPERTY','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_HATCH_STYLE' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_STYLE' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_SYMBOL' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_TEXT_FONT' ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_TILE_STYLE'] , 0)))) =0">
      </where>
    </rule>

    <function
      name="at_most_one_class_system">
      <parameter
        name="ent">
        <builtintype
          type="GENERIC_ENTITY"/>
      </parameter>
      <builtintype
        type="LOGICAL"/>
      <algorithm>
RETURN(
SIZEOF (QUERY (ia &lt;* USEDIN (ent , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS') |
ia.role.name = 'class system membership'))&lt;=1);
      </algorithm>
    </function>

    <function
      name="at_most_one_version_id">
      <parameter
        name="ent">
        <builtintype
          type="GENERIC_ENTITY"/>
      </parameter>
      <builtintype
        type="LOGICAL"/>
      <algorithm>
RETURN(
SIZEOF (QUERY (ia &lt;* USEDIN (ent , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_IDENTIFICATION_ASSIGNMENT.ITEMS') |
ia.role.name ='version')) &lt;=1);
      </algorithm>
    </function>

    <function
      name="item_correlation">
      <parameter
        name="items">
        <aggregate
          type="SET"/>
        <builtintype
          type="GENERIC_ENTITY"/>
      </parameter>
      <parameter
        name="c_items">
        <aggregate
          type="SET"/>
        <builtintype
          type="STRING"/>
      </parameter>
      <builtintype
        type="LOGICAL"/>
      <algorithm>
LOCAL
c_types : SET OF STRING := [];
c_hit : INTEGER := 0;
END_LOCAL;
REPEAT i:=1 TO HIINDEX(c_items);
c_types := c_types + ['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.' + c_items[i]];
END_REPEAT;
REPEAT i:=1 TO HIINDEX(items);
IF (SIZEOF(c_types * TYPEOF(items[i])) = 1) THEN
c_hit := c_hit + 1;
END_IF;
END_REPEAT;
RETURN (SIZEOF(items) = c_hit);
      </algorithm>
    </function>

    <function
      name="allowed_translations">
      <parameter
        name="ent">
        <builtintype
          type="GENERIC_ENTITY"/>
      </parameter>
      <parameter
        name="translatable_attributes">
        <aggregate
          type="SET"/>
        <builtintype
          type="STRING"/>
      </parameter>
      <builtintype
        type="LOGICAL"/>
      <algorithm>
LOCAL
mlaa: BAG OF multi_language_attribute_assignment;
ala: BAG OF attribute_language_assignment;
END_LOCAL;
IF (SIZEOF(translatable_attributes)=0) THEN
RETURN(UNKNOWN);
END_IF;
mlaa:= USEDIN (ent , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.MULTI_LANGUAGE_ATTRIBUTE_ASSIGNMENT.ITEMS');
REPEAT i:=1 TO HIINDEX(mlaa);
IF NOT (mlaa[i].attribute_name IN translatable_attributes) THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
ala:= USEDIN (ent , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.ATTRIBUTE_LANGUAGE_ASSIGNMENT.ITEMS');
REPEAT i:=1 TO HIINDEX(ala);
IF NOT (ala[i].attribute_name IN translatable_attributes) THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
RETURN(TRUE);
      </algorithm>
    </function>

    <type name="action_items">
      <select
        extensible="YES"
        genericentity="YES">
      </select>
    </type>

    <entity
      name="applied_action_assignment"
      supertypes="action_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="action_items"/>
      </explicit>
    </entity>

    <type name="aliasable_item">
      <select
        extensible="YES">
      </select>
    </type>

    <type name="organization_item_solution">
      <select
        basedon="organization_item"
        selectitems="product_definition">
      </select>
    </type>

    <rule
      name="alternative_solution_requires_solution_definition"
      appliesto="product_definition_formation">
      <algorithm>
LOCAL
solution_versions: SET OF product_definition_formation := [];
END_LOCAL;
solution_versions := QUERY(pdf &lt;* product_definition_formation |
SIZEOF(QUERY(prpc &lt;* USEDIN(pdf.of_product, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') |
prpc.name = 'alternative solution')) = 1);
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(pdf &lt;* solution_versions | SIZEOF(QUERY(pd &lt;* USEDIN(pdf, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION.FORMATION') | pd.frame_of_reference.name = 'alternative definition')) &lt;&gt; 1))= 0">
      </where>
    </rule>

    <rule
      name="restrict_alternative_definition"
      appliesto="product_definition">
      <algorithm>
LOCAL
solution_definitions: SET OF product_definition := [];
END_LOCAL;
solution_definitions := QUERY(pd &lt;* product_definition |
(pd.frame_of_reference.name = 'alternative definition'));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pd &lt;* solution_definitions |(SIZEOF (QUERY (pdr &lt;* USEDIN (pd ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') | pdr.name = 'solution alternative definition')) &lt;&gt;1))) = 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pd &lt;* solution_definitions | NOT (pd.name IN ['technical' , 'supplier' , 'technical supplier' , '']))) = 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF (QUERY (pd &lt;* solution_definitions |(pd.name IN ['supplier' , 'technical supplier']) AND (SIZEOF (QUERY (aoa &lt;* USEDIN (pd.formation ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_ORGANIZATION_ASSIGNMENT.ITEMS') | aoa.role.name = 'supplier')) &lt;&gt;1))) = 0">
      </where>
    </rule>

    <rule
      name="solution_definition_requires_solution_category"
      appliesto="product_definition">
      <algorithm>
LOCAL
solution_definitions: SET OF product_definition := [];
END_LOCAL;
solution_definitions := QUERY(pd &lt;* product_definition |
(pd.frame_of_reference.name = 'alternative definition'));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(pd &lt;* solution_definitions |(SIZEOF(QUERY(prpc &lt;* USEDIN(pd.formation.of_product, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'alternative solution')) = 0))) = 0">
      </where>
    </rule>

    <rule
      name="restrict_product_definitions_for_base_element"
      appliesto="product_definition_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* product_definition_relationship |(pdr. name = 'solution alternative definition') AND(NOT(pdr. relating_product_definition.frame_of_reference.name IN [ 'alternative definition' , 'functional definition' , 'conceptual definition' ]) OR(pdr.related_product_definition.frame_of_reference.name&lt;&gt;'alternative definition')))) =0">
      </where>
    </rule>

    <type name="approval_item">
      <select
        extensible="YES"
        genericentity="YES">
      </select>
    </type>

    <type name="date_and_time_item_approval">
      <select
        basedon="date_and_time_item"
        selectitems="approval_person_organization">
      </select>
    </type>

    <type name="date_item_approval">
      <select
        basedon="date_item"
        selectitems="approval_person_organization">
      </select>
    </type>

    <entity
      name="applied_approval_assignment"
      supertypes="approval_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="approval_item"/>
      </explicit>
    </entity>

    <type name="bc_external_identification_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="external_identification_item"
        selectitems="trimmed_curve">
      </select>
    </type>

    <type name="certification_item">
      <select
        extensible="YES"
        genericentity="YES">
      </select>
    </type>

    <entity
      name="applied_certification_assignment"
      supertypes="certification_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="certification_item"/>
      </explicit>
    </entity>

    <type name="classification_item">
      <select
        extensible="YES"
        genericentity="YES">
      </select>
    </type>

    <entity
      name="applied_classification_assignment"
      supertypes="classification_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="classification_item"/>
      </explicit>
    </entity>

    <type name="classification_classification_item">
      <select
        extensible="YES"
        basedon="classification_item"
        selectitems="class">
      </select>
    </type>

    <type name="classification_identification_item">
      <select
        extensible="YES"
        basedon="identification_item"
        selectitems="class">
      </select>
    </type>

    <type name="classification_item_extended">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="classification_item"
        selectitems="characterized_class product product_definition_formation product_definition">
      </select>
    </type>

    <type name="classified_item">
      <select
        extensible="YES"
        genericentity="YES"
        selectitems="product product_definition_formation product_definition">
      </select>
    </type>

    <type name="class_system_item">
      <select
        extensible="YES"
        genericentity="YES"
        selectitems="characterized_class">
      </select>
    </type>

    <type name="id_for_class">
      <select
        basedon="identification_item"
        selectitems="characterized_class">
      </select>
    </type>

    <type name="version_for_class">
      <select
        basedon="versionable_item"
        selectitems="characterized_class">
      </select>
    </type>

    <entity
      name="characterized_class"
      supertypes="characterized_object class">
    </entity>

    <entity
      name="class_system"
      supertypes="group">
    </entity>

    <rule
      name="restrict_classification_assignments"
      appliesto="applied_classification_assignment">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(aia &lt;* applied_classification_assignment | NOT class_assignment_is_valid(aia)))=0">
      </where>
    </rule>

    <function
      name="class_assignment_is_valid">
      <parameter
        name="aia">
        <typename
          name="applied_classification_assignment"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
LOCAL
item: classification_item;
role: classification_role;
END_LOCAL;
role:= aia.role;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'CLASS_SYSTEM' IN TYPEOF(aia.assigned_class)) THEN
IF(role.name &lt;&gt; 'class system membership') THEN
RETURN(FALSE);
END_IF;
REPEAT i:=LOINDEX(aia.items) TO HIINDEX(aia.items);
item:= aia.items[i];
IF (SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CLASS_SYSTEM_ITEM']*TYPEOF(item))=0) THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'CHARACTERIZED_CLASS' IN TYPEOF(aia.assigned_class)) THEN
IF	NOT(role.name IN ['definitional','non-definitional','']) THEN
RETURN(FALSE);
END_IF;
REPEAT i:=LOINDEX(aia.items) TO HIINDEX(aia.items);
item:= aia.items[i];
IF (SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CLASSIFIED_ITEM']*TYPEOF(item))=0) THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
END_IF;
RETURN(TRUE);
      </algorithm>
    </function>

    <rule
      name="restrict_group_relationship_for_classification_hierarchy"
      appliesto="group_relationship">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(gr &lt;* group_relationship |(gr.name = 'class hierarchy') AND(NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CLASS' IN TYPEOF(gr.related_group)) OR NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CLASS' IN TYPEOF(gr.relating_group))))) = 0">
      </where>
    </rule>

    <entity
      name="constructive_geometry_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_REPRESENTATION_CONTEXT' IN TYPEOF(SELF.context_of_items)) AND ({2 &lt;= SELF.context_of_items\geometric_representation_context. coordinate_space_dimension &lt;= 3})">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(cgr_i &lt;* SELF.items | SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLACEMENT', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CURVE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EDGE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FACE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POINT', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FACE_SURFACE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VERTEX_POINT'] * TYPEOF(cgr_i)) &lt;&gt; 1)) = 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'REPRESENTATION_RELATIONSHIP.REP_2')) &gt; 0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'REPRESENTATION_MAP.MAPPED_REPRESENTATION')) = 0">
      </where>
    </entity>

    <entity
      name="constructive_geometry_representation_relationship"
      supertypes="representation_relationship">
      <where
        label="WR1"
        expression="(SELF.rep_1.context_of_items :=: SELF.rep_2.context_of_items) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_REPRESENTATION_CONTEXT' IN TYPEOF(SELF.rep_1.context_of_items))">
      </where>
      <where
        label="WR2"
        expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CONSTRUCTIVE_GEOMETRY_REPRESENTATION' IN TYPEOF(SELF.rep_2)">
      </where>
      <where
        label="WR3"
        expression="SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_REPRESENTATION', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CONSTRUCTIVE_GEOMETRY_REPRESENTATION'] * TYPEOF(SELF.rep_1)) = 1">
      </where>
      <where
        label="WR4"
        expression="NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'REPRESENTATION_RELATIONSHIP_WITH_TRANSFORMATION' IN TYPEOF(SELF))">
      </where>
    </entity>

    <type name="contract_item">
      <select
        extensible="YES">
      </select>
    </type>

    <entity
      name="applied_contract_assignment"
      supertypes="contract_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="contract_item"/>
      </explicit>
    </entity>

    <type name="date_item">
      <select
        extensible="YES">
      </select>
    </type>

    <type name="date_and_time_item">
      <select
        extensible="YES">
      </select>
    </type>

    <entity
      name="applied_date_and_time_assignment"
      supertypes="date_and_time_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="date_and_time_item"/>
      </explicit>
    </entity>

    <entity
      name="applied_date_assignment"
      supertypes="date_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="date_item"/>
      </explicit>
    </entity>

    <type name="dimension_identification_item">
      <select
        basedon="identification_item"
        selectitems="dimensional_size">
      </select>
    </type>

    <type name="dimension_tolerance_document_reference_item">
      <select
        basedon="document_reference_item"
        selectitems="dimensional_size externally_defined_dimension_definition">
      </select>
    </type>

    <entity
      name="directed_dimensional_location"
      supertypes="dimensional_location">
    </entity>

    <entity
      name="externally_defined_dimension_definition"
      supertypes="dimensional_size externally_defined_item">
      <where
        label="WR1"
        expression="(SELF\externally_defined_item.item_id = 'external size dimension') AND (SELF\externally_defined_item.source.source_id = 'external size dimension specification')">
      </where>
      <where
        label="WR2"
        expression="1 &gt;= SIZEOF(QUERY (adr &lt;* USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.APPLIED_DOCUMENT_REFERENCE.ITEMS')| (adr.assigned_document.description = 'external size dimension specification')))">
      </where>
    </entity>

    <type name="document_reference_item">
      <select
        extensible="YES">
      </select>
    </type>

    <entity
      name="applied_document_reference"
      supertypes="document_reference">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="document_reference_item"/>
      </explicit>
    </entity>

    <entity
      name="applied_document_usage_constraint_assignment"
      supertypes="document_usage_constraint_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="document_reference_item"/>
      </explicit>
    </entity>

    <entity
      name="document_product_equivalence"
      supertypes="document_product_association">
      <where
        label="WR1"
        expression="SELF\document_product_association.name = 'equivalence'">
      </where>
      <where
        label="WR2"
        expression="NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT' IN TYPEOF(SELF\document_product_association.related_product)) OR ((SELF\document_product_association.relating_document.kind. product_data_type = 'configuration controlled document') AND (SIZEOF(QUERY(prpc &lt;* USEDIN(SELF\document_product_association.related_product,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'document')) = 1))">
      </where>
      <where
        label="WR3"
        expression="NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_FORMATION' IN TYPEOF(SELF.related_product)) OR ((SELF\document_product_association.relating_document.kind.product_data_type = 'configuration controlled document version') AND (SIZEOF(QUERY(prpc &lt;* USEDIN(SELF.related_product\product_definition_formation.of_product, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'document')) = 1))">
      </where>
      <where
        label="WR4"
        expression="NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION' IN TYPEOF(SELF.related_product)) OR ((SELF\document_product_association.relating_document.kind.product_data_type = 'configuration controlled document definition') AND (SIZEOF(QUERY(prpc &lt;* USEDIN(SELF\document_product_association.related_product\product_definition.formation.of_product, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'document')) = 1))">
      </where>
    </entity>

    <type name="document_location_select">
      <select
        basedon="external_identification_item"
        selectitems="product_definition">
      </select>
    </type>

    <type name="dm_aliasable_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="aliasable_item"
        selectitems="document_file product product_definition product_definition_formation">
      </select>
    </type>

    <type name="dm_approval_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="mri_approval_item"
        selectitems="product_definition product_definition_formation product_definition_relationship">
      </select>
    </type>

    <type name="dm_attribute_language_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="mri_attribute_language_item"
        selectitems="applied_document_reference applied_document_usage_constraint_assignment applied_external_identification_assignment document_relationship document_usage_role external_source object_role product product_category product_definition product_definition_formation product_definition_relationship">
      </select>
    </type>

    <type name="dm_contract_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="contract_item"
        selectitems="product_definition_formation">
      </select>
    </type>

    <type name="dm_date_and_time_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="mri_date_and_time_item"
        selectitems="document_file product_definition product_definition_formation product_definition_relationship">
      </select>
    </type>

    <type name="dm_date_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="mri_date_item"
        selectitems="document_file product_definition product_definition_formation product_definition_relationship">
      </select>
    </type>

    <type name="dm_identification_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="mri_identification_item"
        selectitems="document_file product product_definition product_definition_formation">
      </select>
    </type>

    <type name="dm_multi_language_attribute_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="mri_multi_language_attribute_item"
        selectitems="applied_document_reference applied_document_usage_constraint_assignment applied_external_identification_assignment document_relationship document_usage_role external_source object_role product product_category product_definition product_definition_formation product_definition_relationship">
      </select>
    </type>

    <type name="dm_organization_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="mri_organization_item"
        selectitems="document_file product product_definition product_definition_formation">
      </select>
    </type>

    <type name="dm_person_and_organization_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="mri_person_and_organization_item"
        selectitems="document_file product product_definition product_definition_formation">
      </select>
    </type>

    <type name="dm_security_classification_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="security_classification_item"
        selectitems="document_file product product_definition product_definition_formation">
      </select>
    </type>

    <type name="effectivity_item">
      <select
        extensible="YES">
      </select>
    </type>

    <entity
      name="applied_effectivity_assignment"
      supertypes="effectivity_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="effectivity_item"/>
      </explicit>
    </entity>

    <type name="representation_identification_item">
      <select
        basedon="identification_item"
        selectitems="shape_representation">
      </select>
    </type>

    <type name="representation_version_item">
      <select
        basedon="versionable_item"
        selectitems="shape_representation">
      </select>
    </type>

    <type name="event_occurrence_date_and_time_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="date_and_time_item"
        selectitems="event_occurrence">
      </select>
    </type>

    <type name="event_occurrence_date_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="date_item"
        selectitems="event_occurrence">
      </select>
    </type>

    <type name="event_occurrence_item">
      <select
        extensible="YES"
        genericentity="YES">
      </select>
    </type>

    <entity
      name="applied_event_occurrence_assignment"
      supertypes="event_occurrence_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="event_occurrence_item"/>
      </explicit>
    </entity>

    <entity
      name="definitional_representation_relationship"
      supertypes="representation_relationship">
      <where
        label="WR1"
        expression="acyclic_representation_relationship(SELF,[SELF\representation_relationship.rep_2],'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION')">
      </where>
    </entity>

    <entity
      name="geometric_model_element_relationship"
      supertypes="geometric_representation_item representation_item_relationship">
      <unique
        label="UR1">
        <unique.attribute
          entity-ref="representation_item_relationship"
          attribute="relating_representation_item"/>
        <unique.attribute
          entity-ref="representation_item_relationship"
          attribute="related_representation_item"/>
      </unique>
      <where
        label="WR1"
        expression="SELF\representation_item_relationship.relating_representation_item :&lt;&gt;: SELF\representation_item_relationship.related_representation_item">
      </where>
    </entity>

    <function
      name="acyclic_representation_relationship">
      <parameter
        name="relation">
        <typename
          name="representation_relationship"/>
      </parameter>
      <parameter
        name="relatives">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="representation"/>
      </parameter>
      <parameter
        name="specific_relation">
        <builtintype
          type="STRING"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
LOCAL
x : SET OF representation_relationship;
END_LOCAL;
IF relation.rep_1 IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(r &lt;* bag_to_set(USEDIN(relation.rep_1, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'REPRESENTATION_RELATIONSHIP.' + 'REP_2')) | specific_relation IN TYPEOF(r));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_representation_relationship(x[i], relatives + relation.rep_1, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
      </algorithm>
    </function>

    <entity
      name="value_range"
      supertypes="compound_representation_item">
      <where
        label="WR1"
        expression="('value_with_unit_mim.'+ 'SET_REPRESENTATION_ITEM' IN TYPEOF (item_element)) AND value_range_wr1 (item_element)">
      </where>
      <where
        label="WR2"
        expression="value_range_wr2 (item_element)">
      </where>
      <where
        label="WR3"
        expression="value_range_wr3 (item_element)">
      </where>
    </entity>

    <rule
      name="subtype_exclusiveness_representation_item"
      appliesto="representation_item">
      <where
        label="WR1"
        expression="SIZEOF(QUERY (cri &lt;* representation_item | NOT (type_check_function(cri,['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPOUND_REPRESENTATION_ITEM'] , 3)))) = 0">
      </where>
    </rule>

    <function
      name="value_range_wr1">
      <parameter
        name="agg">
        <typename
          name="compound_item_definition"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
BEGIN
IF (SIZEOF(agg) = 2) AND ((SIZEOF(QUERY (i1 &lt;* agg | (
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM' IN TYPEOF
(i1)))) = 2) OR
(SIZEOF(QUERY (i2 &lt;* agg | (
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VALUE_REPRESENTATION_ITEM' IN TYPEOF
(i2)))) = 2)) THEN
RETURN(TRUE);
ELSE
RETURN(FALSE);
END_IF;
END;
      </algorithm>
    </function>

    <function
      name="value_range_wr2">
      <parameter
        name="agg">
        <typename
          name="compound_item_definition"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
BEGIN
IF (SIZEOF(QUERY (i &lt;* agg | (i.name = 'upper limit'))) = 1)
AND (SIZEOF(QUERY (i &lt;* agg | (i.name = 'lower limit'))) = 1)
THEN
RETURN(TRUE);
ELSE
RETURN(FALSE);
END_IF;
END;
      </algorithm>
    </function>

    <function
      name="value_range_wr3">
      <parameter
        name="agg">
        <typename
          name="compound_item_definition"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
BEGIN
IF (SIZEOF(QUERY(i1 &lt;* agg |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM' IN TYPEOF (i1)) AND
(SIZEOF (QUERY (i2 &lt;* agg |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM' IN TYPEOF (i2)) AND
(i1 :&lt;&gt;: i2) AND (i1\measure_with_unit.unit_component :=: i2\measure_with_unit.unit_component))) = 1))) = 2)
THEN
RETURN (TRUE);
ELSE
RETURN (FALSE);
END_IF;
END;
      </algorithm>
    </function>

    <type name="external_class_name_item">
      <select
        basedon="name_item"
        selectitems="external_class_library">
      </select>
    </type>

    <entity
      name="external_class_library"
      supertypes="external_source">
    </entity>

    <entity
      name="externally_defined_class"
      supertypes="class externally_defined_item">
    </entity>

    <type name="external_identification_item">
      <select
        extensible="YES"
        genericentity="YES">
      </select>
    </type>

    <entity
      name="applied_external_identification_assignment"
      supertypes="external_identification_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="external_identification_item"/>
      </explicit>
    </entity>

    <type name="external_identification_for_plib_property">
      <select
        basedon="external_identification_item"
        selectitems="externally_defined_general_property">
      </select>
    </type>

    <type name="externally_versioned_item">
      <select
        extensible="YES"
        genericentity="YES">
      </select>
    </type>

    <type name="version_for_plib_property">
      <select
        basedon="externally_versioned_item"
        selectitems="externally_defined_general_property">
      </select>
    </type>

    <entity
      name="externally_defined_general_property"
      supertypes="general_property externally_defined_item">
    </entity>

    <rule
      name="external_version_assignments_are_valid"
      appliesto="applied_external_identification_assignment">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(aia &lt;* applied_external_identification_assignment | NOT external_version_assignment_is_valid(aia)))=0">
      </where>
    </rule>

    <rule
      name="plib_property_reference_requires_version"
      appliesto="externally_defined_general_property">
      <algorithm>
LOCAL
plib_properties : SET OF externally_defined_general_property := [];
END_LOCAL;
plib_properties := QUERY (edgp &lt;* externally_defined_general_property |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.KNOWN_SOURCE' IN TYPEOF (edgp.source)) AND
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.KNOWN_SOURCE' + '\PRE_DEFINED_ITEM.NAME' = 'ISO 13584 library'));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(edgp &lt;* plib_properties |(SIZEOF(QUERY(edir &lt;* USEDIN(edgp, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.APPLIED_EXTERNAL_IDENTIFICATION_ASSIGNMENT.ITEMS') |(edir.role.name = 'version'))) &lt;&gt; 1))) = 0">
      </where>
    </rule>

    <rule
      name="plib_property_reference_requires_name_scope"
      appliesto="externally_defined_general_property">
      <algorithm>
LOCAL
known_sourced_properties : SET OF externally_defined_general_property;
END_LOCAL;
known_sourced_properties := QUERY(edc &lt;* externally_defined_general_property |
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.KNOWN_SOURCE' IN TYPEOF(edc.source));
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF (QUERY (edgp &lt;* known_sourced_properties |(SIZEOF (QUERY (edir &lt;* USEDIN (edgp, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_ITEM_RELATIONSHIP.RELATING_ITEM')|(edir.name = 'name scope') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.EXTERNALLY_DEFINED_CLASS' IN TYPEOF (edir.related_item)) AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.KNOWN_SOURCE' IN TYPEOF (edir.related_item.source)))) &lt;&gt;1))) = 0">
      </where>
    </rule>

    <function
      name="external_version_assignment_is_valid">
      <parameter
        name="aia">
        <typename
          name="applied_external_identification_assignment"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
LOCAL
item: identification_item;
role: identification_role;
END_LOCAL;
role:= aia.role;
IF role.name='version' THEN
REPEAT i:=LOINDEX(aia.items) TO HIINDEX(aia.items);
item:= aia.items[i];
IF (SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'EXTERNALLY_VERSIONED_ITEM']*TYPEOF(item))=0) THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
RETURN(TRUE);
ELSE
RETURN(TRUE);
END_IF;
      </algorithm>
    </function>

    <type name="file_identification_item">
      <select
        basedon="identification_item"
        selectitems="document_file">
      </select>
    </type>

    <type name="file_version_item">
      <select
        basedon="versionable_item"
        selectitems="document_file">
      </select>
    </type>

    <type name="file_location_select">
      <select
        basedon="external_identification_item"
        selectitems="document_file">
      </select>
    </type>

    <entity
      name="document_file"
      supertypes="document characterized_object">
      <where
        label="WR1"
        expression="SELF\characterized_object.name = ''">
      </where>
      <where
        label="WR2"
        expression="NOT EXISTS(SELF\characterized_object.description)">
      </where>
      <where
        label="WR3"
        expression="SIZEOF(QUERY(drt &lt;* SELF\document.representation_types | drt.name IN ['digital','physical'])) = 1">
      </where>
    </entity>

    <entity
      name="functional_breakdown_context"
      supertypes="breakdown_context">
    </entity>

    <entity
      name="functional_element_usage"
      supertypes="breakdown_element_usage">
    </entity>

    <type name="groupable_item">
      <select
        extensible="YES"
        genericentity="YES">
      </select>
      <where
        label="WR1"
        expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GROUP' IN TYPEOF(SELF))">
      </where>
    </type>

    <entity
      name="applied_group_assignment"
      supertypes="group_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="groupable_item"/>
      </explicit>
    </entity>

    <type name="identification_item">
      <select
        extensible="YES">
      </select>
    </type>

    <type name="versionable_item">
      <select
        extensible="YES">
      </select>
    </type>

    <entity
      name="applied_identification_assignment"
      supertypes="identification_assignment">
      <explicit
        name="items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="identification_item"/>
      </explicit>
    </entity>

    <type name="idrm_marked_item">
      <select
        extensible="YES"
        basedon="classification_item"
        selectitems="product_definition document_file">
      </select>
    </type>

    <entity
      name="moments_of_inertia_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="(SIZEOF(SELF.items) = 1) AND(SIZEOF(QUERY(i &lt;* SELF.items | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.COMPOUND_REPRESENTATION_ITEM' IN TYPEOF(i)) AND(i.name = 'moments of inertia matrix'))) = 1)">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(i &lt;* SELF.items | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.COMPOUND_REPRESENTATION_ITEM' IN TYPEOF(i)) AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.LIST_REPRESENTATION_ITEM' IN TYPEOF(i\compound_representation_item.item_element)) AND value_range_aggregate_rep_item (i\compound_representation_item.item_element))) = 1">
      </where>
    </entity>

    <rule
      name="restrict_centre_of_mass_representation"
      appliesto="representation">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (r &lt;* representation |(r.name ='centre of mass') AND((SIZEOF (r.items) &lt;&gt;1) OR(SIZEOF (QUERY (i &lt;* r.items |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.POINT' IN TYPEOF (i)) AND(i.name = 'centre point'))) &lt;&gt;1))))=0">
      </where>
    </rule>

    <function
      name="value_range_aggregate_rep_item">
      <parameter
        name="agg">
        <aggregate
          type="AGGREGATE"/>
        <typename
          name="representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
BEGIN
IF (SIZEOF(QUERY(i1 &lt;* agg | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i1)))) = 6) THEN
RETURN (TRUE);
ELSE
RETURN (FALSE);
END_IF;
END;
      </algorithm>
    </function>

    <type name="effectivity_item_for_replacement">
      <select
        basedon="effectivity_item"
        selectitems="product_definition_relationship">
      </select>
    </type>

    <rule
      name="restrict_assembly_category"
      appliesto="product_definition">
      <algorithm>
LOCAL
assembly_definitions: SET OF product_definition := [];
END_LOCAL;
assembly_definitions := QUERY(pd &lt;* product_definition |
SIZEOF(QUERY(pdca &lt;* USEDIN(pd, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_CONTEXT_ASSOCIATION.DEFINITION') |
pdca.frame_of_reference.name= 'assembly definition')) &gt; 0);
      </algorithm>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(pd &lt;* assembly_definitions | NOT ('assembly' IN categories_of_product(pd.formation.of_product))))= 0">
      </where>
    </rule>

    <rule
      name="restrict_product_definitions_for_part_definition_relationship"
      appliesto="product_definition_relationship">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (pdr &lt;* product_definition_relationship |(pdr.name IN [ 'geometrical relationship' , 'definition replacement' ]) AND((pdr.relating_product_definition.frame_of_reference.name &lt;&gt;'part definition') OR(pdr.related_product_definition.frame_of_reference.name &lt;&gt;'part definition')))) =0">
      </where>
    </rule>

    <rule
      name="product_definition_replacement_requires_effectivity_assignment"
      appliesto="product_definition_relationship">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(pdr &lt;* product_definition_relationship |(pdr.name = 'definition replacement') AND(SIZEOF(USEDIN(pdr,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.APPLIED_EFFECTIVITY_ASSIGNMENT.ITEMS')) = 0)))= 0">
      </where>
    </rule>

    <type name="mri_aliasable_item">
      <select
        extensible="YES"
        basedon="aliasable_item"
        selectitems="approval_status contract organization security_classification_level">
      </select>
    </type>

    <type name="mri_approval_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="approval_item"
        selectitems="certification contract">
      </select>
    </type>

    <type name="mri_attribute_language_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="attribute_language_item"
        selectitems="applied_organizational_project_assignment approval approval_relationship approval_status certification certification_type contract date_role date_time_role identification_role organization_relationship organizational_project organizational_project_relationship organizational_project_role person_and_organization">
      </select>
    </type>

    <type name="mri_date_and_time_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="date_and_time_item"
        selectitems="applied_organization_assignment applied_person_and_organization_assignment applied_security_classification_assignment certification contract security_classification">
      </select>
    </type>

    <type name="mri_date_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="date_item"
        selectitems="applied_organization_assignment applied_person_and_organization_assignment applied_security_classification_assignment certification contract security_classification">
      </select>
    </type>

    <type name="mri_identification_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="identification_item"
        selectitems="approval_status contract organization security_classification_level">
      </select>
    </type>

    <type name="mri_multi_language_attribute_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="multi_language_attribute_item"
        selectitems="applied_organizational_project_assignment approval approval_relationship approval_status certification certification_type contract date_role date_time_role identification_role organization_relationship organizational_project organizational_project_relationship organizational_project_role person_and_organization">
      </select>
    </type>

    <type name="mri_organization_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="organization_item"
        selectitems="applied_identification_assignment applied_security_classification_assignment contract">
      </select>
    </type>

    <type name="mri_person_and_organization_item">
      <select
        extensible="YES"
        genericentity="YES"
        basedon="person_and_organization_item"
        selectitems="applied_identification_assignment applied_security_classification_assignment contract">
      </select>
    </type>

    <type name="mce_organization_item">
      <select
        basedon="organization_item"
        selectitems="configuration_effectivity">
      </select>
    </type>

    <type name="attribute_language_item">
      <select
        extensible="YES"
        genericentity="YES"
        selectitems="multi_language_attribute_assignment attribute_value_assignment">
      </select>
    </type>

    <type name="multi_language_attribute_item">
      <select
        extensible="YES"
        genericentity="YES">
      </select>
    </type>

    <entity
      name="language"
      supertypes="group">
      <where
        label="WR1"
        expression="SELF\group.name &lt;&gt; ''">
      </where>
    </entity>

    <entity
      name="attribute_language_assignment"
      supertypes="attribute_classification_assignment">
      <explicit
        name="assigned_class">
        <typename
          name="language"/>
        <redeclaration
          entity-ref="attribute_classification_assignment"/>
        </explicit>
        <explicit
          name="items">
          <aggregate
            type="SET"
            lower="1"
            upper="?"/>
          <typename
            name="attribute_language_item"/>
        </explicit>
        <where
          label="WR1"
          expression="SELF\attribute_classification_assignment.role.name IN ['primary', 'translated']">
        </where>
        <where
          label="WR2"
          expression="SELF\attribute_classification_assignment.attribute_name&lt;&gt; ''">
        </where>
      </entity>

      <entity
        name="multi_language_attribute_assignment"
        supertypes="attribute_value_assignment">
        <explicit
          name="items">
          <aggregate
            type="SET"
            lower="1"
            upper="?"/>
          <typename
            name="multi_language_attribute_item"/>
        </explicit>
        <derived
          name="translation_language"
          expression="language_indication[1]\attribute_classification_assignment.assigned_class">
          <typename
            name="language"/>
        </derived>
        <inverse
          name="language_indication"
          entity="attribute_language_assignment"
          attribute="items">
          <inverse.aggregate
            type="SET"
            lower="1"
            upper="1"/>
        </inverse>
        <where
          label="WR1"
          expression="(SELF\attribute_value_assignment.role.name = 'alternate language')">
        </where>
        <where
          label="WR2"
          expression="SIZEOF(QUERY(ala &lt;* language_indication |(ala\attribute_classification_assignment.attribute_name = 'attribute_value') AND(ala\attribute_classification_assignment.role.name='translated'))) = 1">
        </where>
        <where
          label="WR3"
          expression="SELF\attribute_value_assignment.attribute_name &lt;&gt; ''">
        </where>
        <where
          label="WR4"
          expression="SIZEOF(QUERY(ci &lt;* items | SIZEOF(QUERY(ata &lt;* USEDIN(ci, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MULTI_LANGUAGE_ATTRIBUTE_ASSIGNMENT.ITEMS') |(ata\attribute_value_assignment.attribute_name = SELF\attribute_value_assignment.attribute_name) AND(ata.translation_language :=: translation_language)))&gt;1)) =0">
        </where>
        <where
          label="WR5"
          expression="SIZEOF(QUERY(ci &lt;* items | SIZEOF(QUERY(ata &lt;* USEDIN(ci, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ATTRIBUTE_LANGUAGE_ASSIGNMENT.ITEMS') |(ata\attribute_classification_assignment.role.name='primary') AND(ata\attribute_classification_assignment.attribute_name= SELF\attribute_value_assignment.attribute_name) AND(ata\attribute_classification_assignment.assigned_class :=: translation_language)))&gt;0)) =0">
        </where>
      </entity>

      <rule
        name="restrict_language_assignment_per_attribute"
        appliesto="attribute_language_assignment">
        <where
          label="WR1"
          expression="SIZEOF (QUERY (ala1 &lt;* attribute_language_assignment | SIZEOF(QUERY(it &lt;* ala1.items | SIZEOF (QUERY (ala2 &lt;* USEDIN (it ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ATTRIBUTE_LANGUAGE_ASSIGNMENT.ITEMS') |(ala1\attribute_classification_assignment.attribute_name = ala2\attribute_classification_assignment.attribute_name) AND(ala1\attribute_classification_assignment.assigned_class :=: ala2\attribute_classification_assignment.assigned_class))) &gt;1)) &gt;0)) =0">
        </where>
      </rule>

      <type name="name_item">
        <select
          extensible="YES"
          genericentity="YES">
        </select>
      </type>

      <entity
        name="applied_name_assignment"
        supertypes="name_assignment">
        <explicit
          name="item">
          <typename
            name="name_item"/>
        </explicit>
      </entity>

      <rule
        name="restrict_collection_category"
        appliesto="product_definition">
        <algorithm>
LOCAL
collection_definitions: SET OF product_definition := [];
END_LOCAL;
collection_definitions := QUERY(pd &lt;* product_definition |
SIZEOF(QUERY(pdca &lt;* USEDIN(pd, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_CONTEXT_ASSOCIATION.DEFINITION') |
pdca.frame_of_reference.name= 'collection definition')) &gt; 0);
        </algorithm>
        <where
          label="WR1"
          expression="SIZEOF(QUERY(pd &lt;* collection_definitions | NOT ('collection' IN categories_of_product(pd.formation.of_product))))= 0">
        </where>
      </rule>

      <rule
        name="restrict_product_definitions_for_collection"
        appliesto="product_definition_relationship">
        <where
          label="WR1"
          expression="SIZEOF (QUERY (pdr &lt;* product_definition_relationship |(pdr. name = 'collection membership') AND((pdr.relating_product_definition.frame_of_reference.name&lt;&gt;'part definition') OR(pdr.related_product_definition.frame_of_reference.name&lt;&gt;'part occurrence') OR(SIZEOF (QUERY (pdca &lt;* USEDIN (pdr.relating_product_definition ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_DEFINITION_CONTEXT_ASSOCIATION.DEFINITION') |(pdca.role.name = 'part definition type') AND(pdca.frame_of_reference.name = 'collection definition'))) =0)))) =0">
        </where>
      </rule>

      <type name="product_definition_or_assembly_relationship">
        <select
          selectitems="assembly_component_usage product_definition">
        </select>
      </type>

      <rule
        name="restrict_part_occurrence"
        appliesto="product_definition">
        <algorithm>
LOCAL
part_occurrences: SET OF product_definition := [];
END_LOCAL;
part_occurrences := QUERY(pd &lt;* product_definition |
(pd.frame_of_reference.name = 'part occurrence'));
        </algorithm>
        <where
          label="WR1"
          expression="SIZEOF (QUERY (pd &lt;* part_occurrences |(NOT(pd.name IN['single instance' , 'selected instance' ,'quantified instance' , 'specified instance' ])))) = 0">
        </where>
        <where
          label="WR2"
          expression="SIZEOF (QUERY (pd &lt;* part_occurrences |(SIZEOF (QUERY (pdr &lt;* USEDIN (pd ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') | pdr.name = 'definition usage')) &lt;&gt;1) AND(SIZEOF (QUERY (cd &lt;* USEDIN (pd , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONFIGURATION_DESIGN.DESIGN') |(cd.name = 'occurrence usage definition') AND(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PRODUCT_IDENTIFICATION' IN TYPEOF(cd.configuration))))) &lt;&gt;1))) = 0">
        </where>
        <where
          label="WR3"
          expression="SIZEOF (QUERY (pd &lt;* part_occurrences |(SIZEOF (QUERY (cd &lt;* USEDIN (pd , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DEFINITION_USAGE' IN TYPEOF (cd)))) = 0)AND(SIZEOF (USEDIN (pd , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PRODUCT_DEFINITION_OCCURRENCE_RELATIONSHIP.OCCURRENCE')) = 0))) = 0">
        </where>
        <where
          label="WR4"
          expression="SIZEOF (QUERY (pd &lt;* part_occurrences |(pd.name = 'selected instance') AND NOT valid_selected_instance_representation(pd)))=0">
        </where>
        <where
          label="WR5"
          expression="SIZEOF (QUERY (pd &lt;* part_occurrences |(pd.name = 'quantified instance') AND(SIZEOF (QUERY (ppd &lt;* USEDIN (pd , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PROPERTY_DEFINITION.DEFINITION') |(ppd.name ='occurrence quantity') AND(SIZEOF (QUERY (pdr &lt;*USEDIN (ppd , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') | (pdr.used_representation.name = 'quantity') AND(SIZEOF (pdr.used_representation.items) = 1) AND(SIZEOF (QUERY (i &lt;* pdr.used_representation.items |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'MEASURE_REPRESENTATION_ITEM' IN TYPEOF (i)) AND(i.name = 'quantity measure'))) = 1)))= 1)))= 0)))= 0">
        </where>
        <where
          label="WR6"
          expression="SIZEOF (QUERY (pd &lt;* part_occurrences |(pd.name = 'specified instance') AND(SIZEOF (QUERY (pdor &lt;* USEDIN (pd , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DEFINITION_OCCURRENCE_RELATIONSHIP.OCCURRENCE') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'SPECIFIED_HIGHER_USAGE_OCCURRENCE' IN TYPEOF (pdor.occurrence_usage))) = 0))) = 0">
        </where>
      </rule>

      <rule
        name="restrict_part_occurrence_category"
        appliesto="product_definition">
        <algorithm>
LOCAL
part_occurrences: SET OF product_definition := [];
END_LOCAL;
part_occurrences := QUERY(pd &lt;* product_definition |(
pd.frame_of_reference.name = 'part occurrence'));
        </algorithm>
        <where
          label="WR1"
          expression="SIZEOF(QUERY(pd &lt;* part_occurrences |(SIZEOF(QUERY(prpc &lt;* USEDIN(pd.formation.of_product, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name IN ['part','raw material','tool'])) = 0))) = 0">
        </where>
      </rule>

      <rule
        name="selected_instance_usage_requires_representation"
        appliesto="assembly_component_usage">
        <algorithm>
LOCAL
selected_instance_usages: SET OF assembly_component_usage := [];
END_LOCAL;
selected_instance_usages:= QUERY(acr &lt;* assembly_component_usage|
(acr.name = 'selected instance usage'));
        </algorithm>
        <where
          label="WR1"
          expression="SIZEOF (QUERY (acr &lt;* selected_instance_usages | NOT valid_selected_instance_representation(acr)))=0">
        </where>
      </rule>

      <rule
        name="restrict_product_definitions_for_definition_usage"
        appliesto="product_definition_relationship">
        <where
          label="WR1"
          expression="SIZEOF (QUERY (pdr &lt;* product_definition_relationship |(pdr.name = 'definition usage') AND((pdr.relating_product_definition.frame_of_reference.name&lt;&gt; 'part definition') OR(pdr.related_product_definition.frame_of_reference.name&lt;&gt;'part occurrence')))) =0">
        </where>
      </rule>

      <function
        name="valid_selected_instance_representation">
        <parameter
          name="pd">
          <typename
            name="product_definition_or_assembly_relationship"/>
        </parameter>
        <builtintype
          type="LOGICAL"/>
        <algorithm>
LOCAL
properties: SET OF property_definition :=[];
property_definition_representations: SET OF property_definition_representation :=[];
selected_representation: representation;
END_LOCAL;
properties := bag_to_set(QUERY(prd&lt;* USEDIN (pd ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION.DEFINITION') |
(prd.name = 'occurrence selection')));
IF (SIZEOF(properties)&lt;&gt;1) THEN
RETURN(FALSE);
END_IF;
property_definition_representations := bag_to_set(QUERY (pdr &lt;* USEDIN (properties[1] , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
(pdr.used_representation.name = 'selection criteria')));
IF (SIZEOF(property_definition_representations)&lt;&gt;1) THEN
RETURN(FALSE);
END_IF;
selected_representation := property_definition_representations[1].used_representation;
IF (SIZEOF(selected_representation.items) &lt;1) OR (SIZEOF(selected_representation.items) &gt;2) THEN
RETURN(FALSE);
END_IF;
IF (SIZEOF (QUERY (i &lt;* selected_representation.used_representation.items |
(SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM' ,
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VALUE_RANGE']* TYPEOF (i)) = 1) AND
(i.name = 'selection quantity'))) &lt;&gt; 1) THEN
RETURN(FALSE);
END_IF;
IF (SIZEOF (QUERY (i &lt;* selected_representation.used_representation.items |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF (i)) AND
(i.name = 'selection control')))&gt; 1) THEN
RETURN(FALSE);
END_IF;
IF (SIZEOF (QUERY (i &lt;* selected_representation.used_representation.items |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(i)) AND
(i.name = 'selection control')))= 0) AND
(SIZEOF (QUERY (i &lt;* selected_representation.used_representation.items |
(i.name = 'selection quantity') AND
(SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.QUALIFIED_REPRESENTATION_ITEM' ,
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VALUE_RANGE']* TYPEOF (i)) =0))) &gt; 0) THEN
RETURN(FALSE);
END_IF;
RETURN(TRUE);
        </algorithm>
      </function>

      <entity
        name="person_and_organization_address"
        supertypes="organizational_address personal_address">
        <explicit
          name="organizations">
          <aggregate
            type="SET"
            lower="1"
            upper="1"/>
          <typename
            name="organization"/>
          <redeclaration
            entity-ref="organizational_address"/>
          </explicit>
          <explicit
            name="people">
            <aggregate
              type="SET"
              lower="1"
              upper="1"/>
            <typename
              name="person"/>
            <redeclaration
              entity-ref="personal_address"/>
            </explicit>
            <where
              label="WR1"
              expression="SIZEOF(QUERY(pao &lt;* USEDIN (SELF\personal_address.people[1], 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PERSON_AND_ORGANIZATION.THE_PERSON') | pao.the_organization :=: SELF\organizational_address.organizations[1])) = 1">
            </where>
          </entity>

          <type name="organization_item">
            <select
              extensible="YES">
            </select>
          </type>

          <type name="person_and_organization_item">
            <select
              extensible="YES">
            </select>
          </type>

          <entity
            name="applied_organization_assignment"
            supertypes="organization_assignment">
            <explicit
              name="items">
              <aggregate
                type="SET"
                lower="1"
                upper="?"/>
              <typename
                name="organization_item"/>
            </explicit>
          </entity>

          <entity
            name="applied_person_and_organization_assignment"
            supertypes="person_and_organization_assignment">
            <explicit
              name="items">
              <aggregate
                type="SET"
                lower="1"
                upper="?"/>
              <typename
                name="person_and_organization_item"/>
            </explicit>
          </entity>

          <entity
            name="physical_breakdown_context"
            supertypes="breakdown_context">
          </entity>

          <entity
            name="physical_element_usage"
            supertypes="breakdown_element_usage">
          </entity>

          <type name="plib_class_identification_item">
            <select
              basedon="external_identification_item"
              selectitems="externally_defined_class">
            </select>
          </type>

          <type name="plib_class_organization_item">
            <select
              basedon="organization_item"
              selectitems="class">
            </select>
          </type>

          <entity
            name="known_source"
            supertypes="external_source pre_defined_item">
          </entity>

          <type name="product_as_individual_identification_item">
            <select
              basedon="identification_item"
              selectitems="product_as_individual product_as_individual_version product_as_individual_view">
            </select>
          </type>

          <entity
            name="product_as_individual"
            supertypes="product">
          </entity>

          <entity
            name="product_as_individual_version"
            abstract.supertype="YES"
            super.expression="(ONEOF (product_as_planned, product_as_realized))"
            supertypes="product_definition_formation">
            <explicit
              name="of_product">
              <typename
                name="product_as_individual"/>
              <redeclaration
                entity-ref="product_definition_formation"/>
              </explicit>
            </entity>

            <entity
              name="product_as_individual_view"
              supertypes="product_definition">
              <explicit
                name="formation RENAMED defined_version">
                <typename
                  name="product_as_individual_version"/>
                <redeclaration
                  entity-ref="product_definition"/>
                </explicit>
              </entity>

              <entity
                name="product_as_planned"
                supertypes="product_as_individual_version">
              </entity>

              <entity
                name="product_as_realized"
                supertypes="product_as_individual_version">
              </entity>

              <entity
                name="product_design_to_individual"
                supertypes="product_relationship">
                <explicit
                  name="related_product RENAMED individual_product">
                  <typename
                    name="product_as_individual"/>
                  <redeclaration
                    entity-ref="product_relationship"/>
                  </explicit>
                  <explicit
                    name="relating_product RENAMED product_design">
                    <typename
                      name="product"/>
                    <redeclaration
                      entity-ref="product_relationship"/>
                    </explicit>
                  </entity>

                  <entity
                    name="product_design_version_to_individual"
                    supertypes="product_definition_formation_relationship">
                    <explicit
                      name="related_product_definition_formation RENAMED individual_product">
                      <typename
                        name="product_as_individual_version"/>
                      <redeclaration
                        entity-ref="product_definition_formation_relationship"/>
                      </explicit>
                      <explicit
                        name="relating_product_definition_formation RENAMED product_design_version">
                        <typename
                          name="product_definition_formation"/>
                        <redeclaration
                          entity-ref="product_definition_formation_relationship"/>
                        </explicit>
                      </entity>

                      <entity
                        name="product_planned_to_realized"
                        supertypes="product_definition_formation_relationship">
                        <explicit
                          name="relating_product_definition_formation RENAMED planned_product">
                          <typename
                            name="product_as_planned"/>
                          <redeclaration
                            entity-ref="product_definition_formation_relationship"/>
                          </explicit>
                          <explicit
                            name="related_product_definition_formation RENAMED realized_product">
                            <typename
                              name="product_as_realized"/>
                            <redeclaration
                              entity-ref="product_definition_formation_relationship"/>
                            </explicit>
                          </entity>

                          <type name="product_definition_or_breakdown_element_usage">
                            <select
                              extensible="YES"
                              genericentity="YES"
                              selectitems="breakdown_element_usage product_definition">
                            </select>
                          </type>

                          <type name="product_definition_or_product_definition_relationship">
                            <select
                              extensible="YES"
                              genericentity="YES"
                              selectitems="product_definition product_definition_usage">
                            </select>
                          </type>

                          <entity
                            name="breakdown_context"
                            supertypes="product_definition_relationship">
                          </entity>

                          <entity
                            name="breakdown_element_group_assignment"
                            supertypes="group_assignment">
                            <explicit
                              name="assigned_group">
                              <typename
                                name="product_definition_element_relationship"/>
                              <redeclaration
                                entity-ref="group_assignment"/>
                              </explicit>
                              <explicit
                                name="items">
                                <aggregate
                                  type="SET"
                                  lower="1"
                                  upper="1"/>
                                <typename
                                  name="product_definition_or_breakdown_element_usage"/>
                              </explicit>
                            </entity>

                            <entity
                              name="breakdown_element_realization"
                              supertypes="characterized_object product_definition_element_relationship">
                            </entity>

                            <entity
                              name="breakdown_element_usage"
                              supertypes="product_definition_relationship">
                            </entity>

                            <entity
                              name="breakdown_of"
                              supertypes="product_definition_relationship">
                            </entity>

                            <entity
                              name="product_definition_element_relationship"
                              supertypes="group">
                            </entity>

                            <entity
                              name="product_definition_group_assignment"
                              supertypes="group_assignment">
                              <explicit
                                name="assigned_group">
                                <typename
                                  name="product_definition_element_relationship"/>
                                <redeclaration
                                  entity-ref="group_assignment"/>
                                </explicit>
                                <explicit
                                  name="items">
                                  <aggregate
                                    type="SET"
                                    lower="1"
                                    upper="1"/>
                                  <typename
                                    name="product_definition_or_product_definition_relationship"/>
                                </explicit>
                              </entity>

                              <type name="category_usage_item">
                                <select
                                  selectitems="product_class">
                                </select>
                              </type>

                              <type name="id_for_class">
                                <select
                                  basedon="identification_item"
                                  selectitems="product_class product_concept_feature">
                                </select>
                              </type>

                              <type name="version_for_class">
                                <select
                                  basedon="versionable_item"
                                  selectitems="product_class product_concept_feature">
                                </select>
                              </type>

                              <type name="specification_for_category">
                                <select
                                  basedon="groupable_item"
                                  selectitems="package_product_concept_feature product_concept_feature">
                                </select>
                              </type>

                              <entity
                                name="exclusive_product_concept_feature_category"
                                supertypes="product_concept_feature_category">
                              </entity>

                              <entity
                                name="inclusion_product_concept_feature"
                                supertypes="conditional_concept_feature">
                                <where
                                  label="WR1"
                                  expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PACKAGE_PRODUCT_CONCEPT_FEATURE' IN TYPEOF (SELF))">
                                </where>
                                <where
                                  label="WR2"
                                  expression="SIZEOF (QUERY(cfr &lt;* USEDIN(SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONCEPT_FEATURE_RELATIONSHIP.RELATING_PRODUCT_CONCEPT_FEATURE')|'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'CONCEPT_FEATURE_RELATIONSHIP_WITH_CONDITION' IN TYPEOF(cfr))) + SIZEOF(QUERY(cfr &lt;* USEDIN(SELF , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONCEPT_FEATURE_RELATIONSHIP.RELATED_PRODUCT_CONCEPT_FEATURE')|'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONCEPT_FEATURE_RELATIONSHIP_WITH_CONDITION' IN TYPEOF(cfr)))= 0">
                                </where>
                                <where
                                  label="WR3"
                                  expression="SELF.condition.conditional_operator.name = 'implication'">
                                </where>
                              </entity>

                              <entity
                                name="package_product_concept_feature"
                                supertypes="product_concept_feature">
                                <where
                                  label="WR1"
                                  expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONDITIONAL_CONCEPT_FEATURE' IN TYPEOF (SELF))">
                                </where>
                                <where
                                  label="WR2"
                                  expression="SIZEOF (QUERY(cfr &lt;* USEDIN (SELF , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONCEPT_FEATURE_RELATIONSHIP.' +'RELATING_PRODUCT_CONCEPT_FEATURE')|('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONCEPT_FEATURE_RELATIONSHIP_WITH_CONDITION' IN TYPEOF (cfr)) AND(SIZEOF (QUERY(ipcf &lt;* USEDIN (cfr , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONDITIONAL_CONCEPT_FEATURE.' +	'CONDITION')|'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'INCLUSION_PRODUCT_CONCEPT_FEATURE' IN TYPEOF (ipcf)))= 1)))&gt;0">
                                </where>
                              </entity>

                              <entity
                                name="product_class"
                                supertypes="product_concept characterized_object">
                              </entity>

                              <entity
                                name="product_concept_feature_category"
                                supertypes="group">
                                <where
                                  label="WR1"
                                  expression="SIZEOF(QUERY(aga &lt;* USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'GROUP_ASSIGNMENT.ASSIGNED_GROUP')|('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'APPLIED_GROUP_ASSIGNMENT' IN TYPEOF(aga)) AND((aga.role.name &lt;&gt; 'specification category member') OR(SIZEOF(QUERY(i &lt;* aga.items|('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'PRODUCT_CONCEPT_FEATURE' IN TYPEOF (i)) AND NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'CONDITIONAL_CONCEPT_FEATURE' IN TYPEOF (i)))) &lt;&gt; SIZEOF (aga.items))))) =0">
                                </where>
                              </entity>

                              <entity
                                name="product_concept_feature_category_usage"
                                supertypes="group_assignment">
                                <explicit
                                  name="assigned_group">
                                  <typename
                                    name="product_concept_feature_category"/>
                                  <redeclaration
                                    entity-ref="group_assignment"/>
                                  </explicit>
                                  <explicit
                                    name="items">
                                    <aggregate
                                      type="SET"
                                      lower="1"
                                      upper="?"/>
                                    <typename
                                      name="category_usage_item"/>
                                  </explicit>
                                  <where
                                    label="WR1"
                                    expression="SELF.role.name IN [ 'mandatory category usage', 'optional category usage' ]">
                                  </where>
                                </entity>

                                <rule
                                  name="restrict_concept_feature_operator"
                                  appliesto="concept_feature_operator">
                                  <where
                                    label="WR1"
                                    expression="SIZEOF (QUERY (cfo &lt;* concept_feature_operator | NOT(cfo.name IN ['and' , 'or' , 'oneof' , 'not' , 'implication']))) = 0">
                                  </where>
                                  <where
                                    label="WR2"
                                    expression="SIZEOF (QUERY (cfo &lt;* concept_feature_operator | (cfo.name = 'implication') AND(SIZEOF (QUERY (cfrwc &lt;* USEDIN (cfo , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONCEPT_FEATURE_RELATIONSHIP_WITH_CONDITION.' +'CONDITIONAL_OPERATOR') | SIZEOF (QUERY (ccf &lt;* USEDIN(cfrwc , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONDITIONAL_CONCEPT_FEATURE.CONDITION') | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'INCLUSION_PRODUCT_CONCEPT_FEATURE' IN TYPEOF (ccf)))) &gt;0)) &gt;0))) = 0">
                                  </where>
                                  <where
                                    label="WR3"
                                    expression="SIZEOF(QUERY (cfo &lt;* concept_feature_operator | (cfo.name = 'not') AND (SIZEOF(QUERY(cfrwc &lt;* USEDIN(cfo, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONCEPT_FEATURE_RELATIONSHIP_WITH_CONDITION.CONDITIONAL_OPERATOR') | cfrwc.related_product_concept_feature :&lt;&gt;: cfrwc.relating_product_concept_feature)) &gt;0))) = 0">
                                  </where>
                                </rule>

                                <rule
                                  name="restrict_group_relationship_for_specification_category"
                                  appliesto="group_relationship">
                                  <where
                                    label="WR1"
                                    expression="SIZEOF(QUERY(gr &lt;* group_relationship |(gr.name = 'specification category hierarchy') AND(NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_CONCEPT_FEATURE_CATEGORY' IN TYPEOF(gr.related_group)) OR NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_CONCEPT_FEATURE_CATEGORY' IN TYPEOF(gr.relating_group))))) = 0">
                                  </where>
                                </rule>

                                <rule
                                  name="product_concept_feature_requires_category"
                                  appliesto="product_concept_feature">
                                  <where
                                    label="WR1"
                                    expression="SIZEOF (QUERY (pcf &lt;* product_concept_feature |(SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'INCLUSION_PRODUCT_CONCEPT_FEATURE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONDITIONAL_CONCEPT_FEATURE'] * TYPEOF(pcf)) = 0) AND(SIZEOF (QUERY (aga &lt;* USEDIN (pcf , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'APPLIED_GROUP_ASSIGNMENT.' + 'ITEMS') |(aga.role.name = 'specification category member') AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PRODUCT_CONCEPT_FEATURE_CATEGORY' IN TYPEOF (aga.assigned_group)))) &lt;&gt;1))) = 0">
                                  </where>
                                </rule>

                                <type name="pdm_action_items">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="action_items"
                                    selectitems="configuration_effectivity product_definition product_definition_formation product_definition_relationship">
                                  </select>
                                </type>

                                <type name="pdm_action_request_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="action_request_item"
                                    selectitems="product_definition product_definition_formation product_definition_relationship property_definition">
                                  </select>
                                </type>

                                <type name="pdm_approval_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="approval_item"
                                    selectitems="action applied_action_assignment configuration_effectivity versioned_action_request">
                                  </select>
                                </type>

                                <type name="pdm_attribute_language_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="attribute_language_item"
                                    selectitems="applied_document_reference applied_document_usage_constraint_assignment applied_external_identification_assignment applied_organizational_project_assignment approval approval_relationship approval_status certification certification_type contract date_role date_time_role document_relationship document_usage_role external_source identification_role object_role organization_relationship organizational_project organizational_project_relationship organizational_project_role person_and_organization product product_category product_definition product_definition_formation product_definition_relationship">
                                  </select>
                                </type>

                                <type name="pdm_certification_item">
                                  <select
                                    extensible="YES"
                                    basedon="certification_item"
                                    selectitems="product_definition_formation_relationship">
                                  </select>
                                </type>

                                <type name="pdm_classification_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="classification_item"
                                    selectitems="action action_directive action_method action_property action_relationship action_request_solution action_request_status address alternate_product_relationship applied_action_assignment applied_action_request_assignment applied_approval_assignment applied_certification_assignment applied_contract_assignment applied_date_and_time_assignment applied_date_assignment applied_document_reference applied_document_usage_constraint_assignment applied_effectivity_assignment applied_event_occurrence_assignment applied_external_identification_assignment applied_identification_assignment applied_organization_assignment applied_organizational_project_assignment applied_person_and_organization_assignment applied_security_classification_assignment approval approval_person_organization approval_relationship approval_status assembly_component_usage_substitute calendar_date certification class configuration_item context_dependent_unit contract conversion_based_unit date_and_time date_and_time_assignment date_assignment derived_unit descriptive_representation_item directed_action document_file document_relationship effectivity event_occurrence executed_action general_property general_property_relationship group identification_assignment language measure_representation_item measure_with_unit multi_language_attribute_assignment named_unit organization organization_relationship organizational_address organizational_project organizational_project_relationship person person_and_organization_address product product_category product_concept product_definition product_definition_context product_definition_formation product_definition_formation_relationship product_definition_relationship property_definition property_definition_representation representation representation_context representation_item security_classification uncertainty_measure_with_unit versioned_action_request">
                                  </select>
                                </type>

                                <type name="pdm_date_and_time_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="date_and_time_item"
                                    selectitems="action applied_action_assignment executed_action versioned_action_request">
                                  </select>
                                </type>

                                <type name="pdm_date_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="date_item"
                                    selectitems="action applied_action_assignment versioned_action_request">
                                  </select>
                                </type>

                                <type name="pdm_document_reference_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="document_reference_item"
                                    selectitems="action_method executed_action product_definition_formation_relationship shape_aspect shape_aspect_relationship versioned_action_request">
                                  </select>
                                </type>

                                <type name="pdm_effectivity_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="effectivity_item"
                                    selectitems="product_definition product_definition_formation product_definition_relationship">
                                  </select>
                                </type>

                                <type name="pdm_event_occurrence_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="event_occurrence_item"
                                    selectitems="organizational_project">
                                  </select>
                                </type>

                                <type name="pdm_external_class_name_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="name_item"
                                    selectitems="assembly_component_usage external_class_library">
                                  </select>
                                </type>

                                <type name="pdm_identification_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="identification_item"
                                    selectitems="shape_aspect_relationship">
                                  </select>
                                </type>

                                <type name="pdm_multi_language_attribute_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="multi_language_attribute_item"
                                    selectitems="applied_document_reference applied_document_usage_constraint_assignment applied_external_identification_assignment applied_organizational_project_assignment approval approval_relationship approval_status certification certification_type contract date_role date_time_role document_relationship document_usage_role external_source identification_role object_role organization_relationship organizational_project organizational_project_relationship organizational_project_role person_and_organization product product_category product_definition product_definition_formation product_definition_relationship">
                                  </select>
                                </type>

                                <type name="pdm_organization_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="organization_item"
                                    selectitems="action applied_action_assignment approval configuration_item contract executed_action security_classification versioned_action_request">
                                  </select>
                                </type>

                                <type name="pdm_person_and_organization_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="person_and_organization_item"
                                    selectitems="action applied_action_assignment approval configuration_item contract executed_action security_classification versioned_action_request">
                                  </select>
                                </type>

                                <type name="pdm_project_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="project_item"
                                    selectitems="executed_action product_concept">
                                  </select>
                                </type>

                                <type name="pdm_security_classification_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="security_classification_item"
                                    selectitems="assembly_component_usage">
                                  </select>
                                </type>

                                <type name="pdm_time_interval_item">
                                  <select
                                    extensible="YES"
                                    basedon="time_interval_item"
                                    selectitems="action">
                                  </select>
                                </type>

                                <type name="project_as_date_and_time_item">
                                  <select
                                    basedon="date_and_time_item"
                                    selectitems="organizational_project">
                                  </select>
                                </type>

                                <type name="project_as_date_item">
                                  <select
                                    basedon="date_item"
                                    selectitems="organizational_project">
                                  </select>
                                </type>

                                <type name="project_event_occurrence_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="event_occurrence_item"
                                    selectitems="organizational_project">
                                  </select>
                                </type>

                                <type name="project_item">
                                  <select
                                    extensible="YES">
                                  </select>
                                </type>

                                <entity
                                  name="applied_organizational_project_assignment"
                                  supertypes="organizational_project_assignment">
                                  <explicit
                                    name="items">
                                    <aggregate
                                      type="SET"
                                      lower="1"
                                      upper="?"/>
                                    <typename
                                      name="project_item"/>
                                  </explicit>
                                </entity>

                                <type name="requirement_identification_and_version_mri_identification_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    basedon="mri_identification_item"
                                    selectitems="product product_definition_formation">
                                  </select>
                                </type>

                                <type name="security_classification_item">
                                  <select
                                    extensible="YES">
                                  </select>
                                </type>

                                <entity
                                  name="applied_security_classification_assignment"
                                  supertypes="security_classification_assignment">
                                  <explicit
                                    name="items">
                                    <aggregate
                                      type="SET"
                                      lower="1"
                                      upper="?"/>
                                    <typename
                                      name="security_classification_item"/>
                                  </explicit>
                                </entity>

                                <type name="spr_document_reference_item">
                                  <select
                                    basedon="document_reference_item"
                                    selectitems="product product_definition product_definition_formation">
                                  </select>
                                </type>

                                <type name="spr_organization_item">
                                  <select
                                    extensible="YES"
                                    basedon="organization_item"
                                    selectitems="product product_definition product_definition_formation">
                                  </select>
                                </type>

                                <type name="spr_person_and_organization_item">
                                  <select
                                    extensible="YES"
                                    basedon="person_and_organization_item"
                                    selectitems="product product_definition product_definition_formation">
                                  </select>
                                </type>

                                <function
                                  name="categories_of_product">
                                  <parameter
                                    name="obj">
                                    <typename
                                      name="product"/>
                                  </parameter>
                                  <aggregate
                                    type="SET"/>
                                  <builtintype
                                    type="STRING"/>
                                  <algorithm>
LOCAL
category_assignments: BAG OF product_category;
categories: SET OF STRING:=[];
i: INTEGER;
END_LOCAL;
category_assignments := USEDIN(obj, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF' + '.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS');
REPEAT i := LOINDEX(category_assignments) TO HIINDEX(category_assignments) BY 1;
categories := categories + category_assignments[i].name;
END_REPEAT;
RETURN(categories);
                                  </algorithm>
                                </function>

                                <type name="configured_effectivity_context_item">
                                  <select
                                    selectitems="product_concept_feature_association">
                                  </select>
                                </type>

                                <type name="configured_effectivity_item">
                                  <select
                                    extensible="YES"
                                    genericentity="YES"
                                    selectitems="product_definition">
                                  </select>
                                </type>

                                <entity
                                  name="configured_effectivity_context_assignment"
                                  supertypes="effectivity_context_assignment">
                                  <explicit
                                    name="assigned_effectivity_assignment">
                                    <typename
                                      name="configured_effectivity_assignment"/>
                                    <redeclaration
                                      entity-ref="effectivity_context_assignment"/>
                                    </explicit>
                                    <explicit
                                      name="items">
                                      <aggregate
                                        type="SET"
                                        lower="1"
                                        upper="?"/>
                                      <typename
                                        name="configured_effectivity_context_item"/>
                                    </explicit>
                                    <where
                                      label="WR1"
                                      expression="SIZEOF(SELF.items) = 1">
                                    </where>
                                  </entity>

                                  <entity
                                    name="configured_effectivity_assignment"
                                    supertypes="effectivity_assignment">
                                    <explicit
                                      name="items">
                                      <aggregate
                                        type="SET"
                                        lower="1"
                                        upper="?"/>
                                      <typename
                                        name="configured_effectivity_item"/>
                                    </explicit>
                                    <where
                                      label="WR1"
                                      expression="(SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EFFECTIVITY'] * TYPEOF(SELF.assigned_effectivity)) = 1) AND (SELF.assigned_effectivity.id = 'configuration validity')">
                                    </where>
                                    <where
                                      label="WR2"
                                      expression="SIZEOF(SELF.items) = 1">
                                    </where>
                                    <where
                                      label="WR3"
                                      expression="SIZEOF(QUERY(i &lt;* SELF.items | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION' IN TYPEOF(i)) OR NOT (i\product_definition.frame_of_reference.name IN ['conceptual definition','part occurrence', 'functional definition','alternative definition']))) = 0">
                                    </where>
                                    <where
                                      label="WR4"
                                      expression="SELF.role.name IN ['design', 'usage']">
                                    </where>
                                    <where
                                      label="WR5"
                                      expression="(SELF.role.name &lt;&gt; 'design') OR (SIZEOF(QUERY(i &lt;* SELF.items | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION' IN TYPEOF(i)) AND (i\product_definition.frame_of_reference.name = 'part occurrence'))) = 0)">
                                    </where>
                                    <where
                                      label="WR6"
                                      expression="(SELF.role.name &lt;&gt; 'usage') OR (SIZEOF(QUERY(i &lt;* SELF.items | ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION' IN TYPEOF(i)) AND (i\product_definition.frame_of_reference.name = 'conceptual definition'))) = 0)">
                                    </where>
                                    <where
                                      label="WR7"
                                      expression="SELF.role.description IN ['exception', 'inherited', 'local']">
                                    </where>
                                    <where
                                      label="WR8"
                                      expression="SIZEOF(QUERY(x &lt;* USEDIN(SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'EFFECTIVITY_CONTEXT_ASSIGNMENT.ASSIGNED_EFFECTIVITY_ASSIGNMENT') | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CONFIGURED_EFFECTIVITY_CONTEXT_ASSIGNMENT' IN TYPEOF(x))) = 1">
                                    </where>
                                  </entity>

                                  <type name="class_usage_effectivity_context_item">
                                    <select
                                      selectitems="product_definition">
                                    </select>
                                  </type>

                                  <type name="effectivity_specification_for_replacement">
                                    <select
                                      basedon="effectivity_item"
                                      selectitems="product_definition_substitute">
                                    </select>
                                  </type>

                                  <type name="instance_usage_context_select">
                                    <select
                                      extensible="YES"
                                      genericentity="YES"
                                      selectitems="product_definition_relationship product_definition_usage">
                                    </select>
                                  </type>

                                  <entity
                                    name="class_usage_effectivity_context_assignment"
                                    supertypes="effectivity_context_assignment">
                                    <explicit
                                      name="items">
                                      <aggregate
                                        type="SET"
                                        lower="1"
                                        upper="?"/>
                                      <typename
                                        name="class_usage_effectivity_context_item"/>
                                    </explicit>
                                    <where
                                      label="WR1"
                                      expression="SELF.role.name = 'class usage influence'">
                                    </where>
                                    <where
                                      label="WR2"
                                      expression="SIZEOF(QUERY(i &lt;* SELF.items | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION' IN TYPEOF(i)))) = 0">
                                    </where>
                                    <where
                                      label="WR3"
                                      expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.APPLIED_EFFECTIVITY_ASSIGNMENT' IN TYPEOF(SELF.assigned_effectivity_assignment)) AND(SIZEOF(TYPEOF(SELF.assigned_effectivity_assignment.assigned_effectivity)) = 1) AND(SELF.assigned_effectivity_assignment.assigned_effectivity.id = 'class usage') AND(SIZEOF(QUERY(i &lt;* SELF.assigned_effectivity_assignment\applied_effectivity_assignment.items | NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_CONCEPT_FEATURE_CATEGORY_USAGE' IN TYPEOF(i)))) = 0)">
                                    </where>
                                  </entity>

                                  <entity
                                    name="instance_usage_context_assignment"
                                    supertypes="product_definition_context">
                                    <explicit
                                      name="items">
                                      <aggregate
                                        type="SET"
                                        lower="1"
                                        upper="?"/>
                                      <typename
                                        name="instance_usage_context_select"/>
                                    </explicit>
                                  </entity>

                                  <rule
                                    name="breakdown_element_requires_product_definition"
                                    appliesto="product_definition_formation">
                                    <where
                                      label="WR1"
                                      expression="SIZEOF (QUERY (pdf &lt;* product_definition_formation |(SIZEOF (QUERY (prpc &lt;* USEDIN (pdf.of_product ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'functionality')) = 1) AND(SIZEOF (QUERY (pd &lt;* USEDIN (pdf ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION.FORMATION') | pd.frame_of_reference.name = 'functional definition')) &lt;1))) = 0">
                                    </where>
                                    <where
                                      label="WR2"
                                      expression="SIZEOF (QUERY (pdf &lt;* product_definition_formation |(SIZEOF (QUERY (prpc &lt;* USEDIN (pdf.of_product ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'conceptual design')) = 1) AND(SIZEOF (QUERY (pd &lt;* USEDIN (pdf , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION.FORMATION') | pd.frame_of_reference.name = 'conceptual definition')) &lt;1))) = 0">
                                    </where>
                                  </rule>

                                  <rule
                                    name="restrict_product_definitions_for_design_constraint_association"
                                    appliesto="product_definition_relationship">
                                    <where
                                      label="WR1"
                                      expression="SIZEOF (QUERY (pdr &lt;* product_definition_relationship |(pdr. name = 'design constraint association') AND((pdr. relating_product_definition.frame_of_reference.name&lt;&gt;'design constraint definition') OR NOT (pdr.related_product_definition.frame_of_reference.name IN['alternative definition' , 'functional definition' ,'conceptual definition' ])))) =0">
                                    </where>
                                  </rule>

                                  <rule
                                    name="constraint_definition_requires_constraint_category"
                                    appliesto="product_definition">
                                    <algorithm>
LOCAL
constraint_definitions: SET OF product_definition := [];
END_LOCAL;
constraint_definitions := QUERY(pd &lt;* product_definition |
(pd.frame_of_reference.name = 'design constraint definition'));
                                    </algorithm>
                                    <where
                                      label="WR1"
                                      expression="SIZEOF (QUERY (pd &lt;* constraint_definitions |(SIZEOF (QUERY (prpc &lt;* USEDIN (pd.formation.of_product ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc. name ='requirement')) =0))) =0">
                                    </where>
                                  </rule>

                                  <rule
                                    name="design_constraint_requires_product_definition"
                                    appliesto="product_definition_formation">
                                    <where
                                      label="WR1"
                                      expression="SIZEOF (QUERY (pdf &lt;* product_definition_formation | (SIZEOF (QUERY (prpc &lt;* USEDIN (pdf.of_product ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'requirement')) &gt;0) AND(SIZEOF (QUERY (pd &lt;* USEDIN (pdf , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION.FORMATION') | pd.frame_of_reference.name = 'design constraint definition')) &lt;1))) = 0">
                                    </where>
                                  </rule>

                                  <rule
                                    name="restrict_configuration_design_for_design_constraint"
                                    appliesto="configuration_design">
                                    <where
                                      label="WR1"
                                      expression="SIZEOF (QUERY (cd &lt;* configuration_design |(cd.name = 'design constraint usage') AND(NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION' IN TYPEOF (cd.design)) OR(cd.design\product_definition.frame_of_reference.name &lt;&gt; 'design constraint definition')))) = 0">
                                    </where>
                                  </rule>

                                  <rule
                                    name="restrict_configuration_design_for_class_breakdown_association"
                                    appliesto="configuration_design">
                                    <where
                                      label="WR1"
                                      expression="SIZEOF (QUERY (cd &lt;* configuration_design |(cd.name ='functionality') AND(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION' IN TYPEOF (cd. design)) OR(cd.design\product_definition.frame_of_reference.name&lt;&gt; 'functional definition')))) =0">
                                    </where>
                                    <where
                                      label="WR2"
                                      expression="SIZEOF (QUERY (cd &lt;* configuration_design |(cd.name='realization') AND(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION' IN TYPEOF (cd.design)) OR(cd.design\product_definition.frame_of_reference.name&lt;&gt; 'conceptual definition')))) =0">
                                    </where>
                                    <where
                                      label="WR3"
                                      expression="SIZEOF (QUERY (cd &lt;* configuration_design |(cd.name IN ['functionality' , 'realization']) AND(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_CLASS' IN TYPEOF (cd.configuration.item_concept))))) =0">
                                    </where>
                                  </rule>

                                  <type name="id_for_product_identification">
                                    <select
                                      basedon="identification_item"
                                      selectitems="product_identification">
                                    </select>
                                  </type>

                                  <type name="version_for_product_identification">
                                    <select
                                      basedon="versionable_item"
                                      selectitems="product_identification">
                                    </select>
                                  </type>

                                  <entity
                                    name="product_identification"
                                    supertypes="configuration_item characterized_object">
                                    <explicit
                                      name="item_concept">
                                      <typename
                                        name="product_class"/>
                                      <redeclaration
                                        entity-ref="configuration_item"/>
                                      </explicit>
                                      <where
                                        label="WR1"
                                        expression="SIZEOF(QUERY(cd &lt;* USEDIN (SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CONFIGURATION_DESIGN.CONFIGURATION')|('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'PRODUCT_DEFINITION_FORMATION' IN TYPEOF (cd. design)) AND(SIZEOF (QUERY(prpc &lt;* USEDIN (cd. design\product_definition_formation.of_product , 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS')| prpc. name IN ['part' , 'raw material' , 'tool'])) &gt;0))) &lt;=1">
                                      </where>
                                      <where
                                        label="WR2"
                                        expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'CONFIGURABLE_ITEM' IN TYPEOF(SELF)) XOR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+ 'PRODUCT_SPECIFICATION' IN TYPEOF (SELF))">
                                      </where>
                                    </entity>

                                    <entity
                                      name="product_specification"
                                      supertypes="product_identification configurable_item">
                                    </entity>

                                    <type name="time_interval_item">
                                      <select
                                        extensible="YES">
                                      </select>
                                    </type>

                                    <entity
                                      name="applied_time_interval_assignment"
                                      supertypes="time_interval_assignment">
                                      <explicit
                                        name="items">
                                        <aggregate
                                          type="SET"
                                          lower="0"
                                          upper="?"/>
                                        <typename
                                          name="time_interval_item"/>
                                      </explicit>
                                    </entity>

                                    <type name="action_request_item">
                                      <select
                                        extensible="YES"
                                        genericentity="YES">
                                      </select>
                                    </type>

                                    <entity
                                      name="applied_action_request_assignment"
                                      supertypes="action_request_assignment">
                                      <explicit
                                        name="items">
                                        <aggregate
                                          type="SET"
                                          lower="1"
                                          upper="?"/>
                                        <typename
                                          name="action_request_item"/>
                                      </explicit>
                                    </entity>

                                    <entity
                                      name="expression"
                                      abstract.supertype="YES"
                                      super.expression="(ONEOF (numeric_expression, boolean_expression, string_expression))"
                                      supertypes="generic_expression">
                                    </entity>

                                    <entity
                                      name="variable"
                                      abstract.supertype="YES"
                                      super.expression="(ONEOF (numeric_variable, boolean_variable, string_variable))"
                                      supertypes="generic_variable">
                                    </entity>

                                    <entity
                                      name="defined_function"
                                      abstract.supertype="YES"
                                      super.expression="((ONEOF (numeric_defined_function, string_defined_function, boolean_defined_function)) ANDOR SQL_mappable_defined_function)">
                                    </entity>

                                    <entity
                                      name="SQL_mappable_defined_function"
                                      abstract.supertype="YES"
                                      supertypes="defined_function">
                                    </entity>

                                    <entity
                                      name="numeric_expression"
                                      abstract.supertype="YES"
                                      super.expression="(ONEOF (simple_numeric_expression, unary_numeric_expression, binary_numeric_expression, multiple_arity_numeric_expression, length_function, value_function, numeric_defined_function))"
                                      supertypes="expression">
                                      <derived
                                        name="is_int"
                                        expression="is_int_expr (SELF)">
                                        <builtintype
                                          type="BOOLEAN"/>
                                      </derived>
                                      <derived
                                        name="sql_mappable"
                                        expression="is_SQL_mappable (SELF)">
                                        <builtintype
                                          type="BOOLEAN"/>
                                      </derived>
                                    </entity>

                                    <entity
                                      name="simple_numeric_expression"
                                      abstract.supertype="YES"
                                      super.expression="(ONEOF (literal_number, numeric_variable))"
                                      supertypes="numeric_expression simple_generic_expression">
                                    </entity>

                                    <entity
                                      name="literal_number"
                                      abstract.supertype="YES"
                                      super.expression="(ONEOF (int_literal, real_literal))"
                                      supertypes="simple_numeric_expression generic_literal">
                                      <explicit
                                        name="the_value">
                                        <builtintype
                                          type="NUMBER"/>
                                      </explicit>
                                    </entity>

                                    <entity
                                      name="int_literal"
                                      supertypes="literal_number">
                                      <explicit
                                        name="the_value">
                                        <builtintype
                                          type="INTEGER"/>
                                        <redeclaration
                                          entity-ref="literal_number"/>
                                        </explicit>
                                      </entity>

                                      <entity
                                        name="real_literal"
                                        supertypes="literal_number">
                                        <explicit
                                          name="the_value">
                                          <builtintype
                                            type="REAL"/>
                                          <redeclaration
                                            entity-ref="literal_number"/>
                                          </explicit>
                                        </entity>

                                        <entity
                                          name="numeric_variable"
                                          super.expression="(ONEOF (int_numeric_variable, real_numeric_variable))"
                                          supertypes="simple_numeric_expression variable">
                                          <where
                                            label="WR1"
                                            expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.INT_NUMERIC_VARIABLE' IN TYPEOF(SELF)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REAL_NUMERIC_VARIABLE' IN TYPEOF(SELF))">
                                          </where>
                                        </entity>

                                        <entity
                                          name="int_numeric_variable"
                                          supertypes="numeric_variable">
                                        </entity>

                                        <entity
                                          name="real_numeric_variable"
                                          supertypes="numeric_variable">
                                        </entity>

                                        <entity
                                          name="unary_numeric_expression"
                                          abstract.supertype="YES"
                                          super.expression="(ONEOF (unary_function_call))"
                                          supertypes="numeric_expression unary_generic_expression">
                                          <explicit
                                            name="operand">
                                            <typename
                                              name="numeric_expression"/>
                                            <redeclaration
                                              entity-ref="unary_generic_expression"/>
                                            </explicit>
                                          </entity>

                                          <entity
                                            name="binary_numeric_expression"
                                            abstract.supertype="YES"
                                            super.expression="(ONEOF (minus_expression, div_expression, mod_expression, slash_expression, power_expression, binary_function_call))"
                                            supertypes="numeric_expression binary_generic_expression">
                                            <explicit
                                              name="operands">
                                              <aggregate
                                                type="LIST"
                                                lower="2"
                                                upper="2"/>
                                              <typename
                                                name="numeric_expression"/>
                                              <redeclaration
                                                entity-ref="binary_generic_expression"/>
                                              </explicit>
                                            </entity>

                                            <entity
                                              name="multiple_arity_numeric_expression"
                                              abstract.supertype="YES"
                                              super.expression="(ONEOF (plus_expression, mult_expression, multiple_arity_function_call))"
                                              supertypes="numeric_expression multiple_arity_generic_expression">
                                              <explicit
                                                name="operands">
                                                <aggregate
                                                  type="LIST"
                                                  lower="2"
                                                  upper="?"/>
                                                <typename
                                                  name="numeric_expression"/>
                                                <redeclaration
                                                  entity-ref="multiple_arity_generic_expression"/>
                                                </explicit>
                                              </entity>

                                              <entity
                                                name="length_function"
                                                supertypes="numeric_expression unary_generic_expression">
                                                <explicit
                                                  name="operand">
                                                  <typename
                                                    name="string_expression"/>
                                                  <redeclaration
                                                    entity-ref="unary_generic_expression"/>
                                                  </explicit>
                                                </entity>

                                                <entity
                                                  name="value_function"
                                                  super.expression="(int_value_function)"
                                                  supertypes="numeric_expression unary_generic_expression">
                                                  <explicit
                                                    name="operand">
                                                    <typename
                                                      name="string_expression"/>
                                                    <redeclaration
                                                      entity-ref="unary_generic_expression"/>
                                                    </explicit>
                                                  </entity>

                                                  <entity
                                                    name="int_value_function"
                                                    supertypes="value_function">
                                                  </entity>

                                                  <entity
                                                    name="numeric_defined_function"
                                                    abstract.supertype="YES"
                                                    super.expression="(ONEOF (integer_defined_function, real_defined_function))"
                                                    supertypes="numeric_expression defined_function">
                                                  </entity>

                                                  <entity
                                                    name="plus_expression"
                                                    supertypes="multiple_arity_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="minus_expression"
                                                    supertypes="binary_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="mult_expression"
                                                    supertypes="multiple_arity_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="div_expression"
                                                    supertypes="binary_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="mod_expression"
                                                    supertypes="binary_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="slash_expression"
                                                    supertypes="binary_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="power_expression"
                                                    supertypes="binary_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="unary_function_call"
                                                    abstract.supertype="YES"
                                                    super.expression="(ONEOF (abs_function, minus_function, sin_function, cos_function, tan_function, asin_function, acos_function, exp_function, log_function, log2_function, log10_function, square_root_function))"
                                                    supertypes="unary_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="binary_function_call"
                                                    abstract.supertype="YES"
                                                    super.expression="(ONEOF (atan_function))"
                                                    supertypes="binary_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="multiple_arity_function_call"
                                                    abstract.supertype="YES"
                                                    super.expression="(ONEOF (maximum_function, minimum_function))"
                                                    supertypes="multiple_arity_numeric_expression">
                                                  </entity>

                                                  <entity
                                                    name="abs_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="minus_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="sin_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="cos_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="tan_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="asin_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="acos_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="exp_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="log_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="log2_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="log10_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="square_root_function"
                                                    supertypes="unary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="atan_function"
                                                    supertypes="binary_function_call">
                                                  </entity>

                                                  <entity
                                                    name="maximum_function"
                                                    supertypes="multiple_arity_function_call">
                                                  </entity>

                                                  <entity
                                                    name="minimum_function"
                                                    supertypes="multiple_arity_function_call">
                                                  </entity>

                                                  <entity
                                                    name="integer_defined_function"
                                                    abstract.supertype="YES"
                                                    supertypes="numeric_defined_function">
                                                  </entity>

                                                  <entity
                                                    name="real_defined_function"
                                                    abstract.supertype="YES"
                                                    supertypes="numeric_defined_function">
                                                  </entity>

                                                  <entity
                                                    name="boolean_expression"
                                                    abstract.supertype="YES"
                                                    super.expression="(ONEOF (simple_boolean_expression, unary_boolean_expression, binary_boolean_expression, multiple_arity_Boolean_expression, comparison_expression, interval_expression, boolean_defined_function))"
                                                    supertypes="expression">
                                                  </entity>

                                                  <entity
                                                    name="simple_boolean_expression"
                                                    abstract.supertype="YES"
                                                    super.expression="(ONEOF (boolean_literal, boolean_variable))"
                                                    supertypes="boolean_expression simple_generic_expression">
                                                  </entity>

                                                  <entity
                                                    name="boolean_literal"
                                                    supertypes="simple_Boolean_expression generic_literal">
                                                    <explicit
                                                      name="the_value">
                                                      <builtintype
                                                        type="BOOLEAN"/>
                                                    </explicit>
                                                  </entity>

                                                  <entity
                                                    name="boolean_variable"
                                                    supertypes="simple_Boolean_expression variable">
                                                  </entity>

                                                  <entity
                                                    name="unary_boolean_expression"
                                                    abstract.supertype="YES"
                                                    super.expression="(ONEOF (not_expression, odd_function))"
                                                    supertypes="boolean_expression unary_generic_expression">
                                                  </entity>

                                                  <entity
                                                    name="not_expression"
                                                    supertypes="unary_Boolean_expression">
                                                    <explicit
                                                      name="operand">
                                                      <typename
                                                        name="boolean_expression"/>
                                                      <redeclaration
                                                        entity-ref="unary_generic_expression"/>
                                                      </explicit>
                                                    </entity>

                                                    <entity
                                                      name="odd_function"
                                                      supertypes="unary_Boolean_expression">
                                                      <explicit
                                                        name="operand">
                                                        <typename
                                                          name="numeric_expression"/>
                                                        <redeclaration
                                                          entity-ref="unary_generic_expression"/>
                                                        </explicit>
                                                        <where
                                                          label="WR1"
                                                          expression="is_int_expr(SELF\numeric_expression)">
                                                        </where>
                                                      </entity>

                                                      <entity
                                                        name="binary_boolean_expression"
                                                        abstract.supertype="YES"
                                                        super.expression="(ONEOF (xor_expression, equals_expression))"
                                                        supertypes="boolean_expression binary_generic_expression">
                                                      </entity>

                                                      <entity
                                                        name="multiple_arity_boolean_expression"
                                                        abstract.supertype="YES"
                                                        super.expression="(ONEOF (and_expression, or_expression))"
                                                        supertypes="boolean_expression multiple_arity_generic_expression">
                                                        <explicit
                                                          name="operands">
                                                          <aggregate
                                                            type="LIST"
                                                            lower="2"
                                                            upper="?"/>
                                                          <typename
                                                            name="boolean_expression"/>
                                                          <redeclaration
                                                            entity-ref="multiple_arity_generic_expression"/>
                                                          </explicit>
                                                        </entity>

                                                        <entity
                                                          name="xor_expression"
                                                          supertypes="binary_boolean_expression">
                                                          <explicit
                                                            name="operands">
                                                            <aggregate
                                                              type="LIST"
                                                              lower="2"
                                                              upper="2"/>
                                                            <typename
                                                              name="boolean_expression"/>
                                                            <redeclaration
                                                              entity-ref="binary_generic_expression"/>
                                                            </explicit>
                                                          </entity>

                                                          <entity
                                                            name="equals_expression"
                                                            supertypes="binary_boolean_expression">
                                                          </entity>

                                                          <entity
                                                            name="and_expression"
                                                            supertypes="multiple_arity_boolean_expression">
                                                          </entity>

                                                          <entity
                                                            name="or_expression"
                                                            supertypes="multiple_arity_boolean_expression">
                                                          </entity>

                                                          <entity
                                                            name="comparison_expression"
                                                            abstract.supertype="YES"
                                                            super.expression="(ONEOF (comparison_equal, comparison_greater, comparison_greater_equal, comparison_less, comparison_less_equal, comparison_not_equal, like_expression))"
                                                            supertypes="boolean_expression binary_generic_expression">
                                                            <explicit
                                                              name="operands">
                                                              <aggregate
                                                                type="LIST"
                                                                lower="2"
                                                                upper="2"/>
                                                              <typename
                                                                name="expression"/>
                                                              <redeclaration
                                                                entity-ref="binary_generic_expression"/>
                                                              </explicit>
                                                              <where
                                                                label="WR1"
                                                                expression="(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NUMERIC_EXPRESSION' IN TYPEOF(SELF\binary_generic_expression.operands[1])) AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NUMERIC_EXPRESSION' IN TYPEOF(SELF\binary_generic_expression.operands[2]))) OR(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BOOLEAN_EXPRESSION' IN TYPEOF(SELF\binary_generic_expression.operands[1])) AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BOOLEAN_EXPRESSION' IN TYPEOF(SELF\binary_generic_expression.operands[2]))) OR(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF(SELF\binary_generic_expression.operands[1])) AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF(SELF\binary_generic_expression.operands[2])))">
                                                              </where>
                                                            </entity>

                                                            <entity
                                                              name="comparison_equal"
                                                              supertypes="comparison_expression">
                                                            </entity>

                                                            <entity
                                                              name="comparison_greater"
                                                              supertypes="comparison_expression">
                                                            </entity>

                                                            <entity
                                                              name="comparison_greater_equal"
                                                              supertypes="comparison_expression">
                                                            </entity>

                                                            <entity
                                                              name="comparison_less"
                                                              supertypes="comparison_expression">
                                                            </entity>

                                                            <entity
                                                              name="comparison_less_equal"
                                                              supertypes="comparison_expression">
                                                            </entity>

                                                            <entity
                                                              name="comparison_not_equal"
                                                              supertypes="comparison_expression">
                                                            </entity>

                                                            <entity
                                                              name="like_expression"
                                                              supertypes="comparison_expression">
                                                              <where
                                                                label="WR1"
                                                                expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF(SELF\binary_generic_expression.operands[1])) AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF(SELF\binary_generic_expression.operands[2]))">
                                                              </where>
                                                            </entity>

                                                            <entity
                                                              name="interval_expression"
                                                              supertypes="boolean_expression multiple_arity_generic_expression">
                                                              <derived
                                                                name="interval_low"
                                                                expression="SELF\multiple_arity_generic_expression.operands[1]">
                                                                <typename
                                                                  name="generic_expression"/>
                                                              </derived>
                                                              <derived
                                                                name="interval_item"
                                                                expression="SELF\multiple_arity_generic_expression.operands[2]">
                                                                <typename
                                                                  name="generic_expression"/>
                                                              </derived>
                                                              <derived
                                                                name="interval_high"
                                                                expression="SELF\multiple_arity_generic_expression.operands[3]">
                                                                <typename
                                                                  name="generic_expression"/>
                                                              </derived>
                                                              <where
                                                                label="WR1"
                                                                expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EXPRESSION' IN TYPEOF(interval_low)) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EXPRESSION' IN TYPEOF(interval_item)) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EXPRESSION' IN TYPEOF(interval_high))">
                                                              </where>
                                                              <where
                                                                label="WR2"
                                                                expression="(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF (SELF.interval_low)) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF (SELF.interval_high)) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF (SELF.interval_item))) OR(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF(SELF.interval_low)) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NUMERIC_EXPRESSION' IN TYPEOF(SELF.interval_item)) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NUMERIC_EXPRESSION' IN TYPEOF(SELF.interval_high)))">
                                                              </where>
                                                            </entity>

                                                            <entity
                                                              name="boolean_defined_function"
                                                              abstract.supertype="YES"
                                                              supertypes="defined_function boolean_expression">
                                                            </entity>

                                                            <entity
                                                              name="string_expression"
                                                              abstract.supertype="YES"
                                                              super.expression="(ONEOF (simple_string_expression, index_expression, substring_expression, concat_expression, format_function, string_defined_function))"
                                                              supertypes="expression">
                                                            </entity>

                                                            <entity
                                                              name="simple_string_expression"
                                                              abstract.supertype="YES"
                                                              super.expression="(ONEOF (string_literal, string_variable))"
                                                              supertypes="string_expression simple_generic_expression">
                                                            </entity>

                                                            <entity
                                                              name="string_literal"
                                                              supertypes="simple_string_expression generic_literal">
                                                              <explicit
                                                                name="the_value">
                                                                <builtintype
                                                                  type="STRING"/>
                                                              </explicit>
                                                            </entity>

                                                            <entity
                                                              name="string_variable"
                                                              supertypes="simple_string_expression variable">
                                                            </entity>

                                                            <entity
                                                              name="index_expression"
                                                              supertypes="string_expression binary_generic_expression">
                                                              <derived
                                                                name="operand"
                                                                expression="SELF\binary_generic_expression.operands[1]">
                                                                <typename
                                                                  name="generic_expression"/>
                                                              </derived>
                                                              <derived
                                                                name="index"
                                                                expression="SELF\binary_generic_expression.operands[2]">
                                                                <typename
                                                                  name="generic_expression"/>
                                                              </derived>
                                                              <where
                                                                label="WR1"
                                                                expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF(operand)) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NUMERIC_EXPRESSION' IN TYPEOF(index))">
                                                              </where>
                                                              <where
                                                                label="WR2"
                                                                expression="is_int_expr (index)">
                                                              </where>
                                                            </entity>

                                                            <entity
                                                              name="substring_expression"
                                                              supertypes="string_expression multiple_arity_generic_expression">
                                                              <derived
                                                                name="operand"
                                                                expression="SELF\multiple_arity_generic_expression.operands[1]">
                                                                <typename
                                                                  name="generic_expression"/>
                                                              </derived>
                                                              <derived
                                                                name="index1"
                                                                expression="SELF\multiple_arity_generic_expression.operands[2]">
                                                                <typename
                                                                  name="generic_expression"/>
                                                              </derived>
                                                              <derived
                                                                name="index2"
                                                                expression="SELF\multiple_arity_generic_expression.operands[3]">
                                                                <typename
                                                                  name="generic_expression"/>
                                                              </derived>
                                                              <where
                                                                label="WR1"
                                                                expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION' IN TYPEOF(operand)) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NUMERIC_EXPRESSION' IN TYPEOF(index1)) AND ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NUMERIC_EXPRESSION' IN TYPEOF(index2))">
                                                              </where>
                                                              <where
                                                                label="WR2"
                                                                expression="SIZEOF(SELF\multiple_arity_generic_expression.operands)=3">
                                                              </where>
                                                              <where
                                                                label="WR3"
                                                                expression="is_int_expr (index1)">
                                                              </where>
                                                              <where
                                                                label="WR4"
                                                                expression="is_int_expr (index2)">
                                                              </where>
                                                            </entity>

                                                            <entity
                                                              name="concat_expression"
                                                              supertypes="string_expression multiple_arity_generic_expression">
                                                              <explicit
                                                                name="operands">
                                                                <aggregate
                                                                  type="LIST"
                                                                  lower="2"
                                                                  upper="?"/>
                                                                <typename
                                                                  name="string_expression"/>
                                                                <redeclaration
                                                                  entity-ref="multiple_arity_generic_expression"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="format_function"
                                                                supertypes="string_expression binary_generic_expression">
                                                                <derived
                                                                  name="value_to_format"
                                                                  expression="SELF\binary_generic_expression.operands[1]">
                                                                  <typename
                                                                    name="generic_expression"/>
                                                                </derived>
                                                                <derived
                                                                  name="format_string"
                                                                  expression="SELF\binary_generic_expression.operands[2]">
                                                                  <typename
                                                                    name="generic_expression"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NUMERIC_EXPRESSION') IN TYPEOF(value_to_format)) AND (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_EXPRESSION') IN TYPEOF(format_string))">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="string_defined_function"
                                                                abstract.supertype="YES"
                                                                supertypes="defined_function string_expression">
                                                              </entity>

                                                              <function
                                                                name="is_int_expr">
                                                                <parameter
                                                                  name="arg">
                                                                  <typename
                                                                    name="numeric_expression"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
i: INTEGER;
END_LOCAL;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.INT_LITERAL' IN TYPEOF(arg)
THEN
RETURN (TRUE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REAL_LITERAL' IN TYPEOF(arg)
THEN
RETURN (FALSE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.INT_NUMERIC_VARIABLE' IN TYPEOF(arg)
THEN
RETURN (TRUE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REAL_NUMERIC_VARIABLE' IN TYPEOF(arg)
THEN
RETURN (FALSE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ABS_FUNCTION' IN TYPEOF(arg)
THEN
RETURN (is_int_expr(arg\unary_numeric_expression.operand));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MINUS_FUNCTION' IN TYPEOF(arg)
THEN
RETURN (is_int_expr(arg\unary_numeric_expression.operand));
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SIN_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COS_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TAN_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ASIN_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ACOS_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ATAN_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EXP_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LOG_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LOG2_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LOG10_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SQUARE_ROOT_FUNCTION'
IN TYPEOF(arg))
THEN
RETURN (FALSE);
END_IF;
IF 	('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLUS_EXPRESSION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MULT_EXPRESSION'
IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MAXIMUM_FUNCTION'
IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MINIMUM_FUNCTION'
IN TYPEOF(arg))
THEN
REPEAT i :=1 TO SIZEOF (
arg\multiple_arity_numeric_expression.operands);
IF NOT
is_int_expr(arg\multiple_arity_numeric_expression.operands[i])
THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
END_IF;
IF 	('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MINUS_EXPRESSION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POWER_EXPRESSION'
IN TYPEOF(arg))
THEN
RETURN (is_int_expr(arg\binary_numeric_expression.operands[1])
AND is_int_expr(arg\binary_numeric_expression.operands[2]));
END_IF;
IF	('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DIV_EXPRESSION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MOD_EXPRESSION' IN TYPEOF(arg))
THEN
RETURN(TRUE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SLASH_EXPRESSION' IN TYPEOF(arg)
THEN
RETURN (FALSE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LENGTH_FUNCTION' IN TYPEOF(arg)
THEN
RETURN (TRUE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VALUE_FUNCTION' IN TYPEOF(arg)
THEN
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.INT_VALUE_FUNCTION'
IN TYPEOF(arg)
THEN
RETURN (TRUE);
ELSE
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.INTEGER_DEFINED_FUNCTION'
IN TYPEOF(arg)
THEN
RETURN(TRUE) ;
END_IF;
IF'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REAL_DEFINED_FUNCTION' IN TYPEOF(arg)
THEN
RETURN(FALSE) ;
END_IF ;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BOOLEAN_DEFINED_FUNCTION'
IN TYPEOF(arg)
THEN
RETURN(FALSE) ;
END_IF ;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_DEFINED_FUNCTION'
IN TYPEOF(arg)
THEN
RETURN (FALSE) ;
END_IF ;
RETURN (FALSE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="is_SQL_mappable">
                                                                <parameter
                                                                  name="arg">
                                                                  <typename
                                                                    name="expression"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
i: INTEGER;
END_LOCAL;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SIMPLE_NUMERIC_EXPRESSION'
IN TYPEOF (arg)
THEN
RETURN (TRUE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SQL_MAPPABLE_DEFINED_FUNCTION'
IN TYPEOF (arg)
THEN
RETURN (TRUE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MINUS_FUNCTION' IN TYPEOF(arg)
THEN
RETURN (is_SQL_mappable(arg\unary_numeric_expression.operand));
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ABS_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SIN_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COS_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TAN_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ASIN_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ACOS_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ATAN_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EXP_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LOG_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LOG2_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LOG10_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SQUARE_ROOT_FUNCTION'
IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VALUE_FUNCTION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LENGTH_FUNCTION'
IN TYPEOF(arg))
THEN
RETURN (FALSE);
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLUS_EXPRESSION' IN TYPEOF(arg))
OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MULT_EXPRESSION' IN TYPEOF(arg))
OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MAXIMUM_FUNCTION'
IN TYPEOF(arg))
OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MINIMUM_FUNCTION'
IN TYPEOF(arg))
THEN
REPEAT i :=1 TO SIZEOF (
arg\multiple_arity_numeric_expression.operands);
IF NOT is_SQL_mappable(
arg\multiple_arity_numeric_expression.operands[i])
THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MINUS_EXPRESSION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SLASH_EXPRESSION' IN
TYPEOF(arg))
THEN
RETURN (is_SQL_mappable(
arg\binary_numeric_expression.operands[1])
AND is_SQL_mappable(arg\binary_numeric_expression.operands[2]));
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DIV_EXPRESSION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MOD_EXPRESSION' IN TYPEOF(arg))
OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POWER_EXPRESSION'
IN TYPEOF(arg))
THEN
RETURN (FALSE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SIMPLE_BOOLEAN_EXPRESSION'
IN TYPEOF (arg)
THEN
RETURN (TRUE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NOT_EXPRESSION' IN TYPEOF (arg)
THEN
RETURN (is_SQL_mappable (arg\UNARY_GENERIC_EXPRESSION.OPERAND));
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ODD_FUNCTION'IN TYPEOF (arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.XOR_EXPRESSION'
IN TYPEOF (arg))
THEN
RETURN (FALSE);
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AND_EXPRESSION' IN TYPEOF (arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.OR_EXPRESSION' IN TYPEOF (arg))
THEN
REPEAT i:=1 TO SIZEOF (
arg\MULTIPLE_ARITY_BOOLEAN_EXPRESSION.OPERANDS);
IF NOT is_SQL_mappable (
arg\MULTIPLE_ARITY_BOOLEAN_EXPRESSION.OPERANDS[i])
THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EQUALS_EXPRESSION' IN TYPEOF (arg)
THEN
RETURN(is_SQL_mappable (
arg\BINARY_GENERIC_EXPRESSION.OPERANDS [1])
AND is_SQL_mappable(
arg\BINARY_GENERIC_EXPRESSION.OPERANDS [2]));
END_IF;
IF	('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPARISON_EQUAL' IN TYPEOF (arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPARISON_GREATER'
IN TYPEOF (arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPARISON_GREATER_EQUAL'
IN TYPEOF (arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPARISON_LESS'
IN TYPEOF (arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPARISON_LESS_EQUAL'
IN TYPEOF (arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPARISON_NOT_EQUAL'
IN TYPEOF (arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LIKE_EXPRESSION'
IN TYPEOF (arg))
THEN
RETURN (is_SQL_mappable (arg\COMPARISON_EXPRESSION.OPERANDS[1])
AND is_SQL_mappable (arg\COMPARISON_EXPRESSION.OPERANDS[2]));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.INTERVAL_EXPRESSION' IN TYPEOF(arg)
THEN
RETURN (is_SQL_mappable(arg\interval_expression.interval_low)
AND is_SQL_mappable(arg\interval_expression.interval_high)
AND is_SQL_mappable(arg\interval_expression.interval_item));
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NUMERIC_DEFINED_FUNCTION'
IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BOOLEAN_DEFINED_FUNCTION'
IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.STRING_DEFINED_FUNCTION'
IN TYPEOF(arg))
THEN
RETURN (FALSE) ;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SIMPLE_STRING_EXPRESSION'
IN TYPEOF(ARG)
THEN
RETURN (TRUE);
END_IF;
IF 	('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.INDEX_EXPRESSION' IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SUBSTRING_EXPRESSION'
IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CONCAT_EXPRESSION'
IN TYPEOF(arg))
OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FORMAT_FUNCTION'
IN TYPEOF(arg))
THEN
RETURN (FALSE);
END_IF;
RETURN (FALSE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="used_functions">
                                                                <parameter
                                                                  name="arg">
                                                                  <typename
                                                                    name="expression"/>
                                                                </parameter>
                                                                <aggregate
                                                                  type="SET"/>
                                                                <typename
                                                                  name="defined_function"/>
                                                                <algorithm>
LOCAL
result : SET OF defined_function := [];
END_LOCAL;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DEFINED_FUNCTION' IN TYPEOF(arg))
THEN
RETURN ([arg]) ;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.UNARY_NUMERIC_EXPRESSION' IN
TYPEOF (arg)
THEN
RETURN (used_functions (arg\unary_numeric_expression.operand));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BINARY_NUMERIC_EXPRESSION' IN
TYPEOF (arg)
THEN
RETURN (used_functions (arg\binary_numeric_expression.operands[1])
+ used_functions (arg\binary_numeric_expression.operands[2]));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MULTIPLE_ARITY_NUMERIC_EXPRESSION' IN 		TYPEOF (arg)
THEN
REPEAT i := 1 TO SIZEOF (
arg\multiple_arity_numeric_expression.operands);
result := result + used_functions (
arg\multiple_arity_numeric_expression.operands[i]);
END_REPEAT;
RETURN (result);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.UNARY_GENERIC_EXPRESSION'
IN TYPEOF (arg)
THEN
RETURN (used_functions (arg\unary_generic_expression.operand));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BINARY_BOOLEAN_EXPRESSION'
IN TYPEOF (arg)
THEN
RETURN (used_functions (arg\binary_generic_expression.operands[1])
+ used_functions (
arg\binary_generic_expression.operands[2]));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MULTIPLE_ARITY_BOOLEAN_EXPRESSION'
IN TYPEOF (arg)
THEN
REPEAT i := 1 TO
SIZEOF (arg\multiple_arity_Boolean_expression.operands);
result := result + used_functions(
arg\multiple_arity_Boolean_expression.operands[i]);
END_REPEAT;
RETURN (result);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPARISON_EXPRESSION'
IN TYPEOF (arg)
THEN
RETURN (used_functions (arg\comparison_expression.operands[1])
+ used_functions (arg\comparison_expression.operands[2]));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.INTERVAL_EXPRESSION' IN TYPEOF(arg)
THEN
RETURN (used_functions(arg\interval_expression.interval_low)
+ used_functions(arg\interval_expression.interval_high)
+ used_functions(arg\interval_expression.interval_item));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.INDEX_EXPRESSION' IN TYPEOF (arg)
THEN
RETURN (used_functions (arg\index_expression.operand)
+ used_functions (arg\index_expression.index));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SUBSTRING_EXPRESSION' IN TYPEOF (arg)
THEN
RETURN (used_functions (arg\substring_expression.operand)
+ used_functions (arg\substring_expression.index1)
+ used_functions (arg\substring_expression.index2));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CONCAT_EXPRESSION' IN TYPEOF (arg)
THEN
REPEAT i := 1 TO SIZEOF (arg\concat_expression.operands);
result := result + used_functions (
arg\concat_expression.operands[i]);
END_REPEAT;
RETURN (result);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FORMAT_FUNCTION' IN TYPEOF (arg)
THEN
RETURN (used_functions (arg\format_function.value_to_format)
+ used_functions (arg\format_function.format_string));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LIKE_EXPRESSION' IN TYPEOF (arg)
THEN
RETURN (used_functions (arg\like_expression.operands[1])
+ used_functions (arg\like_expression.operands[2]));
END_IF;
RETURN ([ ]);
                                                                </algorithm>
                                                              </function>

                                                              <entity
                                                                name="generic_expression"
                                                                abstract.supertype="YES"
                                                                super.expression="(ONEOF(simple_generic_expression, unary_generic_expression, binary_generic_expression, multiple_arity_generic_expression))">
                                                                <where
                                                                  label="WR1"
                                                                  expression="is_acyclic(SELF)">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="simple_generic_expression"
                                                                abstract.supertype="YES"
                                                                super.expression="(ONEOF(generic_literal, generic_variable))"
                                                                supertypes="generic_expression">
                                                              </entity>

                                                              <entity
                                                                name="generic_literal"
                                                                abstract.supertype="YES"
                                                                supertypes="simple_generic_expression">
                                                              </entity>

                                                              <entity
                                                                name="generic_variable"
                                                                abstract.supertype="YES"
                                                                supertypes="simple_generic_expression">
                                                                <inverse
                                                                  name="interpretation"
                                                                  entity="environment"
                                                                  attribute="syntactic_representation">
                                                                </inverse>
                                                              </entity>

                                                              <entity
                                                                name="variable_semantics"
                                                                abstract.supertype="YES">
                                                              </entity>

                                                              <entity
                                                                name="environment">
                                                                <explicit
                                                                  name="syntactic_representation">
                                                                  <typename
                                                                    name="generic_variable"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="semantics">
                                                                  <typename
                                                                    name="variable_semantics"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="unary_generic_expression"
                                                                abstract.supertype="YES"
                                                                supertypes="generic_expression">
                                                                <explicit
                                                                  name="operand">
                                                                  <typename
                                                                    name="generic_expression"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="binary_generic_expression"
                                                                abstract.supertype="YES"
                                                                supertypes="generic_expression">
                                                                <explicit
                                                                  name="operands">
                                                                  <aggregate
                                                                    type="LIST"
                                                                    lower="2"
                                                                    upper="2"/>
                                                                  <typename
                                                                    name="generic_expression"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="multiple_arity_generic_expression"
                                                                abstract.supertype="YES"
                                                                supertypes="generic_expression">
                                                                <explicit
                                                                  name="operands">
                                                                  <aggregate
                                                                    type="LIST"
                                                                    lower="2"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="generic_expression"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="is_acyclic">
                                                                <parameter
                                                                  name="arg">
                                                                  <typename
                                                                    name="generic_expression"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
RETURN (acyclic (arg, []));
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="acyclic">
                                                                <parameter
                                                                  name="arg1">
                                                                  <typename
                                                                    name="generic_expression"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="arg2">
                                                                  <aggregate
                                                                    type="SET"/>
                                                                  <typename
                                                                    name="generic_expression"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
result: BOOLEAN;
END_LOCAL;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SIMPLE_GENERIC_EXPRESSION'
IN TYPEOF (arg1))
THEN
RETURN (TRUE);
END_IF;
IF arg1 IN arg2
THEN
RETURN (FALSE);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.UNARY_GENERIC_EXPRESSION'
IN TYPEOF (arg1)
THEN
RETURN
(acyclic(arg1\unary_generic_expression.operand,arg2+[arg1]));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BINARY_GENERIC_EXPRESSION'
IN TYPEOF (arg1)
THEN
RETURN
(acyclic(arg1\binary_generic_expression.operands[1],arg2+[arg1])
AND
acyclic(arg1\binary_generic_expression.operands[2],arg2+[arg1]));
END_IF;
IF
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MULTIPLE_ARITY_GENERIC_EXPRESSION'
IN TYPEOF (arg1)
THEN
result := TRUE;
REPEAT i := 1 TO
SIZEOF (arg1\multiple_arity_generic_expression.operands);
result := result AND
acyclic(arg1\multiple_arity_generic_expression.operands[i], arg2+[arg1]);
END_REPEAT;
RETURN (result);
END_IF;
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="used_variables">
                                                                <parameter
                                                                  name="arg">
                                                                  <typename
                                                                    name="generic_expression"/>
                                                                </parameter>
                                                                <aggregate
                                                                  type="SET"/>
                                                                <typename
                                                                  name="generic_variable"/>
                                                                <algorithm>
LOCAL
result : SET OF generic_variable := [];
END_LOCAL;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GENERIC_VARIABLE'
IN TYPEOF (arg)
THEN
RETURN ([arg]);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.UNARY_GENERIC_EXPRESSION'
IN TYPEOF (arg)
THEN
RETURN (used_variables (arg\unary_generic_expression.operand));
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BINARY_GENERIC_EXPRESSION'
IN TYPEOF (arg)
THEN
RETURN(used_variables(arg\binary_generic_expression.operands[1])
+ used_variables (arg\binary_generic_expression.operands[2]));
END_IF;
IF
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MULTIPLE_ARITY_GENERIC_EXPRESSION'
IN TYPEOF (arg)
THEN
REPEAT i := 1 TO
SIZEOF(arg\multiple_arity_generic_expression.operands);
result := result + used_variables(
arg\multiple_arity_generic_expression.operands[i]);
END_REPEAT;
RETURN (result);
END_IF;
RETURN ([ ]);
                                                                </algorithm>
                                                              </function>

                                                              <type name="supported_item">
                                                                <select
                                                                  selectitems="action action_directive action_method">
                                                                </select>
                                                              </type>

                                                              <entity
                                                                name="action">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="chosen_method">
                                                                  <typename
                                                                    name="action_method"/>
                                                                </explicit>
                                                                <derived
                                                                  name="id"
                                                                  expression="get_id_value (SELF)">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="action_directive">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="analysis">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="comment">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="requests">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="versioned_action_request"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="action_method">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="consequence">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="purpose">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="action_method_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_method">
                                                                  <typename
                                                                    name="action_method"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_method">
                                                                  <typename
                                                                    name="action_method"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="action_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_action">
                                                                  <typename
                                                                    name="action"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_action">
                                                                  <typename
                                                                    name="action"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="action_request_solution">
                                                                <explicit
                                                                  name="method">
                                                                  <typename
                                                                    name="action_method"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="request">
                                                                  <typename
                                                                    name="versioned_action_request"/>
                                                                </explicit>
                                                                <derived
                                                                  name="description"
                                                                  expression="get_description_value (SELF)">
                                                                  <typename
                                                                    name="text"/>
                                                                </derived>
                                                                <derived
                                                                  name="name"
                                                                  expression="get_name_value (SELF)">
                                                                  <typename
                                                                    name="label"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                </where>
                                                                <where
                                                                  label="WR2"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="action_request_status">
                                                                <explicit
                                                                  name="status">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="assigned_request">
                                                                  <typename
                                                                    name="versioned_action_request"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="action_resource">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="usage">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="supported_item"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="kind">
                                                                  <typename
                                                                    name="action_resource_type"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="action_resource_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_resource">
                                                                  <typename
                                                                    name="action_resource"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_resource">
                                                                  <typename
                                                                    name="action_resource"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="action_resource_type">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="action_status">
                                                                <explicit
                                                                  name="status">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="assigned_action">
                                                                  <typename
                                                                    name="executed_action"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="directed_action"
                                                                supertypes="executed_action">
                                                                <explicit
                                                                  name="directive">
                                                                  <typename
                                                                    name="action_directive"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="executed_action"
                                                                supertypes="action">
                                                              </entity>

                                                              <entity
                                                                name="versioned_action_request">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="version">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="purpose">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="versioned_action_request_relationship">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_versioned_action_request">
                                                                  <typename
                                                                    name="versioned_action_request"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_versioned_action_request">
                                                                  <typename
                                                                    name="versioned_action_request"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="acyclic_action_method_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="action_method_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="action_method"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF action_method_relationship;
END_LOCAL;
IF relation.relating_method IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(am &lt;* bag_to_set(USEDIN(relation.relating_method, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ACTION_METHOD_RELATIONSHIP.' + 'RELATED_METHOD')) | specific_relation IN TYPEOF(am));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_action_method_relationship(x[i], relatives + relation.relating_method, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="acyclic_action_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="action_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="action"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF action_relationship;
END_LOCAL;
IF relation.relating_action IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(actn &lt;* bag_to_set(USEDIN(relation.relating_action, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ACTION_RELATIONSHIP.' + 'RELATED_ACTION')) | specific_relation IN TYPEOF(actn));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_action_relationship(x[i], relatives + relation.relating_action, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="acyclic_action_resource_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="action_resource_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="action_resource"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF action_resource_relationship;
END_LOCAL;
IF relation.relating_resource IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(ar &lt;* bag_to_set(USEDIN(relation.relating_resource, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ACTION_RESOURCE_RELATIONSHIP.' + 'RELATED_RESOURCE')) | specific_relation IN TYPEOF(ar));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_action_resource_relationship(x[i], relatives + relation.relating_resource, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="acyclic_versioned_action_request_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="versioned_action_request_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"/>
                                                                  <typename
                                                                    name="versioned_action_request"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF versioned_action_request_relationship;
END_LOCAL;
IF relation.relating_versioned_action_request IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(varr &lt;* bag_to_set(USEDIN(relation.relating_versioned_action_request, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'VERSIONED_ACTION_REQUEST_RELATIONSHIP.' + 'RELATED_VERSIONED_ACTION_REQUEST')) | specific_relation IN TYPEOF(varr));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_versioned_action_request_relationship(x[i], relatives + relation.relating_versioned_action_request, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <entity
                                                                name="advanced_face"
                                                                supertypes="face_surface">
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF ([ 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.ELEMENTARY_SURFACE', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.B_SPLINE_SURFACE', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.SWEPT_SURFACE' ] * TYPEOF (face_geometry)) = 1">
                                                                </where>
                                                                <where
                                                                  label="WR2"
                                                                  expression="SIZEOF (QUERY (elp_fbnds &lt;* QUERY (bnds &lt;* bounds| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.EDGE_LOOP' IN TYPEOF (bnds.bound)))| NOT (SIZEOF (QUERY (oe &lt;* elp_fbnds.bound\path.edge_list| NOT ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.EDGE_CURVE' IN TYPEOF (oe\oriented_edge.edge_element)))) = 0))) = 0">
                                                                </where>
                                                                <where
                                                                  label="WR3"
                                                                  expression="SIZEOF (QUERY (elp_fbnds &lt;* QUERY (bnds &lt;* bounds| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.EDGE_LOOP' IN TYPEOF (bnds.bound)))| NOT (SIZEOF (QUERY (oe &lt;* elp_fbnds.bound\path.edge_list| NOT (SIZEOF ([ 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.LINE', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.CONIC', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.POLYLINE', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.SURFACE_CURVE', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.B_SPLINE_CURVE' ] * TYPEOF (oe.edge_element\edge_curve.edge_geometry)) = 1))) = 0))) = 0">
                                                                </where>
                                                                <where
                                                                  label="WR4"
                                                                  expression="SIZEOF (QUERY (elp_fbnds &lt;* QUERY (bnds &lt;* bounds| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.EDGE_LOOP' IN TYPEOF (bnds.bound)))| NOT (SIZEOF (QUERY (oe &lt;* elp_fbnds.bound\path.edge_list| NOT ((('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.VERTEX_POINT' IN TYPEOF (oe\edge.edge_start)) AND ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.CARTESIAN_POINT' IN TYPEOF (oe\edge.edge_start\vertex_point.vertex_geometry))) AND (('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.VERTEX_POINT' IN TYPEOF (oe\edge.edge_end)) AND ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.CARTESIAN_POINT' IN TYPEOF (oe\edge.edge_end\vertex_point.vertex_geometry)))))) = 0))) = 0">
                                                                </where>
                                                                <where
                                                                  label="WR5"
                                                                  expression="SIZEOF (QUERY (elp_fbnds &lt;* QUERY (bnds &lt;* bounds| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.EDGE_LOOP' IN TYPEOF (bnds.bound)))| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.ORIENTED_PATH' IN TYPEOF (elp_fbnds.bound)))) = 0">
                                                                </where>
                                                                <where
                                                                  label="WR6"
                                                                  expression="NOT ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.SWEPT_SURFACE' IN TYPEOF (face_geometry)) OR (SIZEOF ([ 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.LINE', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.CONIC', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.POLYLINE', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.B_SPLINE_CURVE' ] * TYPEOF (face_geometry\swept_surface.swept_curve)) = 1)">
                                                                </where>
                                                                <where
                                                                  label="WR7"
                                                                  expression="SIZEOF (QUERY (vlp_fbnds &lt;* QUERY (bnds &lt;* bounds| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.VERTEX_LOOP' IN TYPEOF (bnds.bound)))| NOT (('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.VERTEX_POINT' IN TYPEOF (vlp_fbnds\face_bound.bound\vertex_loop.loop_vertex)) AND ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.CARTESIAN_POINT' IN TYPEOF (vlp_fbnds\face_bound.bound\vertex_loop.loop_vertex\vertex_point.vertex_geometry))))) = 0">
                                                                </where>
                                                                <where
                                                                  label="WR8"
                                                                  expression="SIZEOF (QUERY (bnd &lt;* bounds| NOT (SIZEOF ([ 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.EDGE_LOOP', 'AIC_TOPOLOGICALLY_BOUNDED_SURFACE.VERTEX_LOOP' ] * TYPEOF (bnd.bound)) = 1))) = 0">
                                                                </where>
                                                                <where
                                                                  label="WR9"
                                                                  expression="SIZEOF (QUERY (elp_fbnds &lt;* QUERY (bnds &lt;* bounds| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.EDGE_LOOP' IN TYPEOF (bnds.bound)))| NOT (SIZEOF (QUERY (oe &lt;* elp_fbnds.bound\path.edge_list| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.SURFACE_CURVE' IN TYPEOF (oe\oriented_edge.edge_element\edge_curve.edge_geometry)) AND NOT (SIZEOF (QUERY (sc_ag &lt;* oe.edge_element\edge_curve.edge_geometry\surface_curve.associated_geometry| NOT ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.PCURVE' IN TYPEOF (sc_ag)))) = 0))) = 0))) = 0">
                                                                </where>
                                                                <where
                                                                  label="WR10"
                                                                  expression="(NOT ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.SWEPT_SURFACE' IN TYPEOF (face_geometry)) OR (NOT ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.POLYLINE' IN TYPEOF (face_geometry\swept_surface.swept_curve)) OR (SIZEOF (face_geometry\swept_surface.swept_curve\polyline.points) &gt;= 3))) AND (SIZEOF (QUERY (elp_fbnds &lt;* QUERY (bnds &lt;* bounds| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.EDGE_LOOP' IN TYPEOF (bnds.bound)))| NOT (SIZEOF (QUERY (oe &lt;* elp_fbnds.bound\path.edge_list| ('AIC_TOPOLOGICALLY_BOUNDED_SURFACE.POLYLINE' IN TYPEOF (oe\oriented_edge.edge_element\edge_curve.edge_geometry)) AND NOT (SIZEOF (oe\oriented_edge.edge_element\edge_curve.edge_geometry\polyline.points) &gt;= 3))) = 0))) = 0)">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="application_context">
                                                                <explicit
                                                                  name="application">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <derived
                                                                  name="description"
                                                                  expression="get_description_value (SELF)">
                                                                  <typename
                                                                    name="text"/>
                                                                </derived>
                                                                <derived
                                                                  name="id"
                                                                  expression="get_id_value (SELF)">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </derived>
                                                                <inverse
                                                                  name="context_elements"
                                                                  entity="application_context_element"
                                                                  attribute="frame_of_reference">
                                                                  <inverse.aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                </inverse>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                </where>
                                                                <where
                                                                  label="WR2"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="application_context_element"
                                                                super.expression="(ONEOF (library_context, product_concept_context, product_context, product_definition_context))">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="frame_of_reference">
                                                                  <typename
                                                                    name="application_context"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="application_context_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_context">
                                                                  <typename
                                                                    name="application_context"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_context">
                                                                  <typename
                                                                    name="application_context"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="application_protocol_definition">
                                                                <explicit
                                                                  name="status">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="application_interpreted_model_schema_name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="application_protocol_year">
                                                                  <typename
                                                                    name="year_number"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="application">
                                                                  <typename
                                                                    name="application_context"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="library_context"
                                                                supertypes="application_context_element">
                                                                <explicit
                                                                  name="library_reference">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="product_concept_context"
                                                                supertypes="application_context_element">
                                                                <explicit
                                                                  name="market_segment_type">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="product_context"
                                                                supertypes="application_context_element">
                                                                <explicit
                                                                  name="discipline_type">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="product_definition_context"
                                                                supertypes="application_context_element">
                                                                <explicit
                                                                  name="life_cycle_stage">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="approval">
                                                                <explicit
                                                                  name="status">
                                                                  <typename
                                                                    name="approval_status"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="level">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="approval_date_time">
                                                                <explicit
                                                                  name="date_time">
                                                                  <typename
                                                                    name="date_time_select"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="dated_approval">
                                                                  <typename
                                                                    name="approval"/>
                                                                </explicit>
                                                                <derived
                                                                  name="role"
                                                                  expression="get_role (SELF)">
                                                                  <typename
                                                                    name="object_role"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="approval_person_organization">
                                                                <explicit
                                                                  name="person_organization">
                                                                  <typename
                                                                    name="person_organization_select"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="authorized_approval">
                                                                  <typename
                                                                    name="approval"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="role">
                                                                  <typename
                                                                    name="approval_role"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="approval_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_approval">
                                                                  <typename
                                                                    name="approval"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_approval">
                                                                  <typename
                                                                    name="approval"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="approval_role">
                                                                <explicit
                                                                  name="role">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <derived
                                                                  name="description"
                                                                  expression="get_description_value (SELF)">
                                                                  <typename
                                                                    name="text"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="approval_status">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="acyclic_approval_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="approval_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="approval"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF approval_relationship;
END_LOCAL;
IF relation.relating_approval IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(app &lt;* bag_to_set(USEDIN(relation.relating_approval, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'APPROVAL_RELATIONSHIP.' + 'RELATED_APPROVAL')) | specific_relation IN TYPEOF(app));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_approval_relationship(x[i], relatives + relation.relating_approval, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <type name="description_attribute_select">
                                                                <select
                                                                  selectitems="action_request_solution application_context approval_role configuration_design context_dependent_shape_representation date_role date_time_role effectivity external_source organization_role person_and_organization person_and_organization_role person_role property_definition_representation representation time_role">
                                                                </select>
                                                              </type>

                                                              <type name="id_attribute_select">
                                                                <select
                                                                  selectitems="action address application_context group organizational_project product_category property_definition representation shape_aspect shape_aspect_relationship">
                                                                </select>
                                                              </type>

                                                              <type name="name_attribute_select">
                                                                <select
                                                                  selectitems="action_request_solution address configuration_design context_dependent_shape_representation derived_unit effectivity person_and_organization product_definition product_definition_substitute property_definition_representation">
                                                                </select>
                                                              </type>

                                                              <type name="role_select">
                                                                <select
                                                                  selectitems="action_assignment action_request_assignment approval_assignment approval_date_time certification_assignment contract_assignment document_reference effectivity_assignment external_referent_assignment group_assignment name_assignment security_classification_assignment">
                                                                </select>
                                                              </type>

                                                              <entity
                                                                name="description_attribute">
                                                                <explicit
                                                                  name="attribute_value">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="described_item">
                                                                  <typename
                                                                    name="description_attribute_select"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="id_attribute">
                                                                <explicit
                                                                  name="attribute_value">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="identified_item">
                                                                  <typename
                                                                    name="id_attribute_select"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="name_attribute">
                                                                <explicit
                                                                  name="attribute_value">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="named_item">
                                                                  <typename
                                                                    name="name_attribute_select"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="object_role">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="role_association">
                                                                <explicit
                                                                  name="role">
                                                                  <typename
                                                                    name="object_role"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="item_with_role">
                                                                  <typename
                                                                    name="role_select"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="get_description_value">
                                                                <parameter
                                                                  name="obj">
                                                                  <typename
                                                                    name="description_attribute_select"/>
                                                                </parameter>
                                                                <typename
                                                                  name="text"/>
                                                                <algorithm>
LOCAL
description_bag : BAG OF description_attribute := (USEDIN(obj, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.' + 'DESCRIBED_ITEM'));
END_LOCAL;
IF SIZEOF(description_bag) = 1 THEN
RETURN (description_bag[1].attribute_value);
ELSE
RETURN (?);
END_IF;
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="get_id_value">
                                                                <parameter
                                                                  name="obj">
                                                                  <typename
                                                                    name="id_attribute_select"/>
                                                                </parameter>
                                                                <typename
                                                                  name="identifier"/>
                                                                <algorithm>
LOCAL
id_bag : BAG OF id_attribute := (USEDIN(obj, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ID_ATTRIBUTE.' + 'IDENTIFIED_ITEM'));
END_LOCAL;
IF SIZEOF(id_bag) = 1 THEN
RETURN (id_bag[1].attribute_value);
ELSE
RETURN (?);
END_IF;
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="get_name_value">
                                                                <parameter
                                                                  name="obj">
                                                                  <typename
                                                                    name="name_attribute_select"/>
                                                                </parameter>
                                                                <typename
                                                                  name="label"/>
                                                                <algorithm>
LOCAL
name_bag : BAG OF name_attribute := (USEDIN(obj, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'NAME_ATTRIBUTE.' + 'NAMED_ITEM'));
END_LOCAL;
IF SIZEOF(name_bag) = 1 THEN
RETURN (name_bag[1].attribute_value);
ELSE
RETURN (?);
END_IF;
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="get_role">
                                                                <parameter
                                                                  name="obj">
                                                                  <typename
                                                                    name="role_select"/>
                                                                </parameter>
                                                                <typename
                                                                  name="object_role"/>
                                                                <algorithm>
LOCAL
role_bag : BAG OF role_association := (USEDIN(obj, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.' + 'ITEM_WITH_ROLE'));
END_LOCAL;
IF SIZEOF(role_bag) = 1 THEN
RETURN (role_bag[1].role);
ELSE
RETURN (?);
END_IF;
                                                                </algorithm>
                                                              </function>

                                                              <entity
                                                                name="certification">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="purpose">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="kind">
                                                                  <typename
                                                                    name="certification_type"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="certification_type">
                                                                <explicit
                                                                  name="description">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <type name="classification_select">
                                                                <select
                                                                  extensible="YES">
                                                                </select>
                                                              </type>

                                                              <type name="complete_membership_select">
                                                                <select
                                                                  extensible="YES">
                                                                </select>
                                                              </type>

                                                              <entity
                                                                name="class"
                                                                supertypes="group">
                                                              </entity>

                                                              <entity
                                                                name="class_by_extension"
                                                                supertypes="class">
                                                              </entity>

                                                              <entity
                                                                name="class_by_intension"
                                                                supertypes="class">
                                                              </entity>

                                                              <entity
                                                                name="classification"
                                                                supertypes="classification_assignment">
                                                                <explicit
                                                                  name="classified">
                                                                  <typename
                                                                    name="classification_select"/>
                                                                </explicit>
                                                                <derived
                                                                  name="classifier"
                                                                  expression="SELF\classification_assignment.assigned_class">
                                                                  <typename
                                                                    name="class"/>
                                                                </derived>
                                                              </entity>

                                                              <entity
                                                                name="complete_membership"
                                                                supertypes="classification_assignment">
                                                                <derived
                                                                  name="containing_set"
                                                                  expression="SELF\classification_assignment.assigned_class">
                                                                  <typename
                                                                    name="class"/>
                                                                </derived>
                                                              </entity>

                                                              <entity
                                                                name="complete_membership_of_empty_set"
                                                                supertypes="complete_membership">
                                                              </entity>

                                                              <entity
                                                                name="complete_membership_of_non_empty_set"
                                                                supertypes="complete_membership">
                                                                <explicit
                                                                  name="members">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="complete_membership_select"/>
                                                                </explicit>
                                                              </entity>

                                                              <subtype.constraint name="classification_or_complete_membership"
                                                                entity="classification_assignment"
                                                                super.expression="ONEOF (classification, complete_membership)">
                                                              </subtype.constraint>
                                                              <type name="configuration_design_item">
                                                                <select
                                                                  selectitems="product_definition product_definition_formation">
                                                                </select>
                                                              </type>

                                                              <entity
                                                                name="configurable_item"
                                                                supertypes="configuration_item">
                                                                <explicit
                                                                  name="item_concept_feature">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="product_concept_feature_association"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="configuration_design">
                                                                <explicit
                                                                  name="configuration">
                                                                  <typename
                                                                    name="configuration_item"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="design">
                                                                  <typename
                                                                    name="configuration_design_item"/>
                                                                </explicit>
                                                                <derived
                                                                  name="name"
                                                                  expression="get_name_value (SELF)">
                                                                  <typename
                                                                    name="label"/>
                                                                </derived>
                                                                <derived
                                                                  name="description"
                                                                  expression="get_description_value (SELF)">
                                                                  <typename
                                                                    name="text"/>
                                                                </derived>
                                                                <unique
                                                                  label="UR1">
                                                                  <unique.attribute
                                                                    attribute="configuration"/>
                                                                  <unique.attribute
                                                                    attribute="design"/>
                                                                </unique>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1">
                                                                </where>
                                                                <where
                                                                  label="WR2"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="configuration_effectivity"
                                                                supertypes="product_definition_effectivity">
                                                                <explicit
                                                                  name="configuration">
                                                                  <typename
                                                                    name="configuration_design"/>
                                                                </explicit>
                                                                <unique
                                                                  label="UR1">
                                                                  <unique.attribute
                                                                    attribute="configuration"/>
                                                                  <unique.attribute
                                                                    attribute="usage"/>
                                                                  <unique.attribute
                                                                    attribute="id"/>
                                                                </unique>
                                                                <where
                                                                  label="WR1"
                                                                  expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_USAGE' IN TYPEOF (SELF\product_definition_effectivity.usage)">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="configuration_item">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="item_concept">
                                                                  <typename
                                                                    name="product_concept"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="purpose"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="configuration_item_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_configuration_item">
                                                                  <typename
                                                                    name="configuration_item"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_configuration_item">
                                                                  <typename
                                                                    name="configuration_item"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="contract">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="purpose">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="kind">
                                                                  <typename
                                                                    name="contract_type"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="contract_relationship">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_contract">
                                                                  <typename
                                                                    name="contract"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_contract">
                                                                  <typename
                                                                    name="contract"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="contract_type">
                                                                <explicit
                                                                  name="description">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="acyclic_contract_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="contract_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="contract"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF contract_relationship;
END_LOCAL;
IF relation.relating_contract IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(cont &lt;* bag_to_set(USEDIN(relation.relating_contract, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CONTRACT_RELATIONSHIP.' + 'RELATED_CONTRACT')) | specific_relation IN TYPEOF(cont));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_contract_relationship(x[i], relatives + relation.relating_contract, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <type name="ahead_or_behind">
                                                                <enumeration
                                                                  items="ahead exact behind">
                                                                </enumeration>
                                                              </type>

                                                              <type name="date_time_or_event_occurrence">
                                                                <select
                                                                  selectitems="date_time_select event_occurrence">
                                                                </select>
                                                              </type>

                                                              <type name="date_time_select">
                                                                <select
                                                                  selectitems="date date_and_time local_time">
                                                                </select>
                                                              </type>

                                                              <type name="day_in_month_number">
                                                                <builtintype
                                                                  type="INTEGER">
                                                                </builtintype>
                                                                <where
                                                                  label="WR1"
                                                                  expression="{1 &lt;= SELF &lt;= 31}">
                                                                </where>
                                                              </type>

                                                              <type name="day_in_week_number">
                                                                <builtintype
                                                                  type="INTEGER">
                                                                </builtintype>
                                                                <where
                                                                  label="WR1"
                                                                  expression="{ 1 &lt;= SELF &lt;= 7 }">
                                                                </where>
                                                              </type>

                                                              <type name="day_in_year_number">
                                                                <builtintype
                                                                  type="INTEGER">
                                                                </builtintype>
                                                                <where
                                                                  label="WR1"
                                                                  expression="{1 &lt;= SELF &lt;= 366}">
                                                                </where>
                                                              </type>

                                                              <type name="hour_in_day">
                                                                <builtintype
                                                                  type="INTEGER">
                                                                </builtintype>
                                                                <where
                                                                  label="WR1"
                                                                  expression="{ 0 &lt;= SELF &lt; 24 }">
                                                                </where>
                                                              </type>

                                                              <type name="minute_in_hour">
                                                                <builtintype
                                                                  type="INTEGER">
                                                                </builtintype>
                                                                <where
                                                                  label="WR1"
                                                                  expression="{ 0 &lt;= SELF &lt;= 59 }">
                                                                </where>
                                                              </type>

                                                              <type name="month_in_year_number">
                                                                <builtintype
                                                                  type="INTEGER">
                                                                </builtintype>
                                                                <where
                                                                  label="WR1"
                                                                  expression="{ 1 &lt;= SELF &lt;= 12 }">
                                                                </where>
                                                              </type>

                                                              <type name="second_in_minute">
                                                                <builtintype
                                                                  type="REAL">
                                                                </builtintype>
                                                                <where
                                                                  label="WR1"
                                                                  expression="{ 0 &lt;= SELF &lt;= 60.0 }">
                                                                </where>
                                                              </type>

                                                              <type name="week_in_year_number">
                                                                <builtintype
                                                                  type="INTEGER">
                                                                </builtintype>
                                                                <where
                                                                  label="WR1"
                                                                  expression="{ 1 &lt;= SELF &lt;= 53 }">
                                                                </where>
                                                              </type>

                                                              <type name="year_number">
                                                                <builtintype
                                                                  type="INTEGER">
                                                                </builtintype>
                                                              </type>

                                                              <entity
                                                                name="calendar_date"
                                                                supertypes="date">
                                                                <explicit
                                                                  name="day_component">
                                                                  <typename
                                                                    name="day_in_month_number"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="month_component">
                                                                  <typename
                                                                    name="month_in_year_number"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="valid_calendar_date (SELF)">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="coordinated_universal_time_offset">
                                                                <explicit
                                                                  name="hour_offset">
                                                                  <builtintype
                                                                    type="INTEGER"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="minute_offset"
                                                                  optional="YES">
                                                                  <builtintype
                                                                    type="INTEGER"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="sense">
                                                                  <typename
                                                                    name="ahead_or_behind"/>
                                                                </explicit>
                                                                <derived
                                                                  name="actual_minute_offset"
                                                                  expression="NVL(minute_offset,0)">
                                                                  <builtintype
                                                                    type="INTEGER"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="{ 0 &lt;= hour_offset &lt; 24 }">
                                                                </where>
                                                                <where
                                                                  label="WR2"
                                                                  expression="{ 0 &lt;= actual_minute_offset &lt;= 59 }">
                                                                </where>
                                                                <where
                                                                  label="WR3"
                                                                  expression="NOT (((hour_offset &lt;&gt; 0) OR (actual_minute_offset &lt;&gt;0)) AND (sense = exact))">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="date"
                                                                super.expression="(ONEOF (calendar_date, ordinal_date, week_of_year_and_day_date))">
                                                                <explicit
                                                                  name="year_component">
                                                                  <typename
                                                                    name="year_number"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="date_and_time">
                                                                <explicit
                                                                  name="date_component">
                                                                  <typename
                                                                    name="date"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="time_component">
                                                                  <typename
                                                                    name="local_time"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="date_role">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <derived
                                                                  name="description"
                                                                  expression="get_description_value (SELF)">
                                                                  <typename
                                                                    name="text"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="date_time_role">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <derived
                                                                  name="description"
                                                                  expression="get_description_value (SELF)">
                                                                  <typename
                                                                    name="text"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="event_occurrence">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="event_occurrence_context_role">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="event_occurrence_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_event">
                                                                  <typename
                                                                    name="event_occurrence"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_event">
                                                                  <typename
                                                                    name="event_occurrence"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="event_occurrence_role">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="local_time">
                                                                <explicit
                                                                  name="hour_component">
                                                                  <typename
                                                                    name="hour_in_day"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="minute_component"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="minute_in_hour"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="second_component"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="second_in_minute"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="zone">
                                                                  <typename
                                                                    name="coordinated_universal_time_offset"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="valid_time (SELF)">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="ordinal_date"
                                                                supertypes="date">
                                                                <explicit
                                                                  name="day_component">
                                                                  <typename
                                                                    name="day_in_year_number"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="(NOT leap_year(SELF.year_component) AND { 1 &lt;= day_component &lt;= 365 }) OR (leap_year(SELF.year_component) AND { 1 &lt;= day_component &lt;= 366 })">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="relative_event_occurrence"
                                                                supertypes="event_occurrence">
                                                                <explicit
                                                                  name="base_event">
                                                                  <typename
                                                                    name="event_occurrence"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="offset">
                                                                  <typename
                                                                    name="time_measure_with_unit"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="time_interval">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="time_interval_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_time_interval">
                                                                  <typename
                                                                    name="time_interval"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_time_interval">
                                                                  <typename
                                                                    name="time_interval"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="time_interval_role">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="time_interval_with_bounds"
                                                                supertypes="time_interval">
                                                                <explicit
                                                                  name="primary_bound"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="date_time_or_event_occurrence"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="secondary_bound"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="date_time_or_event_occurrence"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="duration"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="time_measure_with_unit"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="NOT (EXISTS(secondary_bound) AND EXISTS(duration))">
                                                                </where>
                                                                <where
                                                                  label="WR2"
                                                                  expression="EXISTS(primary_bound) OR EXISTS(secondary_bound)">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="time_role">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <derived
                                                                  name="description"
                                                                  expression="get_description_value (SELF)">
                                                                  <typename
                                                                    name="text"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="week_of_year_and_day_date"
                                                                supertypes="date">
                                                                <explicit
                                                                  name="week_component">
                                                                  <typename
                                                                    name="week_in_year_number"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="day_component"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="day_in_week_number"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="acyclic_event_occurrence_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="event_occurrence_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="event_occurrence"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF event_occurrence_relationship;
END_LOCAL;
IF relation.relating_event IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(evnt &lt;* bag_to_set(USEDIN(relation.relating_event, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'EVENT_OCCURRENCE_RELATIONSHIP.' + 'RELATED_EVENT')) | specific_relation IN TYPEOF(evnt));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_event_occurrence_relationship(x[i], relatives + relation.relating_event, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="acyclic_time_interval_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="time_interval_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="time_interval"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF time_interval_relationship;
END_LOCAL;
IF relation.relating_time_interval IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(ti &lt;* bag_to_set(USEDIN(relation.relating_time_interval, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'TIME_INTERVAL_RELATIONSHIP.' + 'RELATED_TIME_INTERVAL')) | specific_relation IN TYPEOF(ti));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_time_interval_relationship(x[i], relatives + relation.relating_time_interval, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="leap_year">
                                                                <parameter
                                                                  name="year">
                                                                  <typename
                                                                    name="year_number"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
IF ((((year MOD 4) = 0) AND ((year MOD 100) &lt;&gt; 0)) OR ((year MOD 400) = 0)) THEN
RETURN (TRUE);
ELSE
RETURN (FALSE);
END_IF;
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="valid_calendar_date">
                                                                <parameter
                                                                  name="date">
                                                                  <typename
                                                                    name="calendar_date"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="LOGICAL"/>
                                                                <algorithm>
CASE date.month_component OF
1 : RETURN({ 1 &lt;= date.day_component &lt;= 31 });
2 : BEGIN
IF (leap_year(date.year_component)) THEN
RETURN({ 1 &lt;= date.day_component &lt;= 29 });
ELSE
RETURN({ 1 &lt;= date.day_component &lt;= 28 });
END_IF;
END;
3 : RETURN({ 1 &lt;= date.day_component &lt;= 31 });
4 : RETURN({ 1 &lt;= date.day_component &lt;= 30 });
5 : RETURN({ 1 &lt;= date.day_component &lt;= 31 });
6 : RETURN({ 1 &lt;= date.day_component &lt;= 30 });
7 : RETURN({ 1 &lt;= date.day_component &lt;= 31 });
8 : RETURN({ 1 &lt;= date.day_component &lt;= 31 });
9 : RETURN({ 1 &lt;= date.day_component &lt;= 30 });
10 : RETURN({ 1 &lt;= date.day_component &lt;= 31 });
11 : RETURN({ 1 &lt;= date.day_component &lt;= 30 });
12 : RETURN({ 1 &lt;= date.day_component &lt;= 31 });
END_CASE;
RETURN (FALSE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="valid_time">
                                                                <parameter
                                                                  name="time">
                                                                  <typename
                                                                    name="local_time"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
IF EXISTS(time.second_component) THEN
RETURN (EXISTS(time.minute_component));
ELSE
RETURN (TRUE);
END_IF;
                                                                </algorithm>
                                                              </function>

                                                              <type name="product_or_formation_or_definition">
                                                                <select
                                                                  selectitems="product product_definition_formation product_definition">
                                                                </select>
                                                              </type>

                                                              <entity
                                                                name="document">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="kind">
                                                                  <typename
                                                                    name="document_type"/>
                                                                </explicit>
                                                                <inverse
                                                                  name="representation_types"
                                                                  entity="document_representation_type"
                                                                  attribute="represented_document">
                                                                  <inverse.aggregate
                                                                    type="SET"
                                                                    lower="0"
                                                                    upper="?"/>
                                                                </inverse>
                                                              </entity>

                                                              <entity
                                                                name="document_product_association">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_document">
                                                                  <typename
                                                                    name="document"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_product">
                                                                  <typename
                                                                    name="product_or_formation_or_definition"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="document_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_document">
                                                                  <typename
                                                                    name="document"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_document">
                                                                  <typename
                                                                    name="document"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="document_representation_type">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="represented_document">
                                                                  <typename
                                                                    name="document"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="document_type">
                                                                <explicit
                                                                  name="product_data_type">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="document_usage_constraint">
                                                                <explicit
                                                                  name="source">
                                                                  <typename
                                                                    name="document"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="subject_element">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="subject_element_value">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="document_with_class"
                                                                supertypes="document">
                                                                <explicit
                                                                  name="class">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="acyclic_document_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="document_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="document"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF document_relationship;
END_LOCAL;
IF relation.relating_document IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(doc &lt;* bag_to_set(USEDIN(relation.relating_document, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DOCUMENT_RELATIONSHIP.' + 'RELATED_DOCUMENT')) | specific_relation IN TYPEOF(doc));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_document_relationship(x[i], relatives + relation.relating_document, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <entity
                                                                name="dated_effectivity"
                                                                supertypes="effectivity">
                                                                <explicit
                                                                  name="effectivity_end_date"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="date_time_or_event_occurrence"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="effectivity_start_date">
                                                                  <typename
                                                                    name="date_time_or_event_occurrence"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="effectivity"
                                                                super.expression="(ONEOF (serial_numbered_effectivity, dated_effectivity, lot_effectivity, time_interval_based_effectivity))">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <derived
                                                                  name="name"
                                                                  expression="get_name_value(SELF)">
                                                                  <typename
                                                                    name="label"/>
                                                                </derived>
                                                                <derived
                                                                  name="description"
                                                                  expression="get_description_value(SELF)">
                                                                  <typename
                                                                    name="text"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1">
                                                                </where>
                                                                <where
                                                                  label="WR2"
                                                                  expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="effectivity_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_effectivity">
                                                                  <typename
                                                                    name="effectivity"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_effectivity">
                                                                  <typename
                                                                    name="effectivity"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="lot_effectivity"
                                                                supertypes="effectivity">
                                                                <explicit
                                                                  name="effectivity_lot_id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="effectivity_lot_size">
                                                                  <typename
                                                                    name="measure_with_unit"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="serial_numbered_effectivity"
                                                                supertypes="effectivity">
                                                                <explicit
                                                                  name="effectivity_start_id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="effectivity_end_id"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="time_interval_based_effectivity"
                                                                supertypes="effectivity">
                                                                <explicit
                                                                  name="effectivity_period">
                                                                  <typename
                                                                    name="time_interval"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="acyclic_effectivity_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="effectivity_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="effectivity"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF effectivity_relationship;
END_LOCAL;
IF relation.relating_effectivity IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(eff &lt;* bag_to_set(USEDIN(relation.relating_effectivity, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'EFFECTIVITY_RELATIONSHIP.' + 'RELATED_EFFECTIVITY')) | specific_relation IN TYPEOF(eff));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_effectivity_relationship(x[i], relatives + relation.relating_effectivity, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <entity
                                                                name="experience">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="experience_relationship">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_experience">
                                                                  <typename
                                                                    name="experience"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_experience">
                                                                  <typename
                                                                    name="experience"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="experience_type">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="experience_type_relationship">
                                                                <explicit
                                                                  name="id">
                                                                  <typename
                                                                    name="identifier"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_experience_type">
                                                                  <typename
                                                                    name="experience_type"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_experience_type">
                                                                  <typename
                                                                    name="experience_type"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="acyclic_experience_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="experience_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"/>
                                                                  <typename
                                                                    name="experience"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF experience_relationship;
END_LOCAL;
IF relation.relating_experience IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(expr &lt;* bag_to_set(USEDIN(relation.relating_experience, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'EXPERIENCE_RELATIONSHIP.' + 'RELATED_EXPERIENCE')) | specific_relation IN TYPEOF(expr));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_experience_relationship(x[i], relatives + relation.relating_experience, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="acyclic_experience_type_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="experience_type_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"/>
                                                                  <typename
                                                                    name="experience_type"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF experience_type_relationship;
END_LOCAL;
IF relation.relating_experience_type IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(exptyp &lt;* bag_to_set(USEDIN(relation.relating_experience_type, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'EXPERIENCE_TYPE_RELATIONSHIP.' + 'RELATED_EXPERIENCE_TYPE')) | specific_relation IN TYPEOF(exptyp));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_experience_type_relationship(x[i], relatives + relation.relating_experience_type, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <type name="message">
                                                                <builtintype
                                                                  type="STRING">
                                                                </builtintype>
                                                              </type>

                                                              <type name="source_item">
                                                                <select
                                                                  selectitems="identifier message">
                                                                </select>
                                                              </type>

                                                              <entity
                                                                name="external_source">
                                                                <explicit
                                                                  name="source_id">
                                                                  <typename
                                                                    name="source_item"/>
                                                                </explicit>
                                                                <derived
                                                                  name="description"
                                                                  expression="get_description_value (SELF)">
                                                                  <typename
                                                                    name="text"/>
                                                                </derived>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="external_source_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_source">
                                                                  <typename
                                                                    name="external_source"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_source">
                                                                  <typename
                                                                    name="external_source"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="externally_defined_item">
                                                                <explicit
                                                                  name="item_id">
                                                                  <typename
                                                                    name="source_item"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="source">
                                                                  <typename
                                                                    name="external_source"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="externally_defined_item_relationship">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="description"
                                                                  optional="YES">
                                                                  <typename
                                                                    name="text"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="relating_item">
                                                                  <typename
                                                                    name="externally_defined_item"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="related_item">
                                                                  <typename
                                                                    name="externally_defined_item"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="pre_defined_item">
                                                                <explicit
                                                                  name="name">
                                                                  <typename
                                                                    name="label"/>
                                                                </explicit>
                                                              </entity>

                                                              <function
                                                                name="acyclic_external_source_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="external_source_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="external_source"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF external_source_relationship;
END_LOCAL;
IF relation.relating_source IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(es &lt;* bag_to_set(USEDIN(relation.relating_source, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'EXTERNAL_SOURCE_RELATIONSHIP.' + 'RELATED_SOURCE')) | specific_relation IN TYPEOF(es));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_external_source_relationship(x[i], relatives + relation.relating_source, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <function
                                                                name="acyclic_externally_defined_item_relationship">
                                                                <parameter
                                                                  name="relation">
                                                                  <typename
                                                                    name="externally_defined_item_relationship"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="relatives">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="externally_defined_item"/>
                                                                </parameter>
                                                                <parameter
                                                                  name="specific_relation">
                                                                  <builtintype
                                                                    type="STRING"/>
                                                                </parameter>
                                                                <builtintype
                                                                  type="BOOLEAN"/>
                                                                <algorithm>
LOCAL
x : SET OF externally_defined_item_relationship;
END_LOCAL;
IF relation.relating_item IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(edi &lt;* bag_to_set(USEDIN(relation.relating_item, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'EXTERNALLY_DEFINED_ITEM_RELATIONSHIP.' + 'RELATED_ITEM')) | specific_relation IN TYPEOF(edi));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_externally_defined_item_relationship(x[i], relatives + relation.relating_item, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                </algorithm>
                                                              </function>

                                                              <type name="boolean_operand">
                                                                <select
                                                                  selectitems="solid_model half_space_solid csg_primitive boolean_result half_space_2d">
                                                                </select>
                                                              </type>

                                                              <type name="boolean_operator">
                                                                <enumeration
                                                                  items="union intersection difference">
                                                                </enumeration>
                                                              </type>

                                                              <type name="csg_select">
                                                                <select
                                                                  selectitems="boolean_result csg_primitive">
                                                                </select>
                                                              </type>

                                                              <type name="csg_primitive">
                                                                <select
                                                                  selectitems="sphere ellipsoid block right_angular_wedge faceted_primitive rectangular_pyramid torus right_circular_cone eccentric_cone right_circular_cylinder cyclide_segment_solid primitive_2d">
                                                                </select>
                                                              </type>

                                                              <type name="geometric_set_select">
                                                                <select
                                                                  selectitems="point curve surface">
                                                                </select>
                                                              </type>

                                                              <type name="surface_model">
                                                                <select
                                                                  selectitems="shell_based_surface_model face_based_surface_model">
                                                                </select>
                                                              </type>

                                                              <type name="wireframe_model">
                                                                <select
                                                                  selectitems="shell_based_wireframe_model edge_based_wireframe_model">
                                                                </select>
                                                              </type>

                                                              <entity
                                                                name="block"
                                                                supertypes="geometric_representation_item">
                                                                <explicit
                                                                  name="position">
                                                                  <typename
                                                                    name="axis2_placement_3d"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="x">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="y">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="z">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="boolean_result"
                                                                supertypes="geometric_representation_item">
                                                                <explicit
                                                                  name="operator">
                                                                  <typename
                                                                    name="boolean_operator"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="first_operand">
                                                                  <typename
                                                                    name="boolean_operand"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="second_operand">
                                                                  <typename
                                                                    name="boolean_operand"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="box_domain"
                                                                supertypes="founded_item">
                                                                <explicit
                                                                  name="corner">
                                                                  <typename
                                                                    name="cartesian_point"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="xlength">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="ylength">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="zlength">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF(QUERY(item &lt;* USEDIN(SELF,'')| NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BOXED_HALF_SPACE' IN TYPEOF(item)))) = 0">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="boxed_half_space"
                                                                supertypes="half_space_solid">
                                                                <explicit
                                                                  name="enclosure">
                                                                  <typename
                                                                    name="box_domain"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="brep_2d"
                                                                supertypes="solid_model">
                                                                <explicit
                                                                  name="extent">
                                                                  <typename
                                                                    name="face"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FACE_SURFACE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SUBFACE', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_FACE'] * TYPEOF (SELF.extent)) = 0">
                                                                </where>
                                                                <where
                                                                  label="WR2"
                                                                  expression="SIZEOF (QUERY (bnds &lt;* extent.bounds | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EDGE_LOOP' IN TYPEOF(bnds.bound)))) = 0">
                                                                </where>
                                                                <where
                                                                  label="WR3"
                                                                  expression="SIZEOF (QUERY (bnds &lt;* extent.bounds |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FACE_OUTER_BOUND' IN TYPEOF(bnds))) = 1">
                                                                </where>
                                                                <where
                                                                  label="WR4"
                                                                  expression="SIZEOF(QUERY (elp_fbnds &lt;* QUERY (bnds &lt;* extent.bounds |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EDGE_LOOP' IN TYPEOF(bnds.bound)) | NOT (SIZEOF (QUERY (oe &lt;* elp_fbnds.bound\path.edge_list | NOT(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EDGE_CURVE' IN TYPEOF(oe.edge_element)) AND(oe.edge_element\geometric_representation_item.dim = 2)))) =0))) = 0">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="brep_with_voids"
                                                                supertypes="manifold_solid_brep">
                                                                <explicit
                                                                  name="voids">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="oriented_closed_shell"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="circular_area"
                                                                supertypes="primitive_2d">
                                                                <explicit
                                                                  name="centre">
                                                                  <typename
                                                                    name="cartesian_point"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="radius">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="convex_hexahedron"
                                                                supertypes="faceted_primitive">
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF(points) = 8">
                                                                </where>
                                                                <where
                                                                  label="WR2"
                                                                  expression="above_plane(points[1], points[2], points[3], points[4]) = 0.0">
                                                                </where>
                                                                <where
                                                                  label="WR3"
                                                                  expression="above_plane(points[5], points[8], points[7], points[6]) = 0.0">
                                                                </where>
                                                                <where
                                                                  label="WR4"
                                                                  expression="above_plane(points[1], points[4], points[8], points[5]) = 0.0">
                                                                </where>
                                                                <where
                                                                  label="WR5"
                                                                  expression="above_plane(points[4], points[3], points[7], points[8]) = 0.0">
                                                                </where>
                                                                <where
                                                                  label="WR6"
                                                                  expression="above_plane(points[3], points[2], points[6], points[7]) = 0.0">
                                                                </where>
                                                                <where
                                                                  label="WR7"
                                                                  expression="above_plane(points[1], points[5], points[6], points[2]) = 0.0">
                                                                </where>
                                                                <where
                                                                  label="WR8"
                                                                  expression="same_side([points[1], points[2], points[3]],[points[5], points[6], points[7], points[8]])">
                                                                </where>
                                                                <where
                                                                  label="WR9"
                                                                  expression="same_side([points[1], points[4], points[8]],[points[3], points[7], points[6], points[2]])">
                                                                </where>
                                                                <where
                                                                  label="WR10"
                                                                  expression="same_side([points[1], points[2], points[5]],[points[3], points[7], points[8], points[4]])">
                                                                </where>
                                                                <where
                                                                  label="WR11"
                                                                  expression="same_side([points[5], points[6], points[7]],[points[1], points[2], points[3], points[4]])">
                                                                </where>
                                                                <where
                                                                  label="WR12"
                                                                  expression="same_side([points[3], points[7], points[6]],[points[1], points[4], points[8], points[5]])">
                                                                </where>
                                                                <where
                                                                  label="WR13"
                                                                  expression="same_side([points[3], points[7], points[8]],[points[1], points[5], points[6], points[2]])">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="csg_solid"
                                                                supertypes="solid_model">
                                                                <explicit
                                                                  name="tree_root_expression">
                                                                  <typename
                                                                    name="csg_select"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="cyclide_segment_solid"
                                                                supertypes="geometric_representation_item">
                                                                <explicit
                                                                  name="position">
                                                                  <typename
                                                                    name="axis2_placement_3d"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="radius1">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="radius2">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="cone_angle1">
                                                                  <typename
                                                                    name="plane_angle_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="cone_angle2">
                                                                  <typename
                                                                    name="plane_angle_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="turn_angle">
                                                                  <typename
                                                                    name="plane_angle_measure"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="eccentric_cone"
                                                                supertypes="geometric_representation_item">
                                                                <explicit
                                                                  name="position">
                                                                  <typename
                                                                    name="axis2_placement_3d"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="semi_axis_1">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="semi_axis_2">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="height">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="x_offset">
                                                                  <typename
                                                                    name="length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="y_offset">
                                                                  <typename
                                                                    name="length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="ratio">
                                                                  <builtintype
                                                                    type="REAL"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="ratio &gt;= 0.0">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="edge_based_wireframe_model"
                                                                supertypes="geometric_representation_item">
                                                                <explicit
                                                                  name="ebwm_boundary">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="connected_edge_set"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="face_based_surface_model"
                                                                supertypes="geometric_representation_item">
                                                                <explicit
                                                                  name="fbsm_faces">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="connected_face_set"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="geometric_curve_set"
                                                                supertypes="geometric_set">
                                                                <where
                                                                  label="WR1"
                                                                  expression="SIZEOF(QUERY(temp &lt;* SELF\geometric_set.elements |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE' IN TYPEOF(temp))) = 0">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="geometric_set"
                                                                super.expression="(ONEOF(geometric_curve_set, geometric_set_replica))"
                                                                supertypes="geometric_representation_item">
                                                                <explicit
                                                                  name="elements">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="geometric_set_select"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="ellipsoid"
                                                                supertypes="geometric_representation_item">
                                                                <explicit
                                                                  name="position">
                                                                  <typename
                                                                    name="axis2_placement_3d"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="semi_axis_1">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="semi_axis_2">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="semi_axis_3">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="elliptic_area"
                                                                supertypes="primitive_2d">
                                                                <explicit
                                                                  name="position">
                                                                  <typename
                                                                    name="axis2_placement_2d"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="semi_axis_1">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="semi_axis_2">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                              </entity>

                                                              <entity
                                                                name="extruded_area_solid"
                                                                supertypes="swept_area_solid">
                                                                <explicit
                                                                  name="extruded_direction">
                                                                  <typename
                                                                    name="direction"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="depth">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="dot_product((SELF\swept_area_solid.swept_area.basis_surface\ elementary_surface.position.p[3]), extruded_direction) &lt;&gt; 0.0">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="extruded_face_solid"
                                                                supertypes="swept_face_solid">
                                                                <explicit
                                                                  name="extruded_direction">
                                                                  <typename
                                                                    name="direction"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="depth">
                                                                  <typename
                                                                    name="positive_length_measure"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="dot_product((SELF\swept_face_solid.swept_face.face_geometry\ elementary_surface.position.p[3]), extruded_direction) &lt;&gt; 0.0">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="faceted_brep"
                                                                supertypes="manifold_solid_brep">
                                                              </entity>

                                                              <entity
                                                                name="faceted_primitive"
                                                                super.expression="(ONEOF(tetrahedron, convex_hexahedron))"
                                                                supertypes="geometric_representation_item">
                                                                <explicit
                                                                  name="points">
                                                                  <aggregate
                                                                    type="LIST"
                                                                    lower="4"
                                                                    upper="?"
                                                                    unique="YES"/>
                                                                  <typename
                                                                    name="cartesian_point"/>
                                                                </explicit>
                                                                <where
                                                                  label="WR1"
                                                                  expression="points[1].dim = 3">
                                                                </where>
                                                              </entity>

                                                              <entity
                                                                name="geometric_set_replica"
                                                                supertypes="geometric_set">
                                                                <explicit
                                                                  name="parent_set">
                                                                  <typename
                                                                    name="geometric_set"/>
                                                                </explicit>
                                                                <explicit
                                                                  name="transformation">
                                                                  <typename
                                                                    name="cartesian_transformation_operator"/>
                                                                </explicit>
                                                                <derived
                                                                  name="elements"
                                                                  expression="build_transformed_set(transformation, parent_set)">
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="geometric_set_select"/>
                                                                  <redeclaration
                                                                    entity-ref="geometric_set"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="acyclic_set_replica(SELF, parent_set)">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="half_space_2d"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="base_curve">
                                                                    <typename
                                                                      name="curve"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="agreement_flag">
                                                                    <builtintype
                                                                      type="BOOLEAN"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="half_space_solid"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="base_surface">
                                                                    <typename
                                                                      name="surface"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="agreement_flag">
                                                                    <builtintype
                                                                      type="BOOLEAN"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="manifold_solid_brep"
                                                                  supertypes="solid_model">
                                                                  <explicit
                                                                    name="outer">
                                                                    <typename
                                                                      name="closed_shell"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="polygonal_area"
                                                                  supertypes="primitive_2d">
                                                                  <explicit
                                                                    name="bounds">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="3"
                                                                      upper="?"
                                                                      unique="YES"/>
                                                                    <typename
                                                                      name="cartesian_point"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="primitive_2d"
                                                                  supertypes="geometric_representation_item">
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SELF\geometric_representation_item.dim = 2">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="rectangle_domain"
                                                                  supertypes="founded_item">
                                                                  <explicit
                                                                    name="corner">
                                                                    <typename
                                                                      name="cartesian_point"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="xlength">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="ylength">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SIZEOF(QUERY(item &lt;* USEDIN(SELF, '')| NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.RECTANGLED_HALF_SPACE' IN TYPEOF(item)))) = 0">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="rectangled_half_space"
                                                                  supertypes="half_space_2d">
                                                                  <explicit
                                                                    name="enclosure">
                                                                    <typename
                                                                      name="rectangle_domain"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="rectangular_area"
                                                                  supertypes="primitive_2d">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis2_placement_2d"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="x">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="y">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="rectangular_pyramid"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis2_placement_3d"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="xlength">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="ylength">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="height">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="revolved_area_solid"
                                                                  supertypes="swept_area_solid">
                                                                  <explicit
                                                                    name="axis">
                                                                    <typename
                                                                      name="axis1_placement"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="angle">
                                                                    <typename
                                                                      name="plane_angle_measure"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="axis_line"
                                                                    expression="representation_item('')|| geometric_representation_item()|| curve()|| line(axis.location, representation_item('')|| geometric_representation_item()|| vector(axis.z, 1.0))">
                                                                    <typename
                                                                      name="line"/>
                                                                  </derived>
                                                                </entity>

                                                                <entity
                                                                  name="revolved_face_solid"
                                                                  supertypes="swept_face_solid">
                                                                  <explicit
                                                                    name="axis">
                                                                    <typename
                                                                      name="axis1_placement"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="angle">
                                                                    <typename
                                                                      name="plane_angle_measure"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="axis_line"
                                                                    expression="representation_item('')|| geometric_representation_item()|| curve()|| line(axis.location, representation_item('')|| geometric_representation_item()|| vector(axis.z, 1.0))">
                                                                    <typename
                                                                      name="line"/>
                                                                  </derived>
                                                                </entity>

                                                                <entity
                                                                  name="right_angular_wedge"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis2_placement_3d"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="x">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="y">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="z">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="ltx">
                                                                    <typename
                                                                      name="length_measure"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="((0.0 &lt;= ltx) AND (ltx &lt; x))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="right_circular_cone"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis1_placement"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="height">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="radius">
                                                                    <typename
                                                                      name="length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="semi_angle">
                                                                    <typename
                                                                      name="plane_angle_measure"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="radius &gt;= 0.0">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="right_circular_cylinder"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis1_placement"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="height">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="radius">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="sectioned_spine"
                                                                  supertypes="geometric_curve_set">
                                                                  <explicit
                                                                    name="cross_sections">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="curve"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="spine_points">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="point"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SIZEOF(SELF\geometric_set.elements) = 1">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CURVE' IN TYPEOF(SELF\geometric_set.elements[1])">
                                                                  </where>
                                                                  <where
                                                                    label="WR3"
                                                                    expression="SIZEOF(cross_sections) = SIZEOF(spine_points)">
                                                                  </where>
                                                                  <where
                                                                    label="WR4"
                                                                    expression="SELF\geometric_representation_item.dim = 3">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="shell_based_surface_model"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="sbsm_boundary">
                                                                    <aggregate
                                                                      type="SET"
                                                                      lower="1"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="shell"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="constraints_geometry_shell_based_surface_model(SELF)">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="shell_based_wireframe_model"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="sbwm_boundary">
                                                                    <aggregate
                                                                      type="SET"
                                                                      lower="1"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="shell"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="constraints_geometry_shell_based_wireframe_model(SELF)">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="solid_model"
                                                                  super.expression="(ONEOF( csg_solid, manifold_solid_brep, swept_face_solid, swept_area_solid, swept_disk_solid, solid_replica, brep_2d, trimmed_volume))"
                                                                  supertypes="geometric_representation_item">
                                                                </entity>

                                                                <entity
                                                                  name="solid_replica"
                                                                  supertypes="solid_model">
                                                                  <explicit
                                                                    name="parent_solid">
                                                                    <typename
                                                                      name="solid_model"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="transformation">
                                                                    <typename
                                                                      name="cartesian_transformation_operator_3d"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="acyclic_solid_replica(SELF, parent_solid)">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="parent_solid\geometric_representation_item.dim = 3">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="sphere"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="radius">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="centre">
                                                                    <typename
                                                                      name="point"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="surface_curve_swept_area_solid"
                                                                  supertypes="swept_area_solid">
                                                                  <explicit
                                                                    name="directrix">
                                                                    <typename
                                                                      name="curve"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="start_param">
                                                                    <builtintype
                                                                      type="REAL"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="end_param">
                                                                    <builtintype
                                                                      type="REAL"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="reference_surface">
                                                                    <typename
                                                                      name="surface"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_CURVE' IN TYPEOF(directrix))) OR(reference_surface IN (directrix\surface_curve.basis_surface))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="surface_curve_swept_face_solid"
                                                                  supertypes="swept_face_solid">
                                                                  <explicit
                                                                    name="directrix">
                                                                    <typename
                                                                      name="curve"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="start_param">
                                                                    <builtintype
                                                                      type="REAL"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="end_param">
                                                                    <builtintype
                                                                      type="REAL"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="reference_surface">
                                                                    <typename
                                                                      name="surface"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_CURVE' IN TYPEOF(directrix))) OR(reference_surface IN (directrix\surface_curve.basis_surface))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="swept_area_solid"
                                                                  super.expression="(ONEOF(revolved_area_solid, extruded_area_solid, surface_curve_swept_area_solid))"
                                                                  supertypes="solid_model">
                                                                  <explicit
                                                                    name="swept_area">
                                                                    <typename
                                                                      name="curve_bounded_surface"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLANE' IN TYPEOF(swept_area.basis_surface)">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="swept_disk_solid"
                                                                  supertypes="solid_model">
                                                                  <explicit
                                                                    name="directrix">
                                                                    <typename
                                                                      name="curve"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="radius">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="inner_radius"
                                                                    optional="YES">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="start_param">
                                                                    <builtintype
                                                                      type="REAL"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="end_param">
                                                                    <builtintype
                                                                      type="REAL"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="directrix.dim = 3">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="(NOT EXISTS(inner_radius)) OR (radius &gt; inner_radius)">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="swept_face_solid"
                                                                  super.expression="(ONEOF(extruded_face_solid, revolved_face_solid, surface_curve_swept_face_solid))"
                                                                  supertypes="solid_model">
                                                                  <explicit
                                                                    name="swept_face">
                                                                    <typename
                                                                      name="face_surface"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLANE' IN TYPEOF(swept_face.face_geometry)">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="tetrahedron"
                                                                  supertypes="faceted_primitive">
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SIZEOF(points) = 4">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="above_plane(points[1], points[2], points[3], points[4]) &lt;&gt; 0.0">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="torus"
                                                                  supertypes="geometric_representation_item">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis1_placement"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="major_radius">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="minor_radius">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="major_radius &gt; minor_radius">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="trimmed_volume"
                                                                  supertypes="solid_model">
                                                                  <explicit
                                                                    name="basis_volume">
                                                                    <typename
                                                                      name="volume"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="u1">
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="u2">
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="v1">
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="v2">
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="w1">
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="w2">
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="u1 &lt;&gt; u2">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="v1 &lt;&gt; v2">
                                                                  </where>
                                                                  <where
                                                                    label="WR3"
                                                                    expression="w1 &lt;&gt; w2">
                                                                  </where>
                                                                </entity>

                                                                <function
                                                                  name="acyclic_set_replica">
                                                                  <parameter
                                                                    name="rep">
                                                                    <typename
                                                                      name="geometric_set_replica"/>
                                                                  </parameter>
                                                                  <parameter
                                                                    name="parent">
                                                                    <typename
                                                                      name="geometric_set"/>
                                                                  </parameter>
                                                                  <builtintype
                                                                    type="BOOLEAN"/>
                                                                  <algorithm>
IF NOT (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_SET_REPLICA') IN TYPEOF(parent))
THEN RETURN (TRUE);
END_IF;
IF (parent :=: rep) THEN
RETURN (FALSE);
ELSE RETURN(acyclic_set_replica(rep,
parent\geometric_set_replica.parent_set));
END_IF;
                                                                  </algorithm>
                                                                </function>

                                                                <function
                                                                  name="acyclic_solid_replica">
                                                                  <parameter
                                                                    name="rep">
                                                                    <typename
                                                                      name="solid_replica"/>
                                                                  </parameter>
                                                                  <parameter
                                                                    name="parent">
                                                                    <typename
                                                                      name="solid_model"/>
                                                                  </parameter>
                                                                  <builtintype
                                                                    type="BOOLEAN"/>
                                                                  <algorithm>
IF NOT (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SOLID_REPLICA') IN TYPEOF(parent)) THEN
RETURN (TRUE);
END_IF;
IF (parent :=: rep) THEN
RETURN (FALSE);
ELSE RETURN(acyclic_solid_replica(rep,
parent\solid_replica.parent_solid));
END_IF;
                                                                  </algorithm>
                                                                </function>

                                                                <function
                                                                  name="build_transformed_set">
                                                                  <parameter
                                                                    name="tr">
                                                                    <typename
                                                                      name="cartesian_transformation_operator"/>
                                                                  </parameter>
                                                                  <parameter
                                                                    name="gset">
                                                                    <typename
                                                                      name="geometric_set"/>
                                                                  </parameter>
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="0"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="geometric_set_select"/>
                                                                  <algorithm>
LOCAL
s : SET [1:?] OF geometric_set_select := gset.elements;
trset : SET [0:?] OF geometric_set_select := [];
END_LOCAL;
REPEAT j := 1 TO SIZEOF(s);
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CURVE' IN TYPEOF(s[j])) THEN
trset := trset + dummy_gri || curve() ||curve_replica(s[j],tr); ELSE
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POINT' IN TYPEOF(s[j])) THEN
trset := trset + dummy_gri || point() || point_replica(s[j],tr);
ELSE
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE' IN TYPEOF(s[j])) THEN
trset := trset + dummy_gri || surface() || surface_replica(s[j],
tr || cartesian_transformation_operator_3d (?));
END_IF;
END_IF;
END_IF;
END_REPEAT;
RETURN(trset);
                                                                  </algorithm>
                                                                </function>

                                                                <function
                                                                  name="constraints_geometry_shell_based_surface_model">
                                                                  <parameter
                                                                    name="m">
                                                                    <typename
                                                                      name="shell_based_surface_model"/>
                                                                  </parameter>
                                                                  <builtintype
                                                                    type="BOOLEAN"/>
                                                                  <algorithm>
LOCAL
result : BOOLEAN := TRUE;
END_LOCAL;
REPEAT j := 1 TO SIZEOF(m.sbsm_boundary);
IF (NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.OPEN_SHELL' IN
TYPEOF(m.sbsm_boundary[j])) AND
(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CLOSED_SHELL' IN
TYPEOF(m.sbsm_boundary[j]))))
THEN
result := FALSE;
RETURN(result);
END_IF;
END_REPEAT;
RETURN(result);
                                                                  </algorithm>
                                                                </function>

                                                                <function
                                                                  name="constraints_geometry_shell_based_wireframe_model">
                                                                  <parameter
                                                                    name="m">
                                                                    <typename
                                                                      name="shell_based_wireframe_model"/>
                                                                  </parameter>
                                                                  <builtintype
                                                                    type="BOOLEAN"/>
                                                                  <algorithm>
LOCAL
result : BOOLEAN := TRUE;
END_LOCAL;
REPEAT j := 1 TO SIZEOF(m.sbwm_boundary);
IF (NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.WIRE_SHELL' IN
TYPEOF(m.sbwm_boundary[j])) AND
(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VERTEX_SHELL' IN
TYPEOF(m.sbwm_boundary[j]))))
THEN
result := FALSE;
RETURN(result);
END_IF;
END_REPEAT;
RETURN(result);
                                                                  </algorithm>
                                                                </function>

                                                                <function
                                                                  name="msb_shells">
                                                                  <parameter
                                                                    name="brep">
                                                                    <typename
                                                                      name="manifold_solid_brep"/>
                                                                  </parameter>
                                                                  <aggregate
                                                                    type="SET"
                                                                    lower="1"
                                                                    upper="?"/>
                                                                  <typename
                                                                    name="closed_shell"/>
                                                                  <algorithm>
IF SIZEOF (QUERY (msbtype &lt;* TYPEOF (brep) |
msbtype LIKE '*BREP_WITH_VOIDS')) &gt;= 1 THEN
RETURN (brep\brep_with_voids.voids + brep.outer);
ELSE
RETURN([brep.outer]);
END_IF;
                                                                  </algorithm>
                                                                </function>

                                                                <type name="axis2_placement">
                                                                  <select
                                                                    selectitems="axis2_placement_2d axis2_placement_3d">
                                                                  </select>
                                                                </type>

                                                                <type name="b_spline_curve_form">
                                                                  <enumeration
                                                                    items="polyline_form circular_arc elliptic_arc parabolic_arc hyperbolic_arc unspecified">
                                                                  </enumeration>
                                                                </type>

                                                                <type name="b_spline_surface_form">
                                                                  <enumeration
                                                                    items="plane_surf cylindrical_surf conical_surf spherical_surf toroidal_surf surf_of_revolution ruled_surf generalised_cone quadric_surf surf_of_linear_extrusion unspecified">
                                                                  </enumeration>
                                                                </type>

                                                                <type name="curve_on_surface">
                                                                  <select
                                                                    selectitems="pcurve surface_curve composite_curve_on_surface">
                                                                  </select>
                                                                </type>

                                                                <type name="dimension_count">
                                                                  <builtintype
                                                                    type="INTEGER">
                                                                  </builtintype>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SELF &gt; 0">
                                                                  </where>
                                                                </type>

                                                                <type name="extent_enumeration">
                                                                  <enumeration
                                                                    items="invalid zero finite_non_zero infinite">
                                                                  </enumeration>
                                                                </type>

                                                                <type name="knot_type">
                                                                  <enumeration
                                                                    items="uniform_knots quasi_uniform_knots piecewise_bezier_knots unspecified">
                                                                  </enumeration>
                                                                </type>

                                                                <type name="pcurve_or_surface">
                                                                  <select
                                                                    selectitems="pcurve surface">
                                                                  </select>
                                                                </type>

                                                                <type name="preferred_surface_curve_representation">
                                                                  <enumeration
                                                                    items="curve_3d pcurve_s1 pcurve_s2">
                                                                  </enumeration>
                                                                </type>

                                                                <type name="surface_boundary">
                                                                  <select
                                                                    selectitems="boundary_curve degenerate_pcurve">
                                                                  </select>
                                                                </type>

                                                                <type name="transition_code">
                                                                  <enumeration
                                                                    items="discontinuous continuous cont_same_gradient cont_same_gradient_same_curvature">
                                                                  </enumeration>
                                                                </type>

                                                                <type name="trimming_preference">
                                                                  <enumeration
                                                                    items="cartesian parameter unspecified">
                                                                  </enumeration>
                                                                </type>

                                                                <type name="trimming_select">
                                                                  <select
                                                                    selectitems="cartesian_point parameter_value">
                                                                  </select>
                                                                </type>

                                                                <type name="vector_or_direction">
                                                                  <select
                                                                    selectitems="vector direction">
                                                                  </select>
                                                                </type>

                                                                <entity
                                                                  name="geometric_representation_context"
                                                                  supertypes="representation_context">
                                                                  <explicit
                                                                    name="coordinate_space_dimension">
                                                                    <typename
                                                                      name="dimension_count"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="axis1_placement"
                                                                  supertypes="placement">
                                                                  <explicit
                                                                    name="axis"
                                                                    optional="YES">
                                                                    <typename
                                                                      name="direction"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="z"
                                                                    expression="NVL(normalise(axis), dummy_gri || direction([0.0,0.0,1.0]))">
                                                                    <typename
                                                                      name="direction"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SELF\geometric_representation_item.dim = 3">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="axis2_placement_2d"
                                                                  supertypes="placement">
                                                                  <explicit
                                                                    name="ref_direction"
                                                                    optional="YES">
                                                                    <typename
                                                                      name="direction"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="p"
                                                                    expression="build_2axes(ref_direction)">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="2"/>
                                                                    <typename
                                                                      name="direction"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SELF\geometric_representation_item.dim = 2">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="axis2_placement_3d"
                                                                  supertypes="placement">
                                                                  <explicit
                                                                    name="axis"
                                                                    optional="YES">
                                                                    <typename
                                                                      name="direction"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="ref_direction"
                                                                    optional="YES">
                                                                    <typename
                                                                      name="direction"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="p"
                                                                    expression="build_axes(axis,ref_direction)">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="3"
                                                                      upper="3"/>
                                                                    <typename
                                                                      name="direction"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SELF\placement.location.dim = 3">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="(NOT (EXISTS (axis))) OR (axis.dim = 3)">
                                                                  </where>
                                                                  <where
                                                                    label="WR3"
                                                                    expression="(NOT (EXISTS (ref_direction))) OR (ref_direction.dim = 3)">
                                                                  </where>
                                                                  <where
                                                                    label="WR4"
                                                                    expression="(NOT (EXISTS (axis))) OR (NOT (EXISTS (ref_direction))) OR(cross_product(axis,ref_direction).magnitude &gt; 0.0)">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="b_spline_curve"
                                                                  super.expression="(ONEOF(uniform_curve, b_spline_curve_with_knots, quasi_uniform_curve, bezier_curve) ANDOR rational_b_spline_curve)"
                                                                  supertypes="bounded_curve">
                                                                  <explicit
                                                                    name="degree">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="control_points_list">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="cartesian_point"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="curve_form">
                                                                    <typename
                                                                      name="b_spline_curve_form"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="closed_curve">
                                                                    <builtintype
                                                                      type="LOGICAL"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="self_intersect">
                                                                    <builtintype
                                                                      type="LOGICAL"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="upper_index_on_control_points"
                                                                    expression="(SIZEOF(control_points_list) - 1)">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="control_points"
                                                                    expression="list_to_array(control_points_list,0, upper_index_on_control_points)">
                                                                    <aggregate
                                                                      type="ARRAY"
                                                                      lower="0"
                                                                      upper="upper_index_on_control_points"/>
                                                                    <typename
                                                                      name="cartesian_point"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.UNIFORM_CURVE' IN TYPEOF(self)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.QUASI_UNIFORM_CURVE' IN TYPEOF(self)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BEZIER_CURVE' IN TYPEOF(self)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.B_SPLINE_CURVE_WITH_KNOTS' IN TYPEOF(self))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="b_spline_curve_with_knots"
                                                                  supertypes="b_spline_curve">
                                                                  <explicit
                                                                    name="knot_multiplicities">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="knots">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="knot_spec">
                                                                    <typename
                                                                      name="knot_type"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="upper_index_on_knots"
                                                                    expression="SIZEOF(knots)">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="constraints_param_b_spline(degree, upper_index_on_knots, upper_index_on_control_points, knot_multiplicities, knots)">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="SIZEOF(knot_multiplicities) = upper_index_on_knots">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="b_spline_surface"
                                                                  super.expression="(ONEOF(b_spline_surface_with_knots, uniform_surface, quasi_uniform_surface, bezier_surface) ANDOR rational_b_spline_surface)"
                                                                  supertypes="bounded_surface">
                                                                  <explicit
                                                                    name="u_degree">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="v_degree">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="control_points_list">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="LIST"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="surface_form">
                                                                    <typename
                                                                      name="b_spline_surface_form"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="u_closed">
                                                                    <builtintype
                                                                      type="LOGICAL"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="v_closed">
                                                                    <builtintype
                                                                      type="LOGICAL"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="self_intersect">
                                                                    <builtintype
                                                                      type="LOGICAL"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="u_upper"
                                                                    expression="SIZEOF(control_points_list) - 1">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="v_upper"
                                                                    expression="SIZEOF(control_points_list[1]) - 1">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="control_points"
                                                                    expression="make_array_of_array(control_points_list,0,u_upper,0,v_upper)">
                                                                    <aggregate
                                                                      type="ARRAY"
                                                                      lower="0"
                                                                      upper="u_upper"/>
                                                                    <typename
                                                                      name="ARRAY"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.UNIFORM_SURFACE' IN TYPEOF(SELF)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.QUASI_UNIFORM_SURFACE' IN TYPEOF(SELF)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BEZIER_SURFACE' IN TYPEOF(SELF)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.B_SPLINE_SURFACE_WITH_KNOTS' IN TYPEOF(SELF))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="b_spline_surface_with_knots"
                                                                  supertypes="b_spline_surface">
                                                                  <explicit
                                                                    name="u_multiplicities">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="v_multiplicities">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="u_knots">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="v_knots">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="knot_spec">
                                                                    <typename
                                                                      name="knot_type"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="knot_u_upper"
                                                                    expression="SIZEOF(u_knots)">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="knot_v_upper"
                                                                    expression="SIZEOF(v_knots)">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="constraints_param_b_spline(SELF\b_spline_surface.u_degree, knot_u_upper, SELF\b_spline_surface.u_upper, u_multiplicities, u_knots)">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="constraints_param_b_spline(SELF\b_spline_surface.v_degree, knot_v_upper, SELF\b_spline_surface.v_upper, v_multiplicities, v_knots)">
                                                                  </where>
                                                                  <where
                                                                    label="WR3"
                                                                    expression="SIZEOF(u_multiplicities) = knot_u_upper">
                                                                  </where>
                                                                  <where
                                                                    label="WR4"
                                                                    expression="SIZEOF(v_multiplicities) = knot_v_upper">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="b_spline_volume"
                                                                  super.expression="(ONEOF(b_spline_volume_with_knots, uniform_volume, quasi_uniform_volume,bezier_volume) ANDOR rational_b_spline_volume)"
                                                                  supertypes="volume">
                                                                  <explicit
                                                                    name="u_degree">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="v_degree">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="w_degree">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="control_points_list">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="LIST"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="u_upper"
                                                                    expression="SIZEOF(control_points_list) - 1">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="v_upper"
                                                                    expression="SIZEOF(control_points_list[1]) - 1">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="w_upper"
                                                                    expression="SIZEOF(control_points_list[1][1]) - 1">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="control_points"
                                                                    expression="make_array_of_array_of_array (control_points_list,0,u_upper,0,v_upper,0,w_upper)">
                                                                    <aggregate
                                                                      type="ARRAY"
                                                                      lower="0"
                                                                      upper="u_upper"/>
                                                                    <typename
                                                                      name="ARRAY"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BEZIER_VOLUME' IN TYPEOF(SELF)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.UNIFORM_VOLUME' IN TYPEOF(SELF)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.QUASI_UNIFORM_VOLUME' IN TYPEOF(SELF)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.B_SPLINE_VOLUME_WITH_KNOTS' IN TYPEOF(SELF))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="b_spline_volume_with_knots"
                                                                  supertypes="b_spline_volume">
                                                                  <explicit
                                                                    name="u_multiplicities">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="v_multiplicities">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="w_multiplicities">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="u_knots">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="v_knots">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="w_knots">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="parameter_value"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="knot_u_upper"
                                                                    expression="SIZEOF(u_knots)">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="knot_v_upper"
                                                                    expression="SIZEOF(v_knots)">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="knot_w_upper"
                                                                    expression="SIZEOF(w_knots)">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="constraints_param_b_spline(SELF\b_spline_volume.u_degree, knot_u_upper, SELF\b_spline_volume.u_upper, u_multiplicities, u_knots)">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="constraints_param_b_spline(SELF\b_spline_volume.v_degree, knot_v_upper, SELF\b_spline_volume.v_upper, v_multiplicities, v_knots)">
                                                                  </where>
                                                                  <where
                                                                    label="WR3"
                                                                    expression="constraints_param_b_spline(SELF\b_spline_volume.w_degree, knot_w_upper, SELF\b_spline_volume.w_upper, w_multiplicities, w_knots)">
                                                                  </where>
                                                                  <where
                                                                    label="WR4"
                                                                    expression="SIZEOF(u_multiplicities) = knot_u_upper">
                                                                  </where>
                                                                  <where
                                                                    label="WR5"
                                                                    expression="SIZEOF(v_multiplicities) = knot_v_upper">
                                                                  </where>
                                                                  <where
                                                                    label="WR6"
                                                                    expression="SIZEOF(w_multiplicities) = knot_w_upper">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="bezier_curve"
                                                                  supertypes="b_spline_curve">
                                                                </entity>

                                                                <entity
                                                                  name="bezier_surface"
                                                                  supertypes="b_spline_surface">
                                                                </entity>

                                                                <entity
                                                                  name="bezier_volume"
                                                                  supertypes="b_spline_volume">
                                                                </entity>

                                                                <entity
                                                                  name="block_volume"
                                                                  supertypes="volume">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis2_placement_3d"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="x">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="y">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="z">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="boundary_curve"
                                                                  supertypes="composite_curve_on_surface">
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SELF\composite_curve.closed_curve">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="bounded_curve"
                                                                  super.expression="(ONEOF(polyline, b_spline_curve, trimmed_curve, bounded_pcurve, bounded_surface_curve, composite_curve))"
                                                                  supertypes="curve">
                                                                </entity>

                                                                <entity
                                                                  name="bounded_pcurve"
                                                                  supertypes="pcurve bounded_curve">
                                                                  <where
                                                                    label="WR1"
                                                                    expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BOUNDED_CURVE' IN TYPEOF(SELF\pcurve.reference_to_curve.items[1]))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="bounded_surface"
                                                                  super.expression="(ONEOF(b_spline_surface, rectangular_trimmed_surface, curve_bounded_surface, rectangular_composite_surface))"
                                                                  supertypes="surface">
                                                                </entity>

                                                                <entity
                                                                  name="bounded_surface_curve"
                                                                  supertypes="surface_curve bounded_curve">
                                                                  <where
                                                                    label="WR1"
                                                                    expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BOUNDED_CURVE' IN TYPEOF(SELF\surface_curve.curve_3d))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="cartesian_point"
                                                                  super.expression="(ONEOF(cylindrical_point, polar_point, spherical_point))"
                                                                  supertypes="point">
                                                                  <explicit
                                                                    name="coordinates">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="1"
                                                                      upper="3"/>
                                                                    <typename
                                                                      name="length_measure"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="cartesian_transformation_operator"
                                                                  super.expression="(ONEOF(cartesian_transformation_operator_2d, cartesian_transformation_operator_3d))"
                                                                  supertypes="geometric_representation_item functionally_defined_transformation">
                                                                  <explicit
                                                                    name="axis1"
                                                                    optional="YES">
                                                                    <typename
                                                                      name="direction"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="axis2"
                                                                    optional="YES">
                                                                    <typename
                                                                      name="direction"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="local_origin">
                                                                    <typename
                                                                      name="cartesian_point"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="scale"
                                                                    optional="YES">
                                                                    <builtintype
                                                                      type="REAL"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="scl"
                                                                    expression="NVL(scale, 1.0)">
                                                                    <builtintype
                                                                      type="REAL"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="scl &gt; 0.0">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="cartesian_transformation_operator_2d"
                                                                  supertypes="cartesian_transformation_operator">
                                                                  <derived
                                                                    name="u"
                                                                    expression="base_axis(2,SELF\cartesian_transformation_operator.axis1, SELF\cartesian_transformation_operator.axis2,?)">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="2"
                                                                      upper="2"/>
                                                                    <typename
                                                                      name="direction"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SELF\geometric_representation_item.dim = 2">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="cartesian_transformation_operator_3d"
                                                                  supertypes="cartesian_transformation_operator">
                                                                  <explicit
                                                                    name="axis3"
                                                                    optional="YES">
                                                                    <typename
                                                                      name="direction"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="u"
                                                                    expression="base_axis(3,SELF\cartesian_transformation_operator.axis1, SELF\cartesian_transformation_operator.axis2,axis3)">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="3"
                                                                      upper="3"/>
                                                                    <typename
                                                                      name="direction"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SELF\geometric_representation_item.dim = 3">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="circle"
                                                                  supertypes="conic">
                                                                  <explicit
                                                                    name="radius">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="circular_involute"
                                                                  supertypes="curve">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis2_placement"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="base_radius">
                                                                    <typename
                                                                      name="positive_length_measure"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="clothoid"
                                                                  supertypes="curve">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis2_placement"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="clothoid_constant">
                                                                    <typename
                                                                      name="length_measure"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="composite_curve"
                                                                  supertypes="bounded_curve">
                                                                  <explicit
                                                                    name="segments">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="1"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="composite_curve_segment"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="self_intersect">
                                                                    <builtintype
                                                                      type="LOGICAL"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="n_segments"
                                                                    expression="SIZEOF(segments)">
                                                                    <builtintype
                                                                      type="INTEGER"/>
                                                                  </derived>
                                                                  <derived
                                                                    name="closed_curve"
                                                                    expression="segments[n_segments].transition &lt;&gt; discontinuous">
                                                                    <builtintype
                                                                      type="LOGICAL"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="((NOT closed_curve) AND (SIZEOF(QUERY(temp &lt;* segments | temp.transition = discontinuous)) = 1)) OR((closed_curve) AND (SIZEOF(QUERY(temp &lt;* segments | temp.transition = discontinuous)) = 0))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="composite_curve_on_surface"
                                                                  super.expression="(boundary_curve)"
                                                                  supertypes="composite_curve">
                                                                  <derived
                                                                    name="basis_surface"
                                                                    expression="get_basis_surface(SELF)">
                                                                    <aggregate
                                                                      type="SET"
                                                                      lower="0"
                                                                      upper="2"/>
                                                                    <typename
                                                                      name="surface"/>
                                                                  </derived>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="SIZEOF(basis_surface) &gt; 0">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="constraints_composite_curve_on_surface(SELF)">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="composite_curve_segment"
                                                                  supertypes="founded_item">
                                                                  <explicit
                                                                    name="transition">
                                                                    <typename
                                                                      name="transition_code"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="same_sense">
                                                                    <builtintype
                                                                      type="BOOLEAN"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="parent_curve">
                                                                    <typename
                                                                      name="curve"/>
                                                                  </explicit>
                                                                  <inverse
                                                                    name="using_curves"
                                                                    entity="composite_curve"
                                                                    attribute="segments">
                                                                    <inverse.aggregate
                                                                      type="BAG"
                                                                      lower="1"
                                                                      upper="?"/>
                                                                  </inverse>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BOUNDED_CURVE' IN TYPEOF(parent_curve))">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="conic"
                                                                  super.expression="(ONEOF(circle, ellipse, hyperbola, parabola))"
                                                                  supertypes="curve">
                                                                  <explicit
                                                                    name="position">
                                                                    <typename
                                                                      name="axis2_placement"/>
                                                                  </explicit>
                                                                </entity>

                                                                <entity
                                                                  name="conical_surface"
                                                                  supertypes="elementary_surface">
                                                                  <explicit
                                                                    name="radius">
                                                                    <typename
                                                                      name="length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="semi_angle">
                                                                    <typename
                                                                      name="plane_angle_measure"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="radius &gt;= 0.0">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="curve"
                                                                  super.expression="(ONEOF(line, conic, clothoid, circular_involute, pcurve, surface_curve, offset_curve_2d, offset_curve_3d, curve_replica))"
                                                                  supertypes="geometric_representation_item">
                                                                </entity>

                                                                <entity
                                                                  name="curve_bounded_surface"
                                                                  supertypes="bounded_surface">
                                                                  <explicit
                                                                    name="basis_surface">
                                                                    <typename
                                                                      name="surface"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="boundaries">
                                                                    <aggregate
                                                                      type="SET"
                                                                      lower="1"
                                                                      upper="?"/>
                                                                    <typename
                                                                      name="boundary_curve"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="implicit_outer">
                                                                    <builtintype
                                                                      type="BOOLEAN"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="(NOT implicit_outer) OR(SIZEOF (QUERY (temp &lt;* boundaries |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.OUTER_BOUNDARY_CURVE' IN TYPEOF(temp))) = 0)">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="(NOT(implicit_outer)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.BOUNDED_SURFACE' IN TYPEOF(basis_surface))">
                                                                  </where>
                                                                  <where
                                                                    label="WR3"
                                                                    expression="SIZEOF(QUERY(temp &lt;* boundaries |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.OUTER_BOUNDARY_CURVE' IN TYPEOF(temp))) &lt;= 1">
                                                                  </where>
                                                                  <where
                                                                    label="WR4"
                                                                    expression="SIZEOF(QUERY(temp &lt;* boundaries |(temp\composite_curve_on_surface.basis_surface [1] &lt;&gt; SELF.basis_surface))) = 0">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="curve_replica"
                                                                  supertypes="curve">
                                                                  <explicit
                                                                    name="parent_curve">
                                                                    <typename
                                                                      name="curve"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="transformation">
                                                                    <typename
                                                                      name="cartesian_transformation_operator"/>
                                                                  </explicit>
                                                                  <where
                                                                    label="WR1"
                                                                    expression="transformation.dim = parent_curve.dim">
                                                                  </where>
                                                                  <where
                                                                    label="WR2"
                                                                    expression="acyclic_curve_replica (SELF, parent_curve)">
                                                                  </where>
                                                                </entity>

                                                                <entity
                                                                  name="cylindrical_point"
                                                                  supertypes="cartesian_point">
                                                                  <explicit
                                                                    name="r">
                                                                    <typename
                                                                      name="length_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="theta">
                                                                    <typename
                                                                      name="plane_angle_measure"/>
                                                                  </explicit>
                                                                  <explicit
                                                                    name="z">
                                                                    <typename
                                                                      name="length_measure"/>
                                                                  </explicit>
                                                                  <derived
                                                                    name="coordinates"
                                                                    expression="[r*cos(theta), r*sin(theta), z]">
                                                                    <aggregate
                                                                      type="LIST"
                                                                      lower="1"
                                                                      upper="3"/>
                                                                    <typename
                                                                      name="length_measure"/>
                                                                    <redeclaration
                                                                      entity-ref="cartesian_point"/>
                                                                    </derived>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="r &gt;= 0.0">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="cylindrical_surface"
                                                                    supertypes="elementary_surface">
                                                                    <explicit
                                                                      name="radius">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="cylindrical_volume"
                                                                    supertypes="volume">
                                                                    <explicit
                                                                      name="position">
                                                                      <typename
                                                                        name="axis2_placement_3d"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="radius">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="height">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="degenerate_pcurve"
                                                                    supertypes="point">
                                                                    <explicit
                                                                      name="basis_surface">
                                                                      <typename
                                                                        name="surface"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="reference_to_curve">
                                                                      <typename
                                                                        name="definitional_representation"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="SIZEOF(reference_to_curve\representation.items) = 1">
                                                                    </where>
                                                                    <where
                                                                      label="WR2"
                                                                      expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CURVE' IN TYPEOF(reference_to_curve\representation.items[1])">
                                                                    </where>
                                                                    <where
                                                                      label="WR3"
                                                                      expression="reference_to_curve\representation. items[1]\geometric_representation_item.dim =2">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="degenerate_toroidal_surface"
                                                                    supertypes="toroidal_surface">
                                                                    <explicit
                                                                      name="select_outer">
                                                                      <builtintype
                                                                        type="BOOLEAN"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="major_radius &lt; minor_radius">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="direction"
                                                                    supertypes="geometric_representation_item">
                                                                    <explicit
                                                                      name="direction_ratios">
                                                                      <aggregate
                                                                        type="LIST"
                                                                        lower="2"
                                                                        upper="3"/>
                                                                      <builtintype
                                                                        type="REAL"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="SIZEOF(QUERY(tmp &lt;* direction_ratios | tmp &lt;&gt; 0.0)) &gt; 0">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="dupin_cyclide_surface"
                                                                    supertypes="elementary_surface">
                                                                    <explicit
                                                                      name="generalised_major_radius">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="generalised_minor_radius">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="skewness">
                                                                      <typename
                                                                        name="length_measure"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="skewness &gt;= 0.0">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="eccentric_conical_volume"
                                                                    supertypes="volume">
                                                                    <explicit
                                                                      name="position">
                                                                      <typename
                                                                        name="axis2_placement_3d"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="semi_axis_1">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="semi_axis_2">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="height">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="x_offset">
                                                                      <typename
                                                                        name="length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="y_offset">
                                                                      <typename
                                                                        name="length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="ratio">
                                                                      <builtintype
                                                                        type="REAL"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="ratio &gt;= 0.0">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="elementary_surface"
                                                                    super.expression="(ONEOF(plane, cylindrical_surface, conical_surface, spherical_surface, toroidal_surface))"
                                                                    supertypes="surface">
                                                                    <explicit
                                                                      name="position">
                                                                      <typename
                                                                        name="axis2_placement_3d"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="ellipse"
                                                                    supertypes="conic">
                                                                    <explicit
                                                                      name="semi_axis_1">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="semi_axis_2">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="ellipsoid_volume"
                                                                    supertypes="volume">
                                                                    <explicit
                                                                      name="position">
                                                                      <typename
                                                                        name="axis2_placement_3d"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="semi_axis_1">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="semi_axis_2">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="semi_axis_3">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="evaluated_degenerate_pcurve"
                                                                    supertypes="degenerate_pcurve">
                                                                    <explicit
                                                                      name="equivalent_point">
                                                                      <typename
                                                                        name="cartesian_point"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="fixed_reference_swept_surface"
                                                                    supertypes="swept_surface">
                                                                    <explicit
                                                                      name="directrix">
                                                                      <typename
                                                                        name="curve"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="fixed_reference">
                                                                      <typename
                                                                        name="direction"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="geometric_representation_item"
                                                                    super.expression="(ONEOF(point, direction, vector, placement, cartesian_transformation_operator, curve, surface, edge_curve, face_surface, poly_loop, vertex_point, solid_model, boolean_result, sphere, right_circular_cone, right_circular_cylinder, torus, block, primitive_2d, right_angular_wedge, ellipsoid, faceted_primitive, rectangular_pyramid, cyclide_segment_solid, volume, half_space_solid, half_space_2d, shell_based_surface_model, face_based_surface_model, shell_based_wireframe_model, edge_based_wireframe_model, geometric_set))"
                                                                    supertypes="representation_item">
                                                                    <derived
                                                                      name="dim"
                                                                      expression="dimension_of(SELF)">
                                                                      <typename
                                                                        name="dimension_count"/>
                                                                    </derived>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="SIZEOF (QUERY (using_rep &lt;* using_representations (SELF) | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_REPRESENTATION_CONTEXT' IN TYPEOF (using_rep.context_of_items)))) = 0">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="line"
                                                                    supertypes="curve">
                                                                    <explicit
                                                                      name="pnt">
                                                                      <typename
                                                                        name="cartesian_point"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="dir">
                                                                      <typename
                                                                        name="vector"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="dir.dim = pnt.dim">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="hexahedron_volume"
                                                                    supertypes="volume">
                                                                    <explicit
                                                                      name="points">
                                                                      <aggregate
                                                                        type="LIST"
                                                                        lower="8"
                                                                        upper="8"/>
                                                                      <typename
                                                                        name="cartesian_point"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="above_plane(points[1], points[2], points[3], points[4]) = 0.0">
                                                                    </where>
                                                                    <where
                                                                      label="WR2"
                                                                      expression="above_plane(points[5], points[8], points[7], points[6]) = 0.0">
                                                                    </where>
                                                                    <where
                                                                      label="WR3"
                                                                      expression="above_plane(points[1], points[4], points[8], points[5]) = 0.0">
                                                                    </where>
                                                                    <where
                                                                      label="WR4"
                                                                      expression="above_plane(points[4], points[3], points[7], points[8]) = 0.0">
                                                                    </where>
                                                                    <where
                                                                      label="WR5"
                                                                      expression="above_plane(points[3], points[2], points[6], points[7]) = 0.0">
                                                                    </where>
                                                                    <where
                                                                      label="WR6"
                                                                      expression="above_plane(points[1], points[5], points[6], points[2]) = 0.0">
                                                                    </where>
                                                                    <where
                                                                      label="WR7"
                                                                      expression="same_side([points[1], points[2], points[3]],[points[5], points[6], points[7], points[8]])">
                                                                    </where>
                                                                    <where
                                                                      label="WR8"
                                                                      expression="same_side([points[1], points[4], points[8]],[points[3], points[7], points[6], points[2]])">
                                                                    </where>
                                                                    <where
                                                                      label="WR9"
                                                                      expression="same_side([points[1], points[2], points[5]],[points[3], points[7], points[8], points[4]])">
                                                                    </where>
                                                                    <where
                                                                      label="WR10"
                                                                      expression="same_side([points[5], points[6], points[7]],[points[1], points[2], points[3], points[4]])">
                                                                    </where>
                                                                    <where
                                                                      label="WR11"
                                                                      expression="same_side([points[3], points[7], points[6]],[points[1], points[4], points[8], points[5]])">
                                                                    </where>
                                                                    <where
                                                                      label="WR12"
                                                                      expression="same_side([points[3], points[7], points[8]],[points[1], points[5], points[6], points[2]])">
                                                                    </where>
                                                                    <where
                                                                      label="WR13"
                                                                      expression="points[1].dim = 3">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="hyperbola"
                                                                    supertypes="conic">
                                                                    <explicit
                                                                      name="semi_axis">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="semi_imag_axis">
                                                                      <typename
                                                                        name="positive_length_measure"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="intersection_curve"
                                                                    supertypes="surface_curve">
                                                                    <where
                                                                      label="WR1"
                                                                      expression="SIZEOF(SELF\surface_curve.associated_geometry) = 2">
                                                                    </where>
                                                                    <where
                                                                      label="WR2"
                                                                      expression="associated_surface(SELF\surface_curve.associated_geometry[1]) &lt;&gt; associated_surface(SELF\surface_curve.associated_geometry[2])">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="offset_curve_2d"
                                                                    supertypes="curve">
                                                                    <explicit
                                                                      name="basis_curve">
                                                                      <typename
                                                                        name="curve"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="distance">
                                                                      <typename
                                                                        name="length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="self_intersect">
                                                                      <builtintype
                                                                        type="LOGICAL"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="basis_curve.dim = 2">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="offset_curve_3d"
                                                                    supertypes="curve">
                                                                    <explicit
                                                                      name="basis_curve">
                                                                      <typename
                                                                        name="curve"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="distance">
                                                                      <typename
                                                                        name="length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="self_intersect">
                                                                      <builtintype
                                                                        type="LOGICAL"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="ref_direction">
                                                                      <typename
                                                                        name="direction"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="(basis_curve.dim = 3) AND (ref_direction.dim = 3)">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="offset_surface"
                                                                    supertypes="surface">
                                                                    <explicit
                                                                      name="basis_surface">
                                                                      <typename
                                                                        name="surface"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="distance">
                                                                      <typename
                                                                        name="length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="self_intersect">
                                                                      <builtintype
                                                                        type="LOGICAL"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="oriented_surface"
                                                                    supertypes="surface">
                                                                    <explicit
                                                                      name="orientation">
                                                                      <builtintype
                                                                        type="BOOLEAN"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="outer_boundary_curve"
                                                                    supertypes="boundary_curve">
                                                                  </entity>

                                                                  <entity
                                                                    name="parabola"
                                                                    supertypes="conic">
                                                                    <explicit
                                                                      name="focal_dist">
                                                                      <typename
                                                                        name="length_measure"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="focal_dist &lt;&gt; 0.0">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="pcurve"
                                                                    supertypes="curve">
                                                                    <explicit
                                                                      name="basis_surface">
                                                                      <typename
                                                                        name="surface"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="reference_to_curve">
                                                                      <typename
                                                                        name="definitional_representation"/>
                                                                    </explicit>
                                                                    <where
                                                                      label="WR1"
                                                                      expression="SIZEOF(reference_to_curve\representation.items) = 1">
                                                                    </where>
                                                                    <where
                                                                      label="WR2"
                                                                      expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CURVE' IN TYPEOF(reference_to_curve\representation.items[1])">
                                                                    </where>
                                                                    <where
                                                                      label="WR3"
                                                                      expression="reference_to_curve\representation.items[1]\ geometric_representation_item.dim =2">
                                                                    </where>
                                                                  </entity>

                                                                  <entity
                                                                    name="placement"
                                                                    super.expression="(ONEOF(axis1_placement,axis2_placement_2d,axis2_placement_3d))"
                                                                    supertypes="geometric_representation_item">
                                                                    <explicit
                                                                      name="location">
                                                                      <typename
                                                                        name="cartesian_point"/>
                                                                    </explicit>
                                                                  </entity>

                                                                  <entity
                                                                    name="plane"
                                                                    supertypes="elementary_surface">
                                                                  </entity>

                                                                  <entity
                                                                    name="polar_point"
                                                                    supertypes="cartesian_point">
                                                                    <explicit
                                                                      name="r">
                                                                      <typename
                                                                        name="length_measure"/>
                                                                    </explicit>
                                                                    <explicit
                                                                      name="theta">
                                                                      <typename
                                                                        name="plane_angle_measure"/>
                                                                    </explicit>
                                                                    <derived
                                                                      name="coordinates"
                                                                      expression="[r*cos(theta), r*sin(theta)]">
                                                                      <aggregate
                                                                        type="LIST"
                                                                        lower="1"
                                                                        upper="3"/>
                                                                      <typename
                                                                        name="length_measure"/>
                                                                      <redeclaration
                                                                        entity-ref="cartesian_point"/>
                                                                      </derived>
                                                                      <where
                                                                        label="WR1"
                                                                        expression="r &gt;= 0.0">
                                                                      </where>
                                                                    </entity>

                                                                    <entity
                                                                      name="point"
                                                                      super.expression="(ONEOF(cartesian_point, point_on_curve, point_on_surface, point_in_volume, point_replica, degenerate_pcurve))"
                                                                      supertypes="geometric_representation_item">
                                                                    </entity>

                                                                    <entity
                                                                      name="point_in_volume"
                                                                      supertypes="point">
                                                                      <explicit
                                                                        name="basis_volume">
                                                                        <typename
                                                                          name="volume"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="point_parameter_u">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="point_parameter_v">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="point_parameter_w">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                    </entity>

                                                                    <entity
                                                                      name="point_on_curve"
                                                                      supertypes="point">
                                                                      <explicit
                                                                        name="basis_curve">
                                                                        <typename
                                                                          name="curve"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="point_parameter">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                    </entity>

                                                                    <entity
                                                                      name="point_on_surface"
                                                                      supertypes="point">
                                                                      <explicit
                                                                        name="basis_surface">
                                                                        <typename
                                                                          name="surface"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="point_parameter_u">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="point_parameter_v">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                    </entity>

                                                                    <entity
                                                                      name="point_replica"
                                                                      supertypes="point">
                                                                      <explicit
                                                                        name="parent_pt">
                                                                        <typename
                                                                          name="point"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="transformation">
                                                                        <typename
                                                                          name="cartesian_transformation_operator"/>
                                                                      </explicit>
                                                                      <where
                                                                        label="WR1"
                                                                        expression="transformation.dim = parent_pt.dim">
                                                                      </where>
                                                                      <where
                                                                        label="WR2"
                                                                        expression="acyclic_point_replica (SELF,parent_pt)">
                                                                      </where>
                                                                    </entity>

                                                                    <entity
                                                                      name="polyline"
                                                                      supertypes="bounded_curve">
                                                                      <explicit
                                                                        name="points">
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="2"
                                                                          upper="?"/>
                                                                        <typename
                                                                          name="cartesian_point"/>
                                                                      </explicit>
                                                                    </entity>

                                                                    <entity
                                                                      name="pyramid_volume"
                                                                      supertypes="volume">
                                                                      <explicit
                                                                        name="position">
                                                                        <typename
                                                                          name="axis2_placement_3d"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="xlength">
                                                                        <typename
                                                                          name="positive_length_measure"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="ylength">
                                                                        <typename
                                                                          name="positive_length_measure"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="height">
                                                                        <typename
                                                                          name="positive_length_measure"/>
                                                                      </explicit>
                                                                    </entity>

                                                                    <entity
                                                                      name="quasi_uniform_curve"
                                                                      supertypes="b_spline_curve">
                                                                    </entity>

                                                                    <entity
                                                                      name="quasi_uniform_surface"
                                                                      supertypes="b_spline_surface">
                                                                    </entity>

                                                                    <entity
                                                                      name="quasi_uniform_volume"
                                                                      supertypes="b_spline_volume">
                                                                    </entity>

                                                                    <entity
                                                                      name="rational_b_spline_curve"
                                                                      supertypes="b_spline_curve">
                                                                      <explicit
                                                                        name="weights_data">
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="2"
                                                                          upper="?"/>
                                                                        <builtintype
                                                                          type="REAL"/>
                                                                      </explicit>
                                                                      <derived
                                                                        name="weights"
                                                                        expression="list_to_array(weights_data,0, upper_index_on_control_points)">
                                                                        <aggregate
                                                                          type="ARRAY"
                                                                          lower="0"
                                                                          upper="upper_index_on_control_points"/>
                                                                        <builtintype
                                                                          type="REAL"/>
                                                                      </derived>
                                                                      <where
                                                                        label="WR1"
                                                                        expression="SIZEOF(weights_data) = SIZEOF(SELF\b_spline_curve. control_points_list)">
                                                                      </where>
                                                                      <where
                                                                        label="WR2"
                                                                        expression="curve_weights_positive(SELF)">
                                                                      </where>
                                                                    </entity>

                                                                    <entity
                                                                      name="rational_b_spline_surface"
                                                                      supertypes="b_spline_surface">
                                                                      <explicit
                                                                        name="weights_data">
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="2"
                                                                          upper="?"/>
                                                                        <builtintype
                                                                          type="REAL"
                                                                          typelabel="? ] OF REAL"/>
                                                                      </explicit>
                                                                      <derived
                                                                        name="weights"
                                                                        expression="make_array_of_array(weights_data,0,u_upper,0,v_upper)">
                                                                        <aggregate
                                                                          type="ARRAY"
                                                                          lower="0"
                                                                          upper="u_upper"/>
                                                                        <builtintype
                                                                          type="REAL"
                                                                          typelabel="v_upper ] OF REAL"/>
                                                                      </derived>
                                                                      <where
                                                                        label="WR1"
                                                                        expression="(SIZEOF(weights_data) = SIZEOF(SELF\b_spline_surface.control_points_list)) AND (SIZEOF(weights_data[1]) = SIZEOF(SELF\b_spline_surface.control_points_list[1]))">
                                                                      </where>
                                                                      <where
                                                                        label="WR2"
                                                                        expression="surface_weights_positive(SELF)">
                                                                      </where>
                                                                    </entity>

                                                                    <entity
                                                                      name="rational_b_spline_volume"
                                                                      supertypes="b_spline_volume">
                                                                      <explicit
                                                                        name="weights_data">
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="2"
                                                                          upper="?"/>
                                                                        <builtintype
                                                                          type="REAL"
                                                                          typelabel="? ] OF LIST [ 2 : ? ] OF REAL"/>
                                                                      </explicit>
                                                                      <derived
                                                                        name="weights"
                                                                        expression="make_array_of_array_of_array(weights_data,0,u_upper,0,v_upper,0,w_upper)">
                                                                        <aggregate
                                                                          type="ARRAY"
                                                                          lower="0"
                                                                          upper="u_upper"/>
                                                                        <builtintype
                                                                          type="REAL"
                                                                          typelabel="v_upper ] OF ARRAY [ 0 : w_upper ] OF REAL"/>
                                                                      </derived>
                                                                      <where
                                                                        label="WR1"
                                                                        expression="(SIZEOF(weights_data) = SIZEOF(SELF\b_spline_volume.control_points_list)) AND (SIZEOF(weights_data[1]) = SIZEOF(SELF\b_spline_volume.control_points_list[1])) AND (SIZEOF(weights_data[1][1]) = SIZEOF(SELF\b_spline_volume.control_points_list[1][1]))">
                                                                      </where>
                                                                      <where
                                                                        label="WR2"
                                                                        expression="volume_weights_positive(SELF)">
                                                                      </where>
                                                                    </entity>

                                                                    <entity
                                                                      name="rectangular_composite_surface"
                                                                      supertypes="bounded_surface">
                                                                      <explicit
                                                                        name="segments">
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="1"
                                                                          upper="?"/>
                                                                        <typename
                                                                          name="LIST"/>
                                                                      </explicit>
                                                                      <derived
                                                                        name="n_u"
                                                                        expression="SIZEOF(segments)">
                                                                        <builtintype
                                                                          type="INTEGER"/>
                                                                      </derived>
                                                                      <derived
                                                                        name="n_v"
                                                                        expression="SIZEOF(segments[1])">
                                                                        <builtintype
                                                                          type="INTEGER"/>
                                                                      </derived>
                                                                      <where
                                                                        label="WR1"
                                                                        expression="SIZEOF(QUERY (s &lt;* segments | n_v &lt;&gt; SIZEOF (s))) = 0">
                                                                      </where>
                                                                      <where
                                                                        label="WR2"
                                                                        expression="constraints_rectangular_composite_surface(SELF)">
                                                                      </where>
                                                                    </entity>

                                                                    <entity
                                                                      name="rectangular_trimmed_surface"
                                                                      supertypes="bounded_surface">
                                                                      <explicit
                                                                        name="basis_surface">
                                                                        <typename
                                                                          name="surface"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="u1">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="u2">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="v1">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="v2">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="usense">
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="vsense">
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                      </explicit>
                                                                      <where
                                                                        label="WR1"
                                                                        expression="u1 &lt;&gt; u2">
                                                                      </where>
                                                                      <where
                                                                        label="WR2"
                                                                        expression="v1 &lt;&gt; v2">
                                                                      </where>
                                                                      <where
                                                                        label="WR3"
                                                                        expression="(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ELEMENTARY_SURFACE' IN TYPEOF(basis_surface)) AND (NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLANE' IN TYPEOF(basis_surface)))) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_OF_REVOLUTION' IN TYPEOF(basis_surface)) OR (usense = (u2 &gt; u1))">
                                                                      </where>
                                                                      <where
                                                                        label="WR4"
                                                                        expression="(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPHERICAL_SURFACE' IN TYPEOF(basis_surface)) OR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TOROIDAL_SURFACE' IN TYPEOF(basis_surface))) OR (vsense = (v2 &gt; v1))">
                                                                      </where>
                                                                    </entity>

                                                                    <entity
                                                                      name="reparametrised_composite_curve_segment"
                                                                      supertypes="composite_curve_segment">
                                                                      <explicit
                                                                        name="param_length">
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                      </explicit>
                                                                      <where
                                                                        label="WR1"
                                                                        expression="param_length &gt; 0.0">
                                                                      </where>
                                                                    </entity>

                                                                    <entity
                                                                      name="seam_curve"
                                                                      supertypes="surface_curve">
                                                                      <where
                                                                        label="WR1"
                                                                        expression="SIZEOF(SELF\surface_curve.associated_geometry) = 2">
                                                                      </where>
                                                                      <where
                                                                        label="WR2"
                                                                        expression="associated_surface(SELF\surface_curve.associated_geometry[1]) = associated_surface(SELF\surface_curve.associated_geometry[2])">
                                                                      </where>
                                                                      <where
                                                                        label="WR3"
                                                                        expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF(SELF\surface_curve.associated_geometry[1])">
                                                                      </where>
                                                                      <where
                                                                        label="WR4"
                                                                        expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF(SELF\surface_curve.associated_geometry[2])">
                                                                      </where>
                                                                    </entity>

                                                                    <entity
                                                                      name="spherical_point"
                                                                      supertypes="cartesian_point">
                                                                      <explicit
                                                                        name="r">
                                                                        <typename
                                                                          name="length_measure"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="theta">
                                                                        <typename
                                                                          name="plane_angle_measure"/>
                                                                      </explicit>
                                                                      <explicit
                                                                        name="phi">
                                                                        <typename
                                                                          name="plane_angle_measure"/>
                                                                      </explicit>
                                                                      <derived
                                                                        name="coordinates"
                                                                        expression="[r*sin(theta)*cos(phi), r*sin(theta)*sin(phi), r*cos(theta)]">
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="1"
                                                                          upper="3"/>
                                                                        <typename
                                                                          name="length_measure"/>
                                                                        <redeclaration
                                                                          entity-ref="cartesian_point"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="r &gt;= 0.0">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="spherical_surface"
                                                                        supertypes="elementary_surface">
                                                                        <explicit
                                                                          name="radius">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="spherical_volume"
                                                                        supertypes="volume">
                                                                        <explicit
                                                                          name="position">
                                                                          <typename
                                                                            name="axis2_placement_3d"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="radius">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="surface"
                                                                        super.expression="(ONEOF(elementary_surface, swept_surface, bounded_surface, offset_surface, surface_replica))"
                                                                        supertypes="geometric_representation_item">
                                                                      </entity>

                                                                      <entity
                                                                        name="surface_curve"
                                                                        super.expression="(ONEOF(intersection_curve, seam_curve) ANDOR bounded_surface_curve)"
                                                                        supertypes="curve">
                                                                        <explicit
                                                                          name="curve_3d">
                                                                          <typename
                                                                            name="curve"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="associated_geometry">
                                                                          <aggregate
                                                                            type="LIST"
                                                                            lower="1"
                                                                            upper="2"/>
                                                                          <typename
                                                                            name="pcurve_or_surface"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="master_representation">
                                                                          <typename
                                                                            name="preferred_surface_curve_representation"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="basis_surface"
                                                                          expression="get_basis_surface(SELF)">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="2"/>
                                                                          <typename
                                                                            name="surface"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="curve_3d.dim = 3">
                                                                        </where>
                                                                        <where
                                                                          label="WR2"
                                                                          expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF(associated_geometry[1])) OR(master_representation &lt;&gt; pcurve_s1)">
                                                                        </where>
                                                                        <where
                                                                          label="WR3"
                                                                          expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF(associated_geometry[2])) OR(master_representation &lt;&gt; pcurve_s2)">
                                                                        </where>
                                                                        <where
                                                                          label="WR4"
                                                                          expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF(curve_3d))">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="surface_curve_swept_surface"
                                                                        supertypes="swept_surface">
                                                                        <explicit
                                                                          name="directrix">
                                                                          <typename
                                                                            name="curve"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="reference_surface">
                                                                          <typename
                                                                            name="surface"/>
                                                                        </explicit>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_CURVE' IN TYPEOF(directrix))) OR(reference_surface IN (directrix\surface_curve.basis_surface))">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="surface_of_linear_extrusion"
                                                                        supertypes="swept_surface">
                                                                        <explicit
                                                                          name="extrusion_axis">
                                                                          <typename
                                                                            name="vector"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="surface_of_revolution"
                                                                        supertypes="swept_surface">
                                                                        <explicit
                                                                          name="axis_position">
                                                                          <typename
                                                                            name="axis1_placement"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="axis_line"
                                                                          expression="representation_item('')|| geometric_representation_item()|| curve()|| line(axis_position.location, representation_item('')|| geometric_representation_item()|| vector(axis_position.z, 1.0))">
                                                                          <typename
                                                                            name="line"/>
                                                                        </derived>
                                                                      </entity>

                                                                      <entity
                                                                        name="surface_patch"
                                                                        supertypes="founded_item">
                                                                        <explicit
                                                                          name="parent_surface">
                                                                          <typename
                                                                            name="bounded_surface"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="u_transition">
                                                                          <typename
                                                                            name="transition_code"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="v_transition">
                                                                          <typename
                                                                            name="transition_code"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="u_sense">
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="v_sense">
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                        </explicit>
                                                                        <inverse
                                                                          name="using_surfaces"
                                                                          entity="rectangular_composite_surface"
                                                                          attribute="segments">
                                                                          <inverse.aggregate
                                                                            type="BAG"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                        </inverse>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CURVE_BOUNDED_SURFACE' IN TYPEOF(parent_surface)))">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="surface_replica"
                                                                        supertypes="surface">
                                                                        <explicit
                                                                          name="parent_surface">
                                                                          <typename
                                                                            name="surface"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="transformation">
                                                                          <typename
                                                                            name="cartesian_transformation_operator_3d"/>
                                                                        </explicit>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="acyclic_surface_replica(SELF, parent_surface)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="swept_surface"
                                                                        super.expression="(ONEOF(surface_of_linear_extrusion, surface_of_revolution, surface_curve_swept_surface, fixed_reference_swept_surface))"
                                                                        supertypes="surface">
                                                                        <explicit
                                                                          name="swept_curve">
                                                                          <typename
                                                                            name="curve"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="tetrahedron_volume"
                                                                        supertypes="volume">
                                                                        <explicit
                                                                          name="point_1">
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="point_2">
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="point_3">
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="point_4">
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </explicit>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="point_1.dim = 3">
                                                                        </where>
                                                                        <where
                                                                          label="WR2"
                                                                          expression="above_plane(point_1, point_2, point_3, point_4) &lt;&gt; 0.0">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="toroidal_volume"
                                                                        supertypes="volume">
                                                                        <explicit
                                                                          name="position">
                                                                          <typename
                                                                            name="axis2_placement_3d"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="major_radius">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="minor_radius">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </explicit>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="minor_radius &lt; major_radius">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="trimmed_curve"
                                                                        supertypes="bounded_curve">
                                                                        <explicit
                                                                          name="basis_curve">
                                                                          <typename
                                                                            name="curve"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="trim_1">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="2"/>
                                                                          <typename
                                                                            name="trimming_select"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="trim_2">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="2"/>
                                                                          <typename
                                                                            name="trimming_select"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="sense_agreement">
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="master_representation">
                                                                          <typename
                                                                            name="trimming_preference"/>
                                                                        </explicit>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(HIINDEX(trim_1) = 1) OR (TYPEOF(trim_1[1]) &lt;&gt; TYPEOF(trim_1[2]))">
                                                                        </where>
                                                                        <where
                                                                          label="WR2"
                                                                          expression="(HIINDEX(trim_2) = 1) OR (TYPEOF(trim_2[1]) &lt;&gt; TYPEOF(trim_2[2]))">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="toroidal_surface"
                                                                        supertypes="elementary_surface">
                                                                        <explicit
                                                                          name="major_radius">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="minor_radius">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="uniform_curve"
                                                                        supertypes="b_spline_curve">
                                                                      </entity>

                                                                      <entity
                                                                        name="uniform_surface"
                                                                        supertypes="b_spline_surface">
                                                                      </entity>

                                                                      <entity
                                                                        name="uniform_volume"
                                                                        supertypes="b_spline_volume">
                                                                      </entity>

                                                                      <entity
                                                                        name="vector"
                                                                        supertypes="geometric_representation_item">
                                                                        <explicit
                                                                          name="orientation">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="magnitude">
                                                                          <typename
                                                                            name="length_measure"/>
                                                                        </explicit>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="magnitude &gt;= 0.0">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="volume"
                                                                        super.expression="(ONEOF(block_volume, wedge_volume, spherical_volume, cylindrical_volume, eccentric_conical_volume, toroidal_volume, pyramid_volume, b_spline_volume, ellipsoid_volume, tetrahedron_volume, hexahedron_volume))"
                                                                        supertypes="geometric_representation_item">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SELF\geometric_representation_item.dim = 3">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="wedge_volume"
                                                                        supertypes="volume">
                                                                        <explicit
                                                                          name="position">
                                                                          <typename
                                                                            name="axis2_placement_3d"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="x">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="y">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="z">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="ltx">
                                                                          <typename
                                                                            name="length_measure"/>
                                                                        </explicit>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="((0.0 &lt;= ltx) AND (ltx &lt; x))">
                                                                        </where>
                                                                      </entity>

                                                                      <rule
                                                                        name="compatible_dimension"
                                                                        appliesto="cartesian_point direction representation_context geometric_representation_context">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF(QUERY(x &lt;* cartesian_point| SIZEOF(QUERY(y &lt;* geometric_representation_context | item_in_context(x,y) AND(HIINDEX(x.coordinates) &lt;&gt; y.coordinate_space_dimension))) &gt; 0)) =0">
                                                                        </where>
                                                                        <where
                                                                          label="WR2"
                                                                          expression="SIZEOF(QUERY(x &lt;* direction | SIZEOF(QUERY(y &lt;* geometric_representation_context | item_in_context(x,y) AND(HIINDEX(x.direction_ratios) &lt;&gt; y.coordinate_space_dimension)))&gt; 0)) = 0">
                                                                        </where>
                                                                      </rule>

                                                                      <function
                                                                        name="above_plane">
                                                                        <parameter
                                                                          name="p1">
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="p2">
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="p3">
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="p4">
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="REAL"/>
                                                                        <algorithm>
LOCAL
dir2, dir3, dir4 : direction :=
dummy_gri || direction([1.0, 0.0, 0.0]);
val, mag : REAL;
END_LOCAL;
IF (p1.dim &lt;&gt; 3) THEN
RETURN(?);
END_IF;
REPEAT i := 1 TO 3;
dir2.direction_ratios[i] := p2.coordinates[i] - p1.coordinates[i];
dir3.direction_ratios[i] := p3.coordinates[i] - p1.coordinates[i];
dir4.direction_ratios[i] := p4.coordinates[i] - p1.coordinates[i];
mag := dir4.direction_ratios[i]*dir4.direction_ratios[i];
END_REPEAT;
mag := sqrt(mag);
val := mag*dot_product(dir4, cross_product(dir2, dir3).orientation);
RETURN(val);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="acyclic_curve_replica">
                                                                        <parameter
                                                                          name="rep">
                                                                          <typename
                                                                            name="curve_replica"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="parent">
                                                                          <typename
                                                                            name="curve"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
IF NOT (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CURVE_REPLICA') IN TYPEOF(parent)) THEN
RETURN (TRUE);
END_IF;
IF (parent :=: rep) THEN
RETURN (FALSE);
ELSE
RETURN(acyclic_curve_replica(rep,
parent\curve_replica.parent_curve));
END_IF;
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="acyclic_point_replica">
                                                                        <parameter
                                                                          name="rep">
                                                                          <typename
                                                                            name="point_replica"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="parent">
                                                                          <typename
                                                                            name="point"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
IF NOT (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POINT_REPLICA') IN TYPEOF(parent)) THEN
RETURN (TRUE);
END_IF;
IF (parent :=: rep) THEN
RETURN (FALSE);
ELSE RETURN(acyclic_point_replica(rep, parent\point_replica.parent_pt));
END_IF;
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="acyclic_surface_replica">
                                                                        <parameter
                                                                          name="rep">
                                                                          <typename
                                                                            name="surface_replica"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="parent">
                                                                          <typename
                                                                            name="surface"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
IF NOT (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_REPLICA') IN TYPEOF(parent)) THEN
RETURN (TRUE);
END_IF;
IF (parent :=: rep) THEN
RETURN (FALSE);
ELSE RETURN(acyclic_surface_replica(rep,
parent\surface_replica.parent_surface));
END_IF;
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="associated_surface">
                                                                        <parameter
                                                                          name="arg">
                                                                          <typename
                                                                            name="pcurve_or_surface"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="surface"/>
                                                                        <algorithm>
LOCAL
surf : surface;
END_LOCAL;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF(arg) THEN
surf := arg.basis_surface;
ELSE
surf := arg;
END_IF;
RETURN(surf);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="base_axis">
                                                                        <parameter
                                                                          name="dim">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="axis1">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="axis2">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="axis3">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="2"
                                                                          upper="3"/>
                                                                        <typename
                                                                          name="direction"/>
                                                                        <algorithm>
LOCAL
u : LIST [2:3] OF direction;
factor : REAL;
d1, d2 : direction;
END_LOCAL;
IF (dim = 3) THEN
d1 := NVL(normalise(axis3), dummy_gri || direction([0.0,0.0,1.0]));
d2 := first_proj_axis(d1,axis1);
u := [d2, second_proj_axis(d1,d2,axis2), d1];
ELSE
IF EXISTS(axis1) THEN
d1 := normalise(axis1);
u := [d1, orthogonal_complement(d1)];
IF EXISTS(axis2) THEN
factor := dot_product(axis2,u[2]);
IF (factor &lt; 0.0) THEN
u[2].direction_ratios[1] := -u[2].direction_ratios[1];
u[2].direction_ratios[2] := -u[2].direction_ratios[2];
END_IF;
END_IF;
ELSE
IF EXISTS(axis2) THEN
d1 := normalise(axis2);
u := [orthogonal_complement(d1), d1];
u[1].direction_ratios[1] := -u[1].direction_ratios[1];
u[1].direction_ratios[2] := -u[1].direction_ratios[2];
ELSE
u := [dummy_gri || direction([1.0, 0.0]), dummy_gri ||
direction([0.0, 1.0])];
END_IF;
END_IF;
END_IF;
RETURN(u);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="build_2axes">
                                                                        <parameter
                                                                          name="ref_direction">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="2"
                                                                          upper="2"/>
                                                                        <typename
                                                                          name="direction"/>
                                                                        <algorithm>
LOCAL
d : direction := NVL(normalise(ref_direction),
dummy_gri || direction([1.0,0.0]));
END_LOCAL;
RETURN([d, orthogonal_complement(d)]);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="build_axes">
                                                                        <parameter
                                                                          name="axis">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="ref_direction">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="3"
                                                                          upper="3"/>
                                                                        <typename
                                                                          name="direction"/>
                                                                        <algorithm>
LOCAL
d1, d2 : direction;
END_LOCAL;
d1 := NVL(normalise(axis), dummy_gri || direction([0.0,0.0,1.0]));
d2 := first_proj_axis(d1, ref_direction);
RETURN([d2, normalise(cross_product(d1,d2)).orientation, d1]);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="constraints_composite_curve_on_surface">
                                                                        <parameter
                                                                          name="c">
                                                                          <typename
                                                                            name="composite_curve_on_surface"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
LOCAL
n_segments : INTEGER := SIZEOF(c.segments);
END_LOCAL;
REPEAT k := 1 TO n_segments;
IF (NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN
TYPEOF(c\composite_curve.segments[k].parent_curve))) AND
(NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_CURVE' IN
TYPEOF(c\composite_curve.segments[k].parent_curve))) AND
(NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPOSITE_CURVE_ON_SURFACE' IN
TYPEOF(c\composite_curve.segments[k].parent_curve))) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN(TRUE);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="constraints_param_b_spline">
                                                                        <parameter
                                                                          name="degree">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="up_knots">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="up_cp">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="knot_mult">
                                                                          <aggregate
                                                                            type="LIST"/>
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="knots">
                                                                          <aggregate
                                                                            type="LIST"/>
                                                                          <typename
                                                                            name="parameter_value"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
LOCAL
result : BOOLEAN := TRUE;
k, sum : INTEGER;
END_LOCAL;
sum := knot_mult[1];
REPEAT i := 2 TO up_knots;
sum := sum + knot_mult[i];
END_REPEAT;
IF (degree &lt; 1) OR (up_knots &lt; 2) OR (up_cp &lt; degree) OR
(sum &lt;&gt; (degree + up_cp + 2)) THEN
result := FALSE;
RETURN(result);
END_IF;
k := knot_mult[1];
IF (k &lt; 1) OR (k &gt; degree + 1) THEN
result := FALSE;
RETURN(result);
END_IF;
REPEAT i := 2 TO up_knots;
IF (knot_mult[i] &lt; 1) OR (knots[i] &lt;= knots[i-1]) THEN
result := FALSE;
RETURN(result);
END_IF;
k := knot_mult[i];
IF (i &lt; up_knots) AND (k &gt; degree) THEN
result := FALSE;
RETURN(result);
END_IF;
IF (i = up_knots) AND (k &gt; degree + 1) THEN
result := FALSE;
RETURN(result);
END_IF;
END_REPEAT;
RETURN(result);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="constraints_rectangular_composite_surface">
                                                                        <parameter
                                                                          name="s">
                                                                          <typename
                                                                            name="rectangular_composite_surface"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
REPEAT i := 1 TO s.n_u;
REPEAT j := 1 TO s.n_v;
IF NOT (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.B_SPLINE_SURFACE' IN TYPEOF
(s.segments[i][j].parent_surface)) OR
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.RECTANGULAR_TRIMMED_SURFACE' IN TYPEOF
(s.segments[i][j].parent_surface))) THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
END_REPEAT;
REPEAT i := 1 TO s.n_u-1;
REPEAT j := 1 TO s.n_v;
IF s.segments[i][j].u_transition = discontinuous THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
END_REPEAT;
REPEAT i := 1 TO s.n_u;
REPEAT j := 1 TO s.n_v-1;
IF s.segments[i][j].v_transition = discontinuous THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
END_REPEAT;
RETURN(TRUE);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="cross_product">
                                                                        <parameter
                                                                          name="arg1">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="arg2">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="vector"/>
                                                                        <algorithm>
LOCAL
mag : REAL;
res : direction;
v1,v2 : LIST[3:3] OF REAL;
result : vector;
END_LOCAL;
IF (NOT EXISTS (arg1) OR (arg1.dim = 2)) OR
(NOT EXISTS (arg2) OR (arg2.dim = 2)) THEN
RETURN(?);
ELSE
BEGIN
v1 := normalise(arg1).direction_ratios;
v2 := normalise(arg2).direction_ratios;
res := dummy_gri || direction([(v1[2]*v2[3] - v1[3]*v2[2]),
(v1[3]*v2[1] - v1[1]*v2[3]), (v1[1]*v2[2] - v1[2]*v2[1])]);
mag := 0.0;
REPEAT i := 1 TO 3;
mag := mag + res.direction_ratios[i]*res.direction_ratios[i];
END_REPEAT;
IF (mag &gt; 0.0) THEN
result := dummy_gri || vector(res, SQRT(mag));
ELSE
result := dummy_gri || vector(arg1, 0.0);
END_IF;
RETURN(result);
END;
END_IF;
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="curve_weights_positive">
                                                                        <parameter
                                                                          name="b">
                                                                          <typename
                                                                            name="rational_b_spline_curve"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
LOCAL
result : BOOLEAN := TRUE;
END_LOCAL;
REPEAT i := 0 TO b.upper_index_on_control_points;
IF b.weights[i] &lt;= 0.0 THEN
result := FALSE;
RETURN(result);
END_IF;
END_REPEAT;
RETURN(result);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="default_b_spline_curve_weights">
                                                                        <parameter
                                                                          name="up_cp">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="ARRAY"
                                                                          lower="0"
                                                                          upper="up_cp"/>
                                                                        <builtintype
                                                                          type="REAL"/>
                                                                        <algorithm>
RETURN([1:up_cp + 1]);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="default_b_spline_surface_weights">
                                                                        <parameter
                                                                          name="u_upper">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="v_upper">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="ARRAY"
                                                                          lower="0"
                                                                          upper="u_upper"/>
                                                                        <builtintype
                                                                          type="REAL"
                                                                          typelabel="v_upper ] OF REAL"/>
                                                                        <algorithm>
RETURN([[1:v_upper + 1]:u_upper +1]);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="default_b_spline_knot_mult">
                                                                        <parameter
                                                                          name="degree">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="up_knots">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="uniform">
                                                                          <typename
                                                                            name="knot_type"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="2"
                                                                          upper="?"/>
                                                                        <builtintype
                                                                          type="INTEGER"/>
                                                                        <algorithm>
LOCAL
knot_mult : LIST [1:up_knots] OF INTEGER;
END_LOCAL;
IF uniform = uniform_knots THEN
knot_mult := [1:up_knots];
ELSE
IF uniform = quasi_uniform_knots THEN
knot_mult := [1:up_knots];
knot_mult[1] := degree + 1;
knot_mult[up_knots] := degree + 1;
ELSE
IF uniform = piecewise_bezier_knots THEN
knot_mult := [degree:up_knots];
knot_mult[1] := degree + 1;
knot_mult[up_knots] := degree + 1;
ELSE
knot_mult := [0:up_knots];
END_IF;
END_IF;
END_IF;
RETURN(knot_mult);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="default_b_spline_knots">
                                                                        <parameter
                                                                          name="degree">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="up_knots">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="uniform">
                                                                          <typename
                                                                            name="knot_type"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="LIST"
                                                                          lower="2"
                                                                          upper="?"/>
                                                                        <typename
                                                                          name="parameter_value"/>
                                                                        <algorithm>
LOCAL
knots : LIST [1:up_knots] OF parameter_value := [0:up_knots];
ishift : INTEGER := 1;
END_LOCAL;
IF (uniform = uniform_knots) THEN
ishift := degree + 1;
END_if;
IF (uniform = uniform_knots) OR
(uniform = quasi_uniform_knots) OR
(uniform = piecewise_bezier_knots) THEN
REPEAT i := 1 TO up_knots;
knots[i] := i - ishift;
END_REPEAT;
END_IF;
RETURN(knots);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="dimension_of">
                                                                        <parameter
                                                                          name="item">
                                                                          <typename
                                                                            name="geometric_representation_item"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="dimension_count"/>
                                                                        <algorithm>
LOCAL
x : SET OF representation;
y : representation_context;
dim : dimension_count;
END_LOCAL;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CARTESIAN_POINT' IN TYPEOF(item) THEN
dim := SIZEOF(item\cartesian_point.coordinates);
RETURN(dim);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DIRECTION' IN TYPEOF(item) THEN
dim := SIZEOF(item\direction.direction_ratios);
RETURN(dim);
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VECTOR' IN TYPEOF(item) THEN
dim := SIZEOF(item\vector.orientation\direction.direction_ratios);
RETURN(dim);
END_IF;
x := using_representations(item);
y := x[1].context_of_items;
dim := y\geometric_representation_context.coordinate_space_dimension;
RETURN (dim);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="dot_product">
                                                                        <parameter
                                                                          name="arg1">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="arg2">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="REAL"/>
                                                                        <algorithm>
LOCAL
scalar : REAL;
vec1, vec2: direction;
ndim : INTEGER;
END_LOCAL;
IF NOT EXISTS (arg1) OR NOT EXISTS (arg2) THEN
scalar := ?;
ELSE
IF (arg1.dim &lt;&gt; arg2.dim) THEN
scalar := ?;
ELSE
BEGIN
vec1 := normalise(arg1);
vec2 := normalise(arg2);
ndim := arg1.dim;
scalar := 0.0;
REPEAT i := 1 TO ndim;
scalar := scalar +
vec1.direction_ratios[i]*vec2.direction_ratios[i];
END_REPEAT;
END;
END_IF;
END_IF;
RETURN (scalar);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="first_proj_axis">
                                                                        <parameter
                                                                          name="z_axis">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="arg">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="direction"/>
                                                                        <algorithm>
LOCAL
x_axis : direction;
v : direction;
z : direction;
x_vec : vector;
END_LOCAL;
IF (NOT EXISTS(z_axis)) THEN
RETURN (?) ;
ELSE
z := normalise(z_axis);
IF NOT EXISTS(arg) THEN
IF ((z.direction_ratios &lt;&gt; [1.0,0.0,0.0]) AND
(z.direction_ratios &lt;&gt; [-1.0,0.0,0.0])) THEN
v := dummy_gri || direction([1.0,0.0,0.0]);
ELSE
v := dummy_gri || direction([0.0,1.0,0.0]);
END_IF;
ELSE
IF (arg.dim &lt;&gt; 3) THEN
RETURN (?) ;
END_IF;
IF ((cross_product(arg,z).magnitude) = 0.0) THEN
RETURN (?);
ELSE
v := normalise(arg);
END_IF;
END_IF;
x_vec := scalar_times_vector(dot_product(v, z), z);
x_axis := vector_difference(v, x_vec).orientation;
x_axis := normalise(x_axis);
END_IF;
RETURN(x_axis);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="get_basis_surface">
                                                                        <parameter
                                                                          name="c">
                                                                          <typename
                                                                            name="curve_on_surface"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="SET"
                                                                          lower="0"
                                                                          upper="2"/>
                                                                        <typename
                                                                          name="surface"/>
                                                                        <algorithm>
LOCAL
surfs : SET[0:2] OF surface;
n : INTEGER;
END_LOCAL;
surfs := [];
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF (c) THEN
surfs := [c\pcurve.basis_surface];
ELSE
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_CURVE' IN TYPEOF (c) THEN
n := SIZEOF(c\surface_curve.associated_geometry);
REPEAT i := 1 TO n;
surfs := surfs +
associated_surface(c\surface_curve.associated_geometry[i]);
END_REPEAT;
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPOSITE_CURVE_ON_SURFACE' IN TYPEOF (c) THEN
n := SIZEOF(c\composite_curve.segments);
surfs := get_basis_surface(
c\composite_curve.segments[1].parent_curve);
IF n &gt; 1 THEN
REPEAT i := 2 TO n;
surfs := surfs * get_basis_surface(
c\composite_curve.segments[i].parent_curve);
END_REPEAT;
END_IF;
END_IF;
RETURN(surfs);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="list_to_array">
                                                                        <parameter
                                                                          name="lis">
                                                                          <aggregate
                                                                            type="LIST"
                                                                            lower="0"
                                                                            upper="?"/>
                                                                          <builtintype
                                                                            type="GENERIC"
                                                                            typelabel="T"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="low">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="u">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="ARRAY"
                                                                          lower="low"
                                                                          upper="u"/>
                                                                        <builtintype
                                                                          type="GENERIC"
                                                                          typelabel="T"/>
                                                                        <algorithm>
LOCAL
n : INTEGER;
res : ARRAY [low:u] OF GENERIC : T;
END_LOCAL;
n := SIZEOF(lis);
IF (n &lt;&gt; (u-low +1)) THEN
RETURN(?);
ELSE
res := [lis[1] : n];
REPEAT i := 2 TO n;
res[low+i-1] := lis[i];
END_REPEAT;
RETURN(res);
END_IF;
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="make_array_of_array">
                                                                        <parameter
                                                                          name="lis">
                                                                          <aggregate
                                                                            type="LIST"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <builtintype
                                                                            type="GENERIC"
                                                                            typelabel="? ] OF GENERIC : T"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="low1">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="u1">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="low2">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="u2">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="ARRAY"
                                                                          lower="low1"
                                                                          upper="u1"/>
                                                                        <builtintype
                                                                          type="GENERIC"
                                                                          typelabel="u2 ] OF GENERIC : T"/>
                                                                        <algorithm>
LOCAL
res : ARRAY[low1:u1] OF ARRAY [low2:u2] OF GENERIC : T;
END_LOCAL;
IF (u1-low1+1) &lt;&gt; SIZEOF(lis) THEN
RETURN (?);
END_IF;
IF (u2 - low2 + 1) &lt;&gt; SIZEOF(lis[1]) THEN
RETURN (?) ;
END_IF;
res := [list_to_array(lis[1], low2, u2) : (u1-low1 + 1)];
REPEAT i := 2 TO HIINDEX(lis);
IF (u2-low2+1) &lt;&gt; SIZEOF(lis[i]) THEN
RETURN (?);
END_IF;
res[low1+i-1] := list_to_array(lis[i], low2, u2);
END_REPEAT;
RETURN (res);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="make_array_of_array_of_array">
                                                                        <parameter
                                                                          name="lis">
                                                                          <aggregate
                                                                            type="LIST"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <builtintype
                                                                            type="GENERIC"
                                                                            typelabel="? ] OF LIST [ 1 : ? ] OF GENERIC : T"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="low1">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="u1">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="low2">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="u2">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="low3">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="u3">
                                                                          <builtintype
                                                                            type="INTEGER"/>
                                                                        </parameter>
                                                                        <aggregate
                                                                          type="ARRAY"
                                                                          lower="low1"
                                                                          upper="u1"/>
                                                                        <builtintype
                                                                          type="GENERIC"
                                                                          typelabel="u2 ] OF ARRAY [ low3 : u3 ] OF GENERIC : T"/>
                                                                        <algorithm>
LOCAL
res : ARRAY[low1:u1] OF ARRAY [low2:u2] OF
ARRAY[low3:u3] OF GENERIC : T;
END_LOCAL;
IF (u1-low1+1) &lt;&gt; SIZEOF(lis) THEN
RETURN (?);
END_IF;
IF (u2-low2+1) &lt;&gt; SIZEOF(lis[1]) THEN
RETURN (?);
END_IF;
res := [make_array_of_array(lis[1], low2, u2, low3, u3) : (u1-low1 + 1)];
REPEAT i := 2 TO HIINDEX(lis);
IF (u2-low2+1) &lt;&gt; SIZEOF(lis[i]) THEN
RETURN (?);
END_IF;
res[low1+i-1] := make_array_of_array(lis[i], low2, u2, low3, u3);
END_REPEAT;
RETURN (res);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="normalise">
                                                                        <parameter
                                                                          name="arg">
                                                                          <typename
                                                                            name="vector_or_direction"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="vector_or_direction"/>
                                                                        <algorithm>
LOCAL
ndim : INTEGER;
v : direction;
result : vector_or_direction;
vec : vector;
mag : REAL;
END_LOCAL;
IF NOT EXISTS (arg) THEN
result := ?;
ELSE
ndim := arg.dim;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VECTOR' IN TYPEOF(arg) THEN
BEGIN
v := dummy_gri || direction(arg.orientation.direction_ratios);
IF arg.magnitude = 0.0 THEN
RETURN(?);
ELSE
vec := dummy_gri || vector (v, 1.0);
END_IF;
END;
ELSE
v := dummy_gri || direction (arg.direction_ratios);
END_IF;
mag := 0.0;
REPEAT i := 1 TO ndim;
mag := mag + v.direction_ratios[i]*v.direction_ratios[i];
END_REPEAT;
IF mag &gt; 0.0 THEN
mag := SQRT(mag);
REPEAT i := 1 TO ndim;
v.direction_ratios[i] := v.direction_ratios[i]/mag;
END_REPEAT;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VECTOR' IN TYPEOF(arg) THEN
vec.orientation := v;
result := vec;
ELSE
result := v;
END_IF;
ELSE
RETURN(?);
END_IF;
END_IF;
RETURN (result);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="orthogonal_complement">
                                                                        <parameter
                                                                          name="vec">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="direction"/>
                                                                        <algorithm>
LOCAL
result : direction ;
END_LOCAL;
IF (vec.dim &lt;&gt; 2) OR NOT EXISTS (vec) THEN
RETURN(?);
ELSE
result := dummy_gri || direction([-vec.direction_ratios[2],
vec.direction_ratios[1]]);
RETURN(result);
END_IF;
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="same_side">
                                                                        <parameter
                                                                          name="plane_pts">
                                                                          <aggregate
                                                                            type="LIST"
                                                                            lower="3"
                                                                            upper="3"/>
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="test_points">
                                                                          <aggregate
                                                                            type="LIST"
                                                                            lower="2"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="cartesian_point"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
LOCAL
val1, val2 : REAL;
n : INTEGER;
END_LOCAL;
IF (plane_pts[1].dim = 2) OR (test_points[1].dim = 2) THEN
RETURN(?);
END_IF;
n := SIZEOF(test_points);
val1 := above_plane(plane_pts[1], plane_pts[2], plane_pts[3],
test_points[1]);
REPEAT i := 2 TO n;
val2 := above_plane(plane_pts[1], plane_pts[2], plane_pts[3],
test_points[i]);
IF (val1*val2 &lt;= 0.0) THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
RETURN(TRUE);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="scalar_times_vector">
                                                                        <parameter
                                                                          name="scalar">
                                                                          <builtintype
                                                                            type="REAL"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="vec">
                                                                          <typename
                                                                            name="vector_or_direction"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="vector"/>
                                                                        <algorithm>
LOCAL
v : direction;
mag : REAL;
result : vector;
END_LOCAL;
IF NOT EXISTS (scalar) OR NOT EXISTS (vec) THEN
RETURN (?) ;
ELSE
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VECTOR' IN TYPEOF (vec) THEN
v := dummy_gri || direction(vec.orientation.direction_ratios);
mag := scalar * vec.magnitude;
ELSE
v := dummy_gri || direction(vec.direction_ratios);
mag := scalar;
END_IF;
IF (mag &lt; 0.0) THEN
REPEAT i := 1 TO SIZEOF(v.direction_ratios);
v.direction_ratios[i] := -v.direction_ratios[i];
END_REPEAT;
mag := -mag;
END_IF;
result := dummy_gri || vector(normalise(v), mag);
END_IF;
RETURN (result);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="second_proj_axis">
                                                                        <parameter
                                                                          name="z_axis">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="x_axis">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="arg">
                                                                          <typename
                                                                            name="direction"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="direction"/>
                                                                        <algorithm>
LOCAL
y_axis : vector;
v : direction;
temp : vector;
END_LOCAL;
IF NOT EXISTS(arg) THEN
v := dummy_gri || direction([0.0,1.0,0.0]);
ELSE
v := arg;
END_IF;
temp := scalar_times_vector(dot_product(v, z_axis), z_axis);
y_axis := vector_difference(v, temp);
temp := scalar_times_vector(dot_product(v, x_axis), x_axis);
y_axis := vector_difference(y_axis, temp);
y_axis := normalise(y_axis);
RETURN(y_axis.orientation);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="surface_weights_positive">
                                                                        <parameter
                                                                          name="b">
                                                                          <typename
                                                                            name="rational_b_spline_surface"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
LOCAL
result : BOOLEAN := TRUE;
END_LOCAL;
REPEAT i := 0 TO b.u_upper;
REPEAT j := 0 TO b.v_upper;
IF (b.weights[i][j] &lt;= 0.0) THEN
result := FALSE;
RETURN(result);
END_IF;
END_REPEAT;
END_REPEAT;
RETURN(result);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="vector_difference">
                                                                        <parameter
                                                                          name="arg1">
                                                                          <typename
                                                                            name="vector_or_direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="arg2">
                                                                          <typename
                                                                            name="vector_or_direction"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="vector"/>
                                                                        <algorithm>
LOCAL
result : vector;
res, vec1, vec2 : direction;
mag, mag1, mag2 : REAL;
ndim : INTEGER;
END_LOCAL;
IF ((NOT EXISTS (arg1)) OR (NOT EXISTS (arg2))) OR (arg1.dim &lt;&gt; arg2.dim)
THEN
RETURN (?) ;
ELSE
BEGIN
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VECTOR' IN TYPEOF(arg1) THEN
mag1 := arg1.magnitude;
vec1 := arg1.orientation;
ELSE
mag1 := 1.0;
vec1 := arg1;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VECTOR' IN TYPEOF(arg2) THEN
mag2 := arg2.magnitude;
vec2 := arg2.orientation;
ELSE
mag2 := 1.0;
vec2 := arg2;
END_IF;
vec1 := normalise (vec1);
vec2 := normalise (vec2);
ndim := SIZEOF(vec1.direction_ratios);
mag := 0.0;
res := dummy_gri || direction(vec1.direction_ratios);
REPEAT i := 1 TO ndim;
res.direction_ratios[i] := mag1*vec1.direction_ratios[i] +
mag2*vec2.direction_ratios[i];
mag := mag + (res.direction_ratios[i]*res.direction_ratios[i]);
END_REPEAT;
IF (mag &gt; 0.0) THEN
result := dummy_gri || vector(res, SQRT(mag));
ELSE
result := dummy_gri || vector(vec1, 0.0);
END_IF;
END;
END_IF;
RETURN (result);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="vector_sum">
                                                                        <parameter
                                                                          name="arg1">
                                                                          <typename
                                                                            name="vector_or_direction"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="arg2">
                                                                          <typename
                                                                            name="vector_or_direction"/>
                                                                        </parameter>
                                                                        <typename
                                                                          name="vector"/>
                                                                        <algorithm>
LOCAL
result : vector;
res, vec1, vec2 : direction;
mag, mag1, mag2 : REAL;
ndim : INTEGER;
END_LOCAL;
IF ((NOT EXISTS (arg1)) OR (NOT EXISTS (arg2))) OR (arg1.dim &lt;&gt; arg2.dim)
THEN
RETURN (?) ;
ELSE
BEGIN
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VECTOR' IN TYPEOF(arg1) THEN
mag1 := arg1.magnitude;
vec1 := arg1.orientation;
ELSE
mag1 := 1.0;
vec1 := arg1;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VECTOR' IN TYPEOF(arg2) THEN
mag2 := arg2.magnitude;
vec2 := arg2.orientation;
ELSE
mag2 := 1.0;
vec2 := arg2;
END_IF;
vec1 := normalise (vec1);
vec2 := normalise (vec2);
ndim := SIZEOF(vec1.direction_ratios);
mag := 0.0;
res := dummy_gri || direction(vec1.direction_ratios);
REPEAT i := 1 TO ndim;
res.direction_ratios[i] := mag1*vec1.direction_ratios[i] +
mag2*vec2.direction_ratios[i];
mag := mag + (res.direction_ratios[i]*res.direction_ratios[i]);
END_REPEAT;
IF (mag &gt; 0.0) THEN
result := dummy_gri || vector(res, SQRT(mag));
ELSE
result := dummy_gri || vector(vec1, 0.0);
END_IF;
END;
END_IF;
RETURN (result);
                                                                        </algorithm>
                                                                      </function>

                                                                      <function
                                                                        name="volume_weights_positive">
                                                                        <parameter
                                                                          name="b">
                                                                          <typename
                                                                            name="rational_b_spline_volume"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
LOCAL
result : BOOLEAN := TRUE;
END_LOCAL;
REPEAT i := 0 TO b.u_upper;
REPEAT j := 0 TO b.v_upper;
REPEAT k := 0 TO b.w_upper;
IF (b.weights[i][j][k] &lt;= 0.0) THEN
result := FALSE;
RETURN(result);
END_IF;
END_REPEAT;
END_REPEAT;
END_REPEAT;
RETURN(result);
                                                                        </algorithm>
                                                                      </function>

                                                                      <entity
                                                                        name="group">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="id"
                                                                          expression="get_id_value (SELF)">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="group_relationship">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="relating_group">
                                                                          <typename
                                                                            name="group"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="related_group">
                                                                          <typename
                                                                            name="group"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <function
                                                                        name="acyclic_group_relationship">
                                                                        <parameter
                                                                          name="relation">
                                                                          <typename
                                                                            name="group_relationship"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="relatives">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="group"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="specific_relation">
                                                                          <builtintype
                                                                            type="STRING"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
LOCAL
x : SET OF group_relationship;
END_LOCAL;
IF relation.relating_group IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(grp &lt;* bag_to_set(USEDIN(relation.relating_group, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'GROUP_RELATIONSHIP.' + 'RELATED_GROUP')) | specific_relation IN TYPEOF(grp));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_group_relationship(x[i], relatives + relation.relating_group, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                        </algorithm>
                                                                      </function>

                                                                      <entity
                                                                        name="location">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="location_relationship">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="relating_location">
                                                                          <typename
                                                                            name="location"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="related_location">
                                                                          <typename
                                                                            name="location"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <function
                                                                        name="acyclic_location_relationship">
                                                                        <parameter
                                                                          name="relation">
                                                                          <typename
                                                                            name="location_relationship"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="relatives">
                                                                          <aggregate
                                                                            type="SET"/>
                                                                          <typename
                                                                            name="location"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="specific_relation">
                                                                          <builtintype
                                                                            type="STRING"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
LOCAL
x : SET OF location_relationship;
END_LOCAL;
IF relation.relating_location IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(lctn &lt;* bag_to_set(USEDIN(relation.relating_location, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'LOCATION_RELATIONSHIP.' + 'RELATED_LOCATION')) | specific_relation IN TYPEOF(lctn));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_location_relationship(x[i], relatives + relation.relating_location, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                        </algorithm>
                                                                      </function>

                                                                      <type name="attribute_type">
                                                                        <select
                                                                          selectitems="label text">
                                                                        </select>
                                                                      </type>

                                                                      <entity
                                                                        name="action_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_action">
                                                                          <typename
                                                                            name="action"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role (SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="action_method_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_action_method">
                                                                          <typename
                                                                            name="action_method"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="action_method_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="action_method_role">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="action_request_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_action_request">
                                                                          <typename
                                                                            name="versioned_action_request"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role (SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="approval_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_approval">
                                                                          <typename
                                                                            name="approval"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role (SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="attribute_classification_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_class">
                                                                          <typename
                                                                            name="group"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="attribute_name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="classification_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="attribute_value_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="attribute_name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="attribute_value">
                                                                          <typename
                                                                            name="attribute_type"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="attribute_value_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="attribute_value_role">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="certification_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_certification">
                                                                          <typename
                                                                            name="certification"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role (SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="classification_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_class">
                                                                          <typename
                                                                            name="group"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="classification_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="classification_role">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="contract_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_contract">
                                                                          <typename
                                                                            name="contract"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role (SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="date_and_time_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_date_and_time">
                                                                          <typename
                                                                            name="date_and_time"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="date_time_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="date_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_date">
                                                                          <typename
                                                                            name="date"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="date_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="document_reference"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_document">
                                                                          <typename
                                                                            name="document"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="source">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role (SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="document_usage_constraint_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_document_usage">
                                                                          <typename
                                                                            name="document_usage_constraint"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="document_usage_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="document_usage_role">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="effectivity_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_effectivity">
                                                                          <typename
                                                                            name="effectivity"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role(SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="effectivity_context_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_effectivity_assignment">
                                                                          <typename
                                                                            name="effectivity_assignment"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="effectivity_context_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="effectivity_context_role">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="event_occurrence_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_event_occurrence">
                                                                          <typename
                                                                            name="event_occurrence"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="event_occurrence_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="event_occurrence_context_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_event_occurrence_assignment">
                                                                          <typename
                                                                            name="event_occurrence_assignment"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="event_occurrence_context_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="experience_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_experience">
                                                                          <typename
                                                                            name="experience"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="experience_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="experience_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="experience_type_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_experience_type">
                                                                          <typename
                                                                            name="experience_type"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="experience_type_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="experience_type_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="external_identification_assignment"
                                                                        abstract.supertype="YES"
                                                                        supertypes="identification_assignment">
                                                                        <explicit
                                                                          name="source">
                                                                          <typename
                                                                            name="external_source"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="external_referent_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role(SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <unique
                                                                          label="UR1">
                                                                          <unique.attribute
                                                                            attribute="assigned_name"/>
                                                                        </unique>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="group_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_group">
                                                                          <typename
                                                                            name="group"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role (SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="identification_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="identification_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="identification_assignment_relationship">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="relating_identification_assignment">
                                                                          <typename
                                                                            name="identification_assignment"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="related_identification_assignment">
                                                                          <typename
                                                                            name="identification_assignment"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="identification_role">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="library_assignment"
                                                                        abstract.supertype="YES"
                                                                        supertypes="external_referent_assignment">
                                                                        <explicit
                                                                          name="frame_of_reference">
                                                                          <typename
                                                                            name="library_context"/>
                                                                        </explicit>
                                                                        <unique
                                                                          label="UR1">
                                                                          <unique.attribute
                                                                            attribute="frame_of_reference"/>
                                                                        </unique>
                                                                      </entity>

                                                                      <entity
                                                                        name="location_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_location">
                                                                          <typename
                                                                            name="location"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="location_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="location_representation_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="represented_location">
                                                                          <typename
                                                                            name="location"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="location_representation_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="location_representation_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="location_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="name_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role (SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="organization_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_organization">
                                                                          <typename
                                                                            name="organization"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="organization_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="organization_type_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_organization_type">
                                                                          <typename
                                                                            name="organization_type"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="organization_type_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="organization_type_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="organizational_project_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_organizational_project">
                                                                          <typename
                                                                            name="organizational_project"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="organizational_project_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="organizational_project_role">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="person_and_organization_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_person_and_organization">
                                                                          <typename
                                                                            name="person_and_organization"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="person_and_organization_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="person_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_person">
                                                                          <typename
                                                                            name="person"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="person_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="person_type_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_person_type">
                                                                          <typename
                                                                            name="person_type"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="person_type_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="person_type_definition_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_person_type_definition">
                                                                          <typename
                                                                            name="person_type_definition"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="person_type_definition_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="person_type_definition_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="person_type_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="position_in_organization_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_position_in_organization">
                                                                          <typename
                                                                            name="position_in_organization"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="position_in_organization_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="position_in_organization_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="position_in_organization_type_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_position_in_organization_type">
                                                                          <typename
                                                                            name="position_in_organization_type"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="position_in_organization_type_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="position_in_organization_type_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="qualification_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_qualification">
                                                                          <typename
                                                                            name="qualification"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="qualification_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="qualification_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="qualification_type_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="assigned_qualification_type">
                                                                          <typename
                                                                            name="qualification_type"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="qualification_type_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="qualification_type_role">
                                                                        <explicit
                                                                          name="id">
                                                                          <typename
                                                                            name="identifier"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="security_classification_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_security_classification">
                                                                          <typename
                                                                            name="security_classification"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="role"
                                                                          expression="get_role (SELF)">
                                                                          <typename
                                                                            name="object_role"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="time_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_time">
                                                                          <typename
                                                                            name="local_time"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="time_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="time_interval_assignment"
                                                                        abstract.supertype="YES">
                                                                        <explicit
                                                                          name="assigned_time_interval">
                                                                          <typename
                                                                            name="time_interval"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="role">
                                                                          <typename
                                                                            name="time_interval_role"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <function
                                                                        name="acyclic_identification_assignment_relationship">
                                                                        <parameter
                                                                          name="relation">
                                                                          <typename
                                                                            name="identification_assignment_relationship"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="relatives">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="identification_assignment"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="specific_relation">
                                                                          <builtintype
                                                                            type="STRING"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="BOOLEAN"/>
                                                                        <algorithm>
LOCAL
x : SET OF identification_assignment_relationship;
END_LOCAL;
IF relation.relating_identification_assignment IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(ia &lt;* bag_to_set(USEDIN(relation.relating_identification_assignment, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'IDENTIFICATION_ASSIGNMENT_RELATIONSHIP.' + 'RELATED_IDENTIFICATION_ASSIGNMENT')) | specific_relation IN TYPEOF(ia));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_identification_assignment_relationship(x[i], relatives + relation.relating_identification_assignment, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                        </algorithm>
                                                                      </function>

                                                                      <type name="characterized_material_property">
                                                                        <select
                                                                          selectitems="material_property_representation product_material_composition_relationship">
                                                                        </select>
                                                                      </type>

                                                                      <entity
                                                                        name="material_property"
                                                                        supertypes="property_definition">
                                                                        <unique
                                                                          label="UR1">
                                                                          <unique.attribute
                                                                            entity-ref="property_definition"
                                                                            attribute="name"/>
                                                                          <unique.attribute
                                                                            entity-ref="property_definition"
                                                                            attribute="definition"/>
                                                                        </unique>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CHARACTERIZED_OBJECT' IN TYPEOF(SELF\property_definition.definition)) OR(SIZEOF(bag_to_set(USEDIN(SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) - QUERY(temp &lt;* bag_to_set(USEDIN(SELF ,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'MATERIAL_PROPERTY_REPRESENTATION' IN TYPEOF(temp)))) = 0)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="property_definition_relationship">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="relating_property_definition">
                                                                          <typename
                                                                            name="property_definition"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="related_property_definition">
                                                                          <typename
                                                                            name="property_definition"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="material_designation">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="definitions">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="characterized_definition"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="material_designation_characterization">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="designation">
                                                                          <typename
                                                                            name="material_designation"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="property">
                                                                          <typename
                                                                            name="characterized_material_property"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="product_material_composition_relationship"
                                                                        supertypes="product_definition_relationship">
                                                                        <explicit
                                                                          name="class">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="constituent_amount">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="measure_with_unit"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="composition_basis">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="determination_method">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <function
                                                                        name="acyclic_property_definition_relationship">
                                                                        <parameter
                                                                          name="relation">
                                                                          <typename
                                                                            name="property_definition_relationship"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="relatives">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="property_definition"/>
                                                                        </parameter>
                                                                        <parameter
                                                                          name="specific_relation">
                                                                          <builtintype
                                                                            type="STRING"/>
                                                                        </parameter>
                                                                        <builtintype
                                                                          type="LOGICAL"/>
                                                                        <algorithm>
LOCAL
x : SET OF property_definition_relationship;
END_LOCAL;
IF relation.relating_property_definition IN
relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY (pd &lt;* bag_to_set (USEDIN
(relation.relating_property_definition,
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +
'PROPERTY_DEFINITION_RELATIONSHIP.' +
'RELATED_PROPERTY_DEFINITION')) |
specific_relation IN TYPEOF (pd));
REPEAT I := 1 TO HIINDEX(x);
IF NOT acyclic_property_definition_relationship
(x[i],
relatives + relation.relating_property_definition,
specific_relation) THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
RETURN(TRUE);
                                                                        </algorithm>
                                                                      </function>

                                                                      <entity
                                                                        name="material_property_representation"
                                                                        supertypes="property_definition_representation">
                                                                        <explicit
                                                                          name="dependent_environment">
                                                                          <typename
                                                                            name="data_environment"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="data_environment">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="elements">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="property_definition_representation"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="data_environment_relationship">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="description">
                                                                          <typename
                                                                            name="text"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="relating_data_environment">
                                                                          <typename
                                                                            name="data_environment"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="related_data_environment">
                                                                          <typename
                                                                            name="data_environment"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <type name="amount_of_substance_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="area_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="celsius_temperature_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="context_dependent_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="count_measure">
                                                                        <builtintype
                                                                          type="NUMBER">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="descriptive_measure">
                                                                        <builtintype
                                                                          type="STRING">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="electric_current_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="length_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="luminous_intensity_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="mass_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="measure_value">
                                                                        <select
                                                                          selectitems="amount_of_substance_measure area_measure celsius_temperature_measure context_dependent_measure count_measure descriptive_measure electric_current_measure length_measure luminous_intensity_measure mass_measure numeric_measure parameter_value plane_angle_measure positive_length_measure positive_plane_angle_measure positive_ratio_measure ratio_measure solid_angle_measure thermodynamic_temperature_measure time_measure volume_measure">
                                                                        </select>
                                                                      </type>

                                                                      <type name="numeric_measure">
                                                                        <builtintype
                                                                          type="NUMBER">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="parameter_value">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="plane_angle_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="positive_length_measure">
                                                                        <typename
                                                                          name="length_measure"/>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SELF &gt; 0.0">
                                                                        </where>
                                                                      </type>

                                                                      <type name="positive_plane_angle_measure">
                                                                        <typename
                                                                          name="plane_angle_measure"/>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SELF &gt; 0.0">
                                                                        </where>
                                                                      </type>

                                                                      <type name="positive_ratio_measure">
                                                                        <typename
                                                                          name="ratio_measure"/>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="SELF &gt; 0.0">
                                                                        </where>
                                                                      </type>

                                                                      <type name="ratio_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="si_prefix">
                                                                        <enumeration
                                                                          items="exa peta tera giga mega kilo hecto deca deci centi milli micro nano pico femto atto">
                                                                        </enumeration>
                                                                      </type>

                                                                      <type name="si_unit_name">
                                                                        <enumeration
                                                                          items="metre gram second ampere kelvin mole candela radian steradian hertz newton pascal joule watt coulomb volt farad ohm siemens weber tesla henry degree_Celsius lumen lux becquerel gray sievert">
                                                                        </enumeration>
                                                                      </type>

                                                                      <type name="solid_angle_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="thermodynamic_temperature_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="time_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <type name="unit">
                                                                        <select
                                                                          selectitems="derived_unit named_unit">
                                                                        </select>
                                                                      </type>

                                                                      <type name="volume_measure">
                                                                        <builtintype
                                                                          type="REAL">
                                                                        </builtintype>
                                                                      </type>

                                                                      <entity
                                                                        name="amount_of_substance_measure_with_unit"
                                                                        supertypes="measure_with_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AMOUNT_OF_SUBSTANCE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="amount_of_substance_unit"
                                                                        supertypes="named_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 1.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="area_measure_with_unit"
                                                                        supertypes="measure_with_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AREA_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="area_unit"
                                                                        supertypes="named_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(SELF\named_unit.dimensions.length_exponent = 2.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="celsius_temperature_measure_with_unit"
                                                                        supertypes="measure_with_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.THERMODYNAMIC_TEMPERATURE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="context_dependent_unit"
                                                                        supertypes="named_unit">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="conversion_based_unit"
                                                                        supertypes="named_unit">
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="label"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="conversion_factor">
                                                                          <typename
                                                                            name="measure_with_unit"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="derived_unit">
                                                                        <explicit
                                                                          name="elements">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="derived_unit_element"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="name"
                                                                          expression="get_name_value (SELF)">
                                                                          <typename
                                                                            name="label"/>
                                                                        </derived>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(SIZEOF (elements) &gt; 1) OR ((SIZEOF (elements) = 1) AND (elements[1].exponent &lt;&gt; 1.0))">
                                                                        </where>
                                                                        <where
                                                                          label="WR2"
                                                                          expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="derived_unit_element">
                                                                        <explicit
                                                                          name="unit">
                                                                          <typename
                                                                            name="named_unit"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="exponent">
                                                                          <builtintype
                                                                            type="REAL"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="dimensional_exponents">
                                                                        <explicit
                                                                          name="length_exponent">
                                                                          <builtintype
                                                                            type="REAL"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="mass_exponent">
                                                                          <builtintype
                                                                            type="REAL"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="time_exponent">
                                                                          <builtintype
                                                                            type="REAL"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="electric_current_exponent">
                                                                          <builtintype
                                                                            type="REAL"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="thermodynamic_temperature_exponent">
                                                                          <builtintype
                                                                            type="REAL"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="amount_of_substance_exponent">
                                                                          <builtintype
                                                                            type="REAL"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="luminous_intensity_exponent">
                                                                          <builtintype
                                                                            type="REAL"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="electric_current_measure_with_unit"
                                                                        supertypes="measure_with_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ELECTRIC_CURRENT_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="electric_current_unit"
                                                                        supertypes="named_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 1.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="global_unit_assigned_context"
                                                                        supertypes="representation_context">
                                                                        <explicit
                                                                          name="units">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="unit"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="length_measure_with_unit"
                                                                        supertypes="measure_with_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LENGTH_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="length_unit"
                                                                        supertypes="named_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(SELF\named_unit.dimensions.length_exponent = 1.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="luminous_intensity_measure_with_unit"
                                                                        supertypes="measure_with_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LUMINOUS_INTENSITY_UNIT' IN TYPEOF(SELF\measure_with_unit.unit_component)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="luminous_intensity_unit"
                                                                        supertypes="named_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 1.0)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="mass_measure_with_unit"
                                                                        supertypes="measure_with_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MASS_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="mass_unit"
                                                                        supertypes="named_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 1.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="measure_with_unit"
                                                                        super.expression="(ONEOF (length_measure_with_unit, mass_measure_with_unit, time_measure_with_unit, electric_current_measure_with_unit, thermodynamic_temperature_measure_with_unit, celsius_temperature_measure_with_unit, amount_of_substance_measure_with_unit, luminous_intensity_measure_with_unit, plane_angle_measure_with_unit, solid_angle_measure_with_unit, area_measure_with_unit, volume_measure_with_unit, ratio_measure_with_unit))">
                                                                        <explicit
                                                                          name="value_component">
                                                                          <typename
                                                                            name="measure_value"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="unit_component">
                                                                          <typename
                                                                            name="unit"/>
                                                                        </explicit>
                                                                        <where
                                                                          label="WR1"
                                                                          expression="valid_units (SELF)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="named_unit"
                                                                        super.expression="(ONEOF (si_unit, conversion_based_unit, context_dependent_unit) ANDOR ONEOF (length_unit, mass_unit, time_unit, electric_current_unit, thermodynamic_temperature_unit, amount_of_substance_unit, luminous_intensity_unit, plane_angle_unit, solid_angle_unit, area_unit, volume_unit, ratio_unit))">
                                                                        <explicit
                                                                          name="dimensions">
                                                                          <typename
                                                                            name="dimensional_exponents"/>
                                                                        </explicit>
                                                                      </entity>

                                                                      <entity
                                                                        name="plane_angle_measure_with_unit"
                                                                        supertypes="measure_with_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLANE_ANGLE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="plane_angle_unit"
                                                                        supertypes="named_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="ratio_measure_with_unit"
                                                                        supertypes="measure_with_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.RATIO_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="ratio_unit"
                                                                        supertypes="named_unit">
                                                                        <where
                                                                          label="WR1"
                                                                          expression="(SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                        </where>
                                                                      </entity>

                                                                      <entity
                                                                        name="si_unit"
                                                                        supertypes="named_unit">
                                                                        <explicit
                                                                          name="prefix"
                                                                          optional="YES">
                                                                          <typename
                                                                            name="si_prefix"/>
                                                                        </explicit>
                                                                        <explicit
                                                                          name="name">
                                                                          <typename
                                                                            name="si_unit_name"/>
                                                                        </explicit>
                                                                        <derived
                                                                          name="dimensions"
                                                                          expression="dimensions_for_si_unit (name)">
                                                                          <typename
                                                                            name="dimensional_exponents"/>
                                                                          <redeclaration
                                                                            entity-ref="named_unit"/>
                                                                          </derived>
                                                                        </entity>

                                                                        <entity
                                                                          name="solid_angle_measure_with_unit"
                                                                          supertypes="measure_with_unit">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SOLID_ANGLE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="solid_angle_unit"
                                                                          supertypes="named_unit">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="thermodynamic_temperature_measure_with_unit"
                                                                          supertypes="measure_with_unit">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.THERMODYNAMIC_TEMPERATURE_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="thermodynamic_temperature_unit"
                                                                          supertypes="named_unit">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 0.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 1.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="time_measure_with_unit"
                                                                          supertypes="measure_with_unit">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TIME_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="time_unit"
                                                                          supertypes="named_unit">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SELF\named_unit.dimensions.length_exponent = 0.0) AND (SELF\named_unit.dimensions.mass_exponent = 0.0) AND (SELF\named_unit.dimensions.time_exponent = 1.0) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.0) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.0) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.0) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="volume_measure_with_unit"
                                                                          supertypes="measure_with_unit">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VOLUME_UNIT' IN TYPEOF (SELF\measure_with_unit.unit_component)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="volume_unit"
                                                                          supertypes="named_unit">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SELF\named_unit.dimensions.length_exponent = 3.000000) AND (SELF\named_unit.dimensions.mass_exponent = 0.000000) AND (SELF\named_unit.dimensions.time_exponent = 0.000000) AND (SELF\named_unit.dimensions.electric_current_exponent = 0.000000) AND (SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 0.000000) AND (SELF\named_unit.dimensions.amount_of_substance_exponent = 0.000000) AND (SELF\named_unit.dimensions.luminous_intensity_exponent = 0.000000)">
                                                                          </where>
                                                                        </entity>

                                                                        <function
                                                                          name="derive_dimensional_exponents">
                                                                          <parameter
                                                                            name="x">
                                                                            <typename
                                                                              name="unit"/>
                                                                          </parameter>
                                                                          <typename
                                                                            name="dimensional_exponents"/>
                                                                          <algorithm>
LOCAL
result : dimensional_exponents := dimensional_exponents(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0);
END_LOCAL;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DERIVED_UNIT' IN TYPEOF(x) THEN
REPEAT i := LOINDEX(x.elements) TO HIINDEX(x.elements);
result.length_exponent := result.length_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.length_exponent);
result.mass_exponent := result.mass_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.mass_exponent);
result.time_exponent := result.time_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.time_exponent);
result.electric_current_exponent := result.electric_current_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.electric_current_exponent);
result.thermodynamic_temperature_exponent := result.thermodynamic_temperature_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.thermodynamic_temperature_exponent);
result.amount_of_substance_exponent := result.amount_of_substance_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.amount_of_substance_exponent);
result.luminous_intensity_exponent := result.luminous_intensity_exponent + (x.elements[i].exponent * x.elements[i].unit.dimensions.luminous_intensity_exponent);
END_REPEAT;
ELSE
result := x.dimensions;
END_IF;
RETURN (result);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="dimensions_for_si_unit">
                                                                          <parameter
                                                                            name="n">
                                                                            <typename
                                                                              name="si_unit_name"/>
                                                                          </parameter>
                                                                          <typename
                                                                            name="dimensional_exponents"/>
                                                                          <algorithm>
CASE n OF
metre : RETURN (dimensional_exponents
(1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0));
gram : RETURN (dimensional_exponents
(0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0));
second : RETURN (dimensional_exponents
(0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0));
ampere : RETURN (dimensional_exponents
(0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0));
kelvin : RETURN (dimensional_exponents
(0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0));
mole : RETURN (dimensional_exponents
(0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0));
candela : RETURN (dimensional_exponents
(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0));
radian : RETURN (dimensional_exponents
(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0));
steradian : RETURN (dimensional_exponents
(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0));
hertz : RETURN (dimensional_exponents
(0.0, 0.0, -1.0, 0.0, 0.0, 0.0, 0.0));
newton : RETURN (dimensional_exponents
(1.0, 1.0, -2.0, 0.0, 0.0, 0.0, 0.0));
pascal : RETURN (dimensional_exponents
(-1.0, 1.0, -2.0, 0.0, 0.0, 0.0, 0.0));
joule : RETURN (dimensional_exponents
(2.0, 1.0, -2.0, 0.0, 0.0, 0.0, 0.0));
watt : RETURN (dimensional_exponents
(2.0, 1.0, -3.0, 0.0, 0.0, 0.0, 0.0));
coulomb : RETURN (dimensional_exponents
(0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0));
volt : RETURN (dimensional_exponents
(2.0, 1.0, -3.0, -1.0, 0.0, 0.0, 0.0));
farad : RETURN (dimensional_exponents
(-2.0, -1.0, 4.0, 1.0, 0.0, 0.0, 0.0));
ohm : RETURN (dimensional_exponents
(2.0, 1.0, -3.0, -2.0, 0.0, 0.0, 0.0));
siemens : RETURN (dimensional_exponents
(-2.0, -1.0, 3.0, 2.0, 0.0, 0.0, 0.0));
weber : RETURN (dimensional_exponents
(2.0, 1.0, -2.0, -1.0, 0.0, 0.0, 0.0));
tesla : RETURN (dimensional_exponents
(0.0, 1.0, -2.0, -1.0, 0.0, 0.0, 0.0));
henry : RETURN (dimensional_exponents
(2.0, 1.0, -2.0, -2.0, 0.0, 0.0, 0.0));
degree_Celsius : RETURN (dimensional_exponents
(0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0));
lumen : RETURN (dimensional_exponents
(0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0));
lux : RETURN (dimensional_exponents
(-2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0));
becquerel : RETURN (dimensional_exponents
(0.0, 0.0, -1.0, 0.0, 0.0, 0.0, 0.0));
gray : RETURN (dimensional_exponents
(2.0, 0.0, -2.0, 0.0, 0.0, 0.0, 0.0));
sievert : RETURN (dimensional_exponents
(2.0, 0.0, -2.0, 0.0, 0.0, 0.0, 0.0));
OTHERWISE : RETURN (?);
END_CASE;
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="valid_units">
                                                                          <parameter
                                                                            name="m">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LENGTH_MEASURE' IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MASS_MEASURE' IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TIME_MEASURE' IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ELECTRIC_CURRENT_MEASURE'
IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.THERMODYNAMIC_TEMPERATURE_MEASURE'
IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CELSIUS_TEMPERATURE_MEASURE'
IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AMOUNT_OF_SUBSTANCE_MEASURE'
IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.LUMINOUS_INTENSITY_MEASURE'
IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLANE_ANGLE_MEASURE' IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SOLID_ANGLE_MEASURE' IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AREA_MEASURE' IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (2.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VOLUME_MEASURE' IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (3.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.RATIO_MEASURE' IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_LENGTH_MEASURE'
IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_PLANE_ANGLE_MEASURE'
IN TYPEOF (m.value_component) THEN
IF derive_dimensional_exponents (m.unit_component) &lt;&gt;
dimensional_exponents (0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0) THEN
RETURN (FALSE);
END_IF;
END_IF;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <type name="person_organization_select">
                                                                          <select
                                                                            selectitems="organization person person_and_organization">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="address">
                                                                          <explicit
                                                                            name="internal_location"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="street_number"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="street"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="postal_box"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="town"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="region"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="postal_code"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="country"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="facsimile_number"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="telephone_number"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="electronic_mail_address"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="telex_number"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="name"
                                                                            expression="get_name_value(SELF)">
                                                                            <typename
                                                                              name="label"/>
                                                                          </derived>
                                                                          <derived
                                                                            name="url"
                                                                            expression="get_id_value(SELF)">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="EXISTS(internal_location) OR EXISTS(street_number) OR EXISTS(street) OR EXISTS(postal_box) OR EXISTS(town) OR EXISTS(region) OR EXISTS(postal_code) OR EXISTS(country) OR EXISTS(facsimile_number) OR EXISTS(telephone_number) OR EXISTS(electronic_mail_address) OR EXISTS(telex_number)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="organization">
                                                                          <explicit
                                                                            name="id"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="organization_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_organization">
                                                                            <typename
                                                                              name="organization"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_organization">
                                                                            <typename
                                                                              name="organization"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="organization_role">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="description"
                                                                            expression="get_description_value(SELF)">
                                                                            <typename
                                                                              name="text"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="organization_type">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="organization_type_relationship">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_organization_type">
                                                                            <typename
                                                                              name="organization_type"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_organization_type">
                                                                            <typename
                                                                              name="organization_type"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="organizational_address"
                                                                          supertypes="address">
                                                                          <explicit
                                                                            name="organizations">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="organization"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="organizational_project">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="responsible_organizations">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="organization"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="id"
                                                                            expression="get_id_value (SELF)">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="organizational_project_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_organizational_project">
                                                                            <typename
                                                                              name="organizational_project"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_organizational_project">
                                                                            <typename
                                                                              name="organizational_project"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="person">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="last_name"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="first_name"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="middle_names"
                                                                            optional="YES">
                                                                            <aggregate
                                                                              type="LIST"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="prefix_titles"
                                                                            optional="YES">
                                                                            <aggregate
                                                                              type="LIST"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="suffix_titles"
                                                                            optional="YES">
                                                                            <aggregate
                                                                              type="LIST"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="EXISTS(last_name) OR EXISTS(first_name)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="person_and_organization">
                                                                          <explicit
                                                                            name="the_person">
                                                                            <typename
                                                                              name="person"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="the_organization">
                                                                            <typename
                                                                              name="organization"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="name"
                                                                            expression="get_name_value (SELF)">
                                                                            <typename
                                                                              name="label"/>
                                                                          </derived>
                                                                          <derived
                                                                            name="description"
                                                                            expression="get_description_value(SELF)">
                                                                            <typename
                                                                              name="text"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="person_and_organization_role">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="description"
                                                                            expression="get_description_value (SELF)">
                                                                            <typename
                                                                              name="text"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="person_role">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="description"
                                                                            expression="get_description_value (SELF)">
                                                                            <typename
                                                                              name="text"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="person_type">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="person_type_definition">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="formation">
                                                                            <typename
                                                                              name="person_type_definition_formation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="person_type_definition_formation">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="of_person_type">
                                                                            <typename
                                                                              name="person_type"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="person_type_definition_relationship">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_person_type_definition">
                                                                            <typename
                                                                              name="person_type_definition"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_person_type_definition">
                                                                            <typename
                                                                              name="person_type_definition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="personal_address"
                                                                          supertypes="address">
                                                                          <explicit
                                                                            name="people">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="person"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="position_in_organization">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="position_in_organization_relationship">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_position_in_organization">
                                                                            <typename
                                                                              name="position_in_organization"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_position_in_organization">
                                                                            <typename
                                                                              name="position_in_organization"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="position_in_organization_type">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <function
                                                                          name="acyclic_organization_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="organization_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="organization"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF organization_relationship;
END_LOCAL;
IF relation.relating_organization IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(org &lt;* bag_to_set(USEDIN(relation.relating_organization, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ORGANIZATION_RELATIONSHIP.' + 'RELATED_ORGANIZATION')) | specific_relation IN TYPEOF(org));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_organization_relationship(x[i], relatives + relation.relating_organization, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_organization_type_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="organization_type_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="organization_type"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF organization_type_relationship;
END_LOCAL;
IF relation.relating_organization_type IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(orgtyp &lt;* bag_to_set(USEDIN(relation.relating_organization_type, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ORGANIZATION_TYPE_RELATIONSHIP.' + 'RELATED_ORGANIZATION_TYPE')) | specific_relation IN TYPEOF(orgtyp));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_organization_type_relationship(x[i], relatives + relation.relating_organization_type, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_organizational_project_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="organizational_project_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="organizational_project"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF organizational_project_relationship;
END_LOCAL;
IF relation.relating_organizational_project IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(op &lt;* bag_to_set(USEDIN(relation.relating_organizational_project, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ORGANIZATIONAL_PROJECT_RELATIONSHIP.' + 'RELATED_ORGANIZATIONAL_PROJECT')) | specific_relation IN TYPEOF(op));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_organizational_project_relationship(x[i], relatives + relation.relating_organizational_project, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_person_type_definition_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="person_type_definition_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="person_type_definition"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF person_type_definition_relationship;
END_LOCAL;
IF relation.relating_person_type_definition IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(ptdef &lt;* bag_to_set(USEDIN(relation.relating_person_type_definition, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PERSON_TYPE_DEFINITION_RELATIONSHIP.' + 'RELATED_PERSON_TYPE_DEFINITION')) | specific_relation IN TYPEOF(ptdef));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_person_type_definition_relationship(x[i], relatives + relation.relating_person_type_definition, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_position_in_organization_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="position_in_organization_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="position_in_organization"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF position_in_organization_relationship;
END_LOCAL;
IF relation.relating_position_in_organization IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(piorg &lt;* bag_to_set(USEDIN(relation.relating_position_in_organization, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'POSITION_IN_ORGANIZATION_RELATIONSHIP.' + 'RELATED_POSITION_IN_ORGANIZATION')) | specific_relation IN TYPEOF(piorg));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_position_in_organization_relationship(x[i], relatives + relation.relating_position_in_organization, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <type name="approximation_method">
                                                                          <enumeration
                                                                            items="chordal_deviation chordal_length">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="box_characteristic_select">
                                                                          <select
                                                                            selectitems="box_height box_width box_slant_angle box_rotate_angle">
                                                                          </select>
                                                                        </type>

                                                                        <type name="box_height">
                                                                          <typename
                                                                            name="positive_ratio_measure"/>
                                                                        </type>

                                                                        <type name="box_rotate_angle">
                                                                          <typename
                                                                            name="plane_angle_measure"/>
                                                                        </type>

                                                                        <type name="box_slant_angle">
                                                                          <typename
                                                                            name="plane_angle_measure"/>
                                                                        </type>

                                                                        <type name="box_width">
                                                                          <typename
                                                                            name="positive_ratio_measure"/>
                                                                        </type>

                                                                        <type name="character_spacing_select">
                                                                          <select
                                                                            selectitems="length_measure ratio_measure measure_with_unit descriptive_measure pre_defined_character_spacing">
                                                                          </select>
                                                                        </type>

                                                                        <type name="character_style_select">
                                                                          <select
                                                                            selectitems="character_glyph_style_stroke character_glyph_style_outline text_style_for_defined_font">
                                                                          </select>
                                                                        </type>

                                                                        <type name="curve_font_or_scaled_curve_font_select">
                                                                          <select
                                                                            selectitems="curve_style_font_select curve_style_font_and_scaling">
                                                                          </select>
                                                                        </type>

                                                                        <type name="curve_or_annotation_curve_occurrence">
                                                                          <select
                                                                            selectitems="curve annotation_curve_occurrence">
                                                                          </select>
                                                                        </type>

                                                                        <type name="curve_or_render">
                                                                          <select
                                                                            selectitems="curve_style curve_style_rendering">
                                                                          </select>
                                                                        </type>

                                                                        <type name="curve_style_font_select">
                                                                          <select
                                                                            selectitems="curve_style_font pre_defined_curve_font externally_defined_curve_font">
                                                                          </select>
                                                                        </type>

                                                                        <type name="curve_tolerance_deviation">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </type>

                                                                        <type name="curve_tolerance_parameter">
                                                                          <builtintype
                                                                            type="REAL">
                                                                          </builtintype>
                                                                        </type>

                                                                        <type name="direction_count_select">
                                                                          <select
                                                                            selectitems="u_direction_count v_direction_count">
                                                                          </select>
                                                                        </type>

                                                                        <type name="fill_style_select">
                                                                          <select
                                                                            selectitems="fill_area_style_colour pre_defined_tile_style externally_defined_tile_style fill_area_style_tiles pre_defined_hatch_style externally_defined_hatch_style fill_area_style_hatching">
                                                                          </select>
                                                                        </type>

                                                                        <type name="fill_area_style_tile_shape_select">
                                                                          <select
                                                                            selectitems="fill_area_style_tile_curve_with_style fill_area_style_tile_coloured_region fill_area_style_tile_symbol_with_style pre_defined_tile externally_defined_tile">
                                                                          </select>
                                                                        </type>

                                                                        <type name="hiding_or_blanking_select">
                                                                          <select
                                                                            selectitems="presentation_area presentation_view product_data_representation_view annotation_fill_area area_dependent_annotation_representation view_dependent_annotation_representation annotation_text_with_delineation character_glyph_symbol_stroke character_glyph_symbol_outline symbol_representation_with_blanking_box">
                                                                          </select>
                                                                        </type>

                                                                        <type name="invisibility_context">
                                                                          <select
                                                                            selectitems="presentation_layer_usage presentation_representation presentation_set">
                                                                          </select>
                                                                        </type>

                                                                        <type name="invisible_item">
                                                                          <select
                                                                            selectitems="styled_item presentation_layer_assignment representation">
                                                                          </select>
                                                                        </type>

                                                                        <type name="marker_select">
                                                                          <select
                                                                            selectitems="marker_type pre_defined_marker">
                                                                          </select>
                                                                        </type>

                                                                        <type name="marker_type">
                                                                          <enumeration
                                                                            items="dot x plus asterisk ring square triangle">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="null_style">
                                                                          <enumeration
                                                                            items="null">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="presentation_style_select">
                                                                          <select
                                                                            selectitems="pre_defined_presentation_style point_style curve_style surface_style_usage symbol_style fill_area_style text_style approximation_tolerance externally_defined_style null_style">
                                                                          </select>
                                                                        </type>

                                                                        <type name="product_or_presentation_space">
                                                                          <enumeration
                                                                            items="product_shape_space presentation_area_space">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="rendering_properties_select">
                                                                          <select
                                                                            selectitems="surface_style_reflectance_ambient surface_style_transparent">
                                                                          </select>
                                                                        </type>

                                                                        <type name="shading_curve_method">
                                                                          <enumeration
                                                                            items="constant_colour linear_colour">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="shading_surface_method">
                                                                          <enumeration
                                                                            items="constant_shading colour_shading dot_shading normal_shading">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="size_select">
                                                                          <select
                                                                            selectitems="positive_length_measure measure_with_unit descriptive_measure pre_defined_size">
                                                                          </select>
                                                                        </type>

                                                                        <type name="squared_or_rounded">
                                                                          <enumeration
                                                                            items="squared rounded">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="style_context_select">
                                                                          <select
                                                                            selectitems="group presentation_layer_assignment representation representation_item presentation_set">
                                                                          </select>
                                                                        </type>

                                                                        <type name="surface_side">
                                                                          <enumeration
                                                                            items="positive negative both">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="surface_side_style_select">
                                                                          <select
                                                                            selectitems="surface_side_style pre_defined_surface_side_style">
                                                                          </select>
                                                                        </type>

                                                                        <type name="surface_style_element_select">
                                                                          <select
                                                                            selectitems="surface_style_fill_area surface_style_boundary surface_style_silhouette surface_style_segmentation_curve surface_style_control_grid surface_style_parameter_line surface_style_rendering">
                                                                          </select>
                                                                        </type>

                                                                        <type name="surface_tolerance_deviation">
                                                                          <typename
                                                                            name="positive_length_measure"/>
                                                                        </type>

                                                                        <type name="surface_tolerance_parameter">
                                                                          <builtintype
                                                                            type="REAL">
                                                                          </builtintype>
                                                                        </type>

                                                                        <type name="symbol_style_select">
                                                                          <select
                                                                            selectitems="symbol_element_style symbol_colour">
                                                                          </select>
                                                                        </type>

                                                                        <type name="text_justification">
                                                                          <typename
                                                                            name="label"/>
                                                                        </type>

                                                                        <type name="tolerance_deviation_select">
                                                                          <select
                                                                            selectitems="curve_tolerance_deviation surface_tolerance_deviation">
                                                                          </select>
                                                                        </type>

                                                                        <type name="tolerance_parameter_select">
                                                                          <select
                                                                            selectitems="curve_tolerance_parameter surface_tolerance_parameter">
                                                                          </select>
                                                                        </type>

                                                                        <type name="tolerance_select">
                                                                          <select
                                                                            selectitems="approximation_tolerance_deviation approximation_tolerance_parameter">
                                                                          </select>
                                                                        </type>

                                                                        <type name="u_direction_count">
                                                                          <builtintype
                                                                            type="INTEGER">
                                                                          </builtintype>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF &gt; 1">
                                                                          </where>
                                                                        </type>

                                                                        <type name="v_direction_count">
                                                                          <builtintype
                                                                            type="INTEGER">
                                                                          </builtintype>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF &gt; 1">
                                                                          </where>
                                                                        </type>

                                                                        <entity
                                                                          name="approximation_tolerance">
                                                                          <explicit
                                                                            name="tolerance">
                                                                            <typename
                                                                              name="tolerance_select"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="approximation_tolerance_deviation">
                                                                          <explicit
                                                                            name="tessellation_type">
                                                                            <typename
                                                                              name="approximation_method"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="tolerances">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="2"/>
                                                                            <typename
                                                                              name="tolerance_deviation_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="definition_space">
                                                                            <typename
                                                                              name="product_or_presentation_space"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(HIINDEX(SELF.tolerances) = 1) XOR(TYPEOF(SELF.tolerances[1]) &lt;&gt; TYPEOF(SELF.tolerances[2]))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="approximation_tolerance_parameter">
                                                                          <explicit
                                                                            name="tolerances">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="2"/>
                                                                            <typename
                                                                              name="tolerance_parameter_select"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(HIINDEX (SELF.tolerances) = 1) XOR(TYPEOF (SELF.tolerances[1]) &lt;&gt; TYPEOF (SELF.tolerances[2]))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="character_glyph_style_outline">
                                                                          <explicit
                                                                            name="outline_style">
                                                                            <typename
                                                                              name="curve_style"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="character_glyph_style_outline_with_characteristics"
                                                                          supertypes="character_glyph_style_outline">
                                                                          <explicit
                                                                            name="characteristics">
                                                                            <typename
                                                                              name="fill_area_style"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="character_glyph_style_stroke">
                                                                          <explicit
                                                                            name="stroke_style">
                                                                            <typename
                                                                              name="curve_style"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="context_dependent_invisibility"
                                                                          supertypes="invisibility">
                                                                          <explicit
                                                                            name="presentation_context">
                                                                            <typename
                                                                              name="invisibility_context"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="context_dependent_over_riding_styled_item"
                                                                          supertypes="over_riding_styled_item">
                                                                          <explicit
                                                                            name="style_context">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="2"/>
                                                                            <typename
                                                                              name="style_context_select"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SIZEOF(QUERY(sc &lt;* SELF.style_context |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION' IN TYPEOF(sc))) = 1) AND(SIZEOF(QUERY(sc &lt;* SELF.style_context |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION_ITEM' IN TYPEOF(sc))) = 1)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="curve_font">
                                                                            <typename
                                                                              name="curve_font_or_scaled_curve_font_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="curve_width">
                                                                            <typename
                                                                              name="size_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="curve_colour">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style_curve_pattern"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="pattern">
                                                                            <typename
                                                                              name="annotation_curve_occurrence"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="pattern_length">
                                                                            <typename
                                                                              name="positive_length_measure"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style_curve_pattern_set"
                                                                          supertypes="curve_style_font geometric_representation_item">
                                                                          <explicit
                                                                            name="pattern_set">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="curve_style_curve_pattern"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style_font">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="pattern_list">
                                                                            <aggregate
                                                                              type="LIST"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="curve_style_font_pattern"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style_font_and_scaling">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="curve_font">
                                                                            <typename
                                                                              name="curve_style_font_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="curve_font_scaling">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style_font_pattern">
                                                                          <explicit
                                                                            name="visible_segment_length">
                                                                            <typename
                                                                              name="positive_length_measure"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="invisible_segment_length">
                                                                            <typename
                                                                              name="positive_length_measure"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style_rendering">
                                                                          <explicit
                                                                            name="rendering_method">
                                                                            <typename
                                                                              name="shading_curve_method"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="rendering_properties">
                                                                            <typename
                                                                              name="surface_rendering_properties"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style_wide"
                                                                          supertypes="curve_style_font">
                                                                          <explicit
                                                                            name="interior_style">
                                                                            <typename
                                                                              name="fill_area_style"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style_with_ends_and_corners"
                                                                          supertypes="curve_style">
                                                                          <explicit
                                                                            name="curve_ends">
                                                                            <typename
                                                                              name="squared_or_rounded"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="curve_corners">
                                                                            <typename
                                                                              name="squared_or_rounded"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="curve_style_with_extension"
                                                                          supertypes="curve_style">
                                                                          <explicit
                                                                            name="curve_extensions">
                                                                            <typename
                                                                              name="length_measure"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="draughting_pre_defined_curve_font"
                                                                          supertypes="pre_defined_curve_font">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF.name IN['continuous','chain','chain double dash','dashed','dotted']">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="externally_defined_curve_font"
                                                                          supertypes="externally_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="externally_defined_hatch_style"
                                                                          supertypes="externally_defined_item geometric_representation_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="externally_defined_style"
                                                                          supertypes="externally_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="externally_defined_tile"
                                                                          supertypes="externally_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="externally_defined_tile_style"
                                                                          supertypes="externally_defined_item geometric_representation_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="fill_area_style">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="fill_styles">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="fill_style_select"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(QUERY(fill_style &lt;* SELF.fill_styles |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'FILL_AREA_STYLE_COLOUR' IN TYPEOF(fill_style))) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="fill_area_style_colour">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="fill_colour">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="fill_area_style_hatching"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="hatch_line_appearance">
                                                                            <typename
                                                                              name="curve_style"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="start_of_next_hatch_line">
                                                                            <typename
                                                                              name="one_direction_repeat_factor"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="point_of_reference_hatch_line">
                                                                            <typename
                                                                              name="cartesian_point"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="pattern_start">
                                                                            <typename
                                                                              name="cartesian_point"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="hatch_line_angle">
                                                                            <typename
                                                                              name="plane_angle_measure"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="fill_area_style_tile_coloured_region"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="closed_curve">
                                                                            <typename
                                                                              name="curve_or_annotation_curve_occurrence"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="region_colour">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="fill_area_style_tile_curve_with_style"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="styled_curve">
                                                                            <typename
                                                                              name="annotation_curve_occurrence"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="fill_area_style_tile_symbol_with_style"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="symbol">
                                                                            <typename
                                                                              name="annotation_symbol_occurrence"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="fill_area_style_tiles"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="tiling_pattern">
                                                                            <typename
                                                                              name="two_direction_repeat_factor"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="tiles">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="fill_area_style_tile_shape_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="tiling_scale">
                                                                            <typename
                                                                              name="positive_ratio_measure"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="invisibility">
                                                                          <explicit
                                                                            name="invisible_items">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="invisible_item"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="occlusion_precedence">
                                                                          <explicit
                                                                            name="higher_precedence">
                                                                            <typename
                                                                              name="hiding_or_blanking_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="lower_precedence">
                                                                            <typename
                                                                              name="hiding_or_blanking_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="occlusion_context">
                                                                            <typename
                                                                              name="representation"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="acyclic_occlusion_precedence (SELF, [SELF.lower_precedence])">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="one_direction_repeat_factor"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="repeat_factor">
                                                                            <typename
                                                                              name="vector"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="over_riding_styled_item"
                                                                          supertypes="styled_item">
                                                                          <explicit
                                                                            name="over_ridden_style">
                                                                            <typename
                                                                              name="styled_item"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="point_style">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="marker">
                                                                            <typename
                                                                              name="marker_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="marker_size">
                                                                            <typename
                                                                              name="size_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="marker_colour">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_character_spacing"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_curve_font"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_hatch_style"
                                                                          supertypes="pre_defined_item geometric_representation_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_marker"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_presentation_style"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_size"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_surface_side_style"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_tile"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_tile_style"
                                                                          supertypes="pre_defined_item geometric_representation_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_style_assignment">
                                                                          <explicit
                                                                            name="styles">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="presentation_style_select"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (style1 &lt;* SELF.styles | NOT (SIZEOF (QUERY (style2 &lt;* (SELF.styles - style1) | NOT ((TYPEOF (style1) &lt;&gt; TYPEOF (style2)) OR(SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'SURFACE_STYLE_USAGE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'EXTERNALLY_DEFINED_STYLE'] * TYPEOF (style1)) = 1)))) = 0))) = 0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (QUERY (style1 &lt;* SELF.styles |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_STYLE_USAGE' IN TYPEOF(style1))) &lt;= 2">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_style_by_context"
                                                                          supertypes="presentation_style_assignment">
                                                                          <explicit
                                                                            name="style_context">
                                                                            <typename
                                                                              name="style_context_select"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="symbol_colour">
                                                                          <explicit
                                                                            name="colour_of_symbol">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="symbol_element_style">
                                                                          <explicit
                                                                            name="style_of_symbol">
                                                                            <typename
                                                                              name="presentation_style_assignment"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (style &lt;* SELF.style_of_symbol.styles |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMBOL_STYLE' IN TYPEOF (style))) = 0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRESENTATION_STYLE_BY_CONTEXT' IN TYPEOF (SELF.style_of_symbol))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="symbol_style">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="style_of_symbol">
                                                                            <typename
                                                                              name="symbol_style_select"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="styled_item"
                                                                          supertypes="representation_item">
                                                                          <explicit
                                                                            name="styles">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="presentation_style_assignment"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="item">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SIZEOF(SELF.styles) = 1) XOR(SIZEOF(QUERY(pres_style &lt;* SELF.styles | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRESENTATION_STYLE_BY_CONTEXT' IN TYPEOF(pres_style)))) = 0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_rendering_properties">
                                                                          <explicit
                                                                            name="rendered_colour">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_side_style">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="styles">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="7"/>
                                                                            <typename
                                                                              name="surface_style_element_select"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(QUERY(style1 &lt;* SELF.styles | SIZEOF(QUERY(style2 &lt;* SELF.styles - style1 | TYPEOF(style1) = TYPEOF(style2))) &gt; 0)) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_boundary">
                                                                          <explicit
                                                                            name="style_of_boundary">
                                                                            <typename
                                                                              name="curve_or_render"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_control_grid">
                                                                          <explicit
                                                                            name="style_of_control_grid">
                                                                            <typename
                                                                              name="curve_or_render"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_fill_area">
                                                                          <explicit
                                                                            name="fill_area">
                                                                            <typename
                                                                              name="fill_area_style"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_parameter_line">
                                                                          <explicit
                                                                            name="style_of_parameter_lines">
                                                                            <typename
                                                                              name="curve_or_render"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="direction_counts">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="2"/>
                                                                            <typename
                                                                              name="direction_count_select"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(HIINDEX(SELF.direction_counts) = 1) XOR(TYPEOF(SELF.direction_counts[1]) &lt;&gt; TYPEOF(SELF.direction_counts[2]))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_reflectance_ambient">
                                                                          <explicit
                                                                            name="ambient_reflectance">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_reflectance_ambient_diffuse"
                                                                          supertypes="surface_style_reflectance_ambient">
                                                                          <explicit
                                                                            name="diffuse_reflectance">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_reflectance_ambient_diffuse_specular"
                                                                          supertypes="surface_style_reflectance_ambient_diffuse">
                                                                          <explicit
                                                                            name="specular_reflectance">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="specular_exponent">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="specular_colour">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_rendering">
                                                                          <explicit
                                                                            name="rendering_method">
                                                                            <typename
                                                                              name="shading_surface_method"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="surface_colour">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_rendering_with_properties"
                                                                          supertypes="surface_style_rendering">
                                                                          <explicit
                                                                            name="properties">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="2"/>
                                                                            <typename
                                                                              name="rendering_properties_select"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(HIINDEX(SELF.properties) = 1) XOR(TYPEOF(SELF.properties[1]) &lt;&gt; TYPEOF(SELF.properties[2]))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_segmentation_curve">
                                                                          <explicit
                                                                            name="style_of_segmentation_curve">
                                                                            <typename
                                                                              name="curve_or_render"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_silhouette">
                                                                          <explicit
                                                                            name="style_of_silhouette">
                                                                            <typename
                                                                              name="curve_or_render"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_transparent">
                                                                          <explicit
                                                                            name="transparency">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="{0.0 &lt;= transparency &lt;= 1.0}">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="surface_style_usage">
                                                                          <explicit
                                                                            name="side">
                                                                            <typename
                                                                              name="surface_side"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="style">
                                                                            <typename
                                                                              name="surface_side_style_select"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_style">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="character_appearance">
                                                                            <typename
                                                                              name="character_style_select"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_style_for_defined_font">
                                                                          <explicit
                                                                            name="text_colour">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_style_with_box_characteristics"
                                                                          supertypes="text_style">
                                                                          <explicit
                                                                            name="characteristics">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="4"/>
                                                                            <typename
                                                                              name="box_characteristic_select"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(QUERY(c1 &lt;* SELF.characteristics | SIZEOF(QUERY(c2 &lt;* SELF.characteristics - c1 | TYPEOF (c1) = TYPEOF (c2))) &gt; 0)) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_style_with_justification"
                                                                          supertypes="text_style">
                                                                          <explicit
                                                                            name="justification">
                                                                            <typename
                                                                              name="text_justification"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_style_with_mirror"
                                                                          supertypes="text_style">
                                                                          <explicit
                                                                            name="mirror_placement">
                                                                            <typename
                                                                              name="axis2_placement"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_style_with_spacing"
                                                                          supertypes="text_style">
                                                                          <explicit
                                                                            name="character_spacing">
                                                                            <typename
                                                                              name="character_spacing_select"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="two_direction_repeat_factor"
                                                                          supertypes="one_direction_repeat_factor">
                                                                          <explicit
                                                                            name="second_repeat_factor">
                                                                            <typename
                                                                              name="vector"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <function
                                                                          name="acyclic_occlusion_precedence">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="occlusion_precedence"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="set_of_lower">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="hiding_or_blanking_select"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF occlusion_precedence;
local_set_of_lower : SET OF hiding_or_blanking_select;
END_LOCAL;
REPEAT i:=1 TO HIINDEX(set_of_lower);
IF relation.higher_precedence :=: set_of_lower[i] THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
x := bag_to_set (USEDIN (relation.higher_precedence,
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+
'OCCLUSION_PRECEDENCE.LOWER_PRECEDENCE'));
local_set_of_lower := set_of_lower + relation.higher_precedence;
IF SIZEOF (x) &gt; 0 THEN
REPEAT i:=1 TO HIINDEX (x);
If NOT acyclic_occlusion_precedence(x[i] ,
local_set_of_lower) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
END_IF;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <type name="defined_glyph_select">
                                                                          <select
                                                                            selectitems="pre_defined_character_glyph externally_defined_character_glyph">
                                                                          </select>
                                                                        </type>

                                                                        <type name="defined_symbol_select">
                                                                          <select
                                                                            selectitems="pre_defined_symbol externally_defined_symbol">
                                                                          </select>
                                                                        </type>

                                                                        <type name="text_alignment">
                                                                          <typename
                                                                            name="label"/>
                                                                        </type>

                                                                        <type name="text_delineation">
                                                                          <typename
                                                                            name="label"/>
                                                                        </type>

                                                                        <type name="text_or_character">
                                                                          <select
                                                                            selectitems="annotation_text annotation_text_character defined_character_glyph composite_text text_literal">
                                                                          </select>
                                                                        </type>

                                                                        <type name="text_path">
                                                                          <enumeration
                                                                            items="left right up down">
                                                                          </enumeration>
                                                                        </type>

                                                                        <entity
                                                                          name="annotation_curve_occurrence"
                                                                          supertypes="annotation_occurrence">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CURVE' IN TYPEOF (SELF\styled_item.item)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_fill_area"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="boundaries">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="curve"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_fill_area_occurrence"
                                                                          supertypes="annotation_occurrence">
                                                                          <explicit
                                                                            name="fill_style_target">
                                                                            <typename
                                                                              name="point"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_FILL_AREA' IN TYPEOF (SELF.item)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_occurrence"
                                                                          super.expression="(ONEOF(annotation_point_occurrence, annotation_curve_occurrence, annotation_fill_area_occurrence, annotation_text_occurrence, annotation_symbol_occurrence))"
                                                                          supertypes="styled_item">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_REPRESENTATION_ITEM' IN TYPEOF (SELF)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_occurrence_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_annotation_occurrence">
                                                                            <typename
                                                                              name="annotation_occurrence"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_annotation_occurrence">
                                                                            <typename
                                                                              name="annotation_occurrence"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_point_occurrence"
                                                                          supertypes="annotation_occurrence">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POINT' IN TYPEOF (SELF\styled_item.item)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_symbol"
                                                                          supertypes="mapped_item">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMBOL_REPRESENTATION_MAP' IN TYPEOF (SELF\mapped_item.mapping_source)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMBOL_TARGET' IN TYPEOF (SELF\mapped_item.mapping_target)">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_REPRESENTATION_ITEM' IN TYPEOF (SELF)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_symbol_occurrence"
                                                                          supertypes="annotation_occurrence">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_SYMBOL','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DEFINED_SYMBOL'] * TYPEOF(SELF\styled_item.item)) &gt; 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_table"
                                                                          supertypes="annotation_symbol">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TABLE_REPRESENTATION' IN TYPEOF (SELF\mapped_item.mapping_source.mapped_representation)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_table_occurrence"
                                                                          supertypes="annotation_symbol_occurrence">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TABLE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DEFINED_TABLE'] * TYPEOF (SELF\styled_item.item)) &gt; 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_text"
                                                                          supertypes="mapped_item">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AXIS2_PLACEMENT' IN TYPEOF(SELF\mapped_item.mapping_target)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TEXT_STRING_REPRESENTATION' IN TYPEOF(SELF\mapped_item.mapping_source.mapped_representation)">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_REPRESENTATION_ITEM' IN TYPEOF(SELF)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_text_character"
                                                                          supertypes="mapped_item">
                                                                          <explicit
                                                                            name="alignment">
                                                                            <typename
                                                                              name="text_alignment"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CHARACTER_GLYPH_SYMBOL' IN TYPEOF (SELF\mapped_item.mapping_source.mapped_representation)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AXIS2_PLACEMENT' IN TYPEOF (SELF\mapped_item.mapping_target)">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_REPRESENTATION_ITEM' IN TYPEOF (SELF)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_text_occurrence"
                                                                          supertypes="annotation_occurrence">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TEXT_LITERAL','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TEXT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TEXT_CHARACTER','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DEFINED_CHARACTER_GLYPH','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPOSITE_TEXT'] * TYPEOF (SELF\styled_item.item)) &gt; 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_text_with_associated_curves"
                                                                          supertypes="annotation_text">
                                                                          <explicit
                                                                            name="associated_curves">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="curve"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_text_with_blanking_box"
                                                                          supertypes="annotation_text">
                                                                          <explicit
                                                                            name="blanking">
                                                                            <typename
                                                                              name="planar_box"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_text_with_delineation"
                                                                          supertypes="annotation_text">
                                                                          <explicit
                                                                            name="delineation">
                                                                            <typename
                                                                              name="text_delineation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="annotation_text_with_extent"
                                                                          supertypes="annotation_text">
                                                                          <explicit
                                                                            name="extent">
                                                                            <typename
                                                                              name="planar_extent"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="composite_text"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="collected_text">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="2"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="text_or_character"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="acyclic_composite_text(SELF, SELF.collected_text)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="composite_text_with_associated_curves"
                                                                          supertypes="composite_text">
                                                                          <explicit
                                                                            name="associated_curves">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="curve"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="composite_text_with_blanking_box"
                                                                          supertypes="composite_text">
                                                                          <explicit
                                                                            name="blanking">
                                                                            <typename
                                                                              name="planar_box"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="composite_text_with_delineation"
                                                                          supertypes="composite_text">
                                                                          <explicit
                                                                            name="delineation">
                                                                            <typename
                                                                              name="text_delineation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="composite_text_with_extent"
                                                                          supertypes="composite_text">
                                                                          <explicit
                                                                            name="extent">
                                                                            <typename
                                                                              name="planar_extent"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="defined_character_glyph"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="definition">
                                                                            <typename
                                                                              name="defined_glyph_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="placement">
                                                                            <typename
                                                                              name="axis2_placement"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="defined_symbol"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="definition">
                                                                            <typename
                                                                              name="defined_symbol_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="target">
                                                                            <typename
                                                                              name="symbol_target"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="defined_table"
                                                                          supertypes="defined_symbol">
                                                                        </entity>

                                                                        <entity
                                                                          name="externally_defined_character_glyph"
                                                                          supertypes="externally_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="externally_defined_symbol"
                                                                          supertypes="externally_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_character_glyph"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_symbol"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="symbol_representation"
                                                                          supertypes="representation">
                                                                        </entity>

                                                                        <entity
                                                                          name="symbol_representation_map"
                                                                          supertypes="representation_map">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMBOL_REPRESENTATION' IN TYPEOF (SELF\representation_map.mapped_representation)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AXIS2_PLACEMENT' IN TYPEOF (SELF\representation_map.mapping_origin)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="symbol_representation_relationship"
                                                                          supertypes="representation_relationship_with_transformation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="acyclic_symbol_representation_relationship (SELF,[SELF\representation_relationship. rep_2])">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMBOL_REPRESENTATION' IN TYPEOF (SELF\representation_relationship.rep_1)">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMBOL_REPRESENTATION'IN TYPEOF (SELF\representation_relationship.rep_2)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="symbol_representation_with_blanking_box"
                                                                          supertypes="symbol_representation">
                                                                          <explicit
                                                                            name="blanking">
                                                                            <typename
                                                                              name="planar_box"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="item_in_context (SELF.blanking, SELF\representation.context_of_items)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="symbol_target"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="placement">
                                                                            <typename
                                                                              name="axis2_placement"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="x_scale">
                                                                            <typename
                                                                              name="positive_ratio_measure"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="y_scale">
                                                                            <typename
                                                                              name="positive_ratio_measure"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="table_representation"
                                                                          supertypes="symbol_representation">
                                                                        </entity>

                                                                        <entity
                                                                          name="table_record_field_representation"
                                                                          supertypes="symbol_representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION_RELATIONSHIP.REP_2')) &gt; 0) OR(SIZEOF(QUERY(map_item &lt;* USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION_MAP.'+'MAPPED_REPRESENTATION') | SIZEOF(QUERY(mi &lt;* USEDIN(map_item, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'MAPPED_ITEM.'+'MAPPING_SOURCE') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'TABLE_RECORD_REPRESENTATION' IN TYPEOF (using_representations (mi)))) &gt; 0))&gt; 0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="table_record_field_representation_with_clipping_box"
                                                                          supertypes="table_record_field_representation">
                                                                          <explicit
                                                                            name="clipping_box">
                                                                            <typename
                                                                              name="planar_box"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="item_in_context (SELF.clipping_box, SELF\representation.context_of_items)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="table_record_representation"
                                                                          supertypes="symbol_representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SIZEOF(USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION_RELATIONSHIP.REP_2')) &gt; 0) OR(SIZEOF(QUERY(map_item &lt;* USEDIN(SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'REPRESENTATION_MAP.'+'MAPPED_REPRESENTATION') | SIZEOF(QUERY(mi &lt;* USEDIN(map_item, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'MAPPED_ITEM.'+'MAPPING_SOURCE') |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'TABLE_REPRESENTATION' IN TYPEOF (using_representations (mi)))) &gt; 0))&gt; 0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="table_representation_relationship"
                                                                          supertypes="symbol_representation_relationship">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TABLE_RECORD_REPRESENTATION' IN TYPEOF (SELF\representation_relationship.rep_1)) XOR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TABLE_RECORD_FIELD_REPRESENTATION' IN TYPEOF (SELF\representation_relationship.rep_2))">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TABLE_REPRESENTATION' IN TYPEOF (SELF\representation_relationship.rep_1)) XOR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TABLE_RECORD_REPRESENTATION' IN TYPEOF (SELF\representation_relationship.rep_2))">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TABLE_RECORD_FIELD_REPRESENTATION' IN TYPEOF (SELF\representation_relationship.rep_1)) XOR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TABLE_RECORD_FIELD_REPRESENTATION' IN TYPEOF (SELF\representation_relationship.rep_2))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="table_text_relationship"
                                                                          supertypes="annotation_occurrence_relationship">
                                                                          <explicit
                                                                            name="field">
                                                                            <typename
                                                                              name="table_record_field_representation"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TABLE_OCCURRENCE' IN TYPEOF (SELF\annotation_occurrence_relationship. relating_annotation_occurrence)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TABLE' IN TYPEOF (SELF\annotation_occurrence_relationship. relating_annotation_occurrence\styled_item.item)">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TEXT_OCCURRENCE' IN TYPEOF (SELF\annotation_occurrence_relationship. related_annotation_occurrence)">
                                                                          </where>
                                                                          <where
                                                                            label="WR4"
                                                                            expression="field_in_table (SELF.field, SELF\annotation_occurrence_relationship. relating_annotation_occurrence)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_literal"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="literal">
                                                                            <typename
                                                                              name="presentable_text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="placement">
                                                                            <typename
                                                                              name="axis2_placement"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="alignment">
                                                                            <typename
                                                                              name="text_alignment"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="path">
                                                                            <typename
                                                                              name="text_path"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="font">
                                                                            <typename
                                                                              name="font_select"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_literal_with_associated_curves"
                                                                          supertypes="text_literal">
                                                                          <explicit
                                                                            name="associated_curves">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="curve"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_literal_with_blanking_box"
                                                                          supertypes="text_literal">
                                                                          <explicit
                                                                            name="blanking">
                                                                            <typename
                                                                              name="planar_box"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_literal_with_delineation"
                                                                          supertypes="text_literal">
                                                                          <explicit
                                                                            name="delineation">
                                                                            <typename
                                                                              name="text_delineation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_literal_with_extent"
                                                                          supertypes="text_literal">
                                                                          <explicit
                                                                            name="extent">
                                                                            <typename
                                                                              name="planar_extent"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_string_representation"
                                                                          supertypes="representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (item &lt;* SELF\representation.items | SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TEXT_LITERAL','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TEXT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TEXT_CHARACTER','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DEFINED_CHARACTER_GLYPH','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPOSITE_TEXT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AXIS2_PLACEMENT'] * TYPEOF (item)) = 0)) = 0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (QUERY (item &lt;* SELF\representation.items | NOT (SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.TEXT_LITERAL','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TEXT','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TEXT_CHARACTER','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DEFINED_CHARACTER_GLYPH','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPOSITE_TEXT'] * TYPEOF (item)) = 0))) &gt;= 1">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="SIZEOF (QUERY (a2p &lt;* QUERY (item &lt;* SELF\representation.items |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AXIS2_PLACEMENT' IN TYPEOF (item)) | NOT ((SIZEOF (QUERY (at &lt;* QUERY (item &lt;* SELF\representation.items |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'ANNOTATION_TEXT' IN TYPEOF (item)) |(at\mapped_item.mapping_target :=: a2p))) &gt;= 1) OR(SIZEOF (QUERY (atc &lt;* QUERY (item &lt;* SELF\representation.items |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'ANNOTATION_TEXT_CHARACTER' IN TYPEOF (item)) |(atc\mapped_item.mapping_target :=: a2p))) &gt;= 1)))) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <function
                                                                          name="acyclic_composite_text">
                                                                          <parameter
                                                                            name="start_composite">
                                                                            <typename
                                                                              name="composite_text"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="child_text">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="T"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="LOGICAL"/>
                                                                          <algorithm>
LOCAL
i : INTEGER;
local_composite_text : SET [0:?] OF composite_text;
local_annotation_text : SET [0:?] OF annotation_text;
local_children : SET [0:?] OF text_or_character;
END_LOCAL;
local_composite_text := QUERY (child &lt;* child_text |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPOSITE_TEXT'
IN TYPEOF (child)));
IF (SIZEOF (local_composite_text) &gt; 0) THEN
REPEAT i := 1 TO HIINDEX (local_composite_text);
IF (start_composite :=: local_composite_text[i]) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
END_IF;
local_children := child_text;
IF (SIZEOF (local_composite_text)) &gt; 0 THEN
REPEAT i := 1 TO HIINDEX (local_composite_text);
local_children := local_children +
local_composite_text[i].collected_text;
END_REPEAT;
END_IF;
local_annotation_text := QUERY (child &lt;* child_text |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TEXT'
IN TYPEOF (child)));
IF (SIZEOF (local_annotation_text) &gt; 0) THEN
REPEAT i := 1 TO HIINDEX (local_annotation_text);
local_children := local_children +
QUERY (item &lt;* local_annotation_text[i]\mapped_item.
mapping_source.mapped_representation.items |
SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_TEXT',
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.COMPOSITE_TEXT'] *
TYPEOF(item)) &gt; 0);
END_REPEAT;
END_IF;
IF (local_children :&lt;&gt;: child_text) THEN
RETURN (acyclic_composite_text (start_composite, local_children));
ELSE
RETURN (TRUE);
END_IF;
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_symbol_representation_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="symbol_representation_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="children">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="symbol_representation"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF symbol_representation_relationship;
local_children : SET OF symbol_representation;
END_LOCAL;
REPEAT i:=1 TO HIINDEX(children);
IF relation\representation_relationship.rep_1 :=: children[i] THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
x := bag_to_set (USEDIN (relation\representation_relationship.rep_1,
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+
'REPRESENTATION_RELATIONSHIP.'+ 'REP_2'));
local_children := children + relation\representation_relationship.rep_1;
IF SIZEOF (x) &gt; 0 THEN
REPEAT i:=1 TO HIINDEX (x);
IF NOT acyclic_symbol_representation_relationship(x[i] ,
local_children) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
END_IF;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="field_in_table">
                                                                          <parameter
                                                                            name="field">
                                                                            <typename
                                                                              name="table_record_field_representation"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="table">
                                                                            <typename
                                                                              name="annotation_table_occurrence"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
table_rep : table_representation;
symbol_rep_rel_set : SET OF symbol_representation_relationship;
mapped_item_set : SET OF mapped_item;
table_record_rep_set : SET OF table_record_representation := [];
END_LOCAL;
table_rep := table\styled_item.item\mapped_item.mapping_source.
mapped_representation;
mapped_item_set := QUERY(item &lt;* table_rep.items |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MAPPED_ITEM' IN
TYPEOF(item))
AND
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+
'TABLE_RECORD_REPRESENTATION' IN
TYPEOF(item\mapped_item.mapping_source.
mapped_representation))
);
REPEAT i := 1 TO HIINDEX(mapped_item_set);
table_record_rep_set := table_record_rep_set +
mapped_item_set[i].mapping_source.mapped_representation;
END_REPEAT;
symbol_rep_rel_set := bag_to_set (USEDIN(table_rep,
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+
'REPRESENTATION_RELATIONSHIP.REP_1'));
REPEAT i := 1 TO HIINDEX(symbol_rep_rel_set);
table_record_rep_set := table_record_rep_set +
symbol_rep_rel_set[i]\representation_relationship.rep_2;
END_REPEAT;
IF SIZEOF(QUERY(table_record_rep &lt;* table_record_rep_set |
(SIZEOF(QUERY(rep_rel &lt;* USEDIN(table_record_rep,
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+
'REPRESENTATION_RELATIONSHIP.REP_1') |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +
'SYMBOL_REPRESENTATION_RELATIONSHIP' IN TYPEOF(rep_rel)) AND
(rep_rel.rep_2 :=: field)
)) &gt; 0)
OR
(SIZEOF(QUERY(item &lt;* table_record_rep.items |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MAPPED_ITEM' IN
TYPEOF(item))
AND
(field :=: item\mapped_item.mapping_source.
mapped_representation)
)) &gt; 0)
)) = 0 THEN
RETURN(FALSE);
END_IF;
RETURN(TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <type name="area_or_view">
                                                                          <select
                                                                            selectitems="presentation_area presentation_view">
                                                                          </select>
                                                                        </type>

                                                                        <type name="central_or_parallel">
                                                                          <enumeration
                                                                            items="central parallel">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="layered_item">
                                                                          <select
                                                                            selectitems="presentation_representation representation_item">
                                                                          </select>
                                                                        </type>

                                                                        <type name="presentation_representation_select">
                                                                          <select
                                                                            selectitems="presentation_representation presentation_set">
                                                                          </select>
                                                                        </type>

                                                                        <type name="presentation_size_assignment_select">
                                                                          <select
                                                                            selectitems="presentation_view presentation_area area_in_set">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="area_dependent_annotation_representation"
                                                                          supertypes="presentation_representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (item &lt;* SELF\representation.items | NOT (SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'ANNOTATION_OCCURRENCE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AXIS2_PLACEMENT'] * TYPEOF(item)) = 1))) = 0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (QUERY (item &lt;* SELF\representation.items |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_OCCURRENCE' IN TYPEOF (item)))) &gt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="area_in_set">
                                                                          <explicit
                                                                            name="area">
                                                                            <typename
                                                                              name="presentation_area"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="in_set">
                                                                            <typename
                                                                              name="presentation_set"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="background_colour"
                                                                          supertypes="colour">
                                                                          <explicit
                                                                            name="presentation">
                                                                            <typename
                                                                              name="area_or_view"/>
                                                                          </explicit>
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              attribute="presentation"/>
                                                                          </unique>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_image"
                                                                          supertypes="mapped_item">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CAMERA_USAGE' IN TYPEOF (SELF\mapped_item.mapping_source)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PLANAR_BOX' IN TYPEOF (SELF\mapped_item.mapping_target)">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_REPRESENTATION_ITEM' IN TYPEOF (SELF)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_image_3d_with_scale"
                                                                          supertypes="camera_image">
                                                                          <derived
                                                                            name="scale"
                                                                            expression="((SELF\mapped_item.mapping_target\ planar_extent.size_in_x) / (SELF\mapped_item.mapping_source. mapping_origin\camera_model_d3.perspective_of_volume.view_window. size_in_x))">
                                                                            <typename
                                                                              name="positive_ratio_measure"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CAMERA_MODEL_D3' IN TYPEOF (SELF\mapped_item.mapping_source.mapping_origin))">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="aspect_ratio(SELF\mapped_item.mapping_target) = aspect_ratio(SELF\mapped_item.mapping_source.mapping_origin\ camera_model_d3.perspective_of_volume.view_window)">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3. perspective_of_volume.front_plane_clipping AND SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3. perspective_of_volume.view_volume_sides_clipping">
                                                                          </where>
                                                                          <where
                                                                            label="WR4"
                                                                            expression="(SELF\mapped_item.mapping_target\planar_extent.size_in_x &gt; 0) AND(SELF\mapped_item.mapping_target\planar_extent.size_in_y &gt; 0)">
                                                                          </where>
                                                                          <where
                                                                            label="WR5"
                                                                            expression="(SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3. perspective_of_volume.view_window.size_in_x &gt; 0) AND(SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3. perspective_of_volume.view_window.size_in_y &gt; 0)">
                                                                          </where>
                                                                          <where
                                                                            label="WR6"
                                                                            expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'AXIS2_PLACEMENT_2D' IN TYPEOF (SELF\mapped_item. mapping_target\planar_box.placement)) AND NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'AXIS2_PLACEMENT_3D' IN TYPEOF (SELF\mapped_item. mapping_target\planar_box.placement))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_model"
                                                                          super.expression="(ONEOF(camera_model_d2, camera_model_d3))"
                                                                          supertypes="geometric_representation_item">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'ITEM_DEFINED_TRANSFORMATION.' +'TRANSFORM_ITEM_1')) + SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'REPRESENTATION_MAP.MAPPING_ORIGIN'))) &gt; 0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF(USEDIN(SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'STYLED_ITEM.ITEM')) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_model_d2"
                                                                          supertypes="camera_model">
                                                                          <explicit
                                                                            name="view_window">
                                                                            <typename
                                                                              name="planar_box"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="view_window_clipping">
                                                                            <builtintype
                                                                              type="BOOLEAN"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF\geometric_representation_item.dim = 2">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_model_d2_shape_clipping"
                                                                          supertypes="camera_model_d2">
                                                                          <explicit
                                                                            name="shape_clipping">
                                                                            <typename
                                                                              name="curve"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_model_d3"
                                                                          supertypes="camera_model">
                                                                          <explicit
                                                                            name="view_reference_system">
                                                                            <typename
                                                                              name="axis2_placement_3d"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="perspective_of_volume">
                                                                            <typename
                                                                              name="view_volume"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(dot_product (SELF.view_reference_system.p[3], SELF.perspective_of_volume.view_window.placement.p[3]) = 1.0) AND(SELF.view_reference_system.location.coordinates[3] = SELF.perspective_of_volume.view_window. placement.location.coordinates[3])">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SELF\geometric_representation_item.dim = 3">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_model_d3_multi_clipping"
                                                                          supertypes="camera_model_d3">
                                                                          <explicit
                                                                            name="shape_clipping">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="plane"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_model_d3_with_hlhsr"
                                                                          supertypes="camera_model_d3">
                                                                          <explicit
                                                                            name="hidden_line_surface_removal">
                                                                            <builtintype
                                                                              type="BOOLEAN"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_model_with_light_sources"
                                                                          supertypes="camera_model_d3">
                                                                          <explicit
                                                                            name="sources">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="light_source"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="camera_usage"
                                                                          supertypes="representation_map">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_REPRESENTATION' IN TYPEOF(SELF\representation_map.mapped_representation))">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CAMERA_MODEL' IN TYPEOF (SELF\representation_map.mapping_origin)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="graphical_transformation"
                                                                          supertypes="item_defined_transformation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AXIS2_PLACEMENT_2D' IN TYPEOF (SELF\item_defined_transformation.transform_item_1)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_SCALED_PLACEMENT' IN TYPEOF (SELF\item_defined_transformation.transform_item_2)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="light_source"
                                                                          super.expression="(ONEOF(light_source_ambient, light_source_directional, light_source_positional, light_source_spot))"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="light_colour">
                                                                            <typename
                                                                              name="colour"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(USEDIN(SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'STYLED_ITEM.ITEM')) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="light_source_ambient"
                                                                          supertypes="light_source">
                                                                        </entity>

                                                                        <entity
                                                                          name="light_source_directional"
                                                                          supertypes="light_source">
                                                                          <explicit
                                                                            name="orientation">
                                                                            <typename
                                                                              name="direction"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="light_source_positional"
                                                                          supertypes="light_source">
                                                                          <explicit
                                                                            name="position">
                                                                            <typename
                                                                              name="cartesian_point"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="constant_attenuation">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="distance_attenuation">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="light_source_spot"
                                                                          supertypes="light_source">
                                                                          <explicit
                                                                            name="position">
                                                                            <typename
                                                                              name="cartesian_point"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="orientation">
                                                                            <typename
                                                                              name="direction"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="concentration_exponent">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="constant_attenuation">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="distance_attenuation">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="spread_angle">
                                                                            <typename
                                                                              name="positive_plane_angle_measure"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_area"
                                                                          supertypes="presentation_representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="((SIZEOF (QUERY (ais &lt;* USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'AREA_IN_SET.AREA') | SIZEOF (USEDIN (ais, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRESENTATION_SIZE.UNIT')) =1)) &gt; 0) OR(SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRESENTATION_SIZE.UNIT')) =1))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_layer_assignment">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="assigned_items">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="layered_item"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_layer_usage">
                                                                          <explicit
                                                                            name="assignment">
                                                                            <typename
                                                                              name="presentation_layer_assignment"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="presentation">
                                                                            <typename
                                                                              name="presentation_representation"/>
                                                                          </explicit>
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              attribute="assignment"/>
                                                                            <unique.attribute
                                                                              attribute="presentation"/>
                                                                          </unique>
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_representation"
                                                                          supertypes="representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF\representation. context_of_items\geometric_representation_context. coordinate_space_dimension = 2">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GEOMETRIC_REPRESENTATION_CONTEXT' IN TYPEOF (SELF\representation.context_of_items)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_representation_relationship"
                                                                          supertypes="representation_relationship_with_transformation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_REPRESENTATION' IN TYPEOF (SELF\representation_relationship.rep_1)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_REPRESENTATION' IN TYPEOF (SELF\representation_relationship.rep_2)">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="acyclic_presentation_representation_relationship (SELF,[SELF\representation_relationship.rep_2])">
                                                                          </where>
                                                                          <where
                                                                            label="WR4"
                                                                            expression="NOT (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_AREA' IN TYPEOF (SELF\representation_relationship.rep_1)) AND NOT (SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DATA_REPRESENTATION_VIEW','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'VIEW_DEPENDENT_ANNOTATION_REPRESENTATION'] * TYPEOF (SELF\representation_relationship.rep_2)) = 0))">
                                                                          </where>
                                                                          <where
                                                                            label="WR5"
                                                                            expression="NOT (('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_VIEW' IN TYPEOF (SELF\representation_relationship.rep_1)) AND NOT (SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRESENTATION_AREA','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRESENTATION_VIEW','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'AREA_DEPENDENT_ANNOTATION_REPRESENTATION'] * TYPEOF (SELF\representation_relationship.rep_2))=0))">
                                                                          </where>
                                                                          <where
                                                                            label="WR6"
                                                                            expression="(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_VIEW' IN TYPEOF(SELF\representation_relationship.rep_2))) XOR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_AREA'IN TYPEOF(SELF\representation_relationship.rep_1))">
                                                                          </where>
                                                                          <where
                                                                            label="WR7"
                                                                            expression="(NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'PRODUCT_DATA_REPRESENTATION_VIEW' IN(TYPEOF(SELF\representation_relationship.rep_1) + TYPEOF(SELF\representation_relationship.rep_2)))) XOR('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_VIEW' IN TYPEOF(SELF\representation_relationship.rep_1)) AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DATA_REPRESENTATION_VIEW' IN TYPEOF(SELF\representation_relationship.rep_2))">
                                                                          </where>
                                                                          <where
                                                                            label="WR8"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GRAPHICAL_TRANSFORMATION' IN TYPEOF(SELF\representation_relationship_with_transformation. transformation_operator)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_set">
                                                                          <inverse
                                                                            name="areas"
                                                                            entity="area_in_set"
                                                                            attribute="in_set">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_size">
                                                                          <explicit
                                                                            name="unit">
                                                                            <typename
                                                                              name="presentation_size_assignment_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="size">
                                                                            <typename
                                                                              name="planar_box"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRESENTATION_REPRESENTATION' IN TYPEOF (SELF.unit)) AND item_in_context (SELF.size, SELF.unit\representation.context_of_items)) OR(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AREA_IN_SET' IN TYPEOF (SELF.unit)) AND(SIZEOF (QUERY (ais &lt;* SELF.unit\area_in_set.in_set.areas | NOT item_in_context (SELF.size, ais.area\representation. context_of_items))) = 0))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_view"
                                                                          supertypes="presentation_representation">
                                                                        </entity>

                                                                        <entity
                                                                          name="presented_item"
                                                                          abstract.supertype="YES">
                                                                        </entity>

                                                                        <entity
                                                                          name="presented_item_representation">
                                                                          <explicit
                                                                            name="presentation">
                                                                            <typename
                                                                              name="presentation_representation_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="item">
                                                                            <typename
                                                                              name="presented_item"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_data_representation_view"
                                                                          supertypes="presentation_representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (item &lt;* SELF\representation.items | NOT (SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CAMERA_IMAGE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AXIS2_PLACEMENT'] * TYPEOF (item)) = 1))) = 0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (QUERY (item &lt;* SELF\representation.items |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CAMERA_IMAGE' IN TYPEOF (item)))) &gt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="representation_item_dependent_layer_assignment"
                                                                          supertypes="presentation_layer_assignment">
                                                                          <explicit
                                                                            name="item_context">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="view_dependent_annotation_representation"
                                                                          supertypes="presentation_representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (item &lt;* SELF\representation.items | NOT (SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'ANNOTATION_OCCURRENCE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.AXIS2_PLACEMENT'] * TYPEOF(item)) = 1))) = 0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (QUERY (item &lt;* SELF\representation.items |('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ANNOTATION_OCCURRENCE' IN TYPEOF (item)))) &gt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="view_volume"
                                                                          supertypes="founded_item">
                                                                          <explicit
                                                                            name="projection_type">
                                                                            <typename
                                                                              name="central_or_parallel"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="projection_point">
                                                                            <typename
                                                                              name="cartesian_point"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="view_plane_distance">
                                                                            <typename
                                                                              name="length_measure"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="front_plane_distance">
                                                                            <typename
                                                                              name="length_measure"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="front_plane_clipping">
                                                                            <builtintype
                                                                              type="BOOLEAN"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="back_plane_distance">
                                                                            <typename
                                                                              name="length_measure"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="back_plane_clipping">
                                                                            <builtintype
                                                                              type="BOOLEAN"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="view_volume_sides_clipping">
                                                                            <builtintype
                                                                              type="BOOLEAN"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="view_window">
                                                                            <typename
                                                                              name="planar_box"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <rule
                                                                          name="symbol_representation_rule"
                                                                          appliesto="presentation_representation_relationship">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(QUERY(each_1 &lt;* presentation_representation_relationship | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+'SYMBOL_REPRESENTATION_RELATIONSHIP' IN TYPEOF(each_1)) AND(SIZEOF(QUERY(each_2 &lt;* [each_1\representation_relationship.rep_1, each_1\representation_relationship.rep_2] |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMBOL_REPRESENTATION' IN TYPEOF(each_2))) &gt; 0))) = 0">
                                                                          </where>
                                                                        </rule>

                                                                        <function
                                                                          name="acyclic_presentation_representation_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="presentation_representation_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="children">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="presentation_representation"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF presentation_representation_relationship;
local_children : SET OF presentation_representation;
END_LOCAL;
REPEAT i:=1 TO HIINDEX(children);
IF relation\representation_relationship.rep_1 :=: children[i] THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
x := bag_to_set (USEDIN (relation\representation_relationship.rep_1,
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.'+
'REPRESENTATION_RELATIONSHIP.REP_2'));
local_children := children + relation\representation_relationship.rep_1;
IF SIZEOF (x) &gt; 0 THEN
REPEAT i:=1 TO HIINDEX (x);
IF NOT acyclic_presentation_representation_relationship
(x[i] , local_children) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
END_IF;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="aspect_ratio">
                                                                          <parameter
                                                                            name="p">
                                                                            <typename
                                                                              name="planar_box"/>
                                                                          </parameter>
                                                                          <typename
                                                                            name="positive_ratio_measure"/>
                                                                          <algorithm>
IF (p.size_in_x &gt; 0.) AND (p.size_in_y &gt; 0.) THEN
RETURN (p.size_in_x / p.size_in_y);
ELSE
RETURN (?);
END_IF;
                                                                          </algorithm>
                                                                        </function>

                                                                        <type name="font_select">
                                                                          <select
                                                                            selectitems="pre_defined_text_font externally_defined_text_font text_font">
                                                                          </select>
                                                                        </type>

                                                                        <type name="presentable_text">
                                                                          <builtintype
                                                                            type="STRING">
                                                                          </builtintype>
                                                                        </type>

                                                                        <type name="staircase_or_linear">
                                                                          <enumeration
                                                                            items="staircase linear">
                                                                          </enumeration>
                                                                        </type>

                                                                        <entity
                                                                          name="character_glyph_font_usage">
                                                                          <explicit
                                                                            name="character">
                                                                            <typename
                                                                              name="generic_character_glyph_symbol"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="font">
                                                                            <typename
                                                                              name="text_font"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="generic_character_glyph_symbol"
                                                                          abstract.supertype="YES"
                                                                          supertypes="symbol_representation">
                                                                        </entity>

                                                                        <entity
                                                                          name="character_glyph_symbol"
                                                                          supertypes="generic_character_glyph_symbol">
                                                                          <explicit
                                                                            name="character_box">
                                                                            <typename
                                                                              name="planar_extent"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="baseline_ratio">
                                                                            <typename
                                                                              name="ratio_measure"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="box_height"
                                                                            expression="character_box.size_in_y">
                                                                            <typename
                                                                              name="length_measure"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="{0.0 &lt;= baseline_ratio &lt;= 1.0}">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="item_in_context(SELF.character_box, SELF\representation.context_of_items)">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POSITIVE_LENGTH_MEASURE' IN TYPEOF (SELF.box_height)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="character_glyph_symbol_outline"
                                                                          supertypes="character_glyph_symbol">
                                                                          <explicit
                                                                            name="outlines">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="annotation_fill_area"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF.outlines &lt;= SELF\representation.items">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="character_glyph_symbol_stroke"
                                                                          supertypes="character_glyph_symbol">
                                                                          <explicit
                                                                            name="strokes">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="curve"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF.strokes &lt;= SELF\representation.items">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="colour">
                                                                        </entity>

                                                                        <entity
                                                                          name="colour_associated"
                                                                          supertypes="colour">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="variable_to_be_shown">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="mapping">
                                                                            <typename
                                                                              name="colour_association_table"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="colour_association_table">
                                                                          <explicit
                                                                            name="discrete_states_with_colours">
                                                                            <aggregate
                                                                              type="LIST"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="state_variable_with_colour"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="interpolation_type">
                                                                            <typename
                                                                              name="staircase_or_linear"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="colour_rgb"
                                                                          supertypes="colour_specification">
                                                                          <explicit
                                                                            name="red">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="green">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="blue">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="{0.0 &lt;= red &lt;= 1.0}">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="{0.0 &lt;= green &lt;= 1.0}">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="{0.0 &lt;= blue &lt;= 1.0}">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="colour_specification"
                                                                          supertypes="colour">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="draughting_pre_defined_colour"
                                                                          supertypes="pre_defined_colour">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF.name IN['red','green','blue','yellow','magenta','cyan','black','white']">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="draughting_pre_defined_text_font"
                                                                          supertypes="pre_defined_text_font">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF.name IN ['ISO 3098']">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="externally_defined_text_font"
                                                                          supertypes="externally_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="planar_box"
                                                                          supertypes="planar_extent">
                                                                          <explicit
                                                                            name="placement">
                                                                            <typename
                                                                              name="axis2_placement"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="planar_extent"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="size_in_x">
                                                                            <typename
                                                                              name="length_measure"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="size_in_y">
                                                                            <typename
                                                                              name="length_measure"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_colour"
                                                                          supertypes="pre_defined_item colour">
                                                                        </entity>

                                                                        <entity
                                                                          name="pre_defined_text_font"
                                                                          supertypes="pre_defined_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="presentation_scaled_placement"
                                                                          supertypes="geometric_representation_item">
                                                                          <explicit
                                                                            name="placement">
                                                                            <typename
                                                                              name="axis2_placement"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="scaling">
                                                                            <typename
                                                                              name="positive_ratio_measure"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="state_variable_with_colour">
                                                                          <explicit
                                                                            name="state_variable">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="associated_colour">
                                                                            <typename
                                                                              name="colour_specification"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_font">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <inverse
                                                                            name="glyphs"
                                                                            entity="character_glyph_font_usage"
                                                                            attribute="font">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_font_family">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <inverse
                                                                            name="fonts"
                                                                            entity="text_font_in_family"
                                                                            attribute="family">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                        </entity>

                                                                        <entity
                                                                          name="text_font_in_family">
                                                                          <explicit
                                                                            name="font">
                                                                            <typename
                                                                              name="text_font"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="family">
                                                                            <typename
                                                                              name="text_font_family"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <type name="characterized_action_definition">
                                                                          <select
                                                                            selectitems="action action_method action_method_relationship action_relationship">
                                                                          </select>
                                                                        </type>

                                                                        <type name="characterized_resource_definition">
                                                                          <select
                                                                            selectitems="action_resource action_resource_relationship action_resource_requirement action_resource_requirement_relationship">
                                                                          </select>
                                                                        </type>

                                                                        <type name="property_or_shape_select">
                                                                          <select
                                                                            selectitems="property_definition shape_definition">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="action_property">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="definition">
                                                                            <typename
                                                                              name="characterized_action_definition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_process"
                                                                          supertypes="action">
                                                                          <explicit
                                                                            name="identification">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <inverse
                                                                            name="product_definitions"
                                                                            entity="process_product_association"
                                                                            attribute="process">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                        </entity>

                                                                        <entity
                                                                          name="process_product_association">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="defined_product">
                                                                            <typename
                                                                              name="characterized_product_definition"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="process">
                                                                            <typename
                                                                              name="product_definition_process"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="property_process"
                                                                          supertypes="action">
                                                                          <explicit
                                                                            name="identification">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <inverse
                                                                            name="properties"
                                                                            entity="process_property_association"
                                                                            attribute="process">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                        </entity>

                                                                        <entity
                                                                          name="process_property_association">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="process">
                                                                            <typename
                                                                              name="property_process"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="property_or_shape">
                                                                            <typename
                                                                              name="property_or_shape_select"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="replacement_relationship"
                                                                          supertypes="action_relationship">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="acyclic_action_relationship (SELF,[SELF\action_relationship.related_action],'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPLACEMENT_RELATIONSHIP')">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="resource_property">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="resource">
                                                                            <typename
                                                                              name="characterized_resource_definition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="action_resource_requirement">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="kind">
                                                                            <typename
                                                                              name="resource_requirement_type"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="operations">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="characterized_action_definition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="action_property_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_action_property">
                                                                            <typename
                                                                              name="action_property"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_action_property">
                                                                            <typename
                                                                              name="action_property"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="relating_action_property :&lt;&gt;: related_action_property">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="requirement_for_action_resource"
                                                                          supertypes="action_resource_requirement">
                                                                          <explicit
                                                                            name="resources">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="action_resource"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="resource_property_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_resource_property">
                                                                            <typename
                                                                              name="resource_property"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_resource_property">
                                                                            <typename
                                                                              name="resource_property"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="relating_resource_property :&lt;&gt;: related_resource_property">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="action_resource_requirement_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_action_resource_requirement">
                                                                            <typename
                                                                              name="action_resource_requirement"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_action_resource_requirement">
                                                                            <typename
                                                                              name="action_resource_requirement"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="relating_action_resource_requirement :&lt;&gt;: related_action_resource_requirement">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="resource_requirement_type">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="resource_requirement_type_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_requirement_type">
                                                                            <typename
                                                                              name="resource_requirement_type"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_requirement_type">
                                                                            <typename
                                                                              name="resource_requirement_type"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="relating_requirement_type :&lt;&gt;: related_requirement_type">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="action_property_representation">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="property">
                                                                            <typename
                                                                              name="action_property"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="representation">
                                                                            <typename
                                                                              name="representation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="resource_property_representation">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="property">
                                                                            <typename
                                                                              name="resource_property"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="representation">
                                                                            <typename
                                                                              name="representation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="concept_feature_operator">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="concept_feature_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_product_concept_feature">
                                                                            <typename
                                                                              name="product_concept_feature"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_product_concept_feature">
                                                                            <typename
                                                                              name="product_concept_feature"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="concept_feature_relationship_with_condition"
                                                                          supertypes="concept_feature_relationship">
                                                                          <explicit
                                                                            name="conditional_operator">
                                                                            <typename
                                                                              name="concept_feature_operator"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="conditional_concept_feature"
                                                                          supertypes="product_concept_feature">
                                                                          <explicit
                                                                            name="condition">
                                                                            <typename
                                                                              name="concept_feature_relationship_with_condition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_concept">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="market_context">
                                                                            <typename
                                                                              name="product_concept_context"/>
                                                                          </explicit>
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              attribute="id"/>
                                                                          </unique>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_concept_feature">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_concept_feature_association">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="concept">
                                                                            <typename
                                                                              name="product_concept"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="feature">
                                                                            <typename
                                                                              name="product_concept_feature"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_concept_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_product_concept">
                                                                            <typename
                                                                              name="product_concept"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_product_concept">
                                                                            <typename
                                                                              name="product_concept"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <type name="source">
                                                                          <enumeration
                                                                            items="made bought not_known">
                                                                          </enumeration>
                                                                        </type>

                                                                        <entity
                                                                          name="product">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="frame_of_reference">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="product_context"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_category">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="id"
                                                                            expression="get_id_value (SELF)">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_category_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="category">
                                                                            <typename
                                                                              name="product_category"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="sub_category">
                                                                            <typename
                                                                              name="product_category"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="acyclic_product_category_relationship (SELF, [SELF.sub_category])">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="formation">
                                                                            <typename
                                                                              name="product_definition_formation"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="frame_of_reference">
                                                                            <typename
                                                                              name="product_definition_context"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="name"
                                                                            expression="get_name_value (SELF)">
                                                                            <typename
                                                                              name="label"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_context_association">
                                                                          <explicit
                                                                            name="definition">
                                                                            <typename
                                                                              name="product_definition"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="frame_of_reference">
                                                                            <typename
                                                                              name="product_definition_context"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="role">
                                                                            <typename
                                                                              name="product_definition_context_role"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_context_role">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_effectivity"
                                                                          supertypes="effectivity">
                                                                          <explicit
                                                                            name="usage">
                                                                            <typename
                                                                              name="product_definition_relationship"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'EFFECTIVITY_ASSIGNMENT.ASSIGNED_EFFECTIVITY')) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_formation">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="of_product">
                                                                            <typename
                                                                              name="product"/>
                                                                          </explicit>
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              attribute="id"/>
                                                                            <unique.attribute
                                                                              attribute="of_product"/>
                                                                          </unique>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_formation_relationship">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_product_definition_formation">
                                                                            <typename
                                                                              name="product_definition_formation"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_product_definition_formation">
                                                                            <typename
                                                                              name="product_definition_formation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_formation_with_specified_source"
                                                                          supertypes="product_definition_formation">
                                                                          <explicit
                                                                            name="make_or_buy">
                                                                            <typename
                                                                              name="source"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_relationship">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_product_definition">
                                                                            <typename
                                                                              name="product_definition"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_product_definition">
                                                                            <typename
                                                                              name="product_definition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_substitute">
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="context_relationship">
                                                                            <typename
                                                                              name="product_definition_relationship"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="substitute_definition">
                                                                            <typename
                                                                              name="product_definition"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="name"
                                                                            expression="get_name_value (SELF)">
                                                                            <typename
                                                                              name="label"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="context_relationship.related_product_definition :&lt;&gt;: substitute_definition">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_with_associated_documents"
                                                                          supertypes="product_definition">
                                                                          <explicit
                                                                            name="documentation_ids">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="document"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_related_product_category"
                                                                          supertypes="product_category">
                                                                          <explicit
                                                                            name="products">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="product"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_relationship">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_product">
                                                                            <typename
                                                                              name="product"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_product">
                                                                            <typename
                                                                              name="product"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <function
                                                                          name="acyclic_product_category_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="product_category_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="children">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="product_category"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF product_category_relationship;
local_children : SET OF product_category;
END_LOCAL;
REPEAT i := 1 TO HIINDEX(children);
IF relation.category :=: children[i] THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
x := bag_to_set(USEDIN(relation.category, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PRODUCT_CATEGORY_RELATIONSHIP.SUB_CATEGORY'));
local_children := children + relation.category;
IF SIZEOF(x) &gt; 0 THEN
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_product_category_relationship(x[i], local_children) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
END_IF;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_product_definition_formation_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="product_definition_formation_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="product_definition_formation"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF product_definition_formation_relationship;
END_LOCAL;
IF relation.relating_product_definition_formation IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(pdf &lt;* bag_to_set(USEDIN(relation.relating_product_definition_formation, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PRODUCT_DEFINITION_FORMATION_RELATIONSHIP.' + 'RELATED_PRODUCT_DEFINITION_FORMATION')) | specific_relation IN TYPEOF(pdf));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_product_definition_formation_relationship(x[i], relatives + relation.relating_product_definition_formation, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_product_definition_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="product_definition_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="product_definition"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF product_definition_relationship;
END_LOCAL;
IF relation.relating_product_definition IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(pd &lt;* bag_to_set(USEDIN(relation.relating_product_definition, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PRODUCT_DEFINITION_RELATIONSHIP.' + 'RELATED_PRODUCT_DEFINITION')) | specific_relation IN TYPEOF(pd));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_product_definition_relationship(x[i], relatives + relation.relating_product_definition, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_product_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="product_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="product"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF product_relationship;
END_LOCAL;
IF relation.relating_product IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(prod &lt;* bag_to_set(USEDIN(relation.relating_product, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'PRODUCT_RELATIONSHIP.' + 'RELATED_PRODUCT')) | specific_relation IN TYPEOF(prod));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_product_relationship(x[i], relatives + relation.relating_product, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="get_product_definitions">
                                                                          <parameter
                                                                            name="c_def_instance">
                                                                            <typename
                                                                              name="product"/>
                                                                          </parameter>
                                                                          <aggregate
                                                                            type="SET"/>
                                                                          <typename
                                                                            name="product_definition"/>
                                                                          <algorithm>
LOCAL
pd_set : SET OF product_definition_formation := [];
pdr_set : SET OF product_definition := [];
END_LOCAL;
pd_set := bag_to_set(USEDIN(c_def_instance, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_FORMATION.OF_PRODUCT'));
IF (SIZEOF(pd_set) &lt; 1) THEN
RETURN (pdr_set);
END_IF;
REPEAT i := 1 TO HIINDEX(pd_set);
pdr_set := pdr_set + bag_to_set(USEDIN(pd_set[i], 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION.FORMATION'));
END_REPEAT;
RETURN (pdr_set);
                                                                          </algorithm>
                                                                        </function>

                                                                        <type name="characterized_definition">
                                                                          <select
                                                                            selectitems="characterized_object characterized_product_definition shape_definition">
                                                                          </select>
                                                                        </type>

                                                                        <type name="characterized_product_definition">
                                                                          <select
                                                                            selectitems="product_definition product_definition_relationship">
                                                                          </select>
                                                                        </type>

                                                                        <type name="derived_property_select">
                                                                          <select
                                                                            selectitems="action_property property_definition resource_property">
                                                                          </select>
                                                                        </type>

                                                                        <type name="shape_definition">
                                                                          <select
                                                                            selectitems="product_definition_shape shape_aspect shape_aspect_relationship">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="characterized_object">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="characterized_object_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_object">
                                                                            <typename
                                                                              name="characterized_object"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_object">
                                                                            <typename
                                                                              name="characterized_object"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="general_property">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="general_property_association">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="base_definition">
                                                                            <typename
                                                                              name="general_property"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="derived_definition">
                                                                            <typename
                                                                              name="derived_property_select"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(USEDIN(derived_definition, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'GENERAL_PROPERTY_ASSOCIATION.' + 'DERIVED_DEFINITION')) = 1">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="derived_definition.name = base_definition.name">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="general_property_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_property">
                                                                            <typename
                                                                              name="general_property"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_property">
                                                                            <typename
                                                                              name="general_property"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_shape"
                                                                          supertypes="property_definition">
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              entity-ref="property_definition"
                                                                              attribute="definition"/>
                                                                          </unique>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CHARACTERIZED_PRODUCT_DEFINITION', 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CHARACTERIZED_OBJECT'] * TYPEOF(SELF\property_definition.definition)) &gt; 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="property_definition">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="definition">
                                                                            <typename
                                                                              name="characterized_definition"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="id"
                                                                            expression="get_id_value (SELF)">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="shape_aspect">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="of_shape">
                                                                            <typename
                                                                              name="product_definition_shape"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="product_definitional">
                                                                            <builtintype
                                                                              type="LOGICAL"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="id"
                                                                            expression="get_id_value (SELF)">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="shape_aspect_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_shape_aspect">
                                                                            <typename
                                                                              name="shape_aspect"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_shape_aspect">
                                                                            <typename
                                                                              name="shape_aspect"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="id"
                                                                            expression="get_id_value (SELF)">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <function
                                                                          name="acyclic_characterized_object_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="characterized_object_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="characterized_object"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF characterized_object_relationship;
END_LOCAL;
IF relation.relating_object IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(ca &lt;* bag_to_set(USEDIN(relation.relating_object, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'CHARACTERIZED_OBJECT_RELATIONSHIP.' + 'RELATED_OBJECT')) | specific_relation IN TYPEOF(ca));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_characterized_object_relationship(x[i], relatives + relation.relating_object, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_general_property_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="general_property_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="general_property"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF general_property_relationship;
END_LOCAL;
IF relation.relating_property IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(genp &lt;* bag_to_set(USEDIN(relation.relating_property, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'GENERAL_PROPERTY_RELATIONSHIP.' + 'RELATED_PROPERTY')) | specific_relation IN TYPEOF(genp));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_general_property_relationship(x[i], relatives + relation.relating_property, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_shape_aspect_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="shape_aspect_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="shape_aspect"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF shape_aspect_relationship;
END_LOCAL;
IF relation.relating_shape_aspect IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(sa &lt;* bag_to_set(USEDIN(relation.relating_shape_aspect, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'SHAPE_ASPECT_RELATIONSHIP.' + 'RELATED_SHAPE_ASPECT')) | specific_relation IN TYPEOF(sa));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_shape_aspect_relationship(x[i], relatives + relation.relating_shape_aspect, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="get_shape_aspects">
                                                                          <parameter
                                                                            name="c_def_instance">
                                                                            <typename
                                                                              name="characterized_definition"/>
                                                                          </parameter>
                                                                          <aggregate
                                                                            type="SET"/>
                                                                          <typename
                                                                            name="shape_aspect"/>
                                                                          <algorithm>
LOCAL
pd_set : SET OF product_definition_shape := [];
pdr_set : SET OF shape_aspect := [];
END_LOCAL;
pd_set := bag_to_set(QUERY(pd &lt;* USEDIN(c_def_instance, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION.DEFINITION') | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_SHAPE' IN TYPEOF(pd)));
IF (SIZEOF(pd_set) &lt; 1) THEN
RETURN (pdr_set);
END_IF;
REPEAT i := 1 TO HIINDEX(pd_set);
pdr_set := pdr_set + bag_to_set(USEDIN(pd_set[i], 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_ASPECT.OF_SHAPE'));
END_REPEAT;
RETURN (pdr_set);
                                                                          </algorithm>
                                                                        </function>

                                                                        <type name="represented_definition">
                                                                          <select
                                                                            selectitems="general_property property_definition property_definition_relationship shape_aspect shape_aspect_relationship">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="context_dependent_shape_representation">
                                                                          <explicit
                                                                            name="representation_relation">
                                                                            <typename
                                                                              name="shape_representation_relationship"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="represented_product_relation">
                                                                            <typename
                                                                              name="product_definition_shape"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="description"
                                                                            expression="get_description_value (SELF)">
                                                                            <typename
                                                                              name="text"/>
                                                                          </derived>
                                                                          <derived
                                                                            name="name"
                                                                            expression="get_name_value (SELF)">
                                                                            <typename
                                                                              name="label"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_RELATIONSHIP' IN TYPEOF (SELF.represented_product_relation.definition)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="item_identified_representation_usage">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="definition">
                                                                            <typename
                                                                              name="represented_definition"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="used_representation">
                                                                            <typename
                                                                              name="representation"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="identified_item">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF.used_representation IN using_representations(SELF.identified_item)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="property_definition_representation">
                                                                          <explicit
                                                                            name="definition">
                                                                            <typename
                                                                              name="represented_definition"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="used_representation">
                                                                            <typename
                                                                              name="representation"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="description"
                                                                            expression="get_description_value (SELF)">
                                                                            <typename
                                                                              name="text"/>
                                                                          </derived>
                                                                          <derived
                                                                            name="name"
                                                                            expression="get_name_value (SELF)">
                                                                            <typename
                                                                              name="label"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="shape_definition_representation"
                                                                          supertypes="property_definition_representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_SHAPE' IN TYPEOF (SELF.definition)) OR ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_DEFINITION' IN TYPEOF (SELF.definition.definition))">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_REPRESENTATION' IN TYPEOF(SELF.used_representation)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="shape_representation"
                                                                          supertypes="representation">
                                                                        </entity>

                                                                        <entity
                                                                          name="shape_representation_relationship"
                                                                          supertypes="representation_relationship">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_REPRESENTATION' IN (TYPEOF(SELF\representation_relationship.rep_1) + TYPEOF(SELF\representation_relationship.rep_2))">
                                                                          </where>
                                                                        </entity>

                                                                        <function
                                                                          name="relatives_of_product_definitions">
                                                                          <parameter
                                                                            name="definition_set">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="product_definition"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relation_subtype">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <aggregate
                                                                            type="SET"/>
                                                                          <typename
                                                                            name="product_definition"/>
                                                                          <algorithm>
FUNCTION local_relatives_of_product_definitions (definition_set : SET OF product_definition; total_definitions : SET OF product_definition; relation_subtype : STRING):SET OF product_definition;
LOCAL
local_def : SET OF product_definition := [];
local_pdr : SET OF product_definition_relationship := [];
local_total : SET OF product_definition := [];
END_LOCAL;
REPEAT i := 1 TO HIINDEX(definition_set);
local_pdr := local_pdr + bag_to_set(USEDIN(definition_set[i], relation_subtype + '.RELATING_PRODUCT_DEFINITION'));
END_REPEAT;
REPEAT i := 1 TO HIINDEX(local_pdr);
local_def := local_def + local_pdr[i].related_product_definition;
END_REPEAT;
IF (SIZEOF(local_def) - SIZEOF(total_definitions)) = 0 THEN
RETURN (local_def);
ELSE
local_total := total_definitions + local_def;
RETURN (local_def + (local_relatives_of_product_definitions(local_def - total_definitions, local_total, relation_subtype)));
END_IF;
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="relatives_of_shape_representations">
                                                                          <parameter
                                                                            name="shape_representation_set">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="shape_representation"/>
                                                                          </parameter>
                                                                          <aggregate
                                                                            type="SET"/>
                                                                          <typename
                                                                            name="shape_representation"/>
                                                                          <algorithm>
FUNCTION local_relatives_of_shape_representations (shape_representation_set : SET OF shape_representation; total_reps : SET OF shape_representation):SET OF shape_representation;
LOCAL
local_shape_rep : SET OF shape_representation := [];
local_srr : SET OF shape_representation_relationship := [];
local_total : SET OF shape_representation := [];
END_LOCAL;
REPEAT i := 1 TO HIINDEX(shape_representation_set);
local_srr := local_srr + QUERY(rr &lt;* bag_to_set(USEDIN(shape_representation_set[i], 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION_RELATIONSHIP.REP_1')) | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_REPRESENTATION_RELATIONSHIP' IN TYPEOF(rr));
END_REPEAT;
REPEAT i := 1 TO HIINDEX(local_srr);
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'SHAPE_REPRESENTATION_RELATIONSHIP' IN TYPEOF(local_srr[i]) THEN
local_shape_rep := local_shape_rep + local_srr[i].rep_2;
END_IF;
END_REPEAT;
IF SIZEOF(local_shape_rep - total_reps) = 0 THEN
RETURN (shape_representation_set);
ELSE
local_total := total_reps + local_shape_rep;
RETURN (local_shape_rep + (local_relatives_of_shape_representations(local_shape_rep - total_reps, local_total)));
END_IF;
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="get_property_definition_representations">
                                                                          <parameter
                                                                            name="c_def_instance">
                                                                            <typename
                                                                              name="characterized_definition"/>
                                                                          </parameter>
                                                                          <aggregate
                                                                            type="SET"/>
                                                                          <typename
                                                                            name="property_definition_representation"/>
                                                                          <algorithm>
LOCAL
pd_set : SET OF property_definition := [];
pdr_set : SET OF property_definition_representation := [];
END_LOCAL;
pd_set := bag_to_set(USEDIN(c_def_instance, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION.DEFINITION'));
IF (SIZEOF(pd_set) &lt; 1) THEN
RETURN (pdr_set);
END_IF;
REPEAT i := 1 TO HIINDEX(pd_set);
pdr_set := pdr_set + bag_to_set(USEDIN(pd_set[i], 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PROPERTY_DEFINITION_REPRESENTATION.DEFINITION'));
END_REPEAT;
RETURN (pdr_set);
                                                                          </algorithm>
                                                                        </function>

                                                                        <entity
                                                                          name="alternate_product_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="definition"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="alternate">
                                                                            <typename
                                                                              name="product"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="base">
                                                                            <typename
                                                                              name="product"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="basis">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              attribute="alternate"/>
                                                                            <unique.attribute
                                                                              attribute="base"/>
                                                                          </unique>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="alternate :&lt;&gt;: base">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="assembly_component_usage"
                                                                          super.expression="(ONEOF (next_assembly_usage_occurrence, specified_higher_usage_occurrence, promissory_usage_occurrence))"
                                                                          supertypes="product_definition_usage">
                                                                          <explicit
                                                                            name="reference_designator"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="assembly_component_usage_substitute">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="definition"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="base">
                                                                            <typename
                                                                              name="assembly_component_usage"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="substitute">
                                                                            <typename
                                                                              name="assembly_component_usage"/>
                                                                          </explicit>
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              attribute="base"/>
                                                                            <unique.attribute
                                                                              attribute="substitute"/>
                                                                          </unique>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="base.relating_product_definition :=: substitute.relating_product_definition">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="base :&lt;&gt;: substitute">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="assembly_component_usage_substitute_with_ranking"
                                                                          supertypes="assembly_component_usage_substitute">
                                                                          <explicit
                                                                            name="ranking">
                                                                            <builtintype
                                                                              type="INTEGER"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="ranking_rationale">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="make_from_usage_option"
                                                                          supertypes="product_definition_usage">
                                                                          <explicit
                                                                            name="ranking">
                                                                            <builtintype
                                                                              type="INTEGER"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="ranking_rationale">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="quantity">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(NOT ('NUMBER' IN TYPEOF(quantity.value_component))) OR (quantity.value_component &gt; 0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="make_from_usage_option_group">
                                                                          <explicit
                                                                            name="members">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="2"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="make_from_usage_option"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (example &lt;* members | example.related_product_definition:=: members[1].related_product_definition)) =SIZEOF(members)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="next_assembly_usage_occurrence"
                                                                          supertypes="assembly_component_usage">
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_occurrence_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="occurrence">
                                                                            <typename
                                                                              name="product_definition"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="occurrence_usage">
                                                                            <typename
                                                                              name="assembly_component_usage"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="occurrence_usage.relating_product_definition :&lt;&gt;: occurrence">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="occurrence_usage.related_product_definition :&lt;&gt;: occurrence">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="occurrence.formation :=: occurrence_usage.related_product_definition.formation">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="product_definition_usage"
                                                                          super.expression="(ONEOF (make_from_usage_option, assembly_component_usage))"
                                                                          supertypes="product_definition_relationship">
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              entity-ref="product_definition_relationship"
                                                                              attribute="id"/>
                                                                            <unique.attribute
                                                                              entity-ref="product_definition_relationship"
                                                                              attribute="relating_product_definition"/>
                                                                            <unique.attribute
                                                                              entity-ref="product_definition_relationship"
                                                                              attribute="related_product_definition"/>
                                                                          </unique>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="acyclic_product_definition_relationship(SELF,[SELF\product_definition_relationship.related_product_definition],'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_USAGE')">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="promissory_usage_occurrence"
                                                                          supertypes="assembly_component_usage">
                                                                        </entity>

                                                                        <entity
                                                                          name="quantified_assembly_component_usage"
                                                                          supertypes="assembly_component_usage">
                                                                          <explicit
                                                                            name="quantity">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(NOT ('NUMBER' IN TYPEOF(quantity.value_component))) OR (quantity.value_component &gt; 0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="specified_higher_usage_occurrence"
                                                                          supertypes="assembly_component_usage">
                                                                          <explicit
                                                                            name="upper_usage">
                                                                            <typename
                                                                              name="assembly_component_usage"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="next_usage">
                                                                            <typename
                                                                              name="next_assembly_usage_occurrence"/>
                                                                          </explicit>
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              attribute="upper_usage"/>
                                                                            <unique.attribute
                                                                              attribute="next_usage"/>
                                                                          </unique>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF :&lt;&gt;: upper_usage">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SELF\product_definition_relationship.relating_product_definition:=: upper_usage.relating_product_definition">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="SELF\product_definition_relationship.related_product_definition:=: next_usage.related_product_definition">
                                                                          </where>
                                                                          <where
                                                                            label="WR4"
                                                                            expression="(upper_usage.related_product_definition :=: next_usage.relating_product_definition) OR(SIZEOF (QUERY (pdr &lt;* USEDIN (upper_usage.related_product_definition,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRODUCT_DEFINITION_RELATIONSHIP.' +'RELATED_PRODUCT_DEFINITION') | pdr.relating_product_definition :=: next_usage.relating_product_definition)) = 1)">
                                                                          </where>
                                                                          <where
                                                                            label="WR5"
                                                                            expression="SIZEOF (['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.NEXT_ASSEMBLY_USAGE_OCCURRENCE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SPECIFIED_HIGHER_USAGE_OCCURRENCE']* TYPEOF(upper_usage)) = 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="qualification">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="qualification_relationship">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_qualification">
                                                                            <typename
                                                                              name="qualification"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_qualification">
                                                                            <typename
                                                                              name="qualification"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="qualification_type">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="qualification_type_relationship">
                                                                          <explicit
                                                                            name="id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_qualification_type">
                                                                            <typename
                                                                              name="qualification_type"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_qualification_type">
                                                                            <typename
                                                                              name="qualification_type"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <function
                                                                          name="acyclic_qualification_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="qualification_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="qualification"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF qualification_relationship;
END_LOCAL;
IF relation.relating_qualification IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(qual &lt;* bag_to_set(USEDIN(relation.relating_qualification, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'QUALIFICATION_RELATIONSHIP.' + 'RELATED_QUALIFICATION')) | specific_relation IN TYPEOF(qual));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_qualification_relationship(x[i], relatives + relation.relating_qualification, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="acyclic_qualification_type_relationship">
                                                                          <parameter
                                                                            name="relation">
                                                                            <typename
                                                                              name="qualification_type_relationship"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="relatives">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="qualification_type"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="specific_relation">
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x : SET OF qualification_type_relationship;
END_LOCAL;
IF relation.relating_qualification_type IN relatives THEN
RETURN (FALSE);
END_IF;
x := QUERY(qultyp &lt;* bag_to_set(USEDIN(relation.relating_qualification_type, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' + 'QUALIFICATION_TYPE_RELATIONSHIP.' + 'RELATED_QUALIFICATION_TYPE')) | specific_relation IN TYPEOF(qultyp));
REPEAT i := 1 TO HIINDEX(x);
IF NOT acyclic_qualification_type_relationship(x[i], relatives + relation.relating_qualification_type, specific_relation) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <type name="value_qualifier">
                                                                          <select
                                                                            selectitems="precision_qualifier type_qualifier uncertainty_qualifier">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="type_qualifier">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="precision_qualifier">
                                                                          <explicit
                                                                            name="precision_value">
                                                                            <builtintype
                                                                              type="INTEGER"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="uncertainty_qualifier"
                                                                          super.expression="(ONEOF (standard_uncertainty, qualitative_uncertainty))">
                                                                          <explicit
                                                                            name="measure_name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="qualitative_uncertainty"
                                                                          supertypes="uncertainty_qualifier">
                                                                          <explicit
                                                                            name="uncertainty_value">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="standard_uncertainty"
                                                                          super.expression="(expanded_uncertainty)"
                                                                          supertypes="uncertainty_qualifier">
                                                                          <explicit
                                                                            name="uncertainty_value">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="expanded_uncertainty"
                                                                          supertypes="standard_uncertainty">
                                                                          <explicit
                                                                            name="coverage_factor">
                                                                            <builtintype
                                                                              type="REAL"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="measure_representation_item"
                                                                          supertypes="representation_item measure_with_unit">
                                                                        </entity>

                                                                        <entity
                                                                          name="descriptive_representation_item"
                                                                          supertypes="representation_item">
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="qualified_representation_item"
                                                                          supertypes="representation_item">
                                                                          <explicit
                                                                            name="qualifiers">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="value_qualifier"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(QUERY(temp &lt;* qualifiers |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRECISION_QUALIFIER' IN TYPEOF(temp))) &lt; 2">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="measure_qualification">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="qualified_measure">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="qualifiers">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="value_qualifier"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(QUERY(temp &lt;* qualifiers |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PRECISION_QUALIFIER' IN TYPEOF(temp))) &lt; 2">
                                                                          </where>
                                                                        </entity>

                                                                        <type name="compound_item_definition">
                                                                          <select
                                                                            selectitems="list_representation_item set_representation_item">
                                                                          </select>
                                                                        </type>

                                                                        <type name="founded_item_select">
                                                                          <select
                                                                            selectitems="founded_item representation_item">
                                                                          </select>
                                                                        </type>

                                                                        <type name="list_representation_item">
                                                                          <aggregate
                                                                            type="LIST"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="representation_item"/>
                                                                        </type>

                                                                        <type name="set_representation_item">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="1"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="representation_item"/>
                                                                        </type>

                                                                        <type name="transformation">
                                                                          <select
                                                                            selectitems="item_defined_transformation functionally_defined_transformation">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="compound_representation_item"
                                                                          supertypes="representation_item">
                                                                          <explicit
                                                                            name="item_element">
                                                                            <typename
                                                                              name="compound_item_definition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="definitional_representation"
                                                                          supertypes="representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PARAMETRIC_REPRESENTATION_CONTEXT' IN TYPEOF (SELF\representation.context_of_items)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="founded_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="functionally_defined_transformation">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="global_uncertainty_assigned_context"
                                                                          supertypes="representation_context">
                                                                          <explicit
                                                                            name="uncertainty">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="uncertainty_measure_with_unit"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="item_defined_transformation">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="transform_item_1">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="transform_item_2">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="mapped_item"
                                                                          supertypes="representation_item">
                                                                          <explicit
                                                                            name="mapping_source">
                                                                            <typename
                                                                              name="representation_map"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="mapping_target">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="acyclic_mapped_representation(using_representations(SELF), [SELF])">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="parametric_representation_context"
                                                                          supertypes="representation_context">
                                                                        </entity>

                                                                        <entity
                                                                          name="representation">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="items">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="context_of_items">
                                                                            <typename
                                                                              name="representation_context"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="id"
                                                                            expression="get_id_value (SELF)">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </derived>
                                                                          <derived
                                                                            name="description"
                                                                            expression="get_description_value (SELF)">
                                                                            <typename
                                                                              name="text"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'ID_ATTRIBUTE.IDENTIFIED_ITEM'))&lt;= 1">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (USEDIN (SELF, 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM'))&lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="representation_context">
                                                                          <explicit
                                                                            name="context_identifier">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="context_type">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <inverse
                                                                            name="representations_in_context"
                                                                            entity="representation"
                                                                            attribute="context_of_items">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                        </entity>

                                                                        <entity
                                                                          name="representation_item">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(using_representations(SELF)) &gt; 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="representation_item_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_representation_item">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_representation_item">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="representation_map">
                                                                          <explicit
                                                                            name="mapping_origin">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="mapped_representation">
                                                                            <typename
                                                                              name="representation"/>
                                                                          </explicit>
                                                                          <inverse
                                                                            name="map_usage"
                                                                            entity="mapped_item"
                                                                            attribute="mapping_source">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="item_in_context(SELF.mapping_origin, SELF.mapped_representation.context_of_items)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="representation_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="rep_1">
                                                                            <typename
                                                                              name="representation"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="rep_2">
                                                                            <typename
                                                                              name="representation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="representation_relationship_with_transformation"
                                                                          supertypes="representation_relationship">
                                                                          <explicit
                                                                            name="transformation_operator">
                                                                            <typename
                                                                              name="transformation"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SELF\representation_relationship.rep_1.context_of_items:&lt;&gt;: SELF\representation_relationship.rep_2.context_of_items">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="uncertainty_assigned_representation"
                                                                          supertypes="representation">
                                                                          <explicit
                                                                            name="uncertainty">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="uncertainty_measure_with_unit"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="uncertainty_measure_with_unit"
                                                                          supertypes="measure_with_unit">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description"
                                                                            optional="YES">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="valid_measure_value (SELF\measure_with_unit.value_component)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="value_representation_item"
                                                                          supertypes="representation_item">
                                                                          <explicit
                                                                            name="value_component">
                                                                            <typename
                                                                              name="measure_value"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (rep &lt;* using_representations (SELF) | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.GLOBAL_UNIT_ASSIGNED_CONTEXT' IN TYPEOF (rep.context_of_items)))) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <function
                                                                          name="acyclic_mapped_representation">
                                                                          <parameter
                                                                            name="parent_set">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="representation"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="children_set">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
x,y : SET OF representation_item;
END_LOCAL;
x := QUERY(z &lt;* children_set | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MAPPED_ITEM'
IN TYPEOF(z));
IF SIZEOF(x) &gt; 0 THEN
REPEAT i := 1 TO HIINDEX(x);
IF x[i]\mapped_item.mapping_source.mapped_representation
IN parent_set THEN
RETURN (FALSE);
END_IF;
IF NOT acyclic_mapped_representation
(parent_set +
x[i]\mapped_item.mapping_source.mapped_representation,
x[i]\mapped_item.mapping_source.mapped_representation.items) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
END_IF;
x := children_set - x;
IF SIZEOF(x) &gt; 0 THEN
REPEAT i := 1 TO HIINDEX(x);
y := QUERY(z &lt;* bag_to_set(USEDIN(x[i], '')) |
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION_ITEM' IN TYPEOF(z));
IF NOT acyclic_mapped_representation(parent_set, y) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
END_IF;
RETURN (TRUE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="item_in_context">
                                                                          <parameter
                                                                            name="item">
                                                                            <typename
                                                                              name="representation_item"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="cntxt">
                                                                            <typename
                                                                              name="representation_context"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
LOCAL
y : BAG OF representation_item;
END_LOCAL;
IF SIZEOF(USEDIN(item,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION.ITEMS')
* cntxt.representations_in_context) &gt; 0 THEN
RETURN (TRUE);
ELSE y := QUERY(z &lt;* USEDIN (item , '') |
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION_ITEM' IN TYPEOF(z));
IF SIZEOF(y) &gt; 0 THEN
REPEAT i := 1 TO HIINDEX(y);
IF item_in_context(y[i], cntxt) THEN
RETURN (TRUE);
END_IF;
END_REPEAT;
END_IF;
END_IF;
RETURN (FALSE);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="using_items">
                                                                          <parameter
                                                                            name="item">
                                                                            <typename
                                                                              name="founded_item_select"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="checked_items">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <typename
                                                                              name="founded_item_select"/>
                                                                          </parameter>
                                                                          <aggregate
                                                                            type="SET"/>
                                                                          <typename
                                                                            name="founded_item_select"/>
                                                                          <algorithm>
LOCAL
new_check_items : SET OF founded_item_select;
result_items : SET OF founded_item_select;
next_items : SET OF founded_item_select;
END_LOCAL;
result_items := [];
new_check_items := checked_items + item;
next_items := QUERY(z &lt;* bag_to_set(USEDIN(item , '')) |
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION_ITEM' IN TYPEOF(z)) OR
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FOUNDED_ITEM' IN TYPEOF(z)));
IF SIZEOF(next_items) &gt; 0 THEN
REPEAT i := 1 TO HIINDEX(next_items);
IF NOT(next_items[i] IN new_check_items) THEN
result_items := result_items + next_items[i] +
using_items(next_items[i],new_check_items);
END_IF;
END_REPEAT;
END_IF;
RETURN (result_items);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="using_representations">
                                                                          <parameter
                                                                            name="item">
                                                                            <typename
                                                                              name="founded_item_select"/>
                                                                          </parameter>
                                                                          <aggregate
                                                                            type="SET"/>
                                                                          <typename
                                                                            name="representation"/>
                                                                          <algorithm>
LOCAL
results : SET OF representation;
result_bag : BAG OF representation;
intermediate_items : SET OF founded_item_select;
END_LOCAL;
results := [];
result_bag :=
USEDIN(item,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION.ITEMS');
IF SIZEOF(result_bag) &gt; 0 THEN
REPEAT i := 1 TO HIINDEX(result_bag);
results := results + result_bag[i];
END_REPEAT;
END_IF;
intermediate_items := using_items(item,[]);
IF SIZEOF(intermediate_items) &gt; 0 THEN
REPEAT i := 1 TO HIINDEX(intermediate_items);
result_bag := USEDIN(intermediate_items[i],
'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.REPRESENTATION.ITEMS');
IF SIZEOF(result_bag) &gt; 0 THEN
REPEAT j := 1 TO HIINDEX(result_bag);
results := results + result_bag[j];
END_REPEAT;
END_IF;
END_REPEAT;
END_IF;
RETURN (results);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="valid_measure_value">
                                                                          <parameter
                                                                            name="m">
                                                                            <typename
                                                                              name="measure_value"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="BOOLEAN"/>
                                                                          <algorithm>
IF ('REAL' IN TYPEOF (m)) THEN
RETURN (m &gt; 0.0);
ELSE
IF ('INTEGER' IN TYPEOF (m)) THEN
RETURN (m &gt; 0);
ELSE
RETURN (TRUE);
END_IF;
END_IF;
                                                                          </algorithm>
                                                                        </function>

                                                                        <entity
                                                                          name="security_classification">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="purpose">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="security_level">
                                                                            <typename
                                                                              name="security_classification_level"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="security_classification_level">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <type name="limit_condition">
                                                                          <enumeration
                                                                            items="maximum_material_condition least_material_condition regardless_of_feature_size">
                                                                          </enumeration>
                                                                        </type>

                                                                        <entity
                                                                          name="datum"
                                                                          supertypes="shape_aspect">
                                                                          <explicit
                                                                            name="identification">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <inverse
                                                                            name="established_by_relationships"
                                                                            entity="shape_aspect_relationship"
                                                                            attribute="related_shape_aspect">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (x&lt;*SELF\datum.established_by_relationships | SIZEOF (TYPEOF(x\shape_aspect_relationship.relating_shape_aspect)*['AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DATUM_FEATURE','AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DATUM_TARGET']) &lt;&gt; 1))=0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="datum_feature"
                                                                          supertypes="shape_aspect">
                                                                          <inverse
                                                                            name="feature_basis_relationship"
                                                                            entity="shape_aspect_relationship"
                                                                            attribute="relating_shape_aspect">
                                                                          </inverse>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (sar&lt;* bag_to_set (USEDIN (SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_ASPECT_RELATIONSHIP.'+'RELATING_SHAPE_ASPECT'))| NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DATUM' IN TYPEOF(sar\shape_aspect_relationship.related_shape_aspect))))=0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SELF\shape_aspect.product_definitional = TRUE">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="datum_target"
                                                                          supertypes="shape_aspect">
                                                                          <explicit
                                                                            name="target_id">
                                                                            <typename
                                                                              name="identifier"/>
                                                                          </explicit>
                                                                          <inverse
                                                                            name="target_basis_relationship"
                                                                            entity="shape_aspect_relationship"
                                                                            attribute="relating_shape_aspect">
                                                                          </inverse>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (sar&lt;* bag_to_set (USEDIN (SELF,'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHAPE_ASPECT_RELATIONSHIP.' +'RELATING_SHAPE_ASPECT'))| NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DATUM' IN TYPEOF(sar\shape_aspect_relationship.related_shape_aspect))))=0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SELF\shape_aspect.product_definitional = TRUE">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="datum_reference">
                                                                          <explicit
                                                                            name="precedence">
                                                                            <builtintype
                                                                              type="INTEGER"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="referenced_datum">
                                                                            <typename
                                                                              name="datum"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="precedence &gt; 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="referenced_modified_datum"
                                                                          supertypes="datum_reference">
                                                                          <explicit
                                                                            name="modifier">
                                                                            <typename
                                                                              name="limit_condition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="composite_shape_aspect"
                                                                          supertypes="shape_aspect">
                                                                          <inverse
                                                                            name="component_relationships"
                                                                            entity="shape_aspect_relationship"
                                                                            attribute="relating_shape_aspect">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="2"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                        </entity>

                                                                        <entity
                                                                          name="derived_shape_aspect"
                                                                          super.expression="(ONEOF (apex, centre_of_symmetry, geometric_alignment, geometric_intersection, parallel_offset, perpendicular_to, extension, tangent))"
                                                                          supertypes="shape_aspect">
                                                                          <inverse
                                                                            name="deriving_relationships"
                                                                            entity="shape_aspect_relationship"
                                                                            attribute="relating_shape_aspect">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (dr &lt;* SELF\derived_shape_aspect.deriving_relationships | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.' +'SHAPE_ASPECT_DERIVING_RELATIONSHIP' IN TYPEOF (dr)))) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="apex"
                                                                          supertypes="derived_shape_aspect">
                                                                        </entity>

                                                                        <entity
                                                                          name="centre_of_symmetry"
                                                                          supertypes="derived_shape_aspect">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF(QUERY(sadr&lt;*SELF\derived_shape_aspect.deriving_relationships| NOT('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SYMMETRIC_SHAPE_ASPECT' IN TYPEOF(sadr\shape_aspect_relationship.related_shape_aspect))))=0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="geometric_alignment"
                                                                          supertypes="derived_shape_aspect">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (SELF\derived_shape_aspect.deriving_relationships)&gt; 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="geometric_intersection"
                                                                          supertypes="derived_shape_aspect">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (SELF\derived_shape_aspect.deriving_relationships)&gt; 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="parallel_offset"
                                                                          supertypes="derived_shape_aspect">
                                                                          <explicit
                                                                            name="offset">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (SELF\derived_shape_aspect.deriving_relationships)= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="perpendicular_to"
                                                                          supertypes="derived_shape_aspect">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (SELF\derived_shape_aspect.deriving_relationships)= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="extension"
                                                                          supertypes="derived_shape_aspect">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (SELF\derived_shape_aspect.deriving_relationships)= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="tangent"
                                                                          supertypes="derived_shape_aspect">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (SELF\derived_shape_aspect.deriving_relationships)= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="shape_aspect_deriving_relationship"
                                                                          supertypes="shape_aspect_relationship">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DERIVED_SHAPE_ASPECT' IN TYPEOF(SELF\SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="symmetric_shape_aspect"
                                                                          supertypes="shape_aspect">
                                                                          <inverse
                                                                            name="basis_relationships"
                                                                            entity="shape_aspect_relationship"
                                                                            attribute="relating_shape_aspect">
                                                                            <inverse.aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                          </inverse>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (x&lt;*SELF\symmetric_shape_aspect.basis_relationships |'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CENTRE_OF_SYMMETRY' IN TYPEOF(x\shape_aspect_relationship.related_shape_aspect)))&gt;=1">
                                                                          </where>
                                                                        </entity>

                                                                        <type name="angle_relator">
                                                                          <enumeration
                                                                            items="equal large small">
                                                                          </enumeration>
                                                                        </type>

                                                                        <type name="dimensional_characteristic">
                                                                          <select
                                                                            selectitems="dimensional_location dimensional_size">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="angular_location"
                                                                          supertypes="dimensional_location">
                                                                          <explicit
                                                                            name="angle_selection">
                                                                            <typename
                                                                              name="angle_relator"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="angular_size"
                                                                          supertypes="dimensional_size">
                                                                          <explicit
                                                                            name="angle_selection">
                                                                            <typename
                                                                              name="angle_relator"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="dimensional_characteristic_representation">
                                                                          <explicit
                                                                            name="dimension">
                                                                            <typename
                                                                              name="dimensional_characteristic"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="representation">
                                                                            <typename
                                                                              name="shape_dimension_representation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="dimensional_location"
                                                                          super.expression="(ONEOF (angular_location, dimensional_location_with_path))"
                                                                          supertypes="shape_aspect_relationship">
                                                                        </entity>

                                                                        <entity
                                                                          name="dimensional_location_with_path"
                                                                          supertypes="dimensional_location">
                                                                          <explicit
                                                                            name="path">
                                                                            <typename
                                                                              name="shape_aspect"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="dimensional_size"
                                                                          super.expression="(ONEOF (angular_size, dimensional_size_with_path))">
                                                                          <explicit
                                                                            name="applies_to">
                                                                            <typename
                                                                              name="shape_aspect"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="applies_to.product_definitional = TRUE">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="dimensional_size_with_path"
                                                                          supertypes="dimensional_size">
                                                                          <explicit
                                                                            name="path">
                                                                            <typename
                                                                              name="shape_aspect"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="shape_dimension_representation"
                                                                          supertypes="shape_representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (temp &lt;* SELF\representation.items | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM' IN TYPEOF (temp)))) = 0">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF (SELF\representation.items) &lt;= 3">
                                                                          </where>
                                                                          <where
                                                                            label="WR3"
                                                                            expression="SIZEOF (QUERY (pos_mri &lt;* QUERY (real_mri &lt;* SELF\representation.items | 'REAL' IN TYPEOF(real_mri\measure_with_unit.value_component)) | NOT (pos_mri\measure_with_unit.value_component &gt; 0.0))) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <type name="tolerance_method_definition">
                                                                          <select
                                                                            selectitems="tolerance_value limits_and_fits">
                                                                          </select>
                                                                        </type>

                                                                        <type name="shape_tolerance_select">
                                                                          <select
                                                                            selectitems="geometric_tolerance plus_minus_tolerance">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="dimension_related_tolerance_zone_element">
                                                                          <explicit
                                                                            name="related_dimension">
                                                                            <typename
                                                                              name="dimensional_location"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_element">
                                                                            <typename
                                                                              name="tolerance_zone_definition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="geometric_tolerance">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="magnitude">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="toleranced_shape_aspect">
                                                                            <typename
                                                                              name="shape_aspect"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="('NUMBER' IN TYPEOF(magnitude\measure_with_unit.value_component)) AND(magnitude\measure_with_unit.value_component &gt;= 0.0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="geometric_tolerance_relationship">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="description">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="relating_geometric_tolerance">
                                                                            <typename
                                                                              name="geometric_tolerance"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="related_geometric_tolerance">
                                                                            <typename
                                                                              name="geometric_tolerance"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="geometric_tolerance_with_datum_reference"
                                                                          supertypes="geometric_tolerance">
                                                                          <explicit
                                                                            name="datum_system">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="datum_reference"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="geometric_tolerance_with_defined_unit"
                                                                          supertypes="geometric_tolerance">
                                                                          <explicit
                                                                            name="unit_size">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="('NUMBER' IN TYPEOF(unit_size\measure_with_unit.value_component)) AND(unit_size\measure_with_unit.value_component &gt; 0.0)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="modified_geometric_tolerance"
                                                                          supertypes="geometric_tolerance">
                                                                          <explicit
                                                                            name="modifier">
                                                                            <typename
                                                                              name="limit_condition"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="projected_zone_definition"
                                                                          supertypes="tolerance_zone_definition">
                                                                          <explicit
                                                                            name="projection_end">
                                                                            <typename
                                                                              name="shape_aspect"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="projected_length">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="('NUMBER' IN TYPEOF(projected_length\measure_with_unit.value_component)) AND(projected_length\measure_with_unit.value_component &gt; 0.0)">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="(derive_dimensional_exponents(projected_length\measure_with_unit.unit_component)= dimensional_exponents(1,0,0,0,0,0,0))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="runout_zone_definition"
                                                                          supertypes="tolerance_zone_definition">
                                                                          <explicit
                                                                            name="orientation">
                                                                            <typename
                                                                              name="runout_zone_orientation"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="runout_zone_orientation">
                                                                          <explicit
                                                                            name="angle">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="runout_zone_orientation_reference_direction"
                                                                          supertypes="runout_zone_orientation">
                                                                          <explicit
                                                                            name="orientation_defining_relationship">
                                                                            <typename
                                                                              name="shape_aspect_relationship"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="statistical_distribution_for_tolerance"
                                                                          supertypes="representation">
                                                                          <where
                                                                            label="WR1"
                                                                            expression="SIZEOF (QUERY (item &lt;* SELF\representation.items | NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.MEASURE_REPRESENTATION_ITEM' IN TYPEOF (item)))) = 0">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="tolerance_with_statistical_distribution">
                                                                          <explicit
                                                                            name="associated_tolerance">
                                                                            <typename
                                                                              name="shape_tolerance_select"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="tolerance_allocation">
                                                                            <typename
                                                                              name="statistical_distribution_for_tolerance"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="tolerance_zone"
                                                                          supertypes="shape_aspect">
                                                                          <explicit
                                                                            name="defining_tolerance">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="geometric_tolerance"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="form">
                                                                            <typename
                                                                              name="tolerance_zone_form"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="tolerance_zone_form">
                                                                          <explicit
                                                                            name="name">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="tolerance_zone_definition"
                                                                          super.expression="(ONEOF (projected_zone_definition, runout_zone_definition))">
                                                                          <explicit
                                                                            name="zone">
                                                                            <typename
                                                                              name="tolerance_zone"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="boundaries">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="shape_aspect"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="limits_and_fits">
                                                                          <explicit
                                                                            name="form_variance">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="zone_variance">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="grade">
                                                                            <typename
                                                                              name="label"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="source">
                                                                            <typename
                                                                              name="text"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="plus_minus_tolerance">
                                                                          <explicit
                                                                            name="range">
                                                                            <typename
                                                                              name="tolerance_method_definition"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="toleranced_dimension">
                                                                            <typename
                                                                              name="dimensional_characteristic"/>
                                                                          </explicit>
                                                                          <unique
                                                                            label="UR1">
                                                                            <unique.attribute
                                                                              attribute="toleranced_dimension"/>
                                                                          </unique>
                                                                        </entity>

                                                                        <entity
                                                                          name="tolerance_value">
                                                                          <explicit
                                                                            name="lower_bound">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="upper_bound">
                                                                            <typename
                                                                              name="measure_with_unit"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="upper_bound\measure_with_unit.value_component &gt; lower_bound\measure_with_unit.value_component">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="upper_bound\measure_with_unit.unit_component = lower_bound\measure_with_unit.unit_component">
                                                                          </where>
                                                                        </entity>

                                                                        <type name="identifier">
                                                                          <builtintype
                                                                            type="STRING">
                                                                          </builtintype>
                                                                        </type>

                                                                        <type name="label">
                                                                          <builtintype
                                                                            type="STRING">
                                                                          </builtintype>
                                                                        </type>

                                                                        <type name="text">
                                                                          <builtintype
                                                                            type="STRING">
                                                                          </builtintype>
                                                                        </type>

                                                                        <function
                                                                          name="bag_to_set">
                                                                          <parameter
                                                                            name="the_bag">
                                                                            <aggregate
                                                                              type="BAG"/>
                                                                            <builtintype
                                                                              type="GENERIC"
                                                                              typelabel="intype"/>
                                                                          </parameter>
                                                                          <aggregate
                                                                            type="SET"/>
                                                                          <builtintype
                                                                            type="GENERIC"
                                                                            typelabel="intype"/>
                                                                          <algorithm>
LOCAL
the_set : SET OF GENERIC:intype := [];
END_LOCAL;
IF SIZEOF(the_bag) &gt; 0 THEN
REPEAT i := 1 TO HIINDEX(the_bag);
the_set := the_set + the_bag[i];
END_REPEAT;
END_IF;
RETURN (the_set);
                                                                          </algorithm>
                                                                        </function>

                                                                        <function
                                                                          name="type_check_function">
                                                                          <parameter
                                                                            name="the_type">
                                                                            <builtintype
                                                                              type="GENERIC"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="sub_names">
                                                                            <aggregate
                                                                              type="SET"/>
                                                                            <builtintype
                                                                              type="STRING"/>
                                                                          </parameter>
                                                                          <parameter
                                                                            name="criterion">
                                                                            <builtintype
                                                                              type="INTEGER"/>
                                                                          </parameter>
                                                                          <builtintype
                                                                            type="LOGICAL"/>
                                                                          <algorithm>
IF ((NOT EXISTS (the_type)) OR (NOT ({0&lt;= criterion &lt;=3})) OR
(SIZEOF (sub_names) = 0)) THEN RETURN (UNKNOWN);
ELSE
CASE criterion OF
0: RETURN (SIZEOF (sub_names * TYPEOF (the_type)) &gt; 0);
1: RETURN (SIZEOF (sub_names * TYPEOF (the_type)) = 0);
2: RETURN (SIZEOF (sub_names * TYPEOF (the_type)) = 1);
3: RETURN (SIZEOF (sub_names * TYPEOF (the_type)) &lt;= 1);
END_CASE;
END_IF;
                                                                          </algorithm>
                                                                        </function>

                                                                        <type name="list_of_reversible_topology_item">
                                                                          <aggregate
                                                                            type="LIST"
                                                                            lower="0"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="reversible_topology_item"/>
                                                                        </type>

                                                                        <type name="reversible_topology">
                                                                          <select
                                                                            selectitems="reversible_topology_item list_of_reversible_topology_item set_of_reversible_topology_item">
                                                                          </select>
                                                                        </type>

                                                                        <type name="reversible_topology_item">
                                                                          <select
                                                                            selectitems="edge path face face_bound closed_shell open_shell">
                                                                          </select>
                                                                        </type>

                                                                        <type name="set_of_reversible_topology_item">
                                                                          <aggregate
                                                                            type="SET"
                                                                            lower="0"
                                                                            upper="?"/>
                                                                          <typename
                                                                            name="reversible_topology_item"/>
                                                                        </type>

                                                                        <type name="shell">
                                                                          <select
                                                                            selectitems="vertex_shell wire_shell open_shell closed_shell">
                                                                          </select>
                                                                        </type>

                                                                        <entity
                                                                          name="closed_shell"
                                                                          supertypes="connected_face_set">
                                                                        </entity>

                                                                        <entity
                                                                          name="connected_edge_set"
                                                                          supertypes="topological_representation_item">
                                                                          <explicit
                                                                            name="ces_edges">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="edge"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="connected_face_set"
                                                                          super.expression="(ONEOF (closed_shell, open_shell))"
                                                                          supertypes="topological_representation_item">
                                                                          <explicit
                                                                            name="cfs_faces">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="face"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="connected_face_sub_set"
                                                                          supertypes="connected_face_set">
                                                                          <explicit
                                                                            name="parent_face_set">
                                                                            <typename
                                                                              name="connected_face_set"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="edge"
                                                                          super.expression="(ONEOF(edge_curve, oriented_edge, subedge))"
                                                                          supertypes="topological_representation_item">
                                                                          <explicit
                                                                            name="edge_start">
                                                                            <typename
                                                                              name="vertex"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="edge_end">
                                                                            <typename
                                                                              name="vertex"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="edge_curve"
                                                                          supertypes="edge geometric_representation_item">
                                                                          <explicit
                                                                            name="edge_geometry">
                                                                            <typename
                                                                              name="curve"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="same_sense">
                                                                            <builtintype
                                                                              type="BOOLEAN"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="edge_loop"
                                                                          supertypes="loop path">
                                                                          <derived
                                                                            name="ne"
                                                                            expression="SIZEOF(SELF\path.edge_list)">
                                                                            <builtintype
                                                                              type="INTEGER"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SELF\path.edge_list[1].edge_start) :=:(SELF\path.edge_list[ne].edge_end)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="face"
                                                                          super.expression="(ONEOF(face_surface, subface, oriented_face))"
                                                                          supertypes="topological_representation_item">
                                                                          <explicit
                                                                            name="bounds">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="face_bound"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="NOT (mixed_loop_type_set(list_to_set(list_face_loops(SELF))))">
                                                                          </where>
                                                                          <where
                                                                            label="WR2"
                                                                            expression="SIZEOF(QUERY(temp &lt;* bounds | 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FACE_OUTER_BOUND' IN TYPEOF(temp))) &lt;= 1">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="face_bound"
                                                                          supertypes="topological_representation_item">
                                                                          <explicit
                                                                            name="bound">
                                                                            <typename
                                                                              name="loop"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="orientation">
                                                                            <builtintype
                                                                              type="BOOLEAN"/>
                                                                          </explicit>
                                                                        </entity>

                                                                        <entity
                                                                          name="face_outer_bound"
                                                                          supertypes="face_bound">
                                                                        </entity>

                                                                        <entity
                                                                          name="face_surface"
                                                                          supertypes="face geometric_representation_item">
                                                                          <explicit
                                                                            name="face_geometry">
                                                                            <typename
                                                                              name="surface"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="same_sense">
                                                                            <builtintype
                                                                              type="BOOLEAN"/>
                                                                          </explicit>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_SURFACE' IN TYPEOF(face_geometry))">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="loop"
                                                                          super.expression="(ONEOF(vertex_loop, edge_loop, poly_loop))"
                                                                          supertypes="topological_representation_item">
                                                                        </entity>

                                                                        <entity
                                                                          name="open_path"
                                                                          supertypes="path">
                                                                          <derived
                                                                            name="ne"
                                                                            expression="SIZEOF(SELF\path.edge_list)">
                                                                            <builtintype
                                                                              type="INTEGER"/>
                                                                          </derived>
                                                                          <where
                                                                            label="WR1"
                                                                            expression="(SELF\path.edge_list[1].edge_element.edge_start) :&lt;&gt;:(SELF\path.edge_list[ne].edge_element.edge_end)">
                                                                          </where>
                                                                        </entity>

                                                                        <entity
                                                                          name="open_shell"
                                                                          supertypes="connected_face_set">
                                                                        </entity>

                                                                        <entity
                                                                          name="oriented_closed_shell"
                                                                          supertypes="closed_shell">
                                                                          <explicit
                                                                            name="closed_shell_element">
                                                                            <typename
                                                                              name="closed_shell"/>
                                                                          </explicit>
                                                                          <explicit
                                                                            name="orientation">
                                                                            <builtintype
                                                                              type="BOOLEAN"/>
                                                                          </explicit>
                                                                          <derived
                                                                            name="cfs_faces"
                                                                            expression="conditional_reverse(SELF.orientation, SELF.closed_shell_element.cfs_faces)">
                                                                            <aggregate
                                                                              type="SET"
                                                                              lower="1"
                                                                              upper="?"/>
                                                                            <typename
                                                                              name="face"/>
                                                                            <redeclaration
                                                                              entity-ref="connected_face_set"/>
                                                                            </derived>
                                                                            <where
                                                                              label="WR1"
                                                                              expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_CLOSED_SHELL' IN TYPEOF (SELF.closed_shell_element))">
                                                                            </where>
                                                                          </entity>

                                                                          <entity
                                                                            name="oriented_edge"
                                                                            supertypes="edge">
                                                                            <explicit
                                                                              name="edge_element">
                                                                              <typename
                                                                                name="edge"/>
                                                                            </explicit>
                                                                            <explicit
                                                                              name="orientation">
                                                                              <builtintype
                                                                                type="BOOLEAN"/>
                                                                            </explicit>
                                                                            <derived
                                                                              name="edge_start"
                                                                              expression="boolean_choose (SELF.orientation, SELF.edge_element.edge_start, SELF.edge_element.edge_end)">
                                                                              <typename
                                                                                name="vertex"/>
                                                                              <redeclaration
                                                                                entity-ref="edge"/>
                                                                              </derived>
                                                                              <derived
                                                                                name="edge_end"
                                                                                expression="boolean_choose (SELF.orientation, SELF.edge_element.edge_end, SELF.edge_element.edge_start)">
                                                                                <typename
                                                                                  name="vertex"/>
                                                                                <redeclaration
                                                                                  entity-ref="edge"/>
                                                                                </derived>
                                                                                <where
                                                                                  label="WR1"
                                                                                  expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_EDGE' IN TYPEOF (SELF.edge_element))">
                                                                                </where>
                                                                              </entity>

                                                                              <entity
                                                                                name="oriented_face"
                                                                                supertypes="face">
                                                                                <explicit
                                                                                  name="face_element">
                                                                                  <typename
                                                                                    name="face"/>
                                                                                </explicit>
                                                                                <explicit
                                                                                  name="orientation">
                                                                                  <builtintype
                                                                                    type="BOOLEAN"/>
                                                                                </explicit>
                                                                                <derived
                                                                                  name="bounds"
                                                                                  expression="conditional_reverse(SELF.orientation,SELF.face_element.bounds)">
                                                                                  <aggregate
                                                                                    type="SET"
                                                                                    lower="1"
                                                                                    upper="?"/>
                                                                                  <typename
                                                                                    name="face_bound"/>
                                                                                  <redeclaration
                                                                                    entity-ref="face"/>
                                                                                  </derived>
                                                                                  <where
                                                                                    label="WR1"
                                                                                    expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_FACE' IN TYPEOF (SELF.face_element))">
                                                                                  </where>
                                                                                </entity>

                                                                                <entity
                                                                                  name="oriented_open_shell"
                                                                                  supertypes="open_shell">
                                                                                  <explicit
                                                                                    name="open_shell_element">
                                                                                    <typename
                                                                                      name="open_shell"/>
                                                                                  </explicit>
                                                                                  <explicit
                                                                                    name="orientation">
                                                                                    <builtintype
                                                                                      type="BOOLEAN"/>
                                                                                  </explicit>
                                                                                  <derived
                                                                                    name="cfs_faces"
                                                                                    expression="conditional_reverse(SELF.orientation, SELF.open_shell_element.cfs_faces)">
                                                                                    <aggregate
                                                                                      type="SET"
                                                                                      lower="1"
                                                                                      upper="?"/>
                                                                                    <typename
                                                                                      name="face"/>
                                                                                    <redeclaration
                                                                                      entity-ref="connected_face_set"/>
                                                                                    </derived>
                                                                                    <where
                                                                                      label="WR1"
                                                                                      expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_OPEN_SHELL' IN TYPEOF (SELF.open_shell_element))">
                                                                                    </where>
                                                                                  </entity>

                                                                                  <entity
                                                                                    name="oriented_path"
                                                                                    supertypes="path">
                                                                                    <explicit
                                                                                      name="path_element">
                                                                                      <typename
                                                                                        name="path"/>
                                                                                    </explicit>
                                                                                    <explicit
                                                                                      name="orientation">
                                                                                      <builtintype
                                                                                        type="BOOLEAN"/>
                                                                                    </explicit>
                                                                                    <derived
                                                                                      name="edge_list"
                                                                                      expression="conditional_reverse(SELF.orientation, SELF.path_element.edge_list)">
                                                                                      <aggregate
                                                                                        type="LIST"
                                                                                        lower="1"
                                                                                        upper="?"
                                                                                        unique="YES"/>
                                                                                      <typename
                                                                                        name="oriented_edge"/>
                                                                                      <redeclaration
                                                                                        entity-ref="path"/>
                                                                                      </derived>
                                                                                      <where
                                                                                        label="WR1"
                                                                                        expression="NOT ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_PATH' IN TYPEOF (SELF.path_element))">
                                                                                      </where>
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="path"
                                                                                      super.expression="(ONEOF(open_path, edge_loop, oriented_path))"
                                                                                      supertypes="topological_representation_item">
                                                                                      <explicit
                                                                                        name="edge_list">
                                                                                        <aggregate
                                                                                          type="LIST"
                                                                                          lower="1"
                                                                                          upper="?"
                                                                                          unique="YES"/>
                                                                                        <typename
                                                                                          name="oriented_edge"/>
                                                                                      </explicit>
                                                                                      <where
                                                                                        label="WR1"
                                                                                        expression="path_head_to_tail(SELF)">
                                                                                      </where>
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="poly_loop"
                                                                                      supertypes="loop geometric_representation_item">
                                                                                      <explicit
                                                                                        name="polygon">
                                                                                        <aggregate
                                                                                          type="LIST"
                                                                                          lower="3"
                                                                                          upper="?"
                                                                                          unique="YES"/>
                                                                                        <typename
                                                                                          name="cartesian_point"/>
                                                                                      </explicit>
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="seam_edge"
                                                                                      supertypes="oriented_edge">
                                                                                      <explicit
                                                                                        name="pcurve_reference">
                                                                                        <typename
                                                                                          name="pcurve"/>
                                                                                      </explicit>
                                                                                      <where
                                                                                        label="WR1"
                                                                                        expression="('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EDGE_CURVE' IN TYPEOF (edge_element)) AND('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SEAM_CURVE' IN TYPEOF(edge_element\edge_curve.edge_geometry))">
                                                                                      </where>
                                                                                      <where
                                                                                        label="WR2"
                                                                                        expression="pcurve_reference IN edge_element\edge_curve.edge_geometry\ surface_curve.associated_geometry">
                                                                                      </where>
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="subedge"
                                                                                      supertypes="edge">
                                                                                      <explicit
                                                                                        name="parent_edge">
                                                                                        <typename
                                                                                          name="edge"/>
                                                                                      </explicit>
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="subface"
                                                                                      supertypes="face">
                                                                                      <explicit
                                                                                        name="parent_face">
                                                                                        <typename
                                                                                          name="face"/>
                                                                                      </explicit>
                                                                                      <where
                                                                                        label="WR1"
                                                                                        expression="NOT (mixed_loop_type_set(list_to_set(list_face_loops(SELF)) + list_to_set(list_face_loops(parent_face))))">
                                                                                      </where>
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="topological_representation_item"
                                                                                      super.expression="(ONEOF(vertex, edge, face_bound, face, vertex_shell, wire_shell, connected_edge_set, connected_face_set,(loop ANDOR path)))"
                                                                                      supertypes="representation_item">
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="vertex"
                                                                                      supertypes="topological_representation_item">
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="vertex_point"
                                                                                      supertypes="vertex geometric_representation_item">
                                                                                      <explicit
                                                                                        name="vertex_geometry">
                                                                                        <typename
                                                                                          name="point"/>
                                                                                      </explicit>
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="vertex_loop"
                                                                                      supertypes="loop">
                                                                                      <explicit
                                                                                        name="loop_vertex">
                                                                                        <typename
                                                                                          name="vertex"/>
                                                                                      </explicit>
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="vertex_shell"
                                                                                      supertypes="topological_representation_item">
                                                                                      <explicit
                                                                                        name="vertex_shell_extent">
                                                                                        <typename
                                                                                          name="vertex_loop"/>
                                                                                      </explicit>
                                                                                    </entity>

                                                                                    <entity
                                                                                      name="wire_shell"
                                                                                      supertypes="topological_representation_item">
                                                                                      <explicit
                                                                                        name="wire_shell_extent">
                                                                                        <aggregate
                                                                                          type="SET"
                                                                                          lower="1"
                                                                                          upper="?"/>
                                                                                        <typename
                                                                                          name="loop"/>
                                                                                      </explicit>
                                                                                      <where
                                                                                        label="WR1"
                                                                                        expression="NOT mixed_loop_type_set(wire_shell_extent)">
                                                                                      </where>
                                                                                    </entity>

                                                                                    <function
                                                                                      name="boolean_choose">
                                                                                      <parameter
                                                                                        name="b">
                                                                                        <builtintype
                                                                                          type="BOOLEAN"/>
                                                                                      </parameter>
                                                                                      <parameter
                                                                                        name="choice1">
                                                                                        <builtintype
                                                                                          type="GENERIC"/>
                                                                                      </parameter>
                                                                                      <parameter
                                                                                        name="choice2">
                                                                                        <builtintype
                                                                                          type="GENERIC"/>
                                                                                      </parameter>
                                                                                      <builtintype
                                                                                        type="GENERIC"/>
                                                                                      <algorithm>
IF b THEN
RETURN (choice1);
ELSE
RETURN (choice2);
END_IF;
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="closed_shell_reversed">
                                                                                      <parameter
                                                                                        name="a_shell">
                                                                                        <typename
                                                                                          name="closed_shell"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="oriented_closed_shell"/>
                                                                                      <algorithm>
LOCAL
the_reverse : oriented_closed_shell;
END_LOCAL;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_CLOSED_SHELL' IN TYPEOF (a_shell)) THEN
the_reverse := dummy_tri ||
connected_face_set (
a_shell\connected_face_set.cfs_faces) ||
closed_shell () || oriented_closed_shell(
a_shell\oriented_closed_shell.closed_shell_element,
NOT(a_shell\oriented_closed_shell.orientation));
ELSE
the_reverse := dummy_tri ||
connected_face_set (
a_shell\connected_face_set.cfs_faces) ||
closed_shell () || oriented_closed_shell (a_shell, FALSE);
END_IF;
RETURN (the_reverse);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="conditional_reverse">
                                                                                      <parameter
                                                                                        name="p">
                                                                                        <builtintype
                                                                                          type="BOOLEAN"/>
                                                                                      </parameter>
                                                                                      <parameter
                                                                                        name="an_item">
                                                                                        <typename
                                                                                          name="reversible_topology"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="reversible_topology"/>
                                                                                      <algorithm>
IF p THEN
RETURN (an_item);
ELSE
RETURN (topology_reversed (an_item));
END_IF;
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="edge_curve_pcurves">
                                                                                      <parameter
                                                                                        name="an_edge">
                                                                                        <typename
                                                                                          name="edge_curve"/>
                                                                                      </parameter>
                                                                                      <parameter
                                                                                        name="the_surface_curves">
                                                                                        <aggregate
                                                                                          type="SET"/>
                                                                                        <typename
                                                                                          name="surface_curve"/>
                                                                                      </parameter>
                                                                                      <aggregate
                                                                                        type="SET"/>
                                                                                      <typename
                                                                                        name="pcurve"/>
                                                                                      <algorithm>
LOCAL
a_curve : curve;
result : SET OF pcurve;
the_geometry : LIST[1:2] OF pcurve_or_surface;
END_LOCAL;
a_curve := an_edge.edge_geometry;
result := [];
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF(a_curve) THEN
result := result + a_curve;
ELSE
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SURFACE_CURVE' IN TYPEOF(a_curve) THEN
the_geometry := a_curve\surface_curve.associated_geometry;
REPEAT k := 1 TO SIZEOF(the_geometry);
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF (the_geometry[k])
THEN
result := result + the_geometry[k];
END_IF;
END_REPEAT;
ELSE
REPEAT j := 1 TO SIZEOF(the_surface_curves);
the_geometry := the_surface_curves[j].associated_geometry;
IF the_surface_curves[j].curve_3d :=: a_curve
THEN
REPEAT k := 1 TO SIZEOF(the_geometry);
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PCURVE' IN TYPEOF (the_geometry[k])
THEN
result := result + the_geometry[k];
END_IF;
END_REPEAT;
END_IF;
END_REPEAT;
END_IF;
END_IF;
RETURN (RESULT);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="edge_reversed">
                                                                                      <parameter
                                                                                        name="an_edge">
                                                                                        <typename
                                                                                          name="edge"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="oriented_edge"/>
                                                                                      <algorithm>
LOCAL
the_reverse : oriented_edge;
END_LOCAL;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_EDGE' IN TYPEOF (an_edge)) THEN
the_reverse := dummy_tri ||
edge(an_edge.edge_end, an_edge.edge_start) ||
oriented_edge(an_edge\oriented_edge.edge_element,
NOT (an_edge\oriented_edge.orientation)) ;
ELSE
the_reverse := dummy_tri ||
edge(an_edge.edge_end, an_edge.edge_start) ||
oriented_edge(an_edge, FALSE);
END_IF;
RETURN (the_reverse);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="face_bound_reversed">
                                                                                      <parameter
                                                                                        name="a_face_bound">
                                                                                        <typename
                                                                                          name="face_bound"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="face_bound"/>
                                                                                      <algorithm>
LOCAL
the_reverse : face_bound ;
END_LOCAL;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FACE_OUTER_BOUND' IN TYPEOF (a_face_bound)) THEN
the_reverse := dummy_tri ||
face_bound(a_face_bound\face_bound.bound,
NOT (a_face_bound\face_bound.orientation))
|| face_outer_bound() ;
ELSE
the_reverse := dummy_tri ||
face_bound(a_face_bound.bound, NOT(a_face_bound.orientation));
END_IF;
RETURN (the_reverse);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="face_reversed">
                                                                                      <parameter
                                                                                        name="a_face">
                                                                                        <typename
                                                                                          name="face"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="oriented_face"/>
                                                                                      <algorithm>
LOCAL
the_reverse : oriented_face ;
END_LOCAL;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_FACE' IN TYPEOF (a_face)) THEN
the_reverse := dummy_tri ||
face(set_of_topology_reversed(a_face.bounds)) ||
oriented_face(a_face\oriented_face.face_element,
NOT (a_face\oriented_face.orientation)) ;
ELSE
the_reverse := dummy_tri ||
face(set_of_topology_reversed(a_face.bounds)) ||
oriented_face(a_face, FALSE) ;
END_IF;
RETURN (the_reverse);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="list_face_loops">
                                                                                      <parameter
                                                                                        name="f">
                                                                                        <typename
                                                                                          name="face"/>
                                                                                      </parameter>
                                                                                      <aggregate
                                                                                        type="LIST"
                                                                                        lower="0"
                                                                                        upper="?"/>
                                                                                      <typename
                                                                                        name="loop"/>
                                                                                      <algorithm>
LOCAL
loops : LIST[0:?] OF loop := [];
END_LOCAL;
REPEAT i := 1 TO SIZEOF(f.bounds);
loops := loops +(f.bounds[i].bound);
END_REPEAT;
RETURN(loops);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="list_loop_edges">
                                                                                      <parameter
                                                                                        name="l">
                                                                                        <typename
                                                                                          name="loop"/>
                                                                                      </parameter>
                                                                                      <aggregate
                                                                                        type="LIST"
                                                                                        lower="0"
                                                                                        upper="?"/>
                                                                                      <typename
                                                                                        name="edge"/>
                                                                                      <algorithm>
LOCAL
edges : LIST[0:?] OF edge := [];
END_LOCAL;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EDGE_LOOP' IN TYPEOF(l) THEN
REPEAT i := 1 TO SIZEOF(l\path.edge_list);
edges := edges + (l\path.edge_list[i].edge_element);
END_REPEAT;
END_IF;
RETURN(edges);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="list_of_topology_reversed">
                                                                                      <parameter
                                                                                        name="a_list">
                                                                                        <typename
                                                                                          name="list_of_reversible_topology_item"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="list_of_reversible_topology_item"/>
                                                                                      <algorithm>
LOCAL
the_reverse : list_of_reversible_topology_item;
END_LOCAL;
the_reverse := [];
REPEAT i := 1 TO SIZEOF (a_list);
the_reverse := topology_reversed (a_list [i]) + the_reverse;
END_REPEAT;
RETURN (the_reverse);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="list_shell_edges">
                                                                                      <parameter
                                                                                        name="s">
                                                                                        <typename
                                                                                          name="shell"/>
                                                                                      </parameter>
                                                                                      <aggregate
                                                                                        type="LIST"
                                                                                        lower="0"
                                                                                        upper="?"/>
                                                                                      <typename
                                                                                        name="edge"/>
                                                                                      <algorithm>
LOCAL
edges : LIST[0:?] OF edge := [];
END_LOCAL;
REPEAT i := 1 TO SIZEOF(list_shell_loops(s));
edges := edges + list_loop_edges(list_shell_loops(s)[i]);
END_REPEAT;
RETURN(edges);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="list_shell_faces">
                                                                                      <parameter
                                                                                        name="s">
                                                                                        <typename
                                                                                          name="shell"/>
                                                                                      </parameter>
                                                                                      <aggregate
                                                                                        type="LIST"
                                                                                        lower="0"
                                                                                        upper="?"/>
                                                                                      <typename
                                                                                        name="face"/>
                                                                                      <algorithm>
LOCAL
faces : LIST[0:?] OF face := [];
END_LOCAL;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CLOSED_SHELL' IN TYPEOF(s)) OR
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.OPEN_SHELL' IN TYPEOF(s)) THEN
REPEAT i := 1 TO SIZEOF(s\connected_face_set.cfs_faces);
faces := faces + s\connected_face_set.cfs_faces[i];
END_REPEAT;
END_IF;
RETURN(faces);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="list_shell_loops">
                                                                                      <parameter
                                                                                        name="s">
                                                                                        <typename
                                                                                          name="shell"/>
                                                                                      </parameter>
                                                                                      <aggregate
                                                                                        type="LIST"
                                                                                        lower="0"
                                                                                        upper="?"/>
                                                                                      <typename
                                                                                        name="loop"/>
                                                                                      <algorithm>
LOCAL
loops : LIST[0:?] OF loop := [];
END_LOCAL;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.VERTEX_SHELL' IN TYPEOF(s) THEN
loops := loops + s.vertex_shell_extent;
END_IF;
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.WIRE_SHELL' IN TYPEOF(s) THEN
REPEAT i := 1 TO SIZEOF(s.wire_shell_extent);
loops := loops + s.wire_shell_extent[i];
END_REPEAT;
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.OPEN_SHELL' IN TYPEOF(s)) OR
('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CLOSED_SHELL' IN TYPEOF(s)) THEN
REPEAT i := 1 TO SIZEOF(s.cfs_faces);
loops := loops + list_face_loops(s.cfs_faces[i]);
END_REPEAT;
END_IF;
RETURN(loops);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="list_to_set">
                                                                                      <parameter
                                                                                        name="l">
                                                                                        <aggregate
                                                                                          type="LIST"
                                                                                          lower="0"
                                                                                          upper="?"/>
                                                                                        <builtintype
                                                                                          type="GENERIC"
                                                                                          typelabel="T"/>
                                                                                      </parameter>
                                                                                      <aggregate
                                                                                        type="SET"/>
                                                                                      <builtintype
                                                                                        type="GENERIC"
                                                                                        typelabel="T"/>
                                                                                      <algorithm>
LOCAL
s : SET OF GENERIC:T := [];
END_LOCAL;
REPEAT i := 1 TO SIZEOF(l);
s := s + l[i];
END_REPEAT;
RETURN(s);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="mixed_loop_type_set">
                                                                                      <parameter
                                                                                        name="l">
                                                                                        <aggregate
                                                                                          type="SET"
                                                                                          lower="0"
                                                                                          upper="?"/>
                                                                                        <typename
                                                                                          name="loop"/>
                                                                                      </parameter>
                                                                                      <builtintype
                                                                                        type="LOGICAL"/>
                                                                                      <algorithm>
LOCAL
poly_loop_type: LOGICAL;
END_LOCAL;
IF(SIZEOF(l) &lt;= 1) THEN
RETURN(FALSE);
END_IF;
poly_loop_type := ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POLY_LOOP' IN TYPEOF(l[1]));
REPEAT i := 2 TO SIZEOF(l);
IF(('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.POLY_LOOP' IN TYPEOF(l[i])) &lt;&gt; poly_loop_type)
THEN
RETURN(TRUE);
END_IF;
END_REPEAT;
RETURN(FALSE);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="open_shell_reversed">
                                                                                      <parameter
                                                                                        name="a_shell">
                                                                                        <typename
                                                                                          name="open_shell"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="oriented_open_shell"/>
                                                                                      <algorithm>
LOCAL
the_reverse : oriented_open_shell;
END_LOCAL;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_OPEN_SHELL' IN TYPEOF (a_shell)) THEN
the_reverse := dummy_tri ||
connected_face_set (
a_shell\connected_face_set.cfs_faces) ||
open_shell () || oriented_open_shell(
a_shell\oriented_open_shell.open_shell_element,
(NOT (a_shell\oriented_open_shell.orientation)));
ELSE
the_reverse := dummy_tri ||
connected_face_set (
a_shell\connected_face_set.cfs_faces) ||
open_shell () || oriented_open_shell (a_shell, FALSE);
END_IF;
RETURN (the_reverse);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="path_head_to_tail">
                                                                                      <parameter
                                                                                        name="a_path">
                                                                                        <typename
                                                                                          name="path"/>
                                                                                      </parameter>
                                                                                      <builtintype
                                                                                        type="LOGICAL"/>
                                                                                      <algorithm>
LOCAL
n : INTEGER;
p : LOGICAL := TRUE;
END_LOCAL;
n := SIZEOF (a_path.edge_list);
REPEAT i := 2 TO n;
p := p AND (a_path.edge_list[i-1].edge_end :=:
a_path.edge_list[i].edge_start);
END_REPEAT;
RETURN (p);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="path_reversed">
                                                                                      <parameter
                                                                                        name="a_path">
                                                                                        <typename
                                                                                          name="path"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="oriented_path"/>
                                                                                      <algorithm>
LOCAL
the_reverse : oriented_path ;
END_LOCAL;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.ORIENTED_PATH' IN TYPEOF (a_path)) THEN
the_reverse := dummy_tri ||
path(list_of_topology_reversed (a_path.edge_list)) ||
oriented_path(a_path\oriented_path.path_element,
NOT(a_path\oriented_path.orientation)) ;
ELSE
the_reverse := dummy_tri ||
path(list_of_topology_reversed (a_path.edge_list)) ||
oriented_path(a_path, FALSE);
END_IF;
RETURN (the_reverse);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="set_of_topology_reversed">
                                                                                      <parameter
                                                                                        name="a_set">
                                                                                        <typename
                                                                                          name="set_of_reversible_topology_item"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="set_of_reversible_topology_item"/>
                                                                                      <algorithm>
LOCAL
the_reverse : set_of_reversible_topology_item;
END_LOCAL;
the_reverse := [];
REPEAT i := 1 TO SIZEOF (a_set);
the_reverse := the_reverse + topology_reversed (a_set [i]);
END_REPEAT;
RETURN (the_reverse);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="shell_reversed">
                                                                                      <parameter
                                                                                        name="a_shell">
                                                                                        <typename
                                                                                          name="shell"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="shell"/>
                                                                                      <algorithm>
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.OPEN_SHELL' IN TYPEOF (a_shell)) THEN
RETURN (open_shell_reversed (a_shell));
ELSE
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.CLOSED_SHELL' IN TYPEOF (a_shell)) THEN
RETURN (closed_shell_reversed (a_shell));
ELSE
RETURN (?);
END_IF;
END_IF;
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="topology_reversed">
                                                                                      <parameter
                                                                                        name="an_item">
                                                                                        <typename
                                                                                          name="reversible_topology"/>
                                                                                      </parameter>
                                                                                      <typename
                                                                                        name="reversible_topology"/>
                                                                                      <algorithm>
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.EDGE' IN TYPEOF (an_item)) THEN
RETURN (edge_reversed (an_item));
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.PATH' IN TYPEOF (an_item)) THEN
RETURN (path_reversed (an_item));
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FACE_BOUND' IN TYPEOF (an_item)) THEN
RETURN (face_bound_reversed (an_item));
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.FACE' IN TYPEOF (an_item)) THEN
RETURN (face_reversed (an_item));
END_IF;
IF ('AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.SHELL' IN TYPEOF (an_item)) THEN
RETURN (shell_reversed (an_item));
END_IF;
IF ('SET' IN TYPEOF (an_item)) THEN
RETURN (set_of_topology_reversed (an_item));
END_IF;
IF ('LIST' IN TYPEOF (an_item)) THEN
RETURN (list_of_topology_reversed (an_item));
END_IF;
RETURN (?);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                    <function
                                                                                      name="vertex_point_pcurves">
                                                                                      <parameter
                                                                                        name="a_vertex">
                                                                                        <typename
                                                                                          name="vertex_point"/>
                                                                                      </parameter>
                                                                                      <parameter
                                                                                        name="the_degenerates">
                                                                                        <aggregate
                                                                                          type="SET"/>
                                                                                        <typename
                                                                                          name="evaluated_degenerate_pcurve"/>
                                                                                      </parameter>
                                                                                      <aggregate
                                                                                        type="SET"/>
                                                                                      <typename
                                                                                        name="degenerate_pcurve"/>
                                                                                      <algorithm>
LOCAL
a_point : point;
result : SET OF degenerate_pcurve;
END_LOCAL;
a_point := a_vertex.vertex_geometry;
result := [];
IF 'AP236_FURNITURE_CATALOG_AND_INTERIOR_DESIGN_MIM_LF.DEGENERATE_PCURVE' IN TYPEOF(a_point) THEN
result := result + a_point;
ELSE
REPEAT j := 1 TO SIZEOF(the_degenerates);
IF (the_degenerates[j].equivalent_point :=: a_point) THEN
result := result + the_degenerates[j];
END_IF;
END_REPEAT;
END_IF;
RETURN (RESULT);
                                                                                      </algorithm>
                                                                                    </function>

                                                                                  </schema>
                                                                                </express>
