SCHEMA AP242_BusinessObjectModel;

CONSTANT
 SCHEMA_NAME : STRING := 'AP242_BUSINESSOBJECTMODEL.'; -- just for expressing EXPRESS constraints, not part of the schema
END_CONSTANT;


(*:PI1
 ------------------------------------------------------------
  Part and Version Identification
 ------------------------------------------------------------
*)

ENTITY Part;
  id : IdentifierSelect;
  name : DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  partTypes: SET [1:?] OF ClassSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  versions : SET[1:?] OF PartVersion;
END_ENTITY;

ENTITY PartVersion;
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  views : OPTIONAL SET[1:?] OF PartView;
INVERSE
  versionOf : Part FOR versions;
END_ENTITY;

ENTITY PartRelationship
  SUPERTYPE OF (ONEOF (AlternatePartRelationship));
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : Part;
  related : Part;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY AlternatePartRelationship
  SUBTYPE OF (PartRelationship);
  criteria : OPTIONAL MultiLingualStringSelect;
UNIQUE
  UR1: relating, related;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY PartVersionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : PartVersion;
  related : PartVersion;
WHERE
 WR1: relating :<>: related;
END_ENTITY;


(*:PI2
 ------------------------------------------------------------
  Part View
 ------------------------------------------------------------
*)

TYPE PartVersionOrViewSelect = SELECT (
  PartVersion,
  PartView);
END_TYPE;

ENTITY PartView
  SUPERTYPE OF (ONEOF (AssemblyDefinition, CollectionDefinition, LaminateTable, ConstituentPart));
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  initialContext : ViewContext;
  additionalContexts : OPTIONAL SET[1:?] OF ViewContext;
INVERSE
  viewOf : PartVersion FOR views;
END_ENTITY;

ENTITY PartViewRelationship
  SUPERTYPE OF (ONEOF(AssemblyViewRelationship, ReplacedPartViewRelationship, GeometricalRelationship, MakeFromRelationship, ProcessStateRelationship, ToolPartRelationship));
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : PartView;
  related : PartView;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

TYPE ApplicationDomainSelect = SELECT (
  ProxySelect,
  ApplicationDomain
);
END_TYPE;

TYPE LifeCycleStageSelect = SELECT (
  ProxySelect,
  LifeCycleStage
);
END_TYPE;	

ENTITY ViewContext;
  applicationDomain : ApplicationDomainSelect;
  description : OPTIONAL DescriptorSelect;
  lifeCycleStage : LifeCycleStageSelect;
UNIQUE
  UR1: applicationDomain, lifeCycleStage;
END_ENTITY;

ENTITY ApplicationDomain;
  sameAs : SET[1:?] OF ProxySelect;
UNIQUE
  UR1: sameAs;
END_ENTITY;

ENTITY LifeCycleStage;
  sameAs : SET[1:?] OF ProxySelect;
UNIQUE
  UR1: sameAs;
END_ENTITY;


(*:SBC1
 ------------------------------------------------------------
  Product Specification
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

ENTITY ProductClass;
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  versionId : OPTIONAL IdentifierSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  levelType : OPTIONAL ClassSelect;
--  marketName : OPTIONAL STRING; attribute shall not be used according AP203
--  marketSegmentType : OPTIONAL STRING; attribute shall not be used according AP203
END_ENTITY;

ENTITY ProductClassRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : ProductClass;
  relating : ProductClass;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ClassCategoryAssociation;
  description : OPTIONAL DescriptorSelect; 
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  associatedCategory : SpecificationCategory;
  associatedProductClass : ProductClass;
  mandatory : BOOLEAN;
END_ENTITY;

ENTITY ClassConditionAssociation;
  description : OPTIONAL DescriptorSelect; 
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  associatedCondition : SpecificationExpression;
  associatedProductClass : ProductClass;
  conditionType : ClassSelect;
END_ENTITY;

ENTITY ClassInclusionAssociation;
  description : OPTIONAL DescriptorSelect; 
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  associatedInclusion : SpecificationInclusion;
  associatedProductClass : ProductClass;
END_ENTITY;

ENTITY ClassSpecificationAssociation;
  description : OPTIONAL DescriptorSelect; 
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  associationType : ClassSelect;
  associatedProductClass : ProductClass;
  associatedSpecification : Specification;
END_ENTITY;

ENTITY Specification;
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  versionId : OPTIONAL IdentifierSelect;
  package : BOOLEAN;
  category : SpecificationCategory;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
END_ENTITY;

ENTITY SpecificationCategory;
  id : IdentifierSelect;
  description : DescriptorSelect;
  implicitExclusiveCondition : BOOLEAN;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
END_ENTITY;

ENTITY SpecificationCategoryHierarchy;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  subCategory : SpecificationCategory;
  superCategory : SpecificationCategory;
END_ENTITY;

ENTITY SpecificationExpression;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  operands : SET[1:?] OF SpecificationOperandSelect;
  theOperation : SpecificationExpressionOperationEnum;
END_ENTITY;

TYPE SpecificationExpressionOperationEnum = ENUMERATION OF (
  and_operation,
  or_operation,
  oneof_operation,
  not_operation
);
END_TYPE;

ENTITY SpecificationInclusion;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  ifCondition : SpecificationOperandSelect;
  includedSpecification : SpecificationOperandSelect;
END_ENTITY;

TYPE SpecificationOperandSelect = SELECT (
  Specification, 
  SpecificationExpression);
END_TYPE;


(*:SBC2
 ------------------------------------------------------------
  Breakdown
 ------------------------------------------------------------
*)

-- partially harmonized with PLCS

ENTITY Breakdown
  SUPERTYPE OF (ONEOF (PhysicalBreakdown, FunctionalBreakdown, ZonalBreakdown, SystemBreakdown));
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  breakdownType : ClassSelect;
  versions : SET[1:?] OF BreakdownVersion;
END_ENTITY;

ENTITY BreakdownRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : Breakdown;
  related : Breakdown;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY PhysicalBreakdown
  SUBTYPE OF (Breakdown);
DERIVE
  SELF\Breakdown.breakdownType : ClassificationSelect := 'physical';
END_ENTITY;

ENTITY FunctionalBreakdown
  SUBTYPE OF (Breakdown);
DERIVE
  SELF\Breakdown.breakdownType : ClassificationSelect := 'functional';
END_ENTITY;

ENTITY ZonalBreakdown
  SUBTYPE OF (Breakdown);
DERIVE
  SELF\Breakdown.breakdownType : ClassificationSelect := 'zonal';
END_ENTITY;

ENTITY SystemBreakdown
  SUBTYPE OF (Breakdown);
DERIVE
  SELF\Breakdown.breakdownType : ClassificationSelect := 'system';
END_ENTITY;

ENTITY BreakdownVersion;
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
INVERSE
  versionOf : Breakdown FOR versions;
END_ENTITY;

ENTITY BreakdownVersionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : BreakdownVersion;
  related : BreakdownVersion;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY BreakdownAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedTo : SET[1:?] OF BreakdownAssignmentSelect;
  assignedBreakdown : Breakdown;
END_ENTITY;

TYPE BreakdownAssignmentSelect = SELECT (
  ProductClass,
  ProductConfiguration,
  PartOccurrence,
  IndividualPartView,
  RequirementView,
  DocumentDefinition,
  PartView
);
END_TYPE;

ENTITY BreakdownElementAssociation;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : ClassSelect; -- top, additional
  associatedBreakdown : BreakdownVersion;
  associatedElemenent : BreakdownElement;
END_ENTITY;

ENTITY BreakdownElement;
  id : IdentifierSelect;
  name : DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  versions : OPTIONAL SET[1:?] OF BreakdownElementVersion;
END_ENTITY;

ENTITY BreakdownElementVersion;
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  views : OPTIONAL SET[1:?] OF BreakdownElementView;
INVERSE
  versionOf : BreakdownElement FOR versions;
END_ENTITY;

ENTITY BreakdownElementVersionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  relationType: ClassSelect;
  relating : BreakdownElementVersion;
  related : BreakdownElementVersion;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY BreakdownElementView;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  initialContext : ViewContext;
  additionalContexts : OPTIONAL SET[1:?] OF ViewContext;
INVERSE
  viewOf : BreakdownElementVersion FOR views;
END_ENTITY;

ENTITY BreakdownElementViewRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : BreakdownElementView;
  related : BreakdownElementView;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY AlternativeSolution
  SUPERTYPE OF (ONEOF (FinalSolution,
                       SupplierSolution,
                       TechnicalSolution));
  id : IdentifierSelect;
  name : DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  versionId : OPTIONAL IdentifierSelect;
  baseElement : BreakdownElementOrAlternativeSolutionSelect;
END_ENTITY;

TYPE BreakdownElementOrAlternativeSolutionSelect = SELECT (
  AlternativeSolution, 
  BreakdownElement
);
END_TYPE; 

ENTITY AlternativeSolutionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : AlternativeSolution;
  relating : AlternativeSolution;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY FinalSolution
  SUBTYPE OF (AlternativeSolution);
  specifications : SET[1:?] OF FinalDefinitionSelect;
  status : ClassSelect;
END_ENTITY;

TYPE FinalDefinitionSelect = SELECT (
  PartView,
  IndividualPartView,
  RequirementView
);
END_TYPE; 


ENTITY SupplierSolution
  SUBTYPE OF (AlternativeSolution);
  probabilityRate : OPTIONAL REAL;
  supplier : Organization;
END_ENTITY;

ENTITY TechnicalSolution
  SUBTYPE OF (AlternativeSolution);
END_ENTITY;

ENTITY FunctionalBreakdownElementViewAssociation; -- check if this is needed or if it can be expressed in an other existing way
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : ClassSelect;
  associatedFunctionalElement : BreakdownElementView;
  associatedPhysicalElement : PhysicalElementSelect;
(*
	WHERE
  WR1: associatedFunctionalElement.viewOf.versionOf<-associatedElemenent{BreakdownElementAssociation}associatedBreakdown.versionOf.breakdownType = 'functional';
  WR2: if the associatedPhysicalElement is of type BreakdownElement, it should be associated to a Functional Breakdown
*)
END_ENTITY;

TYPE PhysicalElementSelect = SELECT (
  AlternativeSolution,
  PartView, 
  BreakdownElement
);
END_TYPE;

ENTITY RealizationOrOccurrenceRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : BreakdownElementOrPartOccurrenceSelect;
  relating : BreakdownElementOrAlternativeSolutionSelect;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

TYPE BreakdownElementOrPartOccurrenceSelect = SELECT (
  BreakdownElement, 
  PartOccurrence
);
END_TYPE; 


ENTITY InstancePlacement;
  placedInstance : SinglePartOccurrence;
  placement : TransformationSelect;
  referenceComponent : BreakdownElementView;
(*
WHERE
  WR1: the referenceComponent should be a breakdown element associated to a PhysicalBreakdown
*)
END_ENTITY;

ENTITY ComponentPlacement;
  placedComponent : BreakdownElementView;
  placement : TransformationSelect;
  referenceComponent : BreakdownElementView;
(*
WHERE
  WR1: the placedComponent should be a breakdown element associated to a PhysicalBreakdown
  WR2: the referenceComponent should by a breakdown element associated to a PhysicalBreakdown
*)
END_ENTITY;

ENTITY InZoneAssociation;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  locatedItem : InZoneSelect;
  zone : BreakdownElementView;
(*
WHERE
  WR1: the zone should be a breakdown element associated to a ZonalBreakdown
*)
END_ENTITY;

TYPE InZoneSelect = SELECT (
  ActivityMethod,
  ActivityMethodAssignment,
  ActivityMethodWorkRequestAssociation,
  PartView,
  DocumentDefinition,
  RequirementView,
  BreakdownElementView,
  IndividualPartView
);
END_TYPE;


(*:SBC3
 ------------------------------------------------------------
  Assembly Structure
 ------------------------------------------------------------
*)

ENTITY AssemblyDefinition
  SUPERTYPE OF (ONEOF (MatingDefinition))
  SUBTYPE OF (PartView);
  assemblyType : OPTIONAL ClassSelect;
END_ENTITY;

-- assemblies between definitions

ENTITY AssemblyViewRelationship
  ABSTRACT
  SUPERTYPE OF (ONEOF (NextAssemblyViewUsage, PromissoryAssemblyViewUsage))
  SUBTYPE OF (PartViewRelationship);
  SELF\PartViewRelationship.relating : AssemblyDefinition; 
  locationIndicator : OPTIONAL IdentifierSelect;
  quantity : OPTIONAL ValueWithUnit;
END_ENTITY;

ENTITY NextAssemblyViewUsage
  SUBTYPE OF (AssemblyViewRelationship);
DERIVE
  SELF\PartViewRelationship.relationType : ClassString := 'next assembly view';
END_ENTITY;

ENTITY PromissoryAssemblyViewUsage
  SUBTYPE OF (AssemblyViewRelationship);
DERIVE
  SELF\PartViewRelationship.relationType : ClassString := 'promissory assembly view';
END_ENTITY;

ENTITY AssemblyViewRelationshipSubstitution;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relating : AssemblyViewRelationship; 
  related : AssemblyViewRelationship; 
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ReplacedPartViewRelationship
  SUBTYPE OF (PartViewRelationship);
DERIVE
  SELF\PartViewRelationship.relationType : ClassString := 'replaced part view';
END_ENTITY;

ENTITY GeometricalRelationship
  SUBTYPE OF (PartViewRelationship);
  placement : TransformationSelect;
DERIVE
  SELF\PartViewRelationship.relationType : ClassString := 'geometrically related part view';
END_ENTITY;

TYPE TransformationSelect = SELECT ( 
  GeometricModelRelationship,
  TemplateInstance
);
END_TYPE;

-- assemblies between definitions and occurrences

ENTITY AssemblyOccurrenceRelationship
  ABSTRACT SUPERTYPE OF (ONEOF (NextAssemblyOccurrenceUsage, PromissoryAssemblyOccurrenceUsage, MatedPartAssociation))
  SUBTYPE OF (PartViewOccurrenceRelationship);
  SELF\PartViewOccurrenceRelationship.relating : AssemblyDefinition; 
  placement : OPTIONAL TransformationSelect; 
END_ENTITY;

ENTITY NextAssemblyOccurrenceUsage
  SUBTYPE OF (AssemblyOccurrenceRelationship);
DERIVE
  SELF\PartViewOccurrenceRelationship.relationType : ClassString := 'next assembly occurrence';
END_ENTITY;

ENTITY PromissoryAssemblyOccurrenceUsage
  SUBTYPE OF (AssemblyOccurrenceRelationship);
DERIVE
  SELF\PartViewOccurrenceRelationship.relationType : ClassString := 'promissory assembly occurrence';
END_ENTITY;

ENTITY AssemblyOccurrenceRelationshipSubstitution;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relating : AssemblyOccurrenceRelationship; 
  related : AssemblyOccurrenceRelationship; 
WHERE
 WR1: relating :<>: related;
END_ENTITY;

-- collections between definitions and occurrences

ENTITY CollectionDefinition
  SUBTYPE OF (PartView);
  purpose : OPTIONAL MultiLingualStringSelect;
INVERSE
  collectedParts : SET[2:?] OF CollectedPartRelationship FOR relating;
END_ENTITY;

ENTITY CollectedPartRelationship
  SUBTYPE OF (PartViewOccurrenceRelationship);
  SELF\PartViewOccurrenceRelationship.relating : CollectionDefinition;
DERIVE
  SELF\PartViewOccurrenceRelationship.relationType : ClassString := 'collected part view';
END_ENTITY;


(*:SBC4
 ------------------------------------------------------------
  Configuration
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

ENTITY ProductConfiguration;
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  versionId : OPTIONAL IdentifierSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  definingSpecifications : OPTIONAL SET[1:?] OF Specification;
  memberOf : ProductClass;
INVERSE
  correspondingPartVersion : SET[0:1] OF ProductPartAssociation FOR associatedProductConfiguration;
END_ENTITY;

ENTITY ProductConfigurationRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : ProductConfiguration;
  relating : ProductConfiguration;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ProductPartAssociation;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  associatedPartVersion : PartVersion;
  associatedProductConfiguration : ProductConfiguration;
END_ENTITY;

ENTITY ManufacturingConfiguration
  ABSTRACT SUPERTYPE OF (ONEOF (DatedConfiguration,
                                LotConfiguration,
                                SerialConfiguration,
                                TimeIntervalConfiguration));
  id : OPTIONAL IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  concernedOrganizations : OPTIONAL SET[1:?] OF Organization;
  configuredElement : PartOccurrence;
  isSolutionFor : ProductPartAssociation;
END_ENTITY;

ENTITY DatedConfiguration
  SUBTYPE OF (ManufacturingConfiguration);
  endDefinition : OPTIONAL EventOrDateSelect;
  startDefinition : EventOrDateSelect;
END_ENTITY;

ENTITY LotConfiguration
  SUBTYPE OF (ManufacturingConfiguration);
  lotId : IdentifierSelect;
  lotSize : ValueWithUnit;
END_ENTITY;

ENTITY SerialConfiguration
  SUBTYPE OF (ManufacturingConfiguration);
  endNumber : OPTIONAL IdentifierSelect;
  startNumber : IdentifierSelect;
END_ENTITY;

ENTITY TimeIntervalConfiguration
  SUBTYPE OF (ManufacturingConfiguration);
  configurationPeriod : TimeInterval;
END_ENTITY;

ENTITY Configuration;
  id : OPTIONAL IdentifierSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  configurationType : ClassSelect;
  inheritanceType : ClassSelect;
  configuredElement : ConfiguredItemSelect;
  isSolutionFor : ConfiguredSpecificationSelect;
END_ENTITY;

TYPE ConfiguredItemSelect = SELECT (
  AlternativeSolution, 
  BreakdownElement, 
  PartOccurrence,
  ProcessOperationOccurrence, 
  ProcessPlan
);
END_TYPE; 

TYPE ConfiguredSpecificationSelect = SELECT (
  ClassConditionAssociation, 
  ClassSpecificationAssociation
);
END_TYPE; 


(*:SBC5
 ------------------------------------------------------------
  Part Occurrence
 ------------------------------------------------------------
*)

ENTITY PartViewOccurrenceRelationship
  SUPERTYPE OF (ONEOF (AssemblyOccurrenceRelationship, CollectedPartRelationship, AssemblyOccurrenceRelationship));
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : PartView;
  related : PartOccurrence;
END_ENTITY;

TYPE PartOccurrenceDefinitionSelect = SELECT ( 
  PartView,
  ProductConfiguration
);
END_TYPE;

ENTITY PartOccurrence
  ABSTRACT SUPERTYPE OF (ONEOF (QuantifiedPartOccurrence, SelectedPartOccurrence, SinglePartOccurrence, SpecifiedPartOccurrence));
  id : IdentifierSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  definition : PartOccurrenceDefinitionSelect; 
  description : OPTIONAL DescriptorSelect; 
END_ENTITY;

ENTITY SinglePartOccurrence
  SUBTYPE OF (PartOccurrence);
END_ENTITY;

ENTITY QuantifiedPartOccurrence
  SUBTYPE OF (PartOccurrence);
  quantity : NumericalValue; 
END_ENTITY;

ENTITY SelectedPartOccurrence
  SUBTYPE OF (PartOccurrence);
  criterion : MultiLingualStringSelect; 
  quantity  : ValueWithUnit;
END_ENTITY;

ENTITY SpecifiedPartOccurrence
  SUBTYPE OF (PartOccurrence);
  assemblyContext : AssemblyDefinition; 
  subAssemblyRelationship : PartOccurrence; 
  upperAssemblyRelationship : PartOccurrence; 
END_ENTITY;

ENTITY PartOccurrenceRelationship
  SUPERTYPE OF (ONEOF (ReplacedUsageRelationship, SameTimeMachiningRelationship));
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related     : PartOccurrence; 
  relating    : PartOccurrence; 
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ReplacedUsageRelationship
  SUBTYPE OF (PartOccurrenceRelationship);
  usageContext : PartOccurrenceUsageContextSelect; 
END_ENTITY;

TYPE PartOccurrenceUsageContextSelect = SELECT (
  PartViewOccurrenceRelationship,
  ProcessOperationInputOrOutput,
  RealizationOrOccurrenceRelationship
);
END_TYPE;


(*:SBC6
 ------------------------------------------------------------
  Transformation, Geometric Coordinate Space, and Coordinate System
 ------------------------------------------------------------
*)

ENTITY DetailedGeometricModelElement
  ABSTRACT SUPERTYPE OF (ONEOF(CoordinateSystem, Direction, Transformation, Point, TemplateInstance, ExternalPointOnsurface, ExternalPointOnCurve));
END_ENTITY;

ENTITY CoordinateSystem
  SUBTYPE OF (DetailedGeometricModelElement);
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  dimensionality : INTEGER;
  origin : Point; (* Supertype of CartesianPoint *)
  axis : OPTIONAL Direction;
  refDirection : OPTIONAL Direction;
  coordinateType : ClassSelect; (* cartesian, cylindrical, spherical, polar, linear *)
WHERE
 wr1: dimensionality > 0;
END_ENTITY;

ENTITY Point
  SUPERTYPE OF (ONEOF(CartesianPoint))
  SUBTYPE OF (DetailedGeometricModelElement);
END_ENTITY;

ENTITY CartesianPoint
  SUBTYPE OF (Point);
  coordinates : LIST[1:3] OF LengthMeasure;
END_ENTITY;

TYPE LengthMeasure = REAL;
END_TYPE;

ENTITY GeometricCoordinateSpace;
  id : IdentifierSelect;
  coordinateType : ClassSelect; (* cartesian, cylindrical, spherical, polar, linear *)
  units : OPTIONAL SET[1:?] OF Unit;
  dimensionality : INTEGER;
  accuracies : OPTIONAL SET [1:?] OF MeasureQualification;
WHERE
  wr1: dimensionality > 0;
END_ENTITY;

ENTITY Direction
  SUBTYPE OF (DetailedGeometricModelElement);
  directionRatios : LIST[2:3] OF LengthMeasure;
  name : OPTIONAL DescriptorSelect;
END_ENTITY;

ENTITY Transformation
  ABSTRACT SUPERTYPE OF (ONEOF (Transformation2d, Transformation3d))
  SUBTYPE OF (DetailedGeometricModelElement);
  name : OPTIONAL DescriptorSelect;
END_ENTITY;

ENTITY Transformation2d
  SUPERTYPE OF (ONEOF (ExplicitTransformation2d, ImplicitTransformation2d))
  SUBTYPE OF (Transformation);
END_ENTITY;

ENTITY Transformation3d
  SUPERTYPE OF (ONEOF (ExplicitTransformation3d, ImplicitTransformation3d))
  SUBTYPE OF (Transformation);
END_ENTITY;

ENTITY ExplicitTransformation2d
  SUBTYPE OF (Transformation2d);
  axis1 : OPTIONAL Direction;
  axis2 : OPTIONAL Direction;
  localOrigin : CartesianPoint;
END_ENTITY;

ENTITY ExplicitTransformation3d
  SUBTYPE OF (Transformation3d);
  axis1 : OPTIONAL Direction;
  axis2 : OPTIONAL Direction;
  axis3 : OPTIONAL Direction;
  localOrigin : CartesianPoint;
END_ENTITY;

ENTITY ImplicitTransformation2d
  SUBTYPE OF (Transformation2d);
  origin : CoordinateSystem;
  target : CoordinateSystem;
END_ENTITY;

ENTITY ImplicitTransformation3d
  SUBTYPE OF (Transformation3d);
  origin : CoordinateSystem;
  target : CoordinateSystem;
END_ENTITY;

ENTITY TemplateInstance
  SUBTYPE OF (DetailedGeometricModelElement);
  id : IdentifierSelect;
  definition : TemplateDefinitionSelect;
  name : OPTIONAL DescriptorSelect;
  origin : CoordinateSystem;
  scale : OPTIONAL REAL;
  target : ExplicitTransformationSelect;
END_ENTITY;

TYPE TemplateDefinitionSelect = SELECT (
  GeometricModel, 
  StyledModel
);
END_TYPE;

TYPE ExplicitTransformationSelect = SELECT (
  ExplicitTransformation2d, 
  ExplicitTransformation3d
);
END_TYPE;


(*:PPP1
 ------------------------------------------------------------
  Individual Part
 ------------------------------------------------------------
*)

-- partially harmonized with PLCS

ENTITY IndividualPart;
  id : IdentifierSelect;
  name : DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  versions : SET[1:?] OF IndividualPartVersion;
END_ENTITY;

ENTITY IndividualPartVersion;
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  views : OPTIONAL SET[1:?] OF IndividualPartView;
INVERSE
  versionOf : IndividualPart FOR versions;
END_ENTITY;

ENTITY IndividualPartVersionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : IndividualPartVersion;
  related : IndividualPartVersion;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY IndividualPartView;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  initialContext : ViewContext;
  additionalContexts : OPTIONAL SET[1:?] OF ViewContext;
INVERSE
  viewOf : IndividualPartVersion FOR views;
END_ENTITY;

ENTITY IndividualPartViewRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : IndividualPartView;
  related : IndividualPartView;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY PartToIndividualPartAssociation;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  associatedPart : Part;
  associatedInduvidualPart : IndividualPart;
END_ENTITY;

ENTITY PartVersionToIndividualPartVersionAssociation;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  associatedPart : PartVersionOrProductConfgurationSelect;
  associatedInduvidualPart : IndividualPartVersion;
END_ENTITY;

TYPE PartVersionOrProductConfgurationSelect = SELECT (
  PartVersion,
  ProductConfiguration
);
END_TYPE;

ENTITY PartViewToIndividualPartViewAssociation;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  associatedPart : PartViewOrProductConfgurationSelect;
  associatedInduvidualPart : IndividualPartView;
END_ENTITY;

TYPE PartViewOrProductConfgurationSelect = SELECT (
  PartView,
  ProductConfiguration
);
END_TYPE;

ENTITY IndividualAssemblyRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  related : IndividualPartView;
  relating : IndividualPartView;
DERIVE
  relationType : ClassificationSelect := 'next assembly view';
INVERSE
  isRealizationOf : AssemblyRealizationContextAssociation FOR relating;
WHERE
 WR1: relating :<>: related;
END_ENTITY;


ENTITY AssemblyRealizationContextAssociation;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  relating : IndividualAssemblyRelationship;
  related : IndividualAssemblyRelationshipRealizationContextSelect;
END_ENTITY;

TYPE  IndividualAssemblyRelationshipRealizationContextSelect = SELECT (
  PartOccurrence,
  AssemblyViewRelationship
);
END_TYPE;

ENTITY IndividualPartTestResult;
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  testActivity : OPTIONAL TestActivitySelect;
  testResults : OPTIONAL SET[1:?] OF PropertyValue;
  testedInstance : IndividualPartView;
END_ENTITY;

TYPE TestActivitySelect = SELECT (
  Activity, 
  ProcessOperationOccurrence
);
END_TYPE; 


(*:E1
 ------------------------------------------------------------
  Effectivity
 ------------------------------------------------------------
*)

ENTITY Effectivity
  SUPERTYPE OF (ONEOF (TimeIntervalEffectivity, DatedEffectivity, SerialEffectivity, LotEffectivity));
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  versionId : OPTIONAL IdentifierSelect;
  concernedOrganizations : OPTIONAL SET[1:?] OF Organization;
  effectivityContext : OPTIONAL LifeCycleStageSelect;
END_ENTITY;

ENTITY EffectivityAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : ClassSelect;
  effectivityIndication : BOOLEAN;
  assignedTo : SET[1:?] OF EffectivityAssignmentSelect;
  assignedEffectivity : Effectivity;
END_ENTITY;

TYPE EffectivityAssignmentSelect = SELECT (
  AssemblyViewRelationship, 
  AssemblyViewRelationshipSubstitution, 
  AssemblyOccurrenceRelationship, 
  AssemblyOccurrenceRelationshipSubstitution, 
  Breakdown, 
  BreakdownElement, 
  BreakdownVersion,
  BreakdownElementVersionRelationship,
  BreakdownElementViewRelationship,
  ClassSelect, 
  ClassCategoryAssociation, 
  ClassConditionAssociation, 
  ClassInclusionAssociation, 
  ClassSpecificationAssociation, 
  ClassSystem, 
  Configuration, 
  Document, 
  DocumentDefinition, 
  DocumentDefinitionRelationship, 
  DocumentVersion, 
  File, 
  GeometricModel, 
  IdentifierSelect, 
  Part, 
  PartOccurrence, 
  PartOccurrenceRelationship, 
  PartVersion, 
  PartView, 
  PartViewOccurrenceRelationship, 
  PartViewRelationship, 
  ProcessOperationDefinition, 
  ProcessOperationDefinitionRelationship, 
  ProcessOperationOccurrence, 
  ProcessOperationOccurrenceRelationship, 
  ProcessOperationResourceAssignment, 
  ProcessPlan, 
  ProductClass, 
  ProductConfiguration, 
  PropertyDefinitionAssignment, 
  PropertyValueAssignment, 
  PropertyDefinitionSelect, 
  RealizationOrOccurrenceRelationship, 
  ReplacedUsageRelationship, 
  SecurityClassification, 
  Specification, 
  SpecificationCategory, 
  SpecificationExpression, 
  SpecificationInclusion, 
  StyledModel
);
END_TYPE;

ENTITY EffectivityRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : Effectivity;
  relating : Effectivity;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY DatedEffectivity
  SUPERTYPE OF (ONEOF (DataValidityPeriod))
  SUBTYPE OF (Effectivity);
  endDefinition : OPTIONAL EventOrDateSelect;
  startDefinition : OPTIONAL EventOrDateSelect;
END_ENTITY;

ENTITY LotEffectivity
  SUBTYPE OF (Effectivity);
  lotId : IdentifierSelect;
  lotSize : ValueWithUnit;
END_ENTITY;

ENTITY SerialEffectivity
  SUBTYPE OF (Effectivity);
  endNumber : OPTIONAL IdentifierSelect;
  startNumber : IdentifierSelect;
END_ENTITY;

ENTITY TimeIntervalEffectivity
  SUBTYPE OF (Effectivity);
  effectivityPeriod : TimeInterval;
END_ENTITY;


(*:C1
 ------------------------------------------------------------
  Property
 ------------------------------------------------------------
*)

TYPE PropertyAssignmentSelect = SELECT (
    BreakdownVersion, 
    BreakdownElementView, 
    DocumentDefinition, 
    DocumentDefinitionRelationship, 
    File, 
    Part, 
    PartOccurrence, 
    PartOccurrenceRelationship, 
    PartShape, 
    PartVersion, 
    PartView,
    PartViewOccurrenceRelationship, 
    PartViewRelationship, 
    IndividualPartView, 
    ProductClass, 
    ProductConfiguration, 
    RealizationOrOccurrenceRelationship, 
    ShapeElement, 
    ShapeElementRelationship, 
    Specification,
    Activity, 
    ActivityMethod, 
    ActivityMethodAssignment, 
    ProcessOperationDefinition, 
    ProcessOperationOccurrence, 
    ProcessOperationResourceAssignment, 
    ProcessPlan
 );
END_TYPE;

TYPE PropertyDefinitionSelect = SELECT (
  PropertyDefinition,
  PropertyDefinitionString,
  ExternalPropertyDefinition
);
END_TYPE;

TYPE PropertyDefinitionString = STRING;
END_TYPE;

ENTITY ExternalPropertyDefinition;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : SET[1:?] OF ProxySelect;
  allowedUnits : OPTIONAL SET[1:?] OF UnitSelect;
UNIQUE
  UR1: sameAs;
END_ENTITY;

ENTITY PropertyDefinition;
  id : IdentifierSelect;
  versionId : OPTIONAL IdentifierSelect;
  propertyType : ClassSelect;
  allowedUnits : OPTIONAL SET[1:?] OF UnitSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
END_ENTITY;

ENTITY PropertyDefinitionRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : PropertyDefinitionSelect;
  related : PropertyDefinitionSelect;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY PropertyDefinitionAssignment;
  id  : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  assignedTo : PropertyAssignmentSelect;
  assignedPropertyDefinition : PropertyDefinitionSelect;
  allowedUnits : OPTIONAL SET[1:?] OF UnitSelect;
UNIQUE
  UR1: assignedTo, assignedPropertyDefinition;
END_ENTITY;

ENTITY PropertyDefinitionAssignmentRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : PropertyDefinitionAssignment;
  related : PropertyDefinitionAssignment;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

(* PLCS 
TYPE PropertyDefinitionSelect = SELECT
   (ExternalPropertyDefinition, RiskEventProbability, RiskLevel);
END_TYPE;
*)
ENTITY PropertyValue
  ABSTRACT
  SUPERTYPE OF (ONEOF (StringValue, ValueWithUnit, ValueSet, ValueList, MaterialPropertyValue));
  definition : PropertyDefinitionSelect;
  determinationMethod : OPTIONAL ClassSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  name : OPTIONAL DescriptorSelect;
  qualifications :  OPTIONAL  SET[1:?] OF MeasureQualification; (* PLCS plural *)
WHERE
  encapsulated: SIZEOF(USEDIN(SELF,'')-
                      (USEDIN(SELF, SCHEMA_NAME + 'PROPERTYVALUERELATIONSHIP.RELATING')+
                       USEDIN(SELF, SCHEMA_NAME + 'PROPERTYVALUERELATIONSHIP.RELATED')))=1;
END_ENTITY;

ENTITY PropertyValueAssignment;
  id  : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  assignedTo : PropertyAssignmentSelect;
  assignedPropertyValues : SET[1:?] OF PropertyValue;
  valueAssignmentContext : OPTIONAL PropertyDefinitionAssignment;
END_ENTITY;

ENTITY PropertyValueAssignmentRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : PropertyValueAssignment;
  related : PropertyValueAssignment;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY PropertyValueRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : PropertyValue;
  related : PropertyValue;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY StringValue
SUBTYPE OF (PropertyValue);
   valueComponent : MultiLingualStringSelect;
END_ENTITY;

ENTITY NumericalValue
  SUPERTYPE OF (ONEOF (ValueLimit))
  SUBTYPE OF (ValueWithUnit);
  valueComponent : REAL;
  valueContext : OPTIONAL NumericalContext;
END_ENTITY;

ENTITY NumericalContext;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  description : OPTIONAL DescriptorSelect;
  accuracy : REAL;
  significantDigits : OPTIONAL INTEGER;
END_ENTITY;

ENTITY ValueLimit
  SUBTYPE OF (NumericalValue);
  qualifier : TypeQualifierSelect;
(*
	DERIVE
   limit : REAL := SELF\NumericalValue.valueComponent;
*) 
END_ENTITY;

ENTITY ValueList
  SUBTYPE OF (PropertyValue);
  values : LIST[1:?] OF PropertyValue;
END_ENTITY;

ENTITY ValueRange
  SUBTYPE OF (ValueWithUnit);
  lowerLimit : REAL;
  upperLimit : REAL;
END_ENTITY;

ENTITY ValueSet
  SUBTYPE OF (PropertyValue);
  values : SET[1:?] OF PropertyValue;
END_ENTITY;

ENTITY ValueWithTolerances
  SUBTYPE OF (ValueWithUnit);
  tolerancedValue : REAL;
  lowerLimit : REAL;
  upperLimit : REAL;
END_ENTITY;

ENTITY ValueWithUnit
  ABSTRACT SUPERTYPE OF (ONEOF (NumericalValue,
         ValueRange,
         ValueWithTolerances))
  SUBTYPE OF (PropertyValue);
  unit : UnitSelect;
  significantDigits : OPTIONAL INTEGER;
END_ENTITY;

-- Shape Dependent Properties / Validation Properties

ENTITY ShapeDependentProperty
  ABSTRACT
  SUPERTYPE OF (ONEOF (CentreOfMass, MomentsOfInertia, GeneralShapeDependentProperty));
  id : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  assignedTo : ShapedElementSelect;
  definedIn : OPTIONAL GeometricCoordinateSpace;
  valueDetermination : OPTIONAL ClassSelect;
END_ENTITY;

ENTITY CentreOfMass
  SUBTYPE OF (ShapeDependentProperty);
  SELF\ShapeDependentProperty.definedIn : GeometricCoordinateSpace;
  centrePoint : CartesianPoint;
END_ENTITY;

ENTITY GeneralShapeDependentProperty
  SUBTYPE OF (ShapeDependentProperty);
  propertyType : PropertyDefinitionSelect;
  propertyValue : PropertyValueSelect;
  unit : OPTIONAL Unit;
END_ENTITY;

ENTITY MomentsOfInertia
  SUBTYPE OF (ShapeDependentProperty);
  SELF\ShapeDependentProperty.definedIn : GeometricCoordinateSpace;
  inertiaValue : ARRAY[1:3] OF ARRAY[1:3] OF NumericalValue;
  referenceAxisPlacement : CoordinateSystem;
END_ENTITY;

TYPE PropertyValueSelect = SELECT (
  CartesianPoint, 
  NumericalValue
);
END_TYPE;

-- Model Properties

ENTITY ModelProperty;
  definition : PropertyDefinitionSelect;
  specifiedValue : ModelPropertyValueSelect;
END_ENTITY;

TYPE ModelPropertyValueSelect = SELECT (
  GeometricModel, 
  StyledModel
);
END_TYPE; 

ENTITY ModelPropertyAssignment;
  id : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  assignedProperty : ModelProperty;
  isAssignedTo : SET[1:?] OF PropertyAssignmentSelect;
  validityContext : OPTIONAL ValidityContextSelect;
END_ENTITY;

TYPE ValidityContextSelect = SELECT (
  Organization,
  ProductClass, 
  ProductConfiguration
);
END_TYPE; 

-- Units

TYPE UnitSelect  = SELECT (
  ExternalUnit,
  Unit
);
END_TYPE;

ENTITY ExternalUnit;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : SET[1:?] OF ProxySelect;
UNIQUE
  UR1: sameAs;
END_ENTITY;

ENTITY Unit;
  kind : OPTIONAL ClassificationSelect;
  name : ClassificationSelect;
  prefix : OPTIONAL ClassificationSelect;
  quantity : OPTIONAL ClassificationSelect;
END_ENTITY;

-- Qualifiers 

ENTITY MeasureQualification;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  qualifiers : SET[1:?] OF ValueQualifierSelect;
WHERE
  encapsulated: SIZEOF(USEDIN(SELF,''))=1;
END_ENTITY;

TYPE ValueQualifierSelect = SELECT (
  PrecisionQualifier,
  TypeQualifierSelect,
  UncertaintyQualifier
);
END_TYPE;

ENTITY PrecisionQualifier;
  sameAs : OPTIONAL ProxySelect;
  precisionValue : INTEGER;
END_ENTITY;

TYPE TypeQualifierSelect = SELECT (
  ExternalTypeQualifier,
  PreDefinedTypeQualifier
);
END_TYPE;

ENTITY ExternalTypeQualifier;
  sameAs : OPTIONAL ProxySelect;
END_ENTITY;

ENTITY PreDefinedTypeQualifier;
  name : ClassSelect;
END_ENTITY;

ENTITY UncertaintyQualifier
  SUPERTYPE OF (ONEOF (StandardUncertainty,
                       QualitativeUncertainty));
  description : OPTIONAL DescriptorSelect;
  sameAs : OPTIONAL ProxySelect;
  measureName : MultiLingualStringSelect;
END_ENTITY;

ENTITY StandardUncertainty
  SUPERTYPE OF (ONEOF (ExpandedUncertainty))
  SUBTYPE OF (UncertaintyQualifier);
  uncertaintyValue : REAL;
END_ENTITY;

ENTITY ExpandedUncertainty
  SUBTYPE OF (StandardUncertainty);
  coverageFactor : REAL;
END_ENTITY;

ENTITY QualitativeUncertainty
  SUBTYPE OF (UncertaintyQualifier);
  uncertaintyValue : MultiLingualStringSelect;
END_ENTITY;


(*:C2
 ------------------------------------------------------------
  Material
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

ENTITY MaterialIdentification;
  id : IdentifierSelect;
  assignedTo : SET[1:?] OF PropertyAssignmentSelect;
END_ENTITY;

ENTITY MaterialPropertyValue
  SUBTYPE OF (PropertyValue);
  SELF\PropertyValue.definition : MaterialPropertyDefinition;
  environmentCondition : DataEnvironment;
END_ENTITY;

ENTITY MaterialPropertyAssignment;
  id  : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : ClassSelect;
  definitional : OPTIONAL BOOLEAN;
  assignedProperty : MaterialPropertyValue;
  assignedTo : MaterialIdentification;
END_ENTITY;

ENTITY MaterialPropertyDefinition
  SUBTYPE OF (PropertyDefinition);
  name : DescriptorSelect;
END_ENTITY;

ENTITY DataEnvironment;
  characterization : OPTIONAL SET[1:?] OF PropertyValue;
  description : OPTIONAL DescriptorSelect;
  name : DescriptorSelect;
END_ENTITY;


(*:C3
 ------------------------------------------------------------
  Shape Association and Structure
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

TYPE ShapedElementSelect = SELECT (
  PartShape, 
  ShapeElement
);
END_TYPE; 

TYPE ShapeInformationSelect = SELECT (
  ShapedElementSelect, 
  ShapeElementRelationship
);
END_TYPE;

TYPE PartInformationSelect = SELECT (
  PartOccurrence, 
  PartView,
  BreakdownElement, -- was PhysicalBreakdownElement 
  IndividualPartView
);
END_TYPE; 

ENTITY PartShape;
  describedObject : PartInformationSelect;
  description : OPTIONAL DescriptorSelect;
  elements : OPTIONAL SET[1:?] OF ShapeElement;
  id : OPTIONAL IdentifierSelect;
END_ENTITY;

ENTITY ShapeDescriptionAssociation;
  description : OPTIONAL DescriptorSelect; 
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : ClassSelect;
  definingGeometry : GeometricModel;
END_ENTITY;

ENTITY ShapeElement
  SUPERTYPE OF (ONEOF (CoatingLayer));
  description : OPTIONAL DescriptorSelect;
  id : OPTIONAL IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
INVERSE
  containingShape : PartShape FOR elements;
END_ENTITY;

ENTITY ShapeElementRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : ShapeElement;
  relating : ShapeElement;
WHERE
 WR1: relating :<>: related;
END_ENTITY;


(*:K1
 ------------------------------------------------------------
  Kinematic Structure and Link
 ------------------------------------------------------------
*)

-- not part of DIS version of edition 1


(*:K2
 ------------------------------------------------------------
  Kinematic Motion
 ------------------------------------------------------------
*)

-- not harmonized with PLCS

ENTITY KinematicPathDefinedByNodes;
  name : OPTIONAL DescriptorSelect;
  placementStart : CoordinateSystem;
  representationContext : GeometricCoordinateSpace;
  segments : LIST[1:?] OF PathSegment;
  tStart : REAL;
END_ENTITY;

ENTITY LinkMotionAlongPath;
  id : OPTIONAL IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  items : SET[1:?] OF KinematicPathDefinedByNodes;
  representationContext : GeometricCoordinateSpace;
  timeUnit : OPTIONAL Unit;
END_ENTITY;

ENTITY LinkMotionDecompositionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  related : LinkMotionAlongPath;
  relating : LinkMotionAlongPath;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY LinkMotionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : GeometricModel;
  relating : LinkMotionAlongPath;
  tranformationOperator : LinkMotionTransformation;
--WHERE
-- WR1: relating :<>: related;
END_ENTITY;

ENTITY LinkMotionTransformation;
  transformItem1 : CoordinateSystem;
  transformItem2 : KinematicPathDefinedByNodes;
END_ENTITY;

ENTITY PathSegment
  ABSTRACT SUPERTYPE OF (ONEOF (CircularPath,
                                PointToPointPath,
                                LinearPath));
  placementEnd : CoordinateSystem;
  tEnd : REAL;
  transition : TransitionCodeEnum;
END_ENTITY;

TYPE TransitionCodeEnum = ENUMERATION OF (
  cont_same_gradient,
  cont_same_gradient_same_curvature,
  continuous,
  discontinuous
);
END_TYPE; 

ENTITY LinearPath
  SUBTYPE OF (PathSegment);
END_ENTITY;

ENTITY CircularPath
  SUBTYPE OF (PathSegment);
  viaPoint : CartesianPoint;
END_ENTITY;

ENTITY PointToPointPath
  SUBTYPE OF (PathSegment);
END_ENTITY;


(*:PP1
 ------------------------------------------------------------
  Process Plan
 ------------------------------------------------------------
*)

-- not harmonized with PLCS

ENTITY ProcessPlan;
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  versionId : OPTIONAL IdentifierSelect;
  producedOutputs : OPTIONAL SET[1:?] OF PartVersion;
END_ENTITY;

ENTITY ProcessPlanRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : ProcessPlan;
  relating : ProcessPlan;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ProcessOperationDefinition;
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  versionId : OPTIONAL IdentifierSelect;
  processType : ClassSelect;
END_ENTITY;

ENTITY ProcessOperationDefinitionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : ProcessOperationDefinition;
  relating : ProcessOperationDefinition;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ProcessOperationInputOrOutput;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : ClassSelect;
  concernedShapes : OPTIONAL SET[1:?] OF ShapeElement;
  element : ProcessOperationInputOrOutputSelect;
  OPERATION : ProcessOperationOccurrence;
  placement : OPTIONAL Transformation;
END_ENTITY;

TYPE ProcessOperationInputOrOutputSelect = SELECT (
  AssemblyViewRelationship, 
  AssemblyOccurrenceRelationship, 
  MatedPartAssociation, 
  PartOccurrence, 
  PartVersion
);
END_TYPE; 

ENTITY ProcessOperationOccurrence;
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  definedIn : OPTIONAL GeometricCoordinateSpace;
  definition : ProcessOperationDefinition;
  plan : ProcessPlan;
END_ENTITY;

ENTITY ProcessOperationOccurrenceRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  cycleTime : OPTIONAL Duration;
  waitingTime : OPTIONAL PropertyValue;
  related : ProcessOperationOccurrence;
  relating : ProcessOperationOccurrence;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ProcessOperationResourceAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  assignedResource : ProcessOperationResourceAssignmentSelect;
  ssignedTo : ProcessOperationOccurrence;
  placement : OPTIONAL Transformation;
  reason : OPTIONAL MultiLingualStringSelect;
  referenceTool : BOOLEAN;
END_ENTITY;

TYPE ProcessOperationResourceAssignmentSelect = SELECT (
  PartOccurrence, 
  PartVersion, 
  BreakdownElement, -- was PhysicalBreakdownElement, 
  IndividualPartView, 
  RequirementView -- was TextSpecification
);
END_TYPE; 


(*:PP2
 ------------------------------------------------------------
  Mating
 ------------------------------------------------------------
*)

-- not harmonized with PLCS

ENTITY MatingDefinition
  SUBTYPE OF (AssemblyDefinition);
  matingType : OPTIONAL ClassSelect; 
INVERSE 
  matedParts : SET [2:?] OF MatedPartAssociation FOR relating; 
END_ENTITY;

ENTITY MatedPartAssociation
  SUBTYPE OF (AssemblyOccurrenceRelationship);
  SELF\PartViewOccurrenceRelationship.relating : MatingDefinition; 
END_ENTITY;

ENTITY MatedPartRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  matedShapes : OPTIONAL SET [1:?] OF AssemblyJoint; 
  matingMaterials : OPTIONAL SET [1:?] OF QuantifiedPartOccurrence; 
  related : MatedPartAssociation; 
  relating : MatedPartAssociation;
WHERE
 WR1: relating :<>: related;
(*
  wr2: The two MatedPartAssociation objects that are referenced by the MatedPartRelationship shall refer to the same MatingDefinition.
*) 
END_ENTITY;

ENTITY AssemblyJoint;
END_ENTITY;

ENTITY SameTimeMachiningRelationship
  SUBTYPE OF (PartOccurrenceRelationship);
  placement : OPTIONAL TransformationSelect;
END_ENTITY;

ENTITY ToolPartRelationship
  SUBTYPE OF (PartViewRelationship);
  placement : OPTIONAL TransformationSelect;
END_ENTITY;

ENTITY MakeFromRelationship
  SUBTYPE OF (PartViewRelationship);
  priority : OPTIONAL INTEGER;
  quantity : OPTIONAL ValueWithUnit;
END_ENTITY;

ENTITY ProcessStateRelationship
  SUBTYPE OF (PartViewRelationship);
END_ENTITY;


(*:RR1
 ------------------------------------------------------------
  Requirements
 ------------------------------------------------------------
*)

--  partially harmonized with PLCS

ENTITY Requirement;
  id : IdentifierSelect;
  name : DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  versions : OPTIONAL SET[1:?] OF RequirementVersion;
  owner : OPTIONAL PersonOrganizationSelect; -- needs clarification, if needed (because of Identification.context)
END_ENTITY;

ENTITY RequirementVersion;
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  views : OPTIONAL SET[1:?] OF RequirementView;
INVERSE
  versionOf : Requirement FOR versions;
END_ENTITY;

ENTITY RequirementVersionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  relationType: ClassSelect;
  relating : RequirementVersion;
  related : RequirementVersion;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY RequirementSequenceRelationship
  SUBTYPE OF (RequirementVersionRelationship);
DERIVE
  predecessor : RequirementVersion := SELF\RequirementVersionRelationship.relating;
  successor : RequirementVersion := SELF\RequirementVersionRelationship.related;
  SELF\RequirementVersionRelationship.relationType : ClassString := 'sequence';
END_ENTITY;

ENTITY RequirementView;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  initialContext : ViewContext;
  additionalContexts : OPTIONAL SET[1:?] OF ViewContext;
  definitionalRepresentations : SET[1:?] OF PropertyValue;
INVERSE
  viewOf : RequirementVersion FOR views;
END_ENTITY;

ENTITY RequirementViewRelationship
  SUPERTYPE OF (ONEOF (RequirementCollectionRelationship, RequirementTracingRelationship));
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : RequirementView;
  related : RequirementView;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY RequirementTracingRelationship
  SUBTYPE OF (RequirementViewRelationship);
DERIVE
  tracesFrom : RequirementView := SELF\RequirementViewRelationship.relating;
  tracesTo : RequirementView := SELF\RequirementViewRelationship.related;
  SELF\RequirementViewRelationship.relationType : ClassString := 'tracing';
END_ENTITY;

ENTITY RequirementCollectionRelationship
  SUBTYPE OF (RequirementViewRelationship);
DERIVE
  collection : RequirementView := SELF\RequirementViewRelationship.relating;
  member : RequirementView := SELF\RequirementViewRelationship.related;
  SELF\RequirementViewRelationship.relationType : ClassString := 'collection';
END_ENTITY;

ENTITY RequirementDecompositionRelationship
  SUBTYPE OF (RequirementCollectionRelationship);
DERIVE
  parent : RequirementView := SELF\RequirementViewRelationship.relating;
  child : RequirementView := SELF\RequirementViewRelationship.related;
  SELF\RequirementViewRelationship.relationType : ClassString := 'decomposition';
END_ENTITY;

ENTITY RequirementAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  assignedRequirement : RequirementVersionOrViewSelect;
  assignedTo : RequirementAssignmentSelect;
END_ENTITY;

TYPE RequirementVersionOrViewSelect = SELECT (
  RequirementVersion,
  RequirementView
);
END_TYPE;

TYPE RequirementAssignmentSelect = SELECT (
  AlternatePartRelationship,
  Part,
  PartVersion,
  PartView,
  Document,
  DocumentVersion,
  DocumentDefinition,
  Requirement,
  RequirementVersion,
  RequirementView,
  IndividualPart,
  IndividualPartVersion,
  IndividualPartView,
  Breakdown,
  BreakdownVersion,
  BreakdownElement,
  BreakdownElementVersion,
  BreakdownElementView
);
END_TYPE;

ENTITY RequirementSourceAssociation;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  sourcedRequirement : RequirementVersionOrViewSelect;
  source : RequirementSourceSelect;
END_ENTITY;

TYPE RequirementSourceSelect = SELECT (
  Part,
  PartVersion,
  PartView,
  Document,
  DocumentVersion,
  DocumentDefinition,
  Requirement,
  RequirementVersion,
  RequirementView,
  IndividualPart,
  IndividualPartVersion,
  IndividualPartView,
  Breakdown,
  BreakdownVersion,
  BreakdownElement,
  BreakdownElementVersion,
  BreakdownElementView
);
END_TYPE;

ENTITY RequirementSatisfactionAssertion;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  satisfiedRequirement : RequirementVersionOrViewSelect;
  satisfiedBy : RequirementAssignmentSelect;
  relatedAssignment : OPTIONAL RequirementAssignment;
  assertedBy : OPTIONAL SET [1:?] OF DateAndPersonOrganization;
END_ENTITY;


(*:RR2
 ------------------------------------------------------------
  Rule Specification and Management
 ------------------------------------------------------------
*)

-- not part if DIS version of edition 1


(*:RR3
 ------------------------------------------------------------
  Planned and Evaluated Characteristics
 ------------------------------------------------------------
*)

-- not harmonized with PLCS

ENTITY PlannedCharacteristic;
  definedFor : RequirementAssignment;
  name : OPTIONAL DescriptorSelect;
  plannedCharacteristic : SET[1:?] OF PropertyValue;
END_ENTITY;

ENTITY EvaluatedCharacteristic;
  actualCharacteristics : OPTIONAL SET[1:?] OF PropertyValue;
  evaluationActivity : OPTIONAL Activity;
  evaluationResult : EvaluationResultEnum;
  evaluationStatus : EvaluationStatusEnum;
  name : OPTIONAL DescriptorSelect;
  plannedCharacteristic : PlannedCharacteristic;
END_ENTITY;

TYPE EvaluationResultEnum = ENUMERATION OF 
   (fail,
    pass,
    undefined);
END_TYPE;
 
TYPE EvaluationStatusEnum = ENUMERATION OF 
   (invalid,
    not_evaluatable,
    to_be_evaluated,
    valid);
END_TYPE;


(*
 ------------------------------------------------------------
  Geometry
 ------------------------------------------------------------
*)


(*:GMI1
 ------------------------------------------------------------
  Person, Organization and Address
 ------------------------------------------------------------
*)

TYPE PersonOrganizationSelect = SELECT (
  Organization, 
  PersonInOrganization
);
END_TYPE;

ENTITY Person;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  lastName : CharacterString;
  firstName : OPTIONAL STRING;
  middleNames : OPTIONAL LIST[1:?] OF CharacterString;
  prefixTitles : OPTIONAL LIST[1:?] OF CharacterString;
  suffixTitles : OPTIONAL LIST[1:?] OF CharacterString;
  businessAddress : OPTIONAL Address;
INVERSE
  associatedOrganizations : SET[1:?] OF PersonInOrganization FOR associatedPerson;
END_ENTITY;

ENTITY PersonInOrganization; -- needs alligment with PLCS
  associatedOrganization : Organization;
  associatedPerson : Person;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  personRole : ClassSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  location : OPTIONAL Address;
END_ENTITY;

ENTITY PersonInOrganizationRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : PersonInOrganization;
  relating : PersonInOrganization;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY Organization;
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  organizationTypes : OPTIONAL ClassSelect; (*needs to be discussed within AP242 *)
  postalAddress     : OPTIONAL Address;
  visitorAddress    : OPTIONAL Address; 
  deliveryAdddress  : OPTIONAL Address; 
END_ENTITY;

ENTITY OrganizationRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : Organization;
  relating : Organization;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

TYPE PersonOrOrganizationSelect = SELECT (
  Organization, 
  PersonInOrganization
);
END_TYPE; 

ENTITY Address;
  id : OPTIONAL IdentifierSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  sameAs : OPTIONAL SET[1:?] OF ProxySelect;
  name : OPTIONAL CharacterString;
  streetNumber : OPTIONAL CharacterString;
  street : OPTIONAL CharacterString;
  postalBox : OPTIONAL CharacterString;
  town : OPTIONAL CharacterString;
  region : OPTIONAL CharacterString;
  postalCode : OPTIONAL CharacterString;
  country : OPTIONAL CharacterString;
  internalLocation : OPTIONAL CharacterString;
  facsimileNumber : OPTIONAL CharacterString;
  telephoneNumber : OPTIONAL CharacterString;
  electronicMailAddress : OPTIONAL CharacterString;
  telexNumber : OPTIONAL CharacterString;
  url : OPTIONAL CharacterString;
END_ENTITY;


(*:GMI2
 ------------------------------------------------------------
  Approval, Contract and Project
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

ENTITY Approval;
  id : OPTIONAL IdentifierSelect;
  purpose : MultiLingualStringSelect;
  actualDate : OPTIONAL DateTimeString;
  plannedDate : OPTIONAL DateTimeString;
  approvedBy : OPTIONAL SET[1:?] OF DateAndPersonOrganization;
  scopes : OPTIONAL SET[1:?] OF Organization;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  status : ClassSelect;
END_ENTITY;

ENTITY ApprovalRelationship;
  description : OPTIONAL SET [1:?] OF DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : Approval;
  relating : Approval;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ApprovalAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL SET [1:?] OF DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  assignedApproval : Approval;
  assignedTo : SET[1:?] OF ApprovalAssignmentSelect;
END_ENTITY;

TYPE ApprovalAssignmentSelect = SELECT (
  Activity, 
  ActivityAssignment, 
  ActivityMethodAssignment, 
  AlternatePartRelationship, 
  AssemblyViewRelationshipSubstitution, 
  AssemblyOccurrenceRelationshipSubstitution, 
  Breakdown, 
  BreakdownElement, 
  BreakdownVersion, 
  Certification, 
  ClassSelect, 
  Classification, 
  ClassCategoryAssociation, 
  ClassConditionAssociation, 
  ClassInclusionAssociation, 
  ClassSpecificationAssociation, 
  ClassSystem, 
  Configuration, 
  Contract, 
  RequirementView, -- was DesignConstraint, 
  Document, 
  DocumentDefinition, 
  DocumentDefinitionRelationship, 
  DocumentVersion, 
  Effectivity, 
  File, 
  GeometricModel, 
  InformationUsageRight, 
  InformationUsageRightAssignment, 
  ManufacturingConfiguration, 
  MaterialIdentification, 
  PartOccurrence, 
  PartOccurrenceRelationship, 
  PartVersion, 
  PartVersionRelationship, 
  PartView, 
  PartViewOccurrenceRelationship, 
  PartViewRelationship, 
  IndividualAssemblyRelationship, 
  PhysicalDocumentDefinition, 
  IndividualPartView, 
  IndividualPartTestResult, 
  ProcessPlan, 
  ProductClass, 
  ProductConfiguration, 
  Project, 
  PropertyDefinitionAssignment, 
  PropertyValueAssignment, 
  PropertyDefinitionSelect, 
  PropertyDefinitionRelationship, 
  RealizationOrOccurrenceRelationship, 
  RequirementAssignment, 
  SecurityClassification, 
  PropertyValue, 
  Specification, 
  SpecificationCategory, 
  SpecificationExpression, 
  SpecificationInclusion, 
  StyledModel,
  WorkOrder, 
  WorkRequest
);
END_TYPE;

ENTITY Certification;
  id : OPTIONAL IdentifierSelect;
  name : DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET [1:?] OF ClassificationSelect;
  certificationType : ClassSelect;
END_ENTITY;

ENTITY CertificationAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET [1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  assignedCertification : Certification;
  assignedTo : SET[1:?] OF CertificationAssignmentSelect;
END_ENTITY;

TYPE CertificationAssignmentSelect = SELECT (
  AlternatePartRelationship, 
  PartOccurrence, 
  PartVersion, 
  PartVersionRelationship,
  SupplierSolution
);
END_TYPE; 

ENTITY Project;
  id : OPTIONAL IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL STRING;
  classifiedAs: OPTIONAL SET [1:?] OF ClassificationSelect;
  actualEndDate : OPTIONAL DateTimeString;
  actualStartDate : OPTIONAL DateTimeString;
  plannedEndDate : OPTIONAL PeriodOrDateSelect;
  plannedStartDate : OPTIONAL EventOrDateSelect;
  responsibleOrganizations : OPTIONAL SET[1:?] OF Organization;
END_ENTITY;

ENTITY ProjectAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET [1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedProject : Project;
  assignedTo : SET[1:?] OF ProjectAssignmentSelect;
END_ENTITY;

TYPE ProjectAssignmentSelect = SELECT (
  Activity, 
  Breakdown, 
  BreakdownElement, 
  BreakdownVersion, 
  Document, 
  DocumentVersion, 
  Part, 
  PartOccurrence,
  PartVersion, 
  IndividualPartView, 
  ProductClass, 
  ProductConfiguration
);
END_TYPE; 

ENTITY ProjectRelationship;
  description : OPTIONAL SET [1:?] OF DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : Project;
  relating : Project;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY Contract;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET [1:?] OF ClassificationSelect;
  contractType : ClassSelect;
INVERSE
  releases : SET[0:?] OF OrganizationInContract FOR signedContracts;
END_ENTITY;

ENTITY ContractAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET [1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  assignedContract : Contract;
  assignedTo : SET[1:?] OF ContractAssignmentSelect;
END_ENTITY;

TYPE ContractAssignmentSelect = SELECT (
  Activity, 
  BreakdownElement, 
  DocumentVersion, 
  InformationUsageRight, 
  Organization, 
  PartVersion, 
  PersonInOrganization, 
  ProductConfiguration,
  WorkOrder
);
END_TYPE; 

ENTITY OrganizationInContract;
  description : OPTIONAL SET [1:?] OF DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  organizationRole : ClassSelect;
  contractedOrganization : Organization;
  signedContracts : SET[1:?] OF Contract;
  signedBy : OPTIONAL SET[1:?] OF DateAndPersonOrganization;
END_ENTITY;

(*:GMI3
 ------------------------------------------------------------
  Information Right
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

ENTITY InformationRight
  SUPERTYPE OF (ONEOF (Copyright));
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET [1:?] OF ClassificationSelect;
  owners : SET[1:?] OF PersonOrganizationSelect;
  restriction : OPTIONAL MultiLingualStringSelect;
END_ENTITY;

ENTITY InformationUsageRight;
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET [1:?] OF ClassificationSelect;
  grantsRight : SET[1:?] OF InformationRight;
  owners : SET[1:?] OF PersonOrganizationSelect;
END_ENTITY;

ENTITY InformationUsageRightAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs: OPTIONAL SET [1:?] OF ClassificationSelect;
  role: OPTIONAL ClassSelect;
  assignedRight : InformationUsageRight;
  isAssignedTo : SET[1:?] OF InformationUsageRightAssignmentSelect;
END_ENTITY;

TYPE InformationUsageRightAssignmentSelect = SELECT (
  CertificationAssignmentSelect, 
  -- ClassifiedElementSelect, 
  DocumentAssignmentSelect, 
  GeneralOrganizationalDataSelect, 
  Organization, 
  PartVersion, 
  PersonInOrganization,
  RequirementAssignmentSelect, 
  WorkOrder
);
END_TYPE; 

ENTITY InformationUsageRightRelationship;
  description : OPTIONAL SET [1:?] OF DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : InformationUsageRight;
  relating : InformationUsageRight;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY Copyright
  SUBTYPE OF (InformationRight);
END_ENTITY;

ENTITY DataValidityPeriod
  SUBTYPE OF (DatedEffectivity);
END_ENTITY;


(*:GMI4
 ------------------------------------------------------------
  Multi Linguism
 ------------------------------------------------------------
*)

-- harmonized with PLCS yet

TYPE CharacterString = STRING;
END_TYPE;

TYPE Language = ProxySelect;
END_TYPE;

ENTITY LocalizedString;
  language : OPTIONAL Language;
  text : CharacterString;
WHERE
 encapsulated: SIZEOF(USEDIN(SELF,''))=1;
END_ENTITY;

TYPE MultiLingualStringSelect = SELECT (
  CharacterString,
  LocalizedString,
  TranslatedStringSet
);
END_TYPE;

TYPE TranslatedStringSet = SET [1:?] OF LocalizedString;
END_TYPE;


(*:GMI5
 ------------------------------------------------------------
  Classification
 ------------------------------------------------------------
*)

-- harmonized with PLCS yet

TYPE ClassificationSelect = SELECT (
  ClassSelect,
  Classification
);
(*
 WHERE  
  encapsulated: SIZEOF(USEDIN(SELF,''))=1;
*)
END_TYPE;

ENTITY Classification;
  class : ClassSelect;
  role : ClassSelect; -- needs checking
END_ENTITY;

ENTITY ClassificationRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : Classification;
  related : Classification;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

TYPE ClassSelect = SELECT (
  Class,
  ExternalClass,
  ExternalOwlClass,
  ClassString
);
END_TYPE;

TYPE ClassString = STRING;
END_TYPE;

ENTITY Class;
  id : IdentifierSelect;
  versionId : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
UNIQUE
  ur1: id;
END_ENTITY;

ENTITY SetMembership;
  member : ProxyItemSelect;
  ofSet : ClassSelect; 
END_ENTITY;

ENTITY Subset;
  subset : ClassSelect;
  superset : ClassSelect;
-- WR missing: strings can not be subsetted
END_ENTITY;

TYPE ExternalSourceSelect = SELECT (
  Document,
  IdentifierSelect
);
END_TYPE;

ENTITY ExternalClass;
  description : OPTIONAL DescriptorSelect;
  externalId : SingleIdentifierSelect; 
  source : OPTIONAL ExternalSourceSelect; 
UNIQUE
  ur1: externalId, source; 
END_ENTITY;

TYPE Uri = IdentifierString;
END_TYPE;

ENTITY ExternalOwlClass;
  class : Uri;
UNIQUE
  ur1: class;
END_ENTITY;

ENTITY ExchangeContextClassLibrary;
  libraryId : Uri;
UNIQUE
  UR1: libraryId;
(* WHERE
  There should only one instance of an ExchangeContextClassLibrary in a data exchange file.
*)
END_ENTITY;

ENTITY SecurityClassification;
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  level : ClassSelect;
END_ENTITY;

ENTITY SecurityClassificationAssignment;
  id  : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : OPTIONAL ClassSelect;
  assignedSecurityClassification : SecurityClassification;
  assignedTo : SET[1:?] OF SecurityClassificationSelect;
END_ENTITY;

TYPE SecurityClassificationSelect = SELECT (
  Activity, 
  ActivityAssignment, 
  AssemblyViewRelationship, 
  AssemblyViewRelationshipSubstitution, 
  AssemblyOccurrenceRelationship, 
  AssemblyOccurrenceRelationshipSubstitution, 
  Breakdown, 
  BreakdownElement, 
  BreakdownVersion, 
  --ClassSystem, 
  Configuration, 
  RequirementView, -- was DesignConstraint, 
  Document, 
  DocumentDefinition, 
  DocumentVersion, 
  File, 
  GeometricModel, 
  ManufacturingConfiguration, 
  MaterialIdentification, 
  Part, 
  PartVersion, 
  PartView, 
  PartViewRelationship, 
  IndividualAssemblyRelationship, 
  IndividualPartView, 
  IndividualPartTestResult, 
  ProcessPlan, 
  ProductClass, 
  Project, 
  PropertyDefinitionAssignment, 
  PropertyValueAssignment, 
  PropertyDefinitionSelect, 
  RealizationOrOccurrenceRelationship, 
  Specification, 
  SpecificationCategory, 
  StyledModel,
  WorkOrder, 
  WorkRequest
);
END_TYPE; 

-- Proxy

TYPE ProxySelect = SELECT (
  ProxyItemSelect,
  Proxy
);
(*
WHERE
  encapsulated: SIZEOF(USEDIN(SELF,''))=1;
*)
END_TYPE;

TYPE ProxyItemSelect = SELECT (
  ExternalItem,
  ExternalOwlObject,
  ProxyString
);
END_TYPE;

TYPE ProxyString = STRING;
END_TYPE;

ENTITY Proxy;
  individual : ProxyItemSelect;
END_ENTITY;

ENTITY ProxyRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : Proxy;
  related : Proxy;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ExternalItem;
  description : OPTIONAL DescriptorSelect;
  externalId : SingleIdentifierSelect; 
  source : OPTIONAL ExternalSourceSelect; 
UNIQUE
  ur1: externalId, source; 
END_ENTITY;

ENTITY ExternalOwlObject;
  individual : Uri;
UNIQUE
  ur1: individual;
END_ENTITY;


(*:GMI6
 ------------------------------------------------------------
  Identification
 ------------------------------------------------------------
*)

-- harmonized with PLCS yet

TYPE SingleIdentifierSelect = SELECT (
  Identifier,
  IdentifierString
);
(*
WHERE
  encapsulated: SIZEOF(USEDIN(SELF,''))=1;
*)
END_TYPE;

TYPE IdentifierSelect = SELECT (
  SingleIdentifierSelect,
  IdentifierSet
);
(*
WHERE
  encapsulated: SIZEOF(USEDIN(SELF,''))=1;
*)
END_TYPE;

TYPE IdentificationContextSelect = SELECT (
  Identifier,
  Organization
);
END_TYPE;

TYPE IdentifierString = STRING;
END_TYPE;

TYPE IdentifierSet = SET [2:?] OF Identifier;
(*
WHERE
  encapsulated: SIZEOF(USEDIN(SELF,''))=1;
*)
END_TYPE;

ENTITY Identifier;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : ClassSelect;  
  idString : IdentifierString;  
  identificationContext : OPTIONAL IdentificationContextSelect;
UNIQUE
   UR1: idString, role, identificationContext;
WHERE
  ContextlessForOrganizationOnly: NOT (NOT EXISTS(identificationContext) AND (SIZEOF(USEDIN(SELF, SCHEMA_NAME + 'ORGANIZATION.ID'))=0));
END_ENTITY;

ENTITY IdentifierRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : Identifier;
  related : Identifier;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

-- Exchange context
(* 
 The Exchange context provides the default lagnguage and/or context used for 
 identifications and descriptions where the strings are used as opposed
 to the explcit entities, 
*)

ENTITY ExchangeContext;
  description : OPTIONAL DescriptorSelect;
  language : OPTIONAL Language;
  identificationContext : OPTIONAL IdentificationContextSelect;
WHERE
 wr1: EXISTS(language) OR EXISTS (identificationContext); -- rule is not completely correct
(* WHERE
  - There should be at most one instance of an ExchangeContext in  a data exchange file.
*)
END_ENTITY;


(*:GMI7
 ------------------------------------------------------------
  Name and Description
 ------------------------------------------------------------
*)

-- harmonized with PLCS yet

TYPE DescriptorSelect = SELECT (
  MultiLingualStringSelect,
  Descriptor,
  DescriptorSet
);
END_TYPE;

ENTITY Descriptor;
  id : OPTIONAL IdentifierSelect;
  text : MultiLingualStringSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  descriptionContext : OPTIONAL SET[1:?] OF IdentificationContextSelect;
WHERE
  encapsulated: SIZEOF(USEDIN(SELF,''))=1;
END_ENTITY;

TYPE DescriptorSet = SET [2:?] OF Descriptor;
END_TYPE;

ENTITY DescriptorRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  relating : Descriptor;
  related : Descriptor;
WHERE
 WR1: relating :<>: related;
END_ENTITY;


(*:GMI8
 ------------------------------------------------------------
  Date and Time
 ------------------------------------------------------------
*)

-- partially harmonized with PLCS yet


TYPE DateTimeString = STRING;
END_TYPE;

TYPE DateTimeAssignmentSelect = SELECT (
  Event, 
  GeneralOrganizationalDataSelect
);
END_TYPE;

ENTITY Event;
  id : IdentifierSelect;
  eventType : ClassSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  actualStartDate : OPTIONAL DateTimeString;
  plannedStartDate : OPTIONAL DateTimeString;
  description : OPTIONAL DescriptorSelect;
  offset : OPTIONAL Duration;
END_ENTITY;

ENTITY EventAssignment;
  id  : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedEvent : Event;
  assignedTo : SET[1:?] OF GeneralOrganizationalDataSelect;
END_ENTITY;

ENTITY EventRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : Event;
  relating : Event;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY RetentionPeriod;
  id  : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  earliestEnd : PeriodOrDateSelect;
  assignedTo : SET[1:?] OF GeneralOrganizationalDataSelect;
  latestEnd : PeriodOrDateSelect;
  start : EventOrDateSelect;
END_ENTITY;

ENTITY Duration; -- needs alligment with XML definition of duration
  time : STRING;
  unit : STRING;
END_ENTITY;


TYPE GeneralOrganizationalDataSelect = SELECT (
  Activity, 
  ActivityAssignment, 
  ActivityMethodWorkRequestAssociation, 
  AlternatePartRelationship, 
  AlternativeSolutionRelationship, 
  Approval, 
  AssemblyOccurrenceRelationshipSubstitution,
  AssemblyViewRelationshipSubstitution,
  Breakdown, 
  BreakdownElement, 
  BreakdownVersion, 
  Certification, 
  ClassSelect, 
  Classification, 
  ClassCategoryAssociation, 
  ClassConditionAssociation, 
  ClassInclusionAssociation, 
  ClassSpecificationAssociation, 
  ClassSystem, 
  Configuration, 
  Contract, 
  RequirementView, -- was DesignConstraint, 
  Document, 
  DocumentDefinition, 
  DocumentVersion, 
  File, 
  BreakdownElementVersionRelationship, 
  BreakdownElementViewRelationship, 
  GeometricModel, 
  IdentifierSelect, 
  InformationUsageRight, 
  ManufacturingConfiguration, 
  MaterialIdentification, 
  Organization, 
  OrganizationRelationship, 
  Part, 
  PartOccurrence, 
  PartOccurrenceRelationship, 
  PartVersion, 
  PartVersionRelationship, 
  PartView, 
  PartViewOccurrenceRelationship, 
  PartViewRelationship, 
  PersonInOrganization, 
  PersonInOrganizationRelationship, 
  IndividualAssemblyRelationship, 
  IndividualPartView, -- was PhysicalInstance, 
  IndividualPartTestResult, 
  ProcessOperationDefinition, 
  ProcessOperationOccurrence, 
  ProcessOperationResourceAssignment, 
  ProcessPlan, 
  ProductClass, 
  ProductConfiguration, 
  Project, 
  PropertyValue,
  PropertyDefinitionSelect, 
  PropertyDefinitionAssignment, 
  PropertyValueAssignment,
  RealizationOrOccurrenceRelationship, 
  SecurityClassification, 
  SecurityClassificationAssignment, 
  Specification, 
  SpecificationCategory, 
  SpecificationExpression, 
  SpecificationInclusion, 
  StyledModel, 
  WorkOrder, 
  WorkRequest
);
END_TYPE;

ENTITY DateTimeAssignment;
  id  : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedDate : DateTimeString;
  assignedTo : SET[1:?] OF DateTimeAssignmentSelect;
END_ENTITY;

ENTITY TimeInterval;
  description : OPTIONAL DescriptorSelect;
  endDefinition : PeriodOrDateSelect;
  id : OPTIONAL IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  startDefinition : EventOrDateSelect;
END_ENTITY;

ENTITY TimeIntervalAssignment;
  id  : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedTimeInterval : TimeInterval;
  assignedTo : SET[1:?] OF GeneralOrganizationalDataSelect;
END_ENTITY;

TYPE PeriodOrDateSelect = SELECT (
  DateTimeString, 
  Duration, 
  EVENT
);
END_TYPE; 

TYPE EventOrDateSelect = SELECT (
  DateTimeString, 
  EVENT
);
END_TYPE; 

ENTITY DateAndPersonAssignment;
  id : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedDateAndPerson : DateAndPersonOrganization;
  assignedTo : SET[1:?] OF DateTimePersonOrganizationElementSelect;
END_ENTITY;

TYPE DateTimePersonOrganizationElementSelect = SELECT (
  Event, 
  GeneralOrganizationalDataSelect
);
END_TYPE; 

ENTITY DateAndPersonOrganization;
  date : DateTimeString;
  personOrOrganization : PersonOrOrganizationSelect;
END_ENTITY;

ENTITY OrganizationOrPersonInOrganizationAssignment;
  id  : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedPersonOrOrganization : PersonOrOrganizationSelect;
  assignedTo : SET[1:?] OF DateTimePersonOrganizationElementSelect;
END_ENTITY;


(*:AMW1
 ------------------------------------------------------------
  Activity
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

ENTITY Activity;
  id : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  activityType : ClassSelect;
  status : OPTIONAL ClassSelect;
  actualEndDate : OPTIONAL DateTimeString;
  actualStartDate : OPTIONAL DateTimeString;
  chosenMethod : OPTIONAL ActivityMethod;
  concernedOrganizations : OPTIONAL SET[1:?] OF Organization;
  plannedEndDate : OPTIONAL PeriodOrDateSelect;
  plannedStartDate : OPTIONAL EventOrDateSelect;
  requestor : OPTIONAL DateAndPersonOrganization;
  resolvedRequests : OPTIONAL SET[1:?] OF WorkRequest;
  supplyingOrganizations : OPTIONAL SET[1:?] OF Organization;
INVERSE
  authorization : SET[0:1] OF WorkOrder FOR isControlling;
END_ENTITY;

ENTITY ActivityRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : Activity;
  relating : Activity;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ActivityAssignment;
  id : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedActivity : Activity;
  assignedTo : SET[1:?] OF ActivityAssignmentSelect;
END_ENTITY;

TYPE ActivityAssignmentSelect = SELECT (
  Activity, 
  ActivityMethod, 
  ActivityRelationship, 
  AlternatePartRelationship, 
  AssemblyViewRelationshipSubstitution, 
  AssemblyOccurrenceRelationshipSubstitution, 
  Breakdown, 
  BreakdownElement, 
  BreakdownVersion, 
  ClassSelect, 
  ClassCategoryAssociation, 
  ClassConditionAssociation, 
  ClassInclusionAssociation, 
  ClassSpecificationAssociation, 
  Configuration, 
  RequirementView, -- was DesignConstraint, 
  Document, 
  DocumentDefinition, 
  DocumentVersion, 
  Effectivity, 
  Event, 
  File, 
  GeometricModel, 
  ManufacturingConfiguration, 
  MaterialIdentification, 
  Part, 
  PartOccurrence, 
  PartOccurrenceRelationship, 
  PartVersion, 
  PartView, 
  PartViewOccurrenceRelationship, 
  PartViewRelationship, 
  IndividualAssemblyRelationship, 
  IndividualPartView, 
  ProcessOperationDefinition, 
  ProcessOperationOccurrence, 
  ProcessPlan, 
  ProductClass, 
  ProductConfiguration, 
  Project, 
  ProjectAssignment, 
  ProjectRelationship, 
  PropertyValue, 
  PropertyDefinitionAssignment, 
  PropertyValueAssignment, 
  RealizationOrOccurrenceRelationship, 
  Specification, 
  SpecificationCategory, 
  SpecificationExpression, 
  SpecificationInclusion, 
  StyledModel
);
END_TYPE; 

ENTITY ActivityMethod;
  id : OPTIONAL IdentifierSelect;
  name  : OPTIONAL DescriptorSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  consequence : OPTIONAL MultiLingualStringSelect;
  purpose : MultiLingualStringSelect;
END_ENTITY;

ENTITY ActivityMethodAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedActivityMethod : ActivityMethod;
  assignedTo : SET[1:?] OF ActivityMethodAssignmentSelect;
END_ENTITY;

TYPE ActivityMethodAssignmentSelect = SELECT (
  WorkRequest,
  PropertyValueAssignment,
  PropertyValueAssignmentRelationship,
  PropertyDefinitionAssignment,
  PropertyDefinitionRelationship,
  PropertyValueRelationship,
  Activity,
  ActivityMethod,
  ActivityAssignment,
  Contract,
  File,
  Organization,
  Person,
  PersonInOrganization,
  Part,
  PartVersion,
  PartView,
  Document,
  DocumentVersion,
  DocumentDefinition,
  Requirement,
  RequirementVersion,
  RequirementView,
  IndividualPart,
  IndividualPartVersion,
  IndividualPartView,
  Breakdown,
  BreakdownVersion,
  BreakdownElement,
  BreakdownElementVersion,
  BreakdownElementView,
  ProductClass,
  ProductConfiguration,
  PartVersionRelationship,
  DocumentVersionRelationship,
  RequirementVersionRelationship,
  IndividualPartVersionRelationship,
  BreakdownVersionRelationship,
  BreakdownElementVersionRelationship,
  Project,
  PartViewRelationship, -- and other subtypes of ViewDefinitionRelationship,
  DocumentDefinitionRelationship,
  RequirementViewRelationship,
  IndividualPartViewRelationship,
  BreakdownElementViewRelationship
);
END_TYPE;

ENTITY ActivityMethodRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : ActivityMethod;
  relating : ActivityMethod;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY ActivityMethodWorkRequestAssociation;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  associationType : ClassSelect;
  associatedActivityMethod : ActivityMethod;
  associatedWorkRequest : WorkRequest;
END_ENTITY;

ENTITY ElementDelivery;
  associatedActivity : Activity;
  deliverableElements : SET[1:?] OF ActivityAssignmentSelect;
  destination : Organization;
  quantity : ValueWithUnit;
  role : ClassSelect;
END_ENTITY;

(*:AMW2
 ------------------------------------------------------------
  Work Management
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

ENTITY WorkOrder;
  id : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  orderType : ClassSelect;
  versionId : OPTIONAL IdentifierSelect;
  inResponseTo : OPTIONAL SET[1:?] OF WorkRequest;
  isControlling : SET[1:?] OF Activity;
END_ENTITY;

ENTITY WorkRequest;
  id : OPTIONAL IdentifierSelect;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  requestType : ClassSelect;
  versionId : OPTIONAL IdentifierSelect;
  status : ClassSelect;
  notifiedPersons : OPTIONAL SET[1:?] OF DateAndPersonOrganization;
  requestor : DateAndPersonOrganization;
  scopes : OPTIONAL SET[1:?] OF ActivityAssignmentSelect;
END_ENTITY;

ENTITY WorkRequestRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : WorkRequest;
  relating : WorkRequest;
WHERE
 WR1: relating :<>: related;
END_ENTITY;


(*:AMW2
 ------------------------------------------------------------
  Delta Change
 ------------------------------------------------------------
*)

-- not harmonized with PLCS

TYPE DeltaChangeManagementObjectSelect = SELECT (
  ActivityAssignmentSelect,
  EventAssignment
);
END_TYPE;

TYPE DeltaChangeRelationshipSelect = SELECT (
  PartVersionRelationship,
  DocumentVersionRelationship,
  ReplacedUsageRelationship,
  ReplacedPartViewRelationship,
  BreakdownElementVersionRelationship,
  AlternativeSolutionRelationship,
  RequirementVersionRelationship,
  ProcessPlanRelationship,
  ProcessOperationOccurrenceRelationship,
  ShapeElementRelationship
);
END_TYPE;

ENTITY DeltaChange;
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  describedChange: OPTIONAL DeltaChangeRelationshipSelect;
  changeAcitvities : OPTIONAL SET [1:?] OF DeltaChangeActivity;
END_ENTITY;

ENTITY DeltaChangeActivity
  ABSTRACT SUPERTYPE OF (ONEOF
        (ModifyElement,
         ModifySingleElement,
         DeleteElement,
         AddElement));
  attributeName : OPTIONAL STRING;
  changeLocationInAggregateAttribute : OPTIONAL LIST [1:?] OF INTEGER;
INVERSE
  changeSet : DeltaChange FOR changeAcitvities;
END_ENTITY;

ENTITY ChangeElementSequence;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  previous : DeltaChangeActivity;
  next : DeltaChangeActivity;
END_ENTITY;

ENTITY AddElement
  SUBTYPE OF (DeltaChangeActivity);
  currentDesignObject : SET [1:?] OF DeltaChangeManagementObjectSelect;
END_ENTITY;

ENTITY ModifyElement
  SUBTYPE OF (DeltaChangeActivity);
  currentDesignObject  : SET [1:?] OF DeltaChangeManagementObjectSelect; 
END_ENTITY;

ENTITY ModifySingleElement
  SUBTYPE OF (DeltaChangeActivity);
  currentDesignObject  : DeltaChangeManagementObjectSelect;
  previousDesignObject : DeltaChangeManagementObjectSelect;
WHERE
  WR1: currentDesignObject :<>: previousDesignObject;
END_ENTITY;

ENTITY DeleteElement
  SUBTYPE OF (DeltaChangeActivity);
  previousDesignObject : SET [1:?] OF DeltaChangeManagementObjectSelect; 
END_ENTITY;

ENTITY FrozenAssignment;
  frozenObject : SET[1:?] OF DeltaChangeManagementObjectSelect;
END_ENTITY;


(*:DM1
 ------------------------------------------------------------
  Document Identification
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

ENTITY Document;
  documentTypes: SET [1:?] OF ClassSelect;
  classifiedAs: OPTIONAL SET[1:?] OF ClassificationSelect;
  description : OPTIONAL DescriptorSelect;
  id : IdentifierSelect;
  name : DescriptorSelect;
  versions : SET[1:?] OF DocumentVersion;
END_ENTITY;

ENTITY DocumentRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : Document;
  relating : Document;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY DocumentVersion;
  id : IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  views : OPTIONAL SET[1:?] OF DocumentDefinition;
INVERSE
  versionOf : Document FOR versions;
END_ENTITY;

ENTITY DocumentVersionRelationship;
  description  : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  related : DocumentVersion;
  relating : DocumentVersion;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY DocumentAssignment;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  role : ClassSelect;
  assignedDocument : AssignedDocumentSelect;
  assignedTo : SET[1:?] OF DocumentAssignmentSelect;
  documentPortion : OPTIONAL MultiLingualStringSelect;
END_ENTITY;

TYPE AssignedDocumentSelect = SELECT (
  Document, 
  DocumentVersion, 
  DocumentDefinition, 
  File
);
END_TYPE;

TYPE DocumentAssignmentSelect = SELECT (
  Activity, 
  ActivityAssignment, 
  ActivityMethod, 
  Approval, 
  Breakdown, 
  BreakdownElement, 
  BreakdownVersion, 
  Certification, 
  ClassSelect, 
  -- ClassAttribute, 
  ClassSystem, 
  Contract, 
  RequirementView, -- was DesignConstraint and TextSpecification, 
  ExternalItem, -- was ExternalSourceIdentification???, 
  InformationRight, 
  InformationUsageRight, 
  InformationUsageRightRelationship, 
  MaterialIdentification, 
  Organization, 
  Part, 
  PartOccurrence, 
  PartOccurrenceRelationship, 
  PartShape, 
  PartView, 
  PartViewOccurrenceRelationship, 
  PartViewRelationship, 
  Person, 
  IndividualAssemblyRelationship, 
  IndividualPartView, 
  IndividualPartTestResult, 
  ProcessOperationOccurrence, 
  ProcessPlan, 
  ProductClass, 
  ProductConfiguration, 
  Project, 
  PropertyValue, 
  DeltaChange, -- was PropertyChange, 
  PropertyDefinitionSelect, 
  RealizationOrOccurrenceRelationship, 
  RetentionPeriod, 
  SecurityClassification, 
  ShapeElement, 
  ShapeElementRelationship,
  Specification, 
  SpecificationCategory, 
  SurfaceCondition, 
  WorkOrder, 
  WorkRequest
);
END_TYPE;

(*:DM2
 ------------------------------------------------------------
  Document Structure and Property
 ------------------------------------------------------------
*)

-- partially harmonized with PLCS yet

ENTITY DocumentDefinition
  ABSTRACT SUPERTYPE OF (ONEOF (DigitalDocumentDefinition,
                                PhysicalDocumentDefinition));
  id : IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  documentCcontent : OPTIONAL ContentProperty;
  documentCreation : OPTIONAL CreationProperty;
  documentFormat : OPTIONAL SET[1:?] OF FormatProperty;
  documentSize : OPTIONAL SizeProperty;
INVERSE
  viewOf : DocumentVersion FOR views;
END_ENTITY;

ENTITY DocumentDefinitionRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  placement : OPTIONAL TransformationSelect;  -- needs analysis if needed
  related : DocumentDefinition;
  relating : DocumentDefinition;
WHERE
 WR1: relating :<>: related;
END_ENTITY;

ENTITY DigitalDocumentDefinition
  SUBTYPE OF (DocumentDefinition);
  files : OPTIONAL SET[1:?] OF DigitalFile;
END_ENTITY;

ENTITY PhysicalDocumentDefinition
  SUBTYPE OF (DocumentDefinition);
  components : OPTIONAL SET[1:?] OF Hardcopy;
END_ENTITY;

ENTITY ContentProperty;
  description : OPTIONAL DescriptorSelect;
  detailLevel : OPTIONAL DescriptorSelect;
  geometryTypes : OPTIONAL SET[1:?] OF ClassificationSelect;
  languages : OPTIONAL SET[1:?] OF Language;
  realWorldScale : OPTIONAL NumericalValue;
END_ENTITY;

ENTITY CreationProperty;
  description : OPTIONAL DescriptorSelect;
  creatingInterface : OPTIONAL CharacterString;
  creatingSystem : CharacterString;
  operatingSystem : OPTIONAL CharacterString;
END_ENTITY;

ENTITY FormatProperty;
  id : OPTIONAL IdentifierSelect;
  description : OPTIONAL DescriptorSelect;
  characterCode : OPTIONAL ClassSelect;
  dataFormat : OPTIONAL ClassSelect;
  sizeFormat : OPTIONAL ClassSelect;
END_ENTITY;

ENTITY RectangularSize
  SUPERTYPE OF (ONEOF (NamedSize));
  density : OPTIONAL ValueWithUnit;
  height : OPTIONAL ValueWithUnit;
  width : OPTIONAL ValueWithUnit;
END_ENTITY;

ENTITY NamedSize
  SUBTYPE OF (RectangularSize);
  referencedStandard : OPTIONAL ClassSystem;
  size : ClassSelect;
END_ENTITY;

ENTITY SizeProperty;
  description : OPTIONAL DescriptorSelect;
  fileSize : OPTIONAL ValueWithUnit;
  pageCount : OPTIONAL ValueWithUnit;
END_ENTITY;

-- START needs allignment;
ENTITY ClassSystem; END_ENTITY;
--  END needs alligment

ENTITY File
  ABSTRACT SUPERTYPE OF (ONEOF (DigitalFile,
                                Hardcopy));
  id : OPTIONAL IdentifierSelect;
  versionId : OPTIONAL IdentifierSelect;
  locations : OPTIONAL SET[1:?] OF ExternalItem;
  description : OPTIONAL DescriptorSelect;
  fileType : OPTIONAL ClassSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  fileFormat : OPTIONAL FormatProperty;
  fileContent : OPTIONAL ContentProperty;
  fileCreation : OPTIONAL CreationProperty;
  fileSize : OPTIONAL SizeProperty;
END_ENTITY;

ENTITY DigitalFile
  SUBTYPE OF (File);
INVERSE
 associatedModelSpace : ExternalGeometricModel FOR isDefinedAs;
END_ENTITY;

ENTITY Hardcopy
  SUBTYPE OF (File);
END_ENTITY;


(*:DM3
 ------------------------------------------------------------
  External Model
 ------------------------------------------------------------
*)

ENTITY ExternalGeometricModel
  SUPERTYPE OF (ONEOF (ExternalEdgeBasedWireframeShapeRepresentation,
  	            ExternalGeometricallyBoundedSurfaceShapeRepresentation,
  	            ExternalGeometricallyBoundedWireframeShapeRepresentation,
  	            ExternalManifoldSurfaceShapeRepresentation,
  	            ExternalShellBasedWireframeShapeRepresentation,
  	            ExternalAdvancedBrepShapeRepresentation,
  	            ExternalCsgShapeRepresentation,
  	            ExternalCurveSweptSolidShapeRepresentation,
  	            ExternalElementaryBrepShapeRepresentation,
  	            ExternalFacetedBrepShapeRepresentation,
    	        CompositeSheetRepresentation,
    	        ThreeDGeometrySet))
  SUBTYPE OF (GeometricModel);
  SELF\GeometricModel.modelElements :  SET [1:1] OF CoordinateSystem;
  isDefinedAs : DigitalFile;
  accuracyType : OPTIONAL ClassSelect;
  accuracyValue : OPTIONAL REAL;
  parameterValues : OPTIONAL SET[1:?] OF PropertyValue;
END_ENTITY;


(*:CSS
 ------------------------------------------------------------
  Composite Structural Shape and Structure
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

  TYPE ComponentClassForAssemblySelect = SELECT
    (CompositeAssembly,
     FilamentLaminate,
     PlyLaminate,
     Ply,
     ProcessedCore);
  END_TYPE;

(*
[[StockCategoryEnum]]
BO Model specific enumeration; replaces subtypes of ARM concept Stock_material.
*)
  TYPE StockCategoryEnum = ENUMERATION OF
    (ANISOTROPIC_MATERIAL,
     BRAIDED_ASSEMBLY,
     DISCONTINUOUS_FIBER_ASSEMBLY,
     FILAMENT_ASSEMBLY,
     ISOTROPIC_MATERIAL,
     STOCK_CORE,
     WOVEN_ASSEMBLY);
  END_TYPE;

(*
[[ShapeInformationSelect]]
Was shape_select in the ARM.
*)
(*
  TYPE ShapeInformationSelect = SELECT
    (ShapedElementSelect,
     ShapeElementRelationship);
  END_TYPE;
*)
(*
[[ShapedElementSelect]]
from AP242 BO Model
*)
(*
  TYPE ShapedElementSelect = SELECT
    (ShapeElement,
     PartShape);
  END_TYPE;

  TYPE PartInformationSelect = SELECT
    (PartView);
  END_TYPE;
*)
(*
[[ShapeModelSelect]]
From ARM, but postfixed "select".
*)
  TYPE ShapeModelSelect = SELECT
    (ExternalGeometricModel);
  END_TYPE;

(*
[[GeometricBoundingCurveSelect]]
BO specific. Represents the valid types of curves for ARM
Boundary_curve_representation.bounds .
Mapping:
To the three curve types that go into geometric_set.elements .
*)
  TYPE GeometricBoundingCurveSelect = SELECT
    (ExternalCompositeCurveOnSurface,
     ExternalPcurve,
     ExternalSurfaceCurve);
  END_TYPE;

(*
[[PlyLaminateShapeSelect]]
From ARM, but _select added to name.
*)
  TYPE PlyLaminateShapeSelect = SELECT
    (ExternalAdvancedBrepShapeRepresentation,
     ExternalCsgShapeRepresentation,
     ExternalCurveSweptSolidShapeRepresentation,
     ExternalElementaryBrepShapeRepresentation,
     ExternalFacetedBrepShapeRepresentation,
     CompositeSheetRepresentation,
     ThreeDGeometrySet);
  END_TYPE;

  TYPE AngleSelect = SELECT
    (ExternalPointPath,
     ExternalCurve,
     Direction,
     CoordinateSystem);
  END_TYPE;

(*
[[CoreShapeSelect]]
From ARM, but _select added to name.
*)
  TYPE CoreShapeSelect = SELECT
    (ExternalFacetedBrepShapeRepresentation,
     ExternalAdvancedBrepShapeRepresentation,
     BeveledSheetRepresentation);
  END_TYPE;

(*
[[CompositeAssemblyShapeSelect]]
From ARM, but _select added to name.
*)
  TYPE CompositeAssemblyShapeSelect = SELECT
    (ExternalEdgeBasedWireframeShapeRepresentation,
     ExternalGeometricallyBoundedSurfaceShapeRepresentation,
     ExternalGeometricallyBoundedWireframeShapeRepresentation,
     ExternalManifoldSurfaceShapeRepresentation,
     ExternalShellBasedWireframeShapeRepresentation,
     ExternalAdvancedBrepShapeRepresentation,
     ExternalFacetedBrepShapeRepresentation,
     ThreeDGeometrySet);
  END_TYPE;

(*
[[ThicknessLaminateTableComponentSelect]]
From ARM, but _select added to name.
*)
  TYPE ThicknessLaminateTableComponentSelect = SELECT
    (ProcessedCore,
     FilamentLaminate,
     Ply);
  END_TYPE;

(*
[[BoundaryClassZoneSelect]]
From ARM, but _select added to name.
*)
  TYPE BoundaryClassZoneSelect = SELECT
    (GeometricBoundingCurveSelect,
     ExternalLoop);
  END_TYPE;

  TYPE PointSelect = SELECT
    (ExternalPointOnCurve,
     ExternalDegeneratePcurve,
     ExternalPointOnSurface,
     CartesianPoint);
  END_TYPE;

(*
[[OrientedSurfaceSelect]]
BO model specific selet type to simplify subtyping into AIM surface.
*)
  TYPE OrientedSurfaceSelect = SELECT
    (ExternalOrientedSurface,
     ExternalSurface);
  END_TYPE;

(*
[[ShapeableItemSelect]]
from ARM with postfix Select in addition.
*)
  TYPE ShapeableItemSelect = SELECT
    (PartView);
  END_TYPE;

(*
[[PartVersionOrViewSelect]]
Source: AP242 BOM v2.nnn
*)
(*
  TYPE PartVersionOrViewSelect = SELECT
    (PartVersion,
     PartView);
  END_TYPE;
*)
(*
[[LaminateTable]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.8

Mapping to AIM: laminate_table
*)
  ENTITY LaminateTable
    SUPERTYPE OF (ONEOF(ZoneStructuralMakeup, PlyLaminateTable, CompositeAssemblyTable))
    SUBTYPE OF(PartView);
      basis            : ReinforcementOrientationBasis;
      resultingSurface : OrientedSurfaceSelect;
      baseSurface      : SurfaceWithDirection;
    WHERE
      WR1 : (* Attribute view_type shall be set to "analysis" (or something similar). *) TRUE;
  END_ENTITY;

(*
[[PartView]]
Source: AP209e2 ARM, ISO/TS 10303-1022:2010 subclause 4.2.2

Mapping to AIM: product_definition_formation

BO changes:
1) AIM attribute of_product is turned around in the BOM.

Note:
Harmonized with AP242 BOM v1.1
*)
(*
  ENTITY PartView;
      id                 : OPTIONAL IdentifierSelect;
      description        : OPTIONAL DescriptorSelect;
      classifiedAs       : OPTIONAL SET [1:?] OF ClassificationSelect;
      sameAs             : OPTIONAL SET [1:?] OF ProxySelect;
      initialContext     : ViewContext;
      additionalContexts : OPTIONAL SET [1:?] OF ViewContext;
    INVERSE
      viewOf             : PartVersion FOR views;
  END_ENTITY;
*)
(*
[[ConstituentPart]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.4

Is typically a design view, but may change into an analysis view later.

Mapping to AIM: product_definition

BO change:
1) 
*)
  ENTITY ConstituentPart
    SUBTYPE OF(PartView);
      weight : OPTIONAL NumericalValue;
    WHERE
      WR1 : (* If the attribute weight is given a value, this shall be the value of the physical quantity mass. *)
            (* ((NOT(EXISTS(SELF.weight))) OR ((EXISTS(SELF.weight)) AND (SELF.weight.unit_component='mass'))) *) TRUE;
  END_ENTITY;

(*
[[CompositeAssembly]]
From ARM
*)
  ENTITY CompositeAssembly
    SUBTYPE OF(ConstituentPart);
      layupPart : CompositeAssemblyTable;
      shape     : OPTIONAL CompositeAssemblyShapeSelect;
  END_ENTITY;

(*
[[CompositeAssemblyTable]]
From ARM
*)
  ENTITY CompositeAssemblyTable
    SUBTYPE OF(LaminateTable);
      sequenceGroups : LIST [2:?] OF CompositeAssemblySequenceDefinition;
  END_ENTITY;

(*
[[CompositeAssemblySequenceDefinition]]
From ARM
*)
  ENTITY CompositeAssemblySequenceDefinition;
      componentsInSequence : OPTIONAL BAG [1:?] OF ComponentClassForAssemblySelect;
  END_ENTITY;

  ENTITY FilamentLaminate
    SUBTYPE OF(ConstituentPart);
      madeFrom          : StockMaterial;
      shapeCrossSection : OPTIONAL ShapeDescriptionAssociation;
    WHERE
      WR1 : (*The stock material shall be of type filament assembly. *)
            SELF.madeFrom.stockMaterialType = FILAMENT_ASSEMBLY;
  END_ENTITY;
(*
*Attribute definitions*
[[shapeCrossSection]]
ARM entity Filament_laminate_shape is made redundant because it is not used
form any other place in AP209e2. This attribute name shapeCrossSection is,
therefore, a combination of Filament_laminate.shape and
Filament_laminate_shape.cross_section .
*)

(*
[[StockMaterial]]
Source: AP209e2 ARM, ISO/TS 10303-1771:2010 subclause 4.3.8

Mapping to AIM: product_definition

BO change:
1) In the ARM this is a Product_view_definition. However, as Stock_material is
a product of its own, this distinction does not need to be exposed in the BO
model. Attributes from product and product_version are, thus, aggregated into
this entity. Product_definition.frame_of_reference can be generated from default
values in the API.
*)
  ENTITY StockMaterial;
      id                 : IdentifierSelect;
      name               : DescriptorSelect;
      description        : OPTIONAL DescriptorSelect;
      versionId          : OPTIONAL IdentifierSelect;
      propertyValues     : SET [1:?] OF MaterialPropertyValue;
      referenceDirection : OPTIONAL MaterialDirection;
      stockMaterialType  : StockCategoryEnum;
  END_ENTITY;
(*
*Attribute definitions*
[[referenceDirection]]
See ARM, also for mapping to AIM.

[[stockMaterialType]]
Added to this business object to simplify the model; replaces ARM subtypes.

Mapping to AIM: see individual enumeration items.
*)
(*
  ENTITY MaterialPropertyValue
    SUBTYPE OF(PropertyValue);
      environmentCondition          : DataEnvironment;
      SELF\PropertyValue.definition : MaterialPropertyDefinition;
  END_ENTITY;

  ENTITY PropertyValue
    SUPERTYPE OF (ONEOF(ValueWithUnit, StringValue, ValueSet, ValueList) ANDOR MaterialPropertyValue);
      definition          : PropertyDefinitionSelect;
      determinationMethod : OPTIONAL ClassificationSelect;
      classifiedAs        : OPTIONAL SET [1:?] OF ClassificationSelect;
      name                : OPTIONAL DescriptorSelect;
      qualifications      : OPTIONAL SET [1:?] OF MeasureQualification;
  END_ENTITY;

  ENTITY ValueWithUnit
    SUBTYPE OF(PropertyValue);
      unit              : UnitSelect;
      significantDigits : OPTIONAL INTEGER;
  END_ENTITY;

  ENTITY NumericalValue
    SUBTYPE OF(ValueWithUnit);
      valueComponent : REAL;
      valueContext   : OPTIONAL NumericalContext;
  END_ENTITY;

  ENTITY NumericalContext;
      classifiedAs      : OPTIONAL SET [1:?] OF ClassificationSelect;
      description       : OPTIONAL DescriptorSelect;
      accuracy          : REAL;
      significantDigits : OPTIONAL INTEGER;
  END_ENTITY;

  ENTITY ValueRange
    SUBTYPE OF(ValueWithUnit);
      lowerLimit : REAL;
      upperLimit : REAL;
  END_ENTITY;

  ENTITY ValueWithTolerances
    SUBTYPE OF(ValueWithUnit);
      tolerancedValue : REAL;
      lowerLimit      : REAL;
      upperLimit      : REAL;
  END_ENTITY;

  ENTITY StringValue
    SUBTYPE OF(PropertyValue);
      valueComponent : MultiLingualStringSelect;
  END_ENTITY;

  ENTITY ValueSet
    SUBTYPE OF(PropertyValue);
      values : SET [1:?] OF PropertyValue;
  END_ENTITY;

  ENTITY ValueList
    SUBTYPE OF(PropertyValue);
      values : LIST [1:?] OF PropertyValue;
  END_ENTITY;

  ENTITY MaterialPropertyDefinition;
      name : DescriptorSelect;
  END_ENTITY;

  ENTITY MeasureQualification;
      description  : OPTIONAL DescriptorSelect;
      classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
      qualifiers   : SET [1:?] OF ValueQualifierSelect;
  END_ENTITY;

  ENTITY DataEnvironment;
      characterization : OPTIONAL SET [1:?] OF PropertyValue;
      description      : OPTIONAL DescriptorSelect;
      name             : DescriptorSelect;
  END_ENTITY;
*)
(*
[[MaterialDirection]]
Source: AP209e2 ARM, ISO/TS 10303-1771:2010 subclause 4.3.6

Mapping to AIM: material_property
The AIM material_property_representation that is involved in this mapping is
one of the instances of material_property_representation that attribute
Stock_material.property_values maps to. For simplicity: take the
material_property_representation.dependent_environment for property_values[1].
*)
  ENTITY MaterialDirection;
      materialOrientation : Direction;
  END_ENTITY;
(*
  ENTITY Direction
    SUBTYPE OF(DetailedGeometricModelElement);
      directionRatios : LIST [2:3] OF LengthMeasure;
      name            : OPTIONAL DescriptorSelect;
  END_ENTITY;
*)
(*
*Attribute definitions*
[[name]]
see BugZilla 4480; is STRING in AP242/DIS BO Model EXPRESS v1.
*)
(*
  ENTITY DetailedGeometricModelElement
    SUPERTYPE OF (ONEOF(Direction, CoordinateSystem, Point, Transformation, ExternalPointOnSurface, ExternalPointOnCurve));
  END_ENTITY;

  ENTITY CoordinateSystem
    SUBTYPE OF(DetailedGeometricModelElement);
      id             : OPTIONAL IdentifierSelect;
      description    : OPTIONAL DescriptorSelect;
      dimensionality : INTEGER;
      origin         : Point;
      axis           : OPTIONAL Direction;
      refDirection   : OPTIONAL Direction;
      coordinateType : ClassificationSelect;
  END_ENTITY;

  ENTITY Point
    SUBTYPE OF(DetailedGeometricModelElement);
  END_ENTITY;

  ENTITY CartesianPoint
    SUBTYPE OF(Point);
      coordinates : LIST [1:3] OF LengthMeasure;
  END_ENTITY;

  ENTITY Transformation
    SUPERTYPE OF (ONEOF(Transformation2d, Transformation3d))
    SUBTYPE OF(DetailedGeometricModelElement);
      name : OPTIONAL DescriptorSelect;
  END_ENTITY;
*)
(*
*Attribute definitions*
[[name]]
see BugZilla 4480; is STRING in AP242/DIS BO Model EXPRESS v1.
*)
(*
  ENTITY Transformation2d
    SUBTYPE OF(Transformation);
  END_ENTITY;
*)
(*
  ENTITY Transformation3d
    SUBTYPE OF(Transformation);
  END_ENTITY;
*)
(*
[[ExternalPointOnSurface]]
ISO 10303-42
*)
  ENTITY ExternalPointOnSurface
    SUBTYPE OF(DetailedGeometricModelElement, ExternallyDefinedRepresentationItem);
  END_ENTITY;

(*
[[ExternalPointOnCurve]]
ISO 10303-42
*)
  ENTITY ExternalPointOnCurve
    SUBTYPE OF(DetailedGeometricModelElement, ExternallyDefinedRepresentationItem);
      supportingCurve : ExternalCurve;
  END_ENTITY;

  ENTITY ExternalCurve
    SUBTYPE OF(ExternallyDefinedRepresentationItem);
  END_ENTITY;

(*
[[ShapeDescriptionAssociation]]
from ARM Space_description_association, ISO 10303-1032:2010
*)
(*
  ENTITY ShapeDescriptionAssociation;
      isDefiningShapeFor : ShapeInformationSelect;
      definingGeometry   : ShapeModelSelect;
      role               : OPTIONAL ClassificationSelect;
      description        : OPTIONAL DescriptorSelect;
  END_ENTITY;
*)
(*
*Attribute definitions*
[[isDefiningShapeFor]]
Name was represented_characteristic.

[[definingGeometry]]
Name was representation.
*)

(*
[[ShapeElement]]
From ARM, but an AP203 concept.
*)
(*
  ENTITY ShapeElement;
      id              : OPTIONAL IdentifierSelect;
      name            : OPTIONAL DescriptorSelect;
      description     : OPTIONAL DescriptorSelect;
    INVERSE
      containingShape : PartShape FOR elements;
    WHERE
      WR1 : (* If SELF is exact instance of Shape_element, then element_name shall be provided. *)
            EXISTS(name) OR (TYPEOF(SELF\ShapeElement) <> TYPEOF(SELF));
  END_ENTITY;
*)
(*
*Attribute definitions*
[[name]]
Renamed from element_name to name only.
*)

(*
  ENTITY CoatingLayer
    SUBTYPE OF(ShapeElement);
    INVERSE
      thickness : SET [0:1] OF ThicknessSizeDimension FOR appliedTo;
  END_ENTITY;
*)
(*
[[ThicknessSizeDimension]]
From the ARM, but inheritance collapsed.
*)
  ENTITY ThicknessSizeDimension;
      appliedTo : ShapeElement;
      thickness   : NumericalValue;
      id          : IdentifierSelect;
  END_ENTITY;
(*
*Attribute definitions*
[[thickness]]
ARM: Geometric_dimension.dimension_value
*)
(*
  ENTITY PartShape;
      id              : OPTIONAL IdentifierSelect;
      description     : OPTIONAL DescriptorSelect;
      describedObject : PartInformationSelect;
      elements        : OPTIONAL SET [1:?] OF ShapeElement;
  END_ENTITY;
*)
(*
[[ShapeElementRelationship]]
from the ARM
*)
(*
  ENTITY ShapeElementRelationship;
      relationType : OPTIONAL ClassificationSelect;
      description  : OPTIONAL DescriptorSelect;
      relating     : ShapeElement;
      related      : ShapeElement;
    WHERE
      WR1 : (* If SELF is exact instance of Shape_element_relationship, then relation_type shall be provided. *)
            EXISTS(relationType) OR (TYPEOF(SELF\ShapeElementRelationship) <> TYPEOF(SELF));
  END_ENTITY;
*)
(*
  ENTITY ExternalGeometricModel
    SUPERTYPE OF (ONEOF(ExternalEdgeBasedWireframeShapeRepresentation, ExternalGeometricallyBoundedSurfaceShapeRepresentation, ExternalGeometricallyBoundedWireframeShapeRepresentation, ExternalManifoldSurfaceShapeRepresentation, ExternalShellBasedWireframeShapeRepresentation, ExternalAdvancedBrepShapeRepresentation, CompositeSheetRepresentation, ExternalCsgShapeRepresentation, ExternalCurveSweptSolidShapeRepresentation, ExternalElementaryBrepShapeRepresentation, ExternalFacetedBrepShapeRepresentation, ThreeDGeometrySet))
    SUBTYPE OF(GeometricModel);
      isDefinedAs     : DigitalFile;
      accuracyType    : OPTIONAL STRING;
      accuracyValue   : OPTIONAL REAL;
      parameterValues : OPTIONAL SET [1:?] OF PropertyValue;
  END_ENTITY;
*)
(*
[[GeometricModel]]
From ARM. Moved attribute to Detailed_geometric_model_element down to those BOs
that need it. The other subtypes are all AIM and have no need for it.
*)
(*
  ENTITY GeometricModel;
      id            : IdentifierSelect;
      versionId     : OPTIONAL IdentifierSelect;
      name          : OPTIONAL DescriptorSelect;
      description   : OPTIONAL DescriptorSelect;
      modelExtent   : OPTIONAL LengthMeasure;
      definedIn     : GeometricCoordinateSpace;
      modelElements : SET [1:?] OF DetailedGeometricModelElement;
      geometryType  : OPTIONAL SET [1:?] OF ClassificationSelect;
      classifiedAs  : OPTIONAL SET [1:?] OF ClassificationSelect;
  END_ENTITY;
*)
(*
[[ExternalEdgeBasedWireframeShapeRepresentation]]
From AIM
*)
  ENTITY ExternalEdgeBasedWireframeShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
  END_ENTITY;

(*
[[ExternalGeometricallyBoundedSurfaceShapeRepresentation]]
From AIM
*)
  ENTITY ExternalGeometricallyBoundedSurfaceShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
  END_ENTITY;

(*
[[ExternalGeometricallyBoundedWireframeShapeRepresentation]]
From AIM
*)
  ENTITY ExternalGeometricallyBoundedWireframeShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
  END_ENTITY;

(*
[[ExternalManifoldSurfaceShapeRepresentation]]
From AIM
*)
  ENTITY ExternalManifoldSurfaceShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
  END_ENTITY;

(*
[[ExternalShellBasedWireframeShapeRepresentation]]
From AIM
*)
  ENTITY ExternalShellBasedWireframeShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
  END_ENTITY;

  ENTITY ExternalAdvancedBrepShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
    WHERE
      WR1 : (* SIZEOF(QUERY ( msb <* QUERY ( it <* SELF.items |
            ('AP209_BOM.MANIFOLD_SOLID_BREP' IN TYPEOF(it)) ) |
            ( NOT (SIZEOF(QUERY ( csh <* collect_shells(msb) |
            (NOT (SIZEOF(QUERY ( fcs <* csh\
            connected_face_set.connected_faces | (NOT (
            'AP209_BOM.ADVANCED_FACE' IN TYPEOF(fcs))) )) = 0)) ))
            = 0)) )) = 0 *) TRUE;
  END_ENTITY;

(*
[[ExternalCsgShapeRepresentation]]
From AIM; called Csg_model in ARM.
*)
  ENTITY ExternalCsgShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
  END_ENTITY;

(*
[[ExternalCurveSweptSolidShapeRepresentation]]
From AIM; called Curve_swept_solid in ARM.
*)
  ENTITY ExternalCurveSweptSolidShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
  END_ENTITY;

(*
[[ExternalElementaryBrepShapeRepresentation]]
From AIM
*)
  ENTITY ExternalElementaryBrepShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
  END_ENTITY;

(*
[[ExternalFacetedBrepShapeRepresentation]]
From AIM
*)
  ENTITY ExternalFacetedBrepShapeRepresentation
    SUBTYPE OF(ExternalGeometricModel);
  END_ENTITY;

(*
[[CompositeSheetRepresentation]]
From ARM, but simplified so that it is identical to the AIM. AIM can, however,
not be used as this then would have BOs as subtypes, which confuses the C++ API
generator.

Mapping:
composite_sheet_representation
*)
  ENTITY CompositeSheetRepresentation
    SUPERTYPE OF (ONEOF(FaceBasedSheetRepresentation, GeometricSheetRepresentation))
    SUBTYPE OF(ConstituentShapeRepresentation, ExternalGeometricModel);
  END_ENTITY;

(*
[[ConstituentShapeRepresentation]]
From ARM.
Mapping:
shape_representation plus a global rule to reflect the ONEOF in the ARM.

*)
  ENTITY ConstituentShapeRepresentation
    ABSTRACT
    SUPERTYPE OF (ONEOF(BeveledSheetRepresentation, CompositeSheetRepresentation, ThreeDGeometrySet));
      id          : OPTIONAL IdentifierSelect;
      name        : OPTIONAL DescriptorSelect;
      description : OPTIONAL DescriptorSelect;
      basis       : GeometricCoordinateSpace;
      appliedTo   : SET [1:?] OF DetailedGeometricModelElement;
  END_ENTITY;

(*
[[BeveledSheetRepresentation]]
From ARM.
*)
  ENTITY BeveledSheetRepresentation
    SUBTYPE OF(ConstituentShapeRepresentation);
      bevelAngle            : NumericalValue;
      boundarySurface       : CompositeSheetRepresentation;
      verticalProfileHeight : NumericalValue;
    WHERE
      WR1 : (* Ensure that the units for angle and length are correct. *)
            TRUE;
  END_ENTITY;

(*
[[ThreeDGeometrySet]]
From ARM.

Mapping:
geometrically_bounded_surface_shape_representation (10303-507).
See page 48 of AP209 recommended practices.
*)
  ENTITY ThreeDGeometrySet
    SUBTYPE OF(ConstituentShapeRepresentation, ExternalGeometricModel);
      basisRole        : ClassificationSelect;
      basisSurface     : ExternalSurface;
      definingBoundary : SET [1:?] OF GeometricBoundingCurveSelect;
  END_ENTITY;

  ENTITY ExternalSurface
    SUBTYPE OF(ExternallyDefinedRepresentationItem);
  END_ENTITY;

(*
[[ExternalCompositeCurveOnSurface]]
ISO 10303-42
*)
  ENTITY ExternalCompositeCurveOnSurface
    SUBTYPE OF(ExternallyDefinedRepresentationItem);
  END_ENTITY;

(*
[[ExternalPcurve]]
ISO 10303-42
*)
  ENTITY ExternalPcurve
    SUBTYPE OF(ExternallyDefinedRepresentationItem);
  END_ENTITY;

(*
[[ExternalSurfaceCurve]]
ISO 10303-42
*)
  ENTITY ExternalSurfaceCurve
    SUBTYPE OF(ExternallyDefinedRepresentationItem);
  END_ENTITY;
(*
  ENTITY GeometricCoordinateSpace;
      id             : IdentifierSelect;
      coordinateType : ClassificationSelect;
      units          : OPTIONAL SET [1:?] OF Unit;
      dimensionality : INTEGER;
      accuracies     : OPTIONAL SET [1:?] OF MeasureQualification;
    WHERE
      WR1 : (*Add text*)
            dimensionality > 0;
  END_ENTITY;
*)
(*
  ENTITY Unit;
      quantity : OPTIONAL ClassificationSelect;
      prefix   : OPTIONAL ClassificationSelect;
      name     : ClassificationSelect;
      kind     : OPTIONAL ClassificationSelect;
  END_ENTITY;
*)
(*
[[FaceBasedSheetRepresentation]]
From ARM.
Mapping:
[manifold_surface_shape_representation][composite_sheet_representation]
(10303-509, 10303-1767)
*)
  ENTITY FaceBasedSheetRepresentation
    SUBTYPE OF(CompositeSheetRepresentation);
      faceSurface : ExternalSurface;
      innerBounds : OPTIONAL SET [1:?] OF ExternalLoop;
      outerBound  : ExternalLoop;
  END_ENTITY;

  ENTITY ExternalLoop
    SUBTYPE OF(ExternallyDefinedRepresentationItem);
  END_ENTITY;

(*
[[GeometricSheetRepresentation]]
From ARM.
Mapping:
[geometrically_bounded_surface_shape_representation]
[composite_sheet_representation] (10303-507, 10303-1767)
*)
  ENTITY GeometricSheetRepresentation
    SUBTYPE OF(CompositeSheetRepresentation);
      basisSurface : ExternalSurface;
      cutouts      : OPTIONAL SET [1:?] OF BoundaryCurveRepresentation;
      outerEdge    : BoundaryCurveRepresentation;
  END_ENTITY;

(*
[[BoundaryCurveRepresentation]]
From ARM.
Mapping:
geometric_set (10303-42); geometric_set.elements are constrained by the type of
attribute bounds.
*)
  ENTITY BoundaryCurveRepresentation;
      name   : OPTIONAL DescriptorSelect;
      bounds : SET [1:?] OF GeometricBoundingCurveSelect;
  END_ENTITY;

(*
  ENTITY DigitalFile
    SUBTYPE OF(File);
    INVERSE
      associatedModelSpace : ExternalGeometricModel FOR isDefinedAs;
  END_ENTITY;
*)
(*
  ENTITY File
    ABSTRACT
    SUPERTYPE OF (ONEOF(DigitalFile, Hardcopy));
      id           : OPTIONAL IdentifierSelect;
      versionId    : OPTIONAL IdentifierSelect;
      locations    : OPTIONAL SET [1:?] OF ExternalItem;
      description  : OPTIONAL DescriptorSelect;
      fileType     : OPTIONAL ClassificationSelect;
      classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
      fileFormat   : OPTIONAL FormatProperty;
      fileContent  : OPTIONAL ContentProperty;
      fileCreation : OPTIONAL CreationProperty;
      fileSize     : OPTIONAL SizeProperty;
  END_ENTITY;

  ENTITY Hardcopy
    SUBTYPE OF(File);
  END_ENTITY;
*)
(*
  ENTITY ExternalItem;
      description : OPTIONAL DescriptorSelect;
      externalId  : SingleIdentifierSelect;
      source      : OPTIONAL ExternalSourceSelect;
    UNIQUE
      UR1 : externalId, source;
  END_ENTITY;
*)
(*
  ENTITY FormatProperty;
      characterCode : OPTIONAL STRING;
      dataFormat    : OPTIONAL STRING;
      description   : OPTIONAL DescriptorSelect;
      id            : OPTIONAL IdentifierSelect;
      sizeFormat    : OPTIONAL RectangularSize;
  END_ENTITY;
*)
(*
  ENTITY RectangularSize;
      width   : OPTIONAL ValueWithUnit;
      height  : OPTIONAL ValueWithUnit;
      density : OPTIONAL ValueWithUnit;
  END_ENTITY;
*)
(*
  ENTITY ContentProperty;
      description    : OPTIONAL DescriptorSelect;
      detailLevel    : OPTIONAL DescriptorSelect;
      geometryTypes  : OPTIONAL SET [1:?] OF ClassificationSelect;
      languages      : OPTIONAL SET [1:?] OF Language;
      realWorldScale : OPTIONAL NumericalValue;
  END_ENTITY;
*)
(*
  ENTITY CreationProperty;
      creatingInterface : OPTIONAL STRING;
      creatingSystem    : STRING;
      description       : OPTIONAL DescriptorSelect;
      operatingSystem   : OPTIONAL STRING;
  END_ENTITY;
*)
(*
  ENTITY SizeProperty;
      description : OPTIONAL DescriptorSelect;
      fileSize    : OPTIONAL ValueWithUnit;
      pageCount   : OPTIONAL ValueWithUnit;
  END_ENTITY;
*)
(*
[[PlyLaminate]]
From ARM
*)
  ENTITY PlyLaminate
    SUBTYPE OF(ConstituentPart);
      plyTable : PlyLaminateTable;
      shape    : OPTIONAL PlyLaminateShapeSelect;
  END_ENTITY;

(*
[[PlyLaminateTable]]
From ARM.
*)
  ENTITY PlyLaminateTable
    SUBTYPE OF(LaminateTable);
      sequence : LIST [2:?] OF PlyLaminateSequenceDefinition;
  END_ENTITY;

(*
[[PlyLaminateSequenceDefinition]]
From ARM
*)
  ENTITY PlyLaminateSequenceDefinition
    SUBTYPE OF(ConstituentPart);
      pliesInSequence : SET [1:?] OF Ply;
  END_ENTITY;

(*
[[Ply]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.12

Mapping to AIM: product_definition
*)
  ENTITY Ply
    SUBTYPE OF(ConstituentPart);
      constituents        : OPTIONAL LIST [1:?] OF PlyPiece;
      plyThickness        : NumericalValue;
      materialOrientation : DirectionOfFiberOrientationWithinAPly;
      materialType        : StockMaterial;
      shape               : OPTIONAL PlyShape;
    WHERE
      WR1 : SELF.plyThickness.valueComponent >= 0.0;
      WR2 : (* 'AP242_COMPOSITE_BOM.LENGTH_UNIT' IN TYPEOF(SELF\Value_with_unit.Unit);*) TRUE;
  END_ENTITY;
(*
*Attribute definitions*
[[constituents]]
See ARM, also for mapping to AIM.

Mapping to AIM:
id = sequence as defined by the LIST-type; use integers as text, for example
'1', '2', ... .
name = 'sequence'
description: not set

[[shape]]
See ARM, also for mapping to AIM.
*)

(*
[[PlyPiece]]
From ARM
*)
  ENTITY PlyPiece
    SUBTYPE OF(ConstituentPart);
      shape        : OPTIONAL PlyShape;
      warp_surface : LOGICAL;
  END_ENTITY;
(*
*Attribute definitions*
[[shape]]
Is in ARM of select type ply_piece_shape, which has only a single select item.
*)

(*
[[PlyShape]]
From ARM
*)
  ENTITY PlyShape;
      definingModel : PlyLaminateShapeSelect;
      basis         : OPTIONAL PlyShape;
  END_ENTITY;

(*
[[DirectionOfFiberOrientationWithinAPly]]
Source: AP209e2 ARM, ISO/TS 10303-1772:2008 subclause 4.3.1

Mapping to AIM: representation

BO change:
1) Attribute name change (context).
*)
  ENTITY DirectionOfFiberOrientationWithinAPly;
      id              : OPTIONAL IdentifierSelect;
      name            : OPTIONAL DescriptorSelect;
      description     : OPTIONAL DescriptorSelect;
      basis           : GeometricCoordinateSpace;
      angleReferences : SET [1:?] OF AngleSelect;
    INVERSE
      orientations    : PlyOrientationAngle FOR fiberDirection;
  END_ENTITY;
(*
*Attribute definitions*
[[name]]
See ARM, also for mapping to AIM.

[[angleReferences]]
BO Change:
1) Renamed from items in ARM.

Mapping to AIM: see ARM.

[[orientations]]
INVERSE may be removed in future versions of this BO model.
*)

  ENTITY ExternalPointPath
    SUBTYPE OF(ExternallyDefinedRepresentationItem);
  END_ENTITY;

(*
[[PlyOrientationAngle]]
Source: AP209e2 ARM, ISO/TS 10303-1772:2008 subclause 4.3.4

Mapping to AIM: representation_relationship_with_transformation

BO change:
1) Renamed from ARM Analysis_discipline_definition.
2) Made abstract.
*)
  ENTITY PlyOrientationAngle
    ABSTRACT
    SUPERTYPE OF (ONEOF(DrapedOrientationAngle, LaidOrientationAngle));
      relationType           : OPTIONAL ClassificationSelect;
      description            : OPTIONAL DescriptorSelect;
      fiberDirection         : DirectionOfFiberOrientationWithinAPly;
      reinforcementDirection : ReinforcementOrientationBasis;
      angleReference         : AngleSelect;
  END_ENTITY;
(*
*Attribute definitions*
[[fiberDirection]]
See ARM, also for mapping to AIM.

[[reinforcementDirection]]
See ARM, also for mapping to AIM.

[[angleReference]]
See ARM, also for mapping to AIM.
*)

(*
[[DrapedOrientationAngle]]
Source: AP209e2 ARM, ISO/TS 10303-1772:2008 subclause 4.3.2

Mapping to AIM: representation_relationship_with_transformation

*)
  ENTITY DrapedOrientationAngle
    SUBTYPE OF(PlyOrientationAngle);
  END_ENTITY;

(*
[[LaidOrientationAngle]]
Source: AP209e2 ARM, ISO/TS 10303-1772:2008 subclause 4.3.3

Mapping to AIM: representation_relationship_with_transformation

*)
  ENTITY LaidOrientationAngle
    SUBTYPE OF(PlyOrientationAngle);
  END_ENTITY;

(*
[[ReinforcementOrientationBasis]]
Source: AP209e2 ARM, ISO/TS 10303-1772:2008 subclause 4.3.7

Mapping to AIM: representation

BO changes:
1) Attribute name changes.
*)
  ENTITY ReinforcementOrientationBasis;
      id          : OPTIONAL IdentifierSelect;
      name        : OPTIONAL DescriptorSelect;
      description : OPTIONAL DescriptorSelect;
      basis       : GeometricCoordinateSpace;
      placement   : CoordinateSystem;
    INVERSE
      tables      : SET [1:?] OF LaminateTable FOR basis;
  END_ENTITY;

(*
[[ProcessedCore]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.18

Mapping to AIM: product_definition

*)
  ENTITY ProcessedCore
    SUBTYPE OF(ConstituentPart);
      addedMaterial         : OPTIONAL LIST [1:?] OF Ply;
      cellDirection         : DirectionOfFiberOrientationWithinAPly;
      madeFromStock         : StockMaterial;
      madeFromProcessedCore : OPTIONAL SET [1:?] OF ProcessedCore;
      shape                 : OPTIONAL CoreShapeSelect;
    WHERE
      WR1 : (* The Stock_material.stock_material_type in attribute made_from_stock shall be a .STOCK_CORE. .*) TRUE;
  END_ENTITY;
(*
*Attribute definitions*
[[madeFromStock]]
See ARM, also for mapping to AIM.

BO change:
1) Attribute type changed to supertype of Stock_core - for simplification.
Should not impact the mapping.

[[madeFromProcessedCore]]
See ARM, also for mapping to AIM.
*)

(*
  ENTITY ViewContext;
      applicationDomain : ApplicationDomainSelect;
      description       : OPTIONAL DescriptorSelect;
      lifeCycleStage    : LifeCycleStageSelect;
    UNIQUE
      UR1 : applicationDomain, lifeCycleStage;
  END_ENTITY;
*)
(*
[[PartVersion]]
Source: AP209e2 ARM, ISO/TS 10303-1022:2010 subclause 4.2.2

Mapping to AIM: product_definition_formation

BO changes:
1) AIM attribute of_product is turned around in the BOM.

Note:
Harmonized with AP242 BOM v1.1
*)
(*
  ENTITY PartVersion;
      versionId    : IdentifierSelect;
      description  : OPTIONAL DescriptorSelect;
      classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
      sameAs       : OPTIONAL SET [1:?] OF ProxySelect;
      views        : OPTIONAL SET [1:?] OF PartView;
    INVERSE
      versionOf    : Part FOR versions;
  END_ENTITY;
*)
(*
*Attribute definitions*
[[versionOf]]
Source: product_definition_formation.of_product

BO change:
1) renamed from product_definition_formation.of_product
*)

(*
[[Part]]
Source: AP209e2 ARM, ISO/TS 10303-1022:2010 subclause 4.2.1

Mapping to AIM: product

BO changes:
1) Attribute categories is not in the ARM, but in the AIM through
product_related_product_category.
2) Attribtue additional_ids added; maps to applied_identification_asignment.

Note:
Harmonized with AP242 BOM v1.0
*)

(*
  ENTITY Part;
      id           : IdentifierSelect;
      name         : DescriptorSelect;
      description  : OPTIONAL DescriptorSelect;
      partTypes    : SET [1:?] OF ClassificationSelect;
      classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
      sameAs       : OPTIONAL SET [1:?] OF ProxySelect;
      versions     : SET [1:?] OF PartVersion;
  END_ENTITY;
*)
(*
*Attribute definitions*
[[versions]]
Source: is INVERSE of AIM attribute 	product_definition_formation.of_product

Note:
Harmonized with AP242.
*)

(*
[[ZoneStructuralMakeup]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.22

Mapping to AIM: zone_structural_makeup
*)
  ENTITY ZoneStructuralMakeup
    ABSTRACT
    SUBTYPE OF(LaminateTable);
      boundary : ZoneStructuralMakeupShapeRepresentation;
    WHERE
      WR1 : (* The intantiation of a combination of thickness_.. and percentage_... is not valid. *)
            TRUE;
  END_ENTITY;

(*
[[SmearedMaterial]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.19

Mapping to AIM: smeared_material_definition
*)
  ENTITY SmearedMaterial
    SUBTYPE OF(ZoneStructuralMakeup);
      totalThickness : NumericalValue;
  END_ENTITY;

(*
[[ThicknessLaminateTable]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.21

Mapping to AIM: thickness_laminate_table
*)
  ENTITY ThicknessLaminateTable
    SUBTYPE OF(ZoneStructuralMakeup);
      tableComponents : LIST [2:?] OF ThicknessLaminateTableComponentSelect;
  END_ENTITY;
(*
*Attribute definitions*
[[tableComponents]]
See ARM, also for mapping to AIM.
*)

(*
[[PercentageLaminateTable]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.10

Mapping to AIM: percentage_laminate_table
*)
  ENTITY PercentageLaminateTable
    SUBTYPE OF(ZoneStructuralMakeup);
      tableComponents : SET [1:?] OF PercentagePly;
      totalThickness  : NumericalValue;
  END_ENTITY;
(*
*Attribute definitions*
[[tableComponents]]
See ARM, also for mapping to AIM.
*)

(*
[[PercentagePly]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.11

Mapping to AIM: percentage_laminate_definition
*)
  ENTITY PercentagePly;
      strengthOrientation : OPTIONAL PlyOrientationAngle;
      material            : StockMaterial;
      makeupAndProperties : OPTIONAL ZoneStructuralMakeup;
      volumePercent       : NumericalValue;
  END_ENTITY;
(*
*Attribute definitions*
[[material]]
See ARM, also for mapping to AIM.

[[makeupAndProperties]]
See ARM, also for mapping to AIM.
*)

(*
[[ZoneStructuralMakeupShapeRepresentation]]
From ARM.
*)
  ENTITY ZoneStructuralMakeupShapeRepresentation
    SUPERTYPE OF (ONEOF(EdgeZoneShape, PointZoneShape));
  END_ENTITY;

(*
[[EdgeZoneShape]]
From ARM.
*)
  ENTITY EdgeZoneShape
    SUBTYPE OF(ZoneStructuralMakeupShapeRepresentation);
      boundary : BoundaryClassZoneSelect;
  END_ENTITY;

(*
[[PointZoneShape]]
From ARM.
*)
  ENTITY PointZoneShape
    SUBTYPE OF(ZoneStructuralMakeupShapeRepresentation);
      location : PointSelect;
  END_ENTITY;

(*
[[ExternalDegeneratePcurve]]
ISO 10303-42
*)
  ENTITY ExternalDegeneratePcurve
    SUBTYPE OF(ExternallyDefinedRepresentationItem);
  END_ENTITY;

  ENTITY ExternalOrientedSurface
    SUBTYPE OF(ExternallyDefinedRepresentationItem);
  END_ENTITY;

(*
[[SurfaceWithDirection]]
Source: AP209e2 ARM, ISO/TS 10303-1770:2010 subclause 4.3.20

Mapping to AIM: shape_representation
*)
  ENTITY SurfaceWithDirection;
      definingSurface   : OrientedSurfaceSelect;
      materialDirection : Direction;
  END_ENTITY;
(*
*Attribute definitions*
[[definingSurface]]
See ARM, also for mapping to AIM.

BO change:
1) Attribute type changed from Surface.
*)

(*
  ENTITY Document;
      id            : IdentifierSelect;
      name          : DescriptorSelect;
      description   : OPTIONAL DescriptorSelect;
      versions      : SET [1:?] OF DocumentVersion;
      documentTypes : SET [1:?] OF ClassificationSelect;
      classifiedAs  : OPTIONAL SET [1:?] OF ClassificationSelect;
  END_ENTITY;
*)

(*
  ENTITY DocumentVersion;
      versionId   : IdentifierSelect;
      description : OPTIONAL DescriptorSelect;
      views       : OPTIONAL SET [1:?] OF DocumentDefinition;
    INVERSE
      versionOf   : Document FOR versions;
  END_ENTITY;
*)

(*
  ENTITY DocumentDefinition
    ABSTRACT
    SUPERTYPE OF (ONEOF(DigitalDocumentDefinition, PhysicalDocumentDefinition));
      id               : IdentifierSelect;
      name             : OPTIONAL DescriptorSelect;
      description      : OPTIONAL DescriptorSelect;
      documentContent  : OPTIONAL ContentProperty;
      documentCreation : OPTIONAL CreationProperty;
      documentFormat   : OPTIONAL SET OF FormatProperty;
      documentSize     : OPTIONAL SizeProperty;
    INVERSE
      viewOf           : DocumentVersion FOR views;
  END_ENTITY;
*)

(*
  ENTITY DigitalDocumentDefinition
    SUBTYPE OF(DocumentDefinition);
      files : OPTIONAL SET [1:?] OF DigitalFile;
  END_ENTITY;
*)

(*
  ENTITY PhysicalDocumentDefinition
    SUBTYPE OF(DocumentDefinition);
      components : OPTIONAL SET [1:?] OF Hardcopy;
  END_ENTITY;
*)
(*
[[ExternallyDefinedRepresentationItem]]
AM1779
*)
  ENTITY ExternallyDefinedRepresentationItem
    SUPERTYPE OF (ONEOF(ExternalCurve, ExternalDegeneratePcurve, ExternalLoop, ExternalOrientedSurface, ExternalPcurve, ExternalPointOnCurve, ExternalPointOnSurface, ExternalPointPath, ExternalSurfaceCurve, ExternalSurface, ExternalCompositeCurveOnSurface));
      item_id   : IdentifierSelect;
      name      : DescriptorSelect;
      source    : ExternalSource;
      definedIn : ExternalGeometricModel;
  END_ENTITY;
(*
*Attribute definitions*
[[item_id]]
from AIM externally_defined_item.item_id

[[name]]
from AIM representation_item.name

[[source]]
from AIM externally_defined_item.source

[[definedIn]]
inverse to the AIM representation.items
*)

  ENTITY ExternalSource;
      description    : OPTIONAL DescriptorSelect;
      additional_ids : OPTIONAL SET [1:?] OF IdentifierSelect;
      id             : IdentifierSelect;
  END_ENTITY;

  SUBTYPE_CONSTRAINT ZoneStructuralMakeupSubtypes FOR ZoneStructuralMakeup;
    ONEOF(SmearedMaterial, ThicknessLaminateTable, PercentageLaminateTable, SmearedMaterial AND ThicknessLaminateTable, SmearedMaterial AND PercentageLaminateTable);
  END_SUBTYPE_CONSTRAINT;


(*:GS
 ------------------------------------------------------------
  Geometric Shape
 ------------------------------------------------------------
*)

-- not harmonized with PLCS yet

ENTITY GeometricModel
  SUPERTYPE OF (ONEOF(ExternalGeometricModel));
  id : IdentifierSelect;
  versionId : OPTIONAL IdentifierSelect;
  name : OPTIONAL DescriptorSelect;
  description : OPTIONAL DescriptorSelect;
  modelExtent : OPTIONAL LengthMeasure;
  definedIn : GeometricCoordinateSpace;
  modelElements : SET[1:?] OF DetailedGeometricModelElement;
  geometryType : OPTIONAL SET [1:?] OF ClassSelect;
  classifiedAs : OPTIONAL SET [1:?] OF ClassificationSelect;
END_ENTITY;

ENTITY GeometricModelRelationship;
  description : OPTIONAL DescriptorSelect;
  classifiedAs : OPTIONAL SET[1:?] OF ClassificationSelect;
  relationType : ClassSelect;
  placement : OPTIONAL Transformation;
  related     : GeometricModel; 
  relating    : GeometricModel;
WHERE
 WR1: relating :<>: related;
END_ENTITY;


(*:PGC
 ------------------------------------------------------------
  3D Parametrics and Geometric Constraints Design
 ------------------------------------------------------------
*)

-- not harmonized with PLCS

ENTITY SurfaceCondition
  ABSTRACT;
  conditionType : ClassSelect;
END_ENTITY;

  ENTITY CoatingLayer
    SUBTYPE OF(ShapeElement);
    INVERSE
      thickness : SET [0:1] OF ThicknessSizeDimension FOR appliedTo;
  END_ENTITY;
  
(*
ENTITY CoatingLayer
  ABSTRACT
  SUBTYPE OF (ShapeElement);
END_ENTITY;
*)

(*:MF
 ------------------------------------------------------------
  Machining Feature
 ------------------------------------------------------------
*)

-- not part of DIS version of edition 1


(*:SDQ1
 ------------------------------------------------------------
  Shape Data Quality Criteria
 ------------------------------------------------------------
*)

-- not part of DIS version of edition 1


(*:SDQ2
 ------------------------------------------------------------
  Shape Data Quality Inspection
 ------------------------------------------------------------
*)

-- not part of DIS version of edition 1


(*:PD
 ------------------------------------------------------------
  Presentation and Draughting
 ------------------------------------------------------------
*)

ENTITY StyledModel
  ABSTRACT;
  id : IdentifierSelect;
  modelType : ClassSelect;
END_ENTITY;


(*:GDT
 ------------------------------------------------------------
  Geometric Dimensions and Tolerances
 ------------------------------------------------------------
*)

-- not part of DIS version of edition 1

END_SCHEMA;

