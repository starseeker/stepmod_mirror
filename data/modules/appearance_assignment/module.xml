<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: module.xml,v 1.58 2017/08/07 09:02:10 verodub Exp $ -->
<!-- Generated by mkmodule.js, Eurostep Limited, http://www.eurostep.com -->
<!-- 
     To view the module in IExplorer, open: sys/1_scope.xml
      --><!DOCTYPE module SYSTEM "../../../dtd/module.dtd">

<module name="appearance_assignment" name.french="Attribution d'apparence" 
	part="1001" 
	version="7" 
	wg.number="9743" 
	wg.number.arm="9744" 
	wg.number.mim="8251" 
	wg.number.supersedes="8249" 
	wg.number.arm.supersedes="8250" 
	wg.number.mim.supersedes="6861" 
	status="TS" 
	language="E"
	publication.year="2017-12" 
	publication.date="2017-12-15"
	published="y" 
	previous.revision.year="2010-07" 
	previous.revision.cancelled="NO" 
	revision.complete="YES" 
	rcs.date="$Date: 2017/08/07 09:02:10 $" 
	rcs.revision="$Revision: 1.58 $" development.folder="dvlp" 
	sc4.working_group="12" 
	xmlns:xlink="http://www.w3.org/1999/xlink" 
	checklist.convener="" 
	checklist.internal_review="9741" 
	checklist.project_leader="9742">

 <keywords>
    module, appearance assignment, styled element, visual attributes
 </keywords>

 <!-- Reference to contacts detailed in stepmod/data/basic/contacts.xml -->
 <contacts>
   <projlead ref="ap203ed2.projlead"/>
   <editor ref="ap203ed2.editor"/>
 </contacts>

  <!-- Change history -->
 <changes>
   <change version="2">
     <arm.changes>
       <arm.additions>
         <modified.object type="TYPE" name="appearance_context" />
         <modified.object type="TYPE" name="appearance_select" />
         <modified.object type="ENTITY" name="Mapping_based_styled_model" />
         <modified.object type="ENTITY" name="Over_riding_styled_item" />
         <modified.object type="ENTITY" name="Transformation_based_styled_model" />
       </arm.additions>
       <arm.modifications>
         <modified.object type="ENTITY" name="Context_dependent_appearance_assignment" />
         <modified.object type="ENTITY" name="Styled_model" />
       </arm.modifications>
       <arm.deletions>
         <modified.object type="ENTITY" name="Appearance" />
         <modified.object type="ENTITY" name="Appearance_context " />
         <modified.object type="ENTITY" name="Context_dependent_overriding_styled_element" />
       </arm.deletions>
     </arm.changes>
   </change>

   <change version="3">
     <mapping.changes>
       <mapping.change>Transformation_based_styled_model.replication_transformation (to Cartesian_transformation_2d);</mapping.change>
       <mapping.change>Transformation_based_styled_model.replication_transformation (to Cartesian_transformation_3d).</mapping.change>
     </mapping.changes>
     <mim.changes>
       <mim.modifications>
         <modified.object type="USE_FROM" name="presentation_appearance_schema" interfaced.items="style_context_select"/>
       </mim.modifications>
     </mim.changes>
   </change>

   <change version="4">
     <arm.changes>
       <arm.additions>
         <modified.object type="REFERENCE_FROM" name="Characterizable_object_arm" />
         <modified.object type="SUBTYPE_CONSTRAINT" name="aa_representation_item_subtypes" />
         <modified.object type="ENTITY" name="Context_dependent_over_riding_styled_element" />
         <modified.object type="ENTITY" name="Planar_box" />
         <modified.object type="ENTITY" name="Styled_model_replication" />
         <modified.object type="TYPE" name="context_dependent_appearance_assignment_set" />
         <modified.object type="TYPE" name="overriding_style_context" />
         <modified.object type="TYPE" name="presented_model_select" />
         <modified.object type="TYPE" name="styled_element_appearance" />
       </arm.additions>
       <arm.modifications>
         <modified.object type="TYPE" name="appearance_context" />
         <modified.object type="ENTITY" name="Styled_model" />
         <modified.object type="ENTITY" name="Styled_element" />
       </arm.modifications>
       <arm.deletions>
         <modified.object type="USE_FROM" name="Foundation_representation_arm" />
         <modified.object type="ENTITY" name="Mapping_based_styled_model" />
         <modified.object type="ENTITY" name="Styled_model_element" />
         <modified.object type="ENTITY" name="Transformation_based_styled_model" />
         <modified.object type="TYPE" name="styled_model_element_select" />
       </arm.deletions>
     </arm.changes>
   </change>

   <change version="5">
     <arm.changes>
       <arm.additions>
         <modified.object type="REFERENCE_FROM" name="Support_resource_arm" interfaced.items="bag_to_set"/>
         <modified.object type="TYPE" name="geometric_mapping_target" />
       </arm.additions>
       <arm.deletions>
         <modified.object type="REFERENCE_FROM" name="Characterizable_object_arm" interfaced.items="bag_to_set" />
       </arm.deletions>
     </arm.changes>
   </change>
 	<change version="6">
 		<mim.changes>
 			<mim.additions>
 				<modified.object type="USE_FROM" name="presentation_appearance_schema" interfaced.items="externally_defined_style"></modified.object>
 			</mim.additions>
 		</mim.changes>
 	</change>
 	<change version="7">
 		<arm.changes>
 			<!-- Express Engine 4.2.8 (GIT 9859e84) -->
 			<!-- Reference_Schema: APPEARANCE_ASSIGNMENT_ARM -->
 			<!-- Path:   /Users/tom/workspace_422/stepmod/data/modules/appearance_assignment/arm1.exp -->
 			<!-- Trial_schema: APPEARANCE_ASSIGNMENT_ARM -->
 			<!-- Path:   /Users/tom/workspace_422/stepmod/data/modules/appearance_assignment/arm.exp -->
 			
 			
 			<arm.modifications>
 				<modified.object type="ENTITY" name="styled_element">
 					<description>
 						Attribute 'appearance' went from required to OPTIONAL
 					</description>
 				</modified.object>
 				
 			</arm.modifications>
 		</arm.changes>
 		<mapping.changes>
 			<mapping.change>
 				Styled_element.invisible
 			</mapping.change>
 		</mapping.changes>
 	</change>
 </changes>
	
 <!-- Introduction -->
 <purpose>
 This part of ISO 10303 specifies an application module for the assignment of visual attributes to shape models, geometric elements and annotation elements.  
<p>It specifies the resources for the assignment of visual attributes to styled models and geometric or annotation elements, but does not include specifications of those attributes.  
</p>
 </purpose>

 <!-- Items in scope -->
  <inscope>
      <li>definition of the visual characteristics of a representation item;</li>
      <li>definition of representations suitable for presentation;</li>
      <li>definition of representations suitable for the presentation of a geometric model;</li>
      <li>replication of representations;</li>
      <li>items within the scope of application module <module_ref linkend="elemental_geometric_shape:1_scope">Elemental geometric shape</module_ref>, ISO/TS 10303-1004.</li>
   </inscope>

 <!-- Items out of scope -->
 <outscope>
   <li>definition of views in which shape models, geometric or annotation elements are presented;</li>
   <li>specification of shape models;</li>
   <li>specification of annotations;</li>
   <li>specification of visual characteristics dedicated to the presentation of points, curves, surfaces or texts.</li>
    </outscope>


 <normrefs>
 	<normref.inc normref="ref10303-46"/>
 	<normref.inc normref="ref10303-43"/>
 </normrefs> 

<!-- <abbreviations/>
-->

 <!-- Clause 4 ARM  -->
 <arm>
   <!-- Short form EXPRESS-G -->
   <express-g>
     <imgfile file="armexpg1.xml"/>
     <imgfile file="armexpg2.xml"/>
   </express-g>
 </arm>


 <!-- Clause 5.1 Mapping specification -->
<mapping_table>

	<ae entity="Appearance_assignment" extensible="NO">
   	<aimelt xml:space="preserve">presentation_style_assignment</aimelt>
     		<source xml:space="preserve">ISO 10303-46</source> 
			<aa attribute="appearance_components" assertion_to="appearance_select">
     			<aimelt xml:space="preserve">PATH</aimelt>
		 		<refpath xml:space="preserve">presentation_style_assignment
					presentation_style_assignment.styles[i] -&gt; 
					presentation_style_select
     			</refpath>      
			</aa>	 
	</ae>

		<ae entity="Camera_image_2d_with_scale" original_module="drawing_definition" extensible="NO">
		  <aa attribute="is_displaying" assertion_to="Styled_model">
			  <aimelt>PATH</aimelt>
			  <refpath>camera_image_2d_with_scale &lt;=
			   camera_image &lt;=
			   mapped_item &lt;=
			   representation_item &lt;-
			   representation.items[i]
			   representation
			  </refpath>
		  </aa>
       </ae>

	<ae entity="Context_dependent_appearance_assignment" extensible="NO">
   	<aimelt xml:space="preserve">presentation_style_by_context</aimelt>
	   <source xml:space="preserve">ISO 10303-46</source> 
		<aa attribute="context_definition" assertion_to="appearance_context">
      	<aimelt xml:space="preserve">PATH</aimelt>  
			<refpath xml:space="preserve">presentation_style_by_context
		 		presentation_style_by_context.style_context -&gt; 
				style_context_select
			</refpath>
		</aa>
		<aa attribute="context_definition" assertion_to="Representation">
      	<aimelt xml:space="preserve">PATH</aimelt>  
			<refpath xml:space="preserve">presentation_style_by_context
		 		presentation_style_by_context.style_context -&gt; 
				style_context_select = representation
				representation
			</refpath>
		</aa>
	</ae>     
	
<ae entity="Context_dependent_over_riding_styled_element" extensible="NO">
   <aimelt xml:space="preserve">context_dependent_over_riding_styled_item</aimelt>
   <source xml:space="preserve">ISO 10303-46</source>
	<refpath xml:space="preserve">
		context_dependent_over_riding_styled_item &lt;=
		over_riding_styled_item
	</refpath>
 	<aa attribute="context_definition" assertion_to="overriding_style_context">
       <aimelt xml:space="preserve">PATH</aimelt>  
		 <refpath xml:space="preserve">context_dependent_over_riding_styled_item
			context_dependent_over_riding_styled_item.style_context[i] -&gt; style_context_select
			style_context_select
		 </refpath>
	</aa>
 	<aa attribute="context_definition" assertion_to="Detailed_geometric_model_element">
       <aimelt xml:space="preserve">PATH</aimelt>  
		 <refpath xml:space="preserve">context_dependent_over_riding_styled_item
			context_dependent_over_riding_styled_item.style_context[i] -&gt; style_context_select
			style_context_select = representation_item
			representation_item =&gt; 
			geometric_representation_item
		 </refpath>
	</aa>
 	<aa attribute="context_definition" assertion_to="Styled_model">
       <aimelt xml:space="preserve">PATH</aimelt>  
		 <refpath xml:space="preserve">context_dependent_over_riding_styled_item
			context_dependent_over_riding_styled_item.style_context[i] -&gt; style_context_select
			style_context_select = representation
			representation
		 </refpath>
	</aa>
	
</ae>      
     
<ae entity="Over_riding_styled_element" extensible="NO">
   <aimelt xml:space="preserve">over_riding_styled_item</aimelt>
     <source xml:space="preserve">ISO 10303-46</source>
		 
 <aa attribute="over_ridden_element" assertion_to="Styled_element">
       <aimelt xml:space="preserve">PATH</aimelt>  
		 <refpath xml:space="preserve">over_riding_styled_item.over_ridden_style -&gt; styled_item
		 </refpath>
	</aa>
</ae>      
          
<ae entity="Planar_box" extensible="NO">
   <aimelt xml:space="preserve">planar_box</aimelt>
   <source xml:space="preserve">ISO 10303-46</source>
	<aa attribute="size_in_x">
      <aimelt xml:space="preserve">planar_extent.size_in_x</aimelt>  
		<source xml:space="preserve">ISO 10303-46</source>
		<refpath xml:space="preserve">
			planar_box &lt;=
			planar_extent
			planar_extent.size_in_x
	 	</refpath>
	</aa>		 
	<aa attribute="size_in_y">
      <aimelt xml:space="preserve">planar_extent.size_in_y</aimelt>  
		<source xml:space="preserve">ISO 10303-46</source>
		<refpath xml:space="preserve">
			planar_box &lt;=
			planar_extent
			planar_extent.size_in_y
	 	</refpath>
	</aa>		 
	<aa attribute="placement" assertion_to="Axis_placement">
      <aimelt xml:space="preserve">planar_box.placement</aimelt>  
		<source xml:space="preserve">ISO 10303-46</source>
	</aa>		 
</ae>          


<ae entity="Styled_element" extensible="NO">
   <aimelt xml:space="preserve">styled_item</aimelt>
   <source xml:space="preserve">ISO 10303-46</source>
	 <rules>styled_curve</rules> 

 	<aa attribute="appearance" assertion_to="Appearance_assignment">
   	<aimelt xml:space="preserve">PATH</aimelt>  
		<refpath xml:space="preserve">
			styled_item.styles[i] -&gt; presentation_style_assignment
		</refpath>
	</aa>
 	<aa attribute="appearance" assertion_to="Context_dependent_appearance_assignment">
   	<aimelt xml:space="preserve">PATH</aimelt>  
		<refpath xml:space="preserve">
			styled_item.styles[i] -&gt; 
			presentation_style_assignment =&gt;
			presentation_style_by_context
		</refpath>
	</aa>
	
 	<aa attribute="element" assertion_to="Detailed_geometric_model_element">
     <aimelt xml:space="preserve">PATH</aimelt>   
		 <refpath xml:space="preserve">styled_item
			styled_item.item -&gt; representation_item
			(representation_item =&gt; geometric_representation_item)
     		(representation_item =&gt; mapped_item)
		 </refpath>
	</aa>
		 
<aa attribute="invisible">
	<description>
		For the case of a TRUE value, invisibility shall be provided.
		For the case of a FALSE value, invisibility shall not be provided.
	</description>
       <aimelt xml:space="preserve">PATH</aimelt>  
		 <refpath xml:space="preserve">
		 (styled_item
		 invisible_item = styled_item
		 invisible_item &lt;- 
		 invisibility.invisible_items[i]
		 invisibility)
		 (styled_item
		 invisible_item = styled_item
		 invisible_item &lt;- 
		 invisibility.invisible_items[i]
		 invisibility)
		 </refpath>
		 </aa>		 
</ae>          

<ae entity="Styled_model" extensible="NO">
<aimelt xml:space="preserve">representation</aimelt>
<source xml:space="preserve">ISO 10303-43</source>

     <aa attribute="version_id">
         <aimelt xml:space="preserve">identification_assignment.assigned_id</aimelt>
         <source xml:space="preserve">ISO 10303-41</source>
         <refpath xml:space="preserve">
representation = appearance_representation_identification_item
appearance_representation_identification_item &lt;* identification_item
identification_item &lt;- applied_identification_assignment.items[i]
applied_identification_assignment &lt;= identification_assignment
{identification_assignment.role -&gt; identification_role
identification_role.name='version'}
identification_assignment.assigned_id
</refpath>
      </aa>

<aa attribute="context_of_items" assertion_to="Geometric_coordinate_space">
       <aimelt xml:space="preserve">PATH</aimelt>  
      <refpath xml:space="preserve">
representation
representation.context_of_items -&gt;
representation_context =&gt;
geometric_representation_context
		 </refpath>
		 </aa>		 
<!--    
 <aa attribute="items" assertion_to="Styled_model_replication" inherited_from_entity="Representation">
     <aimelt>PATH</aimelt>  
		 <refpath>
		 representation
		 representation.items[i]-&gt; representation_item 
		 representation_item =&gt; mapped_item
		 </refpath>
	</aa>
		 
	<aa attribute="items" assertion_to="Styled_element" inherited_from_entity="Representation">
     <aimelt>PATH</aimelt>  
		 <refpath>
		 representation
		 representation.items[i] -&gt; representation_item
		 representation_item =&gt; styled_item
		 </refpath>
	</aa>				 

	<aa attribute="items" assertion_to="Axis_placement" inherited_from_entity="Representation">
     <aimelt>PATH</aimelt>  
		 <refpath>
		 	representation
		 	representation.items[i] -&gt; representation_item
			representation_item =&gt; geometric_representation_item
			geometric_representation_item =&gt; 
			placement
			(placement =&gt; axis2_placement_2d)
			(placement =&gt; axis2_placement_3d)
		 </refpath>
	</aa>				 
-->
</ae>

	<ae entity="Styled_model_replication" extensible="NO">
	      <aimelt xml:space="preserve">mapped_item</aimelt>
      <source xml:space="preserve">ISO 10303-43</source>		
		<aa attribute="replicated_model" assertion_to="Styled_model">
         <aimelt xml:space="preserve">PATH</aimelt>
         <refpath xml:space="preserve">
				mapped_item.mapping_source -&gt; 
				representation_map
				representation_map.mapped_representation -&gt;
				representation
			</refpath>
		</aa>

		<aa attribute="source" assertion_to="Axis_placement">
			<aimelt xml:space="preserve">PATH</aimelt>
			<refpath xml:space="preserve">
				mapped_item.mapping_source -&gt;
				representation_map
				representation_map.mapping_origin -&gt; representation_item
				representation_item =&gt; geometric_representation_item
				geometric_representation_item =&gt; 
				placement
				(placement =&gt; axis2_placement_2d)
				(placement =&gt; axis2_placement_3d)
		</refpath>
		</aa>

		<aa attribute="target" assertion_to="Axis_placement">
			<aimelt xml:space="preserve">PATH</aimelt>
			<refpath xml:space="preserve">
				mapped_item.mapping_target -&gt; representation_item
				representation_item =&gt; geometric_representation_item
				geometric_representation_item =&gt; placement
				placement
				(placement =&gt; axis2_placement_2d)
				(placement =&gt; axis2_placement_3d)
			</refpath>
		</aa>
		
		<aa attribute="target" assertion_to="Cartesian_transformation_2d">
			<aimelt xml:space="preserve">PATH</aimelt>
			<refpath xml:space="preserve">
				mapped_item.mapping_target -&gt; representation_item
				representation_item =&gt; geometric_representation_item
				geometric_representation_item =&gt; cartesian_transformation_operator
				cartesian_transformation_operator =&gt; cartesian_transformation_operator_2d
			</refpath>
		</aa>

		<aa attribute="target" assertion_to="Cartesian_transformation_3d">
			<aimelt xml:space="preserve">PATH</aimelt>
			<refpath xml:space="preserve">
				mapped_item.mapping_target -&gt; representation_item
				representation_item =&gt; geometric_representation_item
				geometric_representation_item =&gt; cartesian_transformation_operator
				cartesian_transformation_operator =&gt; cartesian_transformation_operator_3d
			</refpath>
		</aa>
	</ae>
    <sc constraint="aa_representation_item_subtypes" entity="Representation_item">
      <description/>
      <constraint>aa_representation_item_subtypes</constraint>
      <source xml:space="preserve">ISO 10303-1001</source>
    </sc>

</mapping_table>
 
 

 <!-- Clause 5.2 MIM -->
 <mim>
   <!--  Note MIM short form express is in mim.xml -->
   <express-g>
     <imgfile file="mimexpg1.xml"/>
     <imgfile file="mimexpg2.xml"/>
   </express-g>
 <!--   
   <shortnames>
   		<shortname name="" entity=""/>
   </shortnames>
    -->
 </mim>

</module>
