<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="2005-01-27T18:24:48" rcs.revision="1.0" description.file="mim_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="assembly_component_placement_requirements_mim schema_instance"/>
   <schema name="Assembly_component_placement_requirements_mim">
      <interface kind="use" schema="Physical_unit_design_view_mim"/>
      <interface kind="use" schema="Requirement_decomposition_mim"/>
      <interface kind="use" schema="Extended_geometric_tolerance_mim"/>
      <interface kind="use" schema="Non_feature_shape_element_mim"/>
      <interface kind="use" schema="Assembly_module_design_mim"/>
      <interface kind="use" schema="Assembly_module_with_interconnect_component_mim"/>
      <type name="acpr_groupable_item">
         <select extensible="YES" genericentity="YES" basedon="groupable_item" selectitems="requirements_property"/>
      </type>
      <entity name="group_product_definition" supertypes="component_definition">
         <where label="WR1" expression="SELF.frame_of_reference.name = 'design requirement'"/>
         <where label="WR2" expression="(NOT (SELF\product_definition.description = &#10;                                      'placement group')) OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'REQUIREMENTS_PROPERTY' IN&#10;       TYPEOF (pd))) &gt;= 1)"/>
      </entity>
      <entity name="mounting_restriction_area" supertypes="shape_aspect">
         <where label="WR1" expression="EXISTS(SELF.of_shape.definition\product_definition.name)"/>
         <where label="WR2" expression="('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'PHYSICAL_UNIT' IN TYPEOF (SELF.of_shape.definition))"/>
         <where label="WR3" expression="SELF.of_shape.definition.frame_of_reference.name IN ['physical design']"/>
         <where label="WR4" expression="SELF.of_shape.definition\product_definition.name = 'assembly module'"/>
         <where label="WR5" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pdr &lt;* USEDIN (pd,&#10;       'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'SHAPE_REPRESENTATION' IN &#10;       TYPEOF (pdr.used_representation)) AND&#10;       ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'CSG_2D_SHAPE_REPRESENTATION' IN &#10;       TYPEOF (pdr.used_representation)))) = 1))) = 0"/>
         <where label="WR6" expression="SIZEOF (QUERY (sar &lt;* USEDIN (SELF,&#10;       'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       ((sar\shape_aspect_relationship.name = 'mounting surface') AND &#10;       (sar.related_shape_aspect\shape_aspect.description =&#10;       'interconnect module component surface feature')))) = 1"/>
         <where label="WR7" expression="SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\shape_aspect ||&#10;       SELF\mounting_restriction_area))) = 0"/>
      </entity>
      <entity name="mounting_restriction_volume" supertypes="shape_aspect">
         <where label="WR1" expression="('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'PHYSICAL_UNIT' IN TYPEOF (SELF.of_shape.definition))"/>
         <where label="WR2" expression="SELF.of_shape.definition.frame_of_reference.name IN ['physical design']"/>
         <where label="WR3" expression="SELF.of_shape.definition.name = 'assembly module'"/>
         <where label="WR4" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pdr &lt;* USEDIN (pd,&#10;       'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'SHAPE_REPRESENTATION' IN &#10;       TYPEOF (pdr.used_representation)) AND&#10;        (pdr.used_representation\representation.context_of_items\&#10;       geometric_representation_context.coordinate_space_dimension = 3)&#10;       )) = 1))) = 0"/>
         <where label="WR5" expression="SIZEOF (QUERY (sar &lt;* USEDIN (SELF,&#10;       'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +&#10;       'COMPONENT_SHAPE_ASPECT' IN&#10;       TYPEOF (sar.related_shape_aspect)) AND&#10;       (sar\shape_aspect_relationship.name = 'mounting surface') AND &#10;       (sar.related_shape_aspect\shape_aspect.description =&#10;       'interconnect module component surface feature'))) = 1"/>
         <where label="WR6" expression="SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\shape_aspect ||&#10;       SELF\mounting_restriction_volume))) = 0"/>
      </entity>
      <rule name="component_placement_restriction_assignment_constraint" appliesto="representation">
         <algorithm>LOCAL
  cpra : SET OF representation := QUERY( cpra &lt;* representation |
          cpra.name = 'component placement restriction assignment');
     i : INTEGER ;
  pass1 : BOOLEAN := TRUE;
  pass2 : BOOLEAN := TRUE;
  mra : BOOLEAN := FALSE;
  mrv : BOOLEAN := FALSE;
END_LOCAL;
 REPEAT i := 1 to SIZEOF (cpra);
  IF NOT(pass1) THEN ESCAPE; END_IF;

  IF NOT((SIZEOF(QUERY(rr &lt;* USEDIN(cpra[i],
  'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'REPRESENTATION_RELATIONSHIP.REP_1') | (rr.name =
    'component placement restriction assignment area') AND
    (SIZEOF(QUERY(pdr &lt;* USEDIN(rr.rep_2,
  'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |
    ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'MOUNTING_RESTRICTION_AREA' IN TYPEOF(pdr.definition.definition)))
    ) = 1 ) 
     )) &lt;=1 ) OR
(SIZEOF(QUERY(rr &lt;* USEDIN(cpra[i],
  'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'REPRESENTATION_RELATIONSHIP.REP_1') | (rr.name =
    'component placement restriction assignment volume') AND
    (SIZEOF(QUERY(pdr &lt;* USEDIN(rr.rep_2,
  'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |
    ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'MOUNTING_RESTRICTION_VOLUME' IN TYPEOF(pdr.definition.definition)))
    ) = 1 )
     )) &lt;=1 )
        ) THEN pass1 := FALSE;
  END_IF;      
  mra := (SIZEOF(QUERY(rr &lt;* USEDIN(cpra[i],
  'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'REPRESENTATION_RELATIONSHIP.REP_1') | (rr.name =
    'component placement restriction assignment area') AND
    (SIZEOF(QUERY(pdr &lt;* USEDIN(rr.rep_2,
  'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |
    ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'MOUNTING_RESTRICTION_AREA' IN TYPEOF(pdr.definition.definition)))
    ) = 1 )
     )) =1 );
  mrv := (SIZEOF(QUERY(rr &lt;* USEDIN(cpra[i],
  'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'REPRESENTATION_RELATIONSHIP.REP_1') | (rr.name =
    'component placement restriction assignment volume') AND
    (SIZEOF(QUERY(pdr &lt;* USEDIN(rr.rep_2,
  'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |
    ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'MOUNTING_RESTRICTION_VOLUME' IN TYPEOF(pdr.definition.definition)))
    ) = 1 )
     )) =1 );
  IF NOT(mra OR mrv) THEN pass1 := FALSE; END_IF;
 END_REPEAT;
 REPEAT i := 1 to SIZEOF (cpra);
  IF NOT(pass1) THEN ESCAPE; END_IF;
  IF NOT(pass2) THEN ESCAPE; END_IF;

  IF NOT(SIZEOF(QUERY(pdr &lt;* USEDIN(cpra[i],
  'ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') | 
    ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.' +
  'GROUPED_REQUIREMENTS_PROPERTY' IN TYPEOF(pdr.definition))
    AND
    (pdr.definition\group.name =
    'item restricted requirements property')
     )
    ) = 1 ) THEN pass2 := FALSE;
  END_IF;
 END_REPEAT;</algorithm>
         <where label="WR1" expression="pass1"/>
         <where label="WR2" expression="pass2"/>
      </rule>
      <rule name="placement_group_area_assignment_constraint" appliesto="shape_aspect_relationship">
         <where label="WR1" expression="SIZEOF(QUERY(sar &lt;* shape_aspect_relationship |&#10;       (sar\shape_aspect_relationship.name = 'area impacted group') AND NOT&#10;       ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'MOUNTING_RESTRICTION_AREA' IN TYPEOF(sar.related_shape_aspect))&#10;       )) = 0"/>
         <where label="WR2" expression="SIZEOF(QUERY(sar &lt;* shape_aspect_relationship |&#10;       (sar\shape_aspect_relationship.name = 'area impacted group') AND NOT&#10;       (('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'GROUP_SHAPE_ASPECT' IN TYPEOF(sar.relating_shape_aspect))&#10;       OR (('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'SHAPE_ASPECT' IN TYPEOF(sar.relating_shape_aspect))&#10;       AND ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'GROUP_PRODUCT_DEFINITION'&#10;       IN TYPEOF(sar.relating_shape_aspect.of_shape.definition))&#10;       AND ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'PRODUCT_DEFINITION_CONTEXT'&#10;IN TYPEOF(sar.relating_shape_aspect.of_shape.definition.frame_of_reference))&#10;   AND &#10;     (sar.relating_shape_aspect.of_shape.definition.frame_of_reference.name&#10;       = 'design requirement') &#10;       )))) = 0"/>
      </rule>
      <rule name="placement_group_volume_assignment_constraint" appliesto="shape_aspect_relationship">
         <where label="WR1" expression="SIZEOF(QUERY(sar &lt;* shape_aspect_relationship |&#10;       (sar\shape_aspect_relationship.name = 'volume impacted group') AND NOT&#10;       ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'MOUNTING_RESTRICTION_VOLUME' IN TYPEOF(sar.related_shape_aspect))&#10;       )) = 0"/>
         <where label="WR2" expression="SIZEOF(QUERY(sar &lt;* shape_aspect_relationship |&#10;       (sar\shape_aspect_relationship.name = 'volume impacted group') AND NOT&#10;       (('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'GROUP_SHAPE_ASPECT' IN TYPEOF(sar.relating_shape_aspect))&#10;       OR (('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'SHAPE_ASPECT' IN TYPEOF(sar.relating_shape_aspect))&#10;       AND ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'GROUP_PRODUCT_DEFINITION'&#10;       IN TYPEOF(sar.relating_shape_aspect.of_shape.definition))&#10;       AND ('ASSEMBLY_COMPONENT_PLACEMENT_REQUIREMENTS_MIM.'&#10;       + 'PRODUCT_DEFINITION_CONTEXT'&#10;IN TYPEOF(sar.relating_shape_aspect.of_shape.definition.frame_of_reference))&#10;   AND &#10;     (sar.relating_shape_aspect.of_shape.definition.frame_of_reference.name&#10;       = 'design requirement') &#10;       )))) = 0"/>
      </rule>
   </schema>
</express>
