<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: arm.xml,v 1.2 2002/04/26 15:47:41 goset1 Exp $ -->
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<?xml-stylesheet type="text/xsl"
href="../../../xsl/express.xsl" ?>
<express
  language_version="2"
  description.file="arm_descriptions.xml">
	
	<schema name="Assembly_structure_arm">
    <interface
      kind="use"
      schema="Product_view_definition_relationship_arm">
    </interface>

    <interface
      kind="use"
      schema="Value_with_unit_arm">
    </interface>

    <entity
      name="Assembly_component_relationship"
      supertypes="View_definition_usage"
			abstract.supertype="YES"
			super.expression="ONEOF(Next_assembly_usage, Promissory_usage, Component_upper_level_identification)">

		<explicit
        name="quantity"
        optional="YES">
        <typename
				  name="Numerical_value"/>
      </explicit>
      <explicit
        name="location_indicator"
        optional="YES">
        <builtintype
          type="STRING"/>
      </explicit>
			<where
        label="WR1"
        expression="NOT(EXISTS(quantity)) XOR 
	((NOT ('NUMBER' IN TYPEOF(quantity.value_component))) XOR (quantity.value_component > 0))">
			</where>
    </entity>

    <entity
      name="Next_assembly_usage"
      supertypes="Assembly_component_relationship">
    </entity>
		
    <entity
      name="Promissory_usage"
      supertypes="Assembly_component_relationship">
    </entity>

		<entity
      name="Component_upper_level_identification"
      supertypes="Assembly_component_relationship">
      <explicit
        name="upper_assembly_relationship">
        <typename
          name="Assembly_component_relationship"/>
      </explicit>
      <explicit
        name="sub_assembly_relationship">
        <typename
          name="Next_assembly_usage"/>
      </explicit>
      <unique
        label="UR1">
        <unique.attribute
          attribute="upper_assembly_relationship"/>
        <unique.attribute
          attribute="sub_assembly_relationship"/>
      </unique>
      <where
        label="WR1"
        expression="SELF :&lt;&gt;: upper_assembly_relationship">
      </where>
      <where
        label="WR2"
        expression="SELF\view_definition_relationship.view1 :=: upper_assembly_relationship\view_definition_relationship.view1">
      </where>
      <where
        label="WR3"
        expression="SELF\view_definition_relationship.view2 :=: sub_assembly_relationship\view_definition_relationship.view2">
      </where>
      <where
        label="WR4"
        expression="(upper_assembly_relationship\view_definition_relationship.view2 :=:
       sub_assembly_relationship\view_definition_relationship.view1) OR
	(SIZEOF (QUERY (pdr &lt;* USEDIN(upper_assembly_relationship\view_definition_relationship.view2 ,
	'ASSEMBLY_COMPONENT_CHARACTERIZATION_ARM.VIEW_DEFINITION_RELATIONSHIP.' + 'VIEW2') | 
	pdr.view1 :=: sub_assembly_relationship\view_definition_relationship.view1)) = 1)">
      </where>			
      <where
        label="WR5"
        expression="SIZEOF (['ASSEMBLY_COMPONENT_CHARACTERIZATION_ARM.NEXT_ASSEMBLY_USAGE',
	'ASSEMBLY_COMPONENT_CHARACTERIZATION_ARM.COMPONENT_UPPER_LEVEL_IDENTIFICATION'] * TYPEOF(upper_assembly_relationship)) = 1">
      </where>				
    </entity>
  </schema>
</express>
