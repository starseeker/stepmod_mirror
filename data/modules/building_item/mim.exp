(*
   $Id: mim.exp,v 1.4 2003/01/03 15:30:36 whaas Exp $
   ISO/TC184/SC4 WG12N1782 - ISO/CD-TS - 10303-1144 Building_item - EXPRESS MIM*)
(* UNDER DEVELOPMENT *)
SCHEMA Building_item_mim;

USE FROM Approval_mim;           -- ISO 10303-1012

USE FROM Building_component_mim; -- ISO 10303-1143

USE FROM Building_structure_mim; -- ISO 10303-1145

USE FROM product_definition_schema -- ISO 10303-41
  (product,
   product_category,
   product_definition,
   product_definition_formation,
   product_definition_relationship,
   product_related_product_category);

USE FROM product_property_definition_schema -- ISO 10303-41
  (characterized_product_definition,
   characterized_definition,
   product_definition_shape,
   property_definition);

TYPE building_item_approval_item = SELECT BASED_ON approval_item WITH
(product_definition);
END_TYPE;

ENTITY applied_building_item_approval_assignment
   SUBTYPE OF (applied_approval_assignment);
   SELF\applied_approval_assignment.items : building_item_approval_item;
END_ENTITY;

ENTITY building_element
   SUBTYPE OF (product_definition);
WHERE
   WR1: SIZEOF (QUERY (pdr <* USEDIN(SELF, 'BUILDING_ITEM_MIM.' +
	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
	(['BUILDING_STRUCTURE_MIM.BUILDING_SECTION','BUILDING_ITEM_MIM.SPACE_ELEMENT']
	IN TYPEOF (pdr.relating_product_definition))
	)) = 1;
   WR2: SIZEOF (QUERY (pd <* USEDIN (SELF, 'BUILDING_ITEM_MIM.'+
	'PROPERTY_DEFINITION.DEFINITION') |
	SIZEOF (QUERY (sa <* USEDIN(pd, 'BUILDING_COMPONENT_MIM.'+
	'SHAPE_ASPECT.OF_SHAPE') |
	(('BUILDING_COMPONENT_MIM.POSITIVE_COMPONENT' IN TYPEOF (sa))
	AND
	(sa.description = 'main'))
	)) = 1
   )) = 1;
END_ENTITY;

ENTITY fixture_equipment_element
   SUBTYPE OF (product_definition);
WHERE
   WR1: SIZEOF (QUERY (pdr <* USEDIN(SELF, 'BUILDING_ITEM_MIM.' +
	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
	['BUILDING_STRUCTURE_MIM.BUILDING_SECTION','BUILDING_ITEM_MIM.SPACE_ELEMENT'] IN
	TYPEOF (pdr.relating_product_definition))) = 1;
   WR2: SIZEOF (QUERY (pds <* QUERY (pd <* USEDIN (SELF,
	'BUILDING_ITEM_MIM.PROPERTY_DEFINITION.DEFINITION') |
	'BUILDING_COMPONENT_MIM.PRODUCT_DEFINITION_SHAPE' IN TYPEOF (pd)) |
	SIZEOF (QUERY (sa <* USEDIN (pds, 'BUILDING_COMPONENT_MIM.' +
	'SHAPE_ASPECT.OF_SHAPE') |
	('BUILDING_COMPONENT_MIM.POSITIVE_COMPONENT' IN TYPEOF (sa))
	AND
	(sa.description = 'main'))) = 1)) = 1;
END_ENTITY;

ENTITY service_element
   SUBTYPE OF (product_definition);
WHERE
   WR1: SIZEOF (QUERY (pdr <* USEDIN(SELF, 'BUILDING_ITEM_MIM.' +
	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
	['BUILDING_STRUCTURE_MIM.BUILDING_SECTION','BUILDING_ITEM_MIM.SPACE_ELEMENT']
	IN TYPEOF (pdr.relating_product_definition))) = 1;
   WR2: SIZEOF (QUERY (pds <* QUERY (pd <* USEDIN (SELF,
	'BUILDING_DESIGN_SCHEMA.PROPERTY_DEFINITION.DEFINITION') |
	'BUILDING_COMPONENT_MIM.PRODUCT_DEFINITION_SHAPE' IN
	TYPEOF (pd)) |
	SIZEOF (QUERY (sa <* USEDIN(pds, 'BUILDING_COMPONENT_MIM.'+
	'SHAPE_ASPECT.OF_SHAPE') |
	('BUILDING_COMPONENT_MIM.POSITIVE_COMPONENT' IN TYPEOF (sa))
	AND
	(sa.description = 'main'))) = 1)) = 1;
END_ENTITY;

ENTITY space_element
   SUBTYPE OF (product_definition);
WHERE
   WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'BUILDING_ITEM_MIM.' +
	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
	'BUILDING_STRUCTURE_MIM.BUILDING_SECTION' IN
	TYPEOF (pdr.relating_product_definition))) = 1;
END_ENTITY;

ENTITY structure_enclosure_element
   SUBTYPE OF (product_definition);
WHERE
   WR1: SIZEOF (QUERY (pdr <* USEDIN (SELF, 'BUILDING_ITEM_MIM.' +
	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |
	['BUILDING_STRUCTURE_MIM.BUILDING_SECTION','BUILDING_ITEM_MIM.SPACE_ELEMENT']
	IN TYPEOF (pdr.relating_product_definition))) = 1;
   WR2: SIZEOF (QUERY (pds <* QUERY (pd <* USEDIN (SELF,
	'BUILDING_ITEM_MIM.PROPERTY_DEFINITION.DEFINITION') |
	'BUILDING_COMPONENT_MIM.PRODUCT_DEFINITION_SHAPE' IN TYPEOF (pd)) |
	SIZEOF (QUERY (sa <* USEDIN (pds, 'BUILDING_COMPONENT_MIM.'+
	'SHAPE_ASPECT.OF_SHAPE') |
	('BUILDING_COMPONENT_MIM.POSITIVE_COMPONENT' IN TYPEOF (sa))
	AND
	(sa.description = 'main'))) = 1)) = 1;
END_ENTITY;

END_SCHEMA;
