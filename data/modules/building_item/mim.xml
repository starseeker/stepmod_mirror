<?xml version="1.0"?>
<!-- $Id: mim.xml,v 1.3 2003/01/03 15:30:36 whaas Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  description.file="mim_descriptions.xml"
  rcs.date="$Date: 2003/01/03 15:30:36 $"
  rcs.revision="$Revision: 1.3 $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.24"
    source="../data/modules/building_item/mim.exp"/>

  <schema name="Building_item_mim">
    <interface
      kind="use"
      schema="Approval_mim">
    </interface>

    <interface
      kind="use"
      schema="Building_component_mim">
    </interface>

    <interface
      kind="use"
      schema="Building_structure_mim">
    </interface>

    <interface
      kind="use"
      schema="product_definition_schema">
      <interfaced.item
        name="product"/>
      <interfaced.item
        name="product_definition"/>
      <interfaced.item
        name="product_definition_formation"/>
      <interfaced.item
        name="product_definition_relationship"/>
      <interfaced.item
        name="product_related_product_category"/>
    </interface>

    <interface
      kind="use"
      schema="product_property_definition_schema">
      <interfaced.item
        name="characterized_product_definition"/>
      <interfaced.item
        name="characterized_definition"/>
			<interfaced.item
        name="represented_definition"/>	
			<interfaced.item
        name="shape_definition"/>
      <interfaced.item
        name="product_definition_shape"/>
      </interface>

    <type name="building_item_approval_item">
      <select
        basedon="approval_item"
        selectitems="product_definition">
      </select>

    </type>
    <entity
      name="applied_building_item_approval_assignment"
      supertypes="applied_approval_assignment">
      <explicit
        name="items">
        <redeclaration
          entity-ref="applied_approval_assignment"/>
          <typename
            name="building_item_approval_item"/>
        </explicit>
      </entity>

      <entity
        name="building_element"
        supertypes="product_definition">
        <where
          label="WR1"
          expression="SIZEOF (QUERY (pdr &lt;* USEDIN(SELF, 'BUILDING_ITEM_MIM.' +	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |	(['BUILDING_STRUCTURE_MIM.BUILDING_SECTION','BUILDING_ITEM_MIM.SPACE_ELEMENT']	IN TYPEOF (pdr.relating_product_definition))	)) = 1">
        </where>
        <where
          label="WR2"
          expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF, 'BUILDING_ITEM_MIM.'+	'PROPERTY_DEFINITION.DEFINITION') |	SIZEOF (QUERY (sa &lt;* USEDIN(pd, 'BUILDING_COMPONENT_MIM.'+	'SHAPE_ASPECT.OF_SHAPE') |	(('BUILDING_COMPONENT_MIM.POSITIVE_COMPONENT' IN TYPEOF (sa))	AND	(sa.description = 'main'))	)) = 1   )) = 1">
        </where>
      </entity>

      <entity
        name="fixture_equipment_element"
        supertypes="product_definition">
        <where
          label="WR1"
          expression="SIZEOF (QUERY (pdr &lt;* USEDIN(SELF, 'BUILDING_ITEM_MIM.' +	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |	['BUILDING_STRUCTURE_MIM.BUILDING_SECTION','BUILDING_ITEM_MIM.SPACE_ELEMENT'] IN	TYPEOF (pdr.relating_product_definition))) = 1">
        </where>
        <where
          label="WR2"
          expression="SIZEOF (QUERY (pds &lt;* QUERY (pd &lt;* USEDIN (SELF,	'BUILDING_ITEM_MIM.PROPERTY_DEFINITION.DEFINITION') |	'BUILDING_COMPONENT_MIM.PRODUCT_DEFINITION_SHAPE' IN TYPEOF (pd)) |	SIZEOF (QUERY (sa &lt;* USEDIN (pds, 'BUILDING_COMPONENT_MIM.' +	'SHAPE_ASPECT.OF_SHAPE') |	('BUILDING_COMPONENT_MIM.POSITIVE_COMPONENT' IN TYPEOF (sa))	AND	(sa.description = 'main'))) = 1)) = 1">
        </where>
      </entity>

      <entity
        name="service_element"
        supertypes="product_definition">
        <where
          label="WR1"
          expression="SIZEOF (QUERY (pdr &lt;* USEDIN(SELF, 'BUILDING_ITEM_MIM.' +	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |	['BUILDING_STRUCTURE_MIM.BUILDING_SECTION','BUILDING_ITEM_MIM.SPACE_ELEMENT']	IN TYPEOF (pdr.relating_product_definition))) = 1">
        </where>
        <where
          label="WR2"
          expression="SIZEOF (QUERY (pds &lt;* QUERY (pd &lt;* USEDIN (SELF,	'BUILDING_DESIGN_SCHEMA.PROPERTY_DEFINITION.DEFINITION') |	'BUILDING_COMPONENT_MIM.PRODUCT_DEFINITION_SHAPE' IN	TYPEOF (pd)) |	SIZEOF (QUERY (sa &lt;* USEDIN(pds, 'BUILDING_COMPONENT_MIM.'+	'SHAPE_ASPECT.OF_SHAPE') |	('BUILDING_COMPONENT_MIM.POSITIVE_COMPONENT' IN TYPEOF (sa))	AND	(sa.description = 'main'))) = 1)) = 1">
        </where>
      </entity>

      <entity
        name="space_element"
        supertypes="product_definition">
        <where
          label="WR1"
          expression="SIZEOF (QUERY (pdr &lt;* USEDIN (SELF, 'BUILDING_ITEM_MIM.' +	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |	'BUILDING_STRUCTURE_MIM.BUILDING_SECTION' IN	TYPEOF (pdr.relating_product_definition))) = 1">
        </where>
      </entity>

      <entity
        name="structure_enclosure_element"
        supertypes="product_definition">
        <where
          label="WR1"
          expression="SIZEOF (QUERY (pdr &lt;* USEDIN (SELF, 'BUILDING_ITEM_MIM.' +	'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |	['BUILDING_STRUCTURE_MIM.BUILDING_SECTION','BUILDING_ITEM_MIM.SPACE_ELEMENT']	IN TYPEOF (pdr.relating_product_definition))) = 1">
        </where>
        <where
          label="WR2"
          expression="SIZEOF (QUERY (pds &lt;* QUERY (pd &lt;* USEDIN (SELF,	'BUILDING_ITEM_MIM.PROPERTY_DEFINITION.DEFINITION') |	'BUILDING_COMPONENT_MIM.PRODUCT_DEFINITION_SHAPE' IN TYPEOF (pd)) |	SIZEOF (QUERY (sa &lt;* USEDIN (pds, 'BUILDING_COMPONENT_MIM.'+	'SHAPE_ASPECT.OF_SHAPE') |	('BUILDING_COMPONENT_MIM.POSITIVE_COMPONENT' IN TYPEOF (sa))	AND	(sa.description = 'main'))) = 1)) = 1">
        </where>
      </entity>

    </schema>

  </express>
