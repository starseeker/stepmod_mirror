<?xml version='1.0' encoding='UTF-8'?>
<!-- $Id: express2xml.js,v 1.33 2003/05/11 03:54:57 thendrix Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  description.file="arm_descriptions.xml"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.33"
    source="../data/modules/building_structure/arm.exp"/>

  <schema name="Building_structure_arm">

    <interface
      kind="use"
      schema="Assembly_structure_arm">
    </interface>
    <interface
      kind="use"
      schema="Building_item_arm">
    </interface>
    <interface
      kind="use"
      schema="Person_organization_assignment_arm">
    </interface>
    <interface
      kind="use"
      schema="Product_view_definition_arm">
    </interface>
    <interface
      kind="use"
      schema="Product_view_definition_relationship_arm">
    </interface>
    <type name="building_organization_or_person_in_organization_item">
      <select
        basedon="organization_or_person_in_organization_item"
        selectitems="building">
      </select>
    </type>

    <entity
      name="Building"
      supertypes="Product_view_definition">
      <where
        label="WR1"
        expression="SIZEOF (QUERY (bdpa &lt;* USEDIN (SELF, 'BUILDING_STRUCTURE_ARM.' + 'ORGANIZATION_OR_PERSON_IN_ORGANIZATION_ASSIGNMENT.ITEMS') | bdpa.role = 'owner'))= 1">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (pdr &lt;* USEDIN (SELF, 'BUILDING_STRUCTURE_ARM.'+ 'VIEW_DEFINITION_RELATIONSHIP.RELATING_VIEW') | 'BUILDING_STRUCTURE_ARM.BUILDING_SECTION' IN TYPEOF (pdr.related_view))) &gt;= 1">
      </where>
    </entity>

    <entity
      name="Building_level"
      super.expression="(Sublevel)"
      supertypes="Product_view_definition">
    </entity>

    <entity
      name="Building_level_assignment"
      supertypes="View_definition_relationship">
      <explicit
        name="related_view RENAMED assigned_item">
        <typename
          name="Building_item"/>
        <redeclaration
          entity-ref="related_view RENAMED assigned_item : Building_item;"/>
        </explicit>
        <explicit
          name="relating_view RENAMED assigned_level">
          <typename
            name="Building_level"/>
          <redeclaration
            entity-ref="relating_view RENAMED assigned_level : Building_level;"/>
          </explicit>
        </entity>

        <entity
          name="Building_section"
          supertypes="Product_view_definition">
          <where
            label="WR1"
            expression="SIZEOF (QUERY (pdr &lt;* USEDIN(SELF,'BUILDING_STRUCTURE_ARM.'+ 'VIEW_DEFINITION_RELATIONSHIP.RELATED_VIEW') | 'BUILDING_STRUCTURE_ARM.BUILDING' IN TYPEOF (pdr.relating_view))) = 1">
          </where>
        </entity>

        <entity
          name="Item_assembly"
          supertypes="Product_view_definition">
          <inverse
            name="component_relationships"
            entity="Assembly_component_relationship"
            attribute="relating_view">
            <inverse.aggregate
              type="SET"
              lower="1"
              upper="?"/>
          </inverse>
        </entity>

        <entity
          name="Item_proximity_relationship"
          supertypes="View_definition_relationship">
          <explicit
            name="related_view RENAMED item">
            <typename
              name="Building_item"/>
            <redeclaration
              entity-ref="related_view RENAMED item : Building_item;"/>
            </explicit>
            <explicit
              name="relating_view RENAMED item_in_proximity">
              <typename
                name="Building_item"/>
              <redeclaration
                entity-ref="relating_view RENAMED item_in_proximity : Building_item;"/>
              </explicit>
            </entity>

            <entity
              name="Sublevel"
              supertypes="Building_level">
              <explicit
                name="belongs_to">
                <typename
                  name="Building_level"/>
              </explicit>
            </entity>

          </schema>
        </express>
