(*
   $Id: arm.exp,v 1.4 2003/07/29 10:49:07 rugarcia Exp $
   ISO/TC184/SC4 WG12N1303 - ISO/CD-TS 10303-1351 catalog_data_information - EXPRESS ARM
*)

SCHEMA Catalog_data_information_arm;

USE FROM Approval_arm;  -- Added by AIDIMA

USE FROM Certification_arm;  -- Added by AIDIMA

USE FROM Classification_with_attributes_arm;

USE FROM Document_management_arm ;

USE FROM Effectivity_application_arm ;

USE FROM Event_arm;

USE FROM External_model_arm; -- Added by AIDIMA

USE FROM External_properties_arm;

USE FROM Incomplete_data_reference_mechanism_arm;

USE FROM Inertia_characteristics_arm;

USE FROM Item_definition_structure_arm;

USE FROM Manufacturing_configuration_effectivity_arm;

USE FROM Multi_linguism_arm;

USE FROM Material_aspects_arm;

USE FROM Part_definition_relationship_arm;  -- Added by AIDIMA

USE FROM Product_as_individual_arm;

USE FROM Product_replacement_arm;  -- Added by AIDIMA

USE FROM Product_structure_arm;  -- Added by AIDIMA

USE FROM Product_version_relationship_arm;  -- Added by AIDIMA

USE FROM Project_arm;  -- Added by AIDIMA

USE FROM Property_assignment_arm;  -- Added by AIDIMA

USE FROM Representation_with_uncertainty_arm;
 
USE FROM Shape_property_assignment_arm;  -- Added by AIDIMA

USE FROM Specification_control_arm;

USE FROM Time_interval_arm;


TYPE alias_select_236cc1 = EXTENSIBLE SELECT BASED_ON alias_identification_item WITH
	(Approval_status,	
	Class_with_attributes,
	Classification_system,
	Classification_attribute,
	complex_product_select,
	Document,
	Document_definition,
	Document_version,
	Geometric_model,
	Independent_property,
	Individual_definition,
	Organization,
	Part,
	part_occurrence_select,
	Part_version,
	Part_view_definition,
	Product_class,
	Security_classification,
	Specification,
	Specification_category);
END_TYPE;

TYPE approval_element_select_236cc1 = EXTENSIBLE SELECT BASED_ON approval_item WITH
	(Alternate_part_relationship,
	Applied_independent_property,
	Assembly_relationship_substitution,
	Breakdown_node_relationship,
	Certification,
	Class_breakdown_association,
	Class_category_association,
	Class_condition_association,
	Class_inclusion_association,
	Class_specification_association,
	Class_with_attributes,
	Classification_association,
	Classification_system,
	complex_product_select,
	Configuration,
	Contract,
	Document,
	Document_definition,
	Document_version,
	File,
	Geometric_model,
	Independent_property,
	Individual_definition,
	Make_from_relationship,
	Manufacturing_configuration,
	Material_identification,
	Part_definition_relationship,
	Part_occurrence_definition_relationship,
	part_occurrence_select,
	Part_occurrence_relationship,
	Part_version,
	Part_view_definition,
	Product_class,
	Realized_assembly_relationship,
	Requirement_version,
	Solution_element,
	Specification,
	Specification_category,
	Specification_expression,
	Specification_inclusion);
END_TYPE;

TYPE certified_element_select_236cc1 = EXTENSIBLE SELECT BASED_ON certification_item WITH
	(part_occurrence_select,
	Part_version,
	Product_version_relationship,
	Supplier_solution);
END_TYPE;

TYPE classified_element_select_236cc1 = EXTENSIBLE SELECT BASED_ON classification_item_extended WITH
	(Applied_independent_property,
	Approval_status,
	complex_product_select,
	Contract,
	Document,
	Document_definition,
	Document_version,
	Independent_property,
	Material_identification,
	part_occurrence_select,
	Product_class,
	Product_specification,
	Project,
	Requirement_version,
	Security_classification,
	Shape_element,
	Specification_category);
END_TYPE;

TYPE contracted_element_select_236cc1 = EXTENSIBLE SELECT BASED_ON contract_item WITH
	(Part_version);
END_TYPE;

TYPE documented_element_select_236cc1 = EXTENSIBLE SELECT BASED_ON documented_element_select WITH
	(Applied_independent_property,
	Approval_assignment,
	Breakdown_node_relationship,
	Certification_assignment,
	Class_breakdown_association,
	Class_with_attributes,
	Classification_attribute,
	Classification_system,
	complex_product_select, 
	Contract,
	Independent_property,
	Individual_definition,
	Item_shape,
	Material_identification,
	Organization,
	Part,
	Part_definition_relationship,
	Part_occurrence_definition_relationship,
	Part_occurrence_relationship,
	part_occurrence_select,
	Part_version,
	Part_view_definition,
	Person,
	Product_category_assignment;
	Product_class,
	Product_specification,
	Project,
	Realized_assembly_relationship,
	Requirement_version,
	Security_classification_assignment,
	Shape_element,
	Shape_element_relationship,
	Specification,
	Specification_category,
	Solution_element);
END_TYPE;

TYPE document_or_file = SELECT 
	(Document_definition,
	File);
END_TYPE;

TYPE effective_element_select_236cc1 = EXTENSIBLE SELECT BASED_ON effectivity_item WITH
	(Applied_independent_property,
	Assembled_part_association,
	Assembly_relationship_substitution,
	Breakdown_node_relationship,
	Class_breakdown_association,
	Class_category_association,
	Class_condition_association,
	Class_inclusion_association,
	Class_specification_association,
	Classification_system,
	complex_product_select,
	Document,
	Document_definition,
	Document_definition_relationship,
	Document_version,
	File,
	Geometric_model,
	Independent_property,
	Make_from_relationship,
	Material_identification,
	Part,
	Part_definition_relationship,
	Part_occurrence_definition_relationship,
	Part_occurrence_relationship,
	part_occurrence_select,
	Part_version,
	Product_class,
	Product_specification,
	Requirement_version,
	Security_classification_assignment,
	Solution_element,
	Specification,
	Specification_category,
	Specification_expression,
	Specification_inclusion);
END_TYPE;

TYPE general_organizational_data_select_236cc1 = EXTENSIBLE SELECT BASED_ON organization_or_person_in_organization_item WITH
	(Alternate_part_relationship,
	Applied_independent_property,
	Approval_status,
	Assembly_relationship_substitution,
	Breakdown_node_relationship,
	Certification,
	Class_breakdown_association,
	Class_category_association,
	Class_condition_association,
	Class_inclusion_association,
	Class_specification_association,
	Class_with_attributes,
	Classification_association,
	Classification_system,
	complex_product_select,
	Configuration,
	Contract,
	Document,
	Document_definition,
	Document_version,
	File,
	Geometric_model,
	Independent_property
	Individual_definition,
	Make_from_relationship,
	Manufacturing_configuration,
	Material_identification,
	Organization_relationship,
	Part,
	Part_definition_relationship,
	Part_occurrence_definition_relationship,
	Part_occurrence_relationship,
	part_occurrence_select,	
	Part_version,
	Part_view_definition,
	Person_in_organization,
	Person_in_organization_relationship,
	Product_class,
	Product_specification,
	Product_version_relationship,
	Project,
	Realized_assembly_relationship,
	Requirement_version,
	Security_classification,
	Security_classification_assignment,
	Solution_element,
	Specification,
	Specification_category,
	Specification_expression,
	Specification_inclusion);
END_TYPE;

TYPE identification_item_236cc1 = EXTENSIBLE SELECT BASED_ON identification_item WITH
	(Approval_status,
	Class_with_attributes,
	Classification_attribute,
	Classification_system,
	complex_product_select,
	Document,
	Document_definition,
	Document_version,
	Geometric_model,
	Independent_property,
	Individual_definition,
	Organization,
	Part,
	part_occurrence_select,
	Part_version,
	Part_view_definition,
	Product_as_individual,
	Product_class,
	Security_classification,
	Specification,
	Specification_category);
END_TYPE;

TYPE item_property_select_236cc1 = EXTENSIBLE SELECT BASED_ON property_assignment_select WITH
	(Alternative_solution,
	breakdown_element_select,
	Breakdown_node_relationship,
	Design_constraint_definition,
	Document_definition,
	File,
	Individual_definition,
	Item_shape,
	Make_from_relationship,
	Part_definition_relationship,
	Part_occurrence_definition_relationship,
	Part_occurrence_relationship,
	part_occurrence_select,
	Part_view_definition,
	Product_class,
	Product_specification,
	Shape_element,
	Shape_element_relationship,
	Solution_element);
END_TYPE;

TYPE security_classification_item_236cc1 = EXTENSIBLE SELECT BASED_ON security_classification_item WITH
	(Applied_independent_property,
	Assembly_relationship_substitution,
	Breakdown_node_relationship,
	Class_breakdown_association,
	Classification_system,
	complex_product_select,
	Configuration,
	Document,
	Document_definition,
	Document_version,
	File,
	Geometric_model,
	Independent_property,
	Manufacturing_configuration,
	Material_identification,
	Part,
	Part_version,
	Product_as_individual,
	Product_class
	Project,
	Realized_assembly_relationship,
	Requirement_version,
	Solution_element,
	Specification,
	Specification_category);
END_TYPE;

TYPE string_select_236cc1 = EXTENSIBLE SELECT BASED_ON string_select WITH
  	(Alias_identification,
	Alternate_part_relationship,
	Applied_independent_property,
   	Approval_relationship,
	Assembly_relationship_substitution,
	Breakdown_node_relationship,
   	Certification_assignment,
   	Class_breakdown_association,
	Class_condition_association,
   	Class_inclusion_association,
  	Class_with_attributes, 
	Classification_attribute,
   	Contract,
   	Data_environment,
   	Design_constraint_association,
	Detailed_geometric_model_element,
	Effectivity,
   	Effectivity_relationship,
   	Event,
	External_geometric_model,
	Independent_property,
   	Independent_property_relationship,
  	Item_shape,
	Make_from_relationship,
	Organization_relationship, 
	Part_definition_relationship,
	Part_function_association,
	Part_occurrence_definition_relationship,
	Part_occurrence_relationship,
	part_occurrence_select,
	Person_in_organization_relationship,
	Product,
	Product_category,
	Product_class,
	Product_class_relationship,
	Product_specification,
	Product_version,
	Product_version_relationship,
	Product_view_definition,
	Project,
   	Project_relationship,
	Representation,
	Representation_relationship,
	Requirement,
	Requirement_version, 
	Security_classification_assignment,
	Shape_element,
   	Shape_element_relationship,
	Solution_element,
	Specification,
	Specification_category,
	Specification_expression, 
	Specification_inclusion,
	String_representation_item,
	Technical_solution,
   	Uncertainty_with_unit
	--   date_role,date_time_role,identification_role,organization_role,person_and_organization_role,time_interval_role,
	View_definition_context);
END_TYPE;

TYPE validity_context_select = SELECT
	(Organization,
	Product_class,
	Product_specification);
END_TYPE;

ENTITY Dated_ineffectivity_assignment;
  assigned_effectivity : Dated_effectivity;
  role : STRING;
  items : SET[1:?] OF effective_element_select_236cc1;
END_ENTITY; 

ENTITY Document_language_identification;
  document: document_or_file;
  used_language: Language;
END_ENTITY;

ENTITY Expression_based_unit
SUBTYPE OF (Unit, Variable_semantics);
INVERSE
  associated_variable_environment: Environment FOR semantics;
END_ENTITY;

ENTITY Individual_definition
SUBTYPE OF (Product_view_definition);
  SELF\Product_view_definition.defined_version : Product_as_individual;
END_ENTITY;

ENTITY Person_in_organization_relationship;
  description : OPTIONAL STRING;
  relating : Person_in_organization;
  related : Person_in_organization;
  relation_type : STRING;
END_ENTITY;

ENTITY Product_specification_to_individual;
  individual_product: Product_as_individual;
  specification: Product_specification;
END_ENTITY;

ENTITY Property_representation_with_restricted_validity
SUBTYPE OF (Property_representation);
  validity_context: validity_context_select;
END_ENTITY;

ENTITY Realized_assembly_relationship
  SUBTYPE OF (Assembly_component_relationship);
  SELF\View_definition_relationship.relating_view : Individual_definition;
  SELF\View_definition_relationship.related_view : Individual_definition;
  realized_occurrence: OPTIONAL part_occurrence_select;
WHERE
WR1: ('CATALOG_DATA_INFORMATION_ARM' + '.PRODUCT_AS_PLANNED' IN TYPEOF(SELF\View_definition_relationship.relating_view.defined_version)) OR
('CATALOG_DATA_INFORMATION_ARM' + '.PRODUCT_AS_REALIZED'  IN TYPEOF(SELF\View_definition_relationship.related_view.defined_version));
END_ENTITY;

ENTITY Unit_variable 
SUBTYPE OF (Unit, Variable_semantics); 
INVERSE 
   associated_variable_environment: Environment FOR semantics; 
END_ENTITY; 


SUBTYPE_CONSTRAINT exclusive_part_definitions_236cc1 FOR Part_view_definition;
ONEOF (Assembly_definition, Collection_definition);
END_SUBTYPE_CONSTRAINT;

SUBTYPE_CONSTRAINT exclusive_product_definitions_236cc1 FOR Product_view_definition;
ONEOF (Part_view_definition,
	Functional_element_definition,
	Physical_element_definition,
	Individual_definition,
	Design_constraint_definition);
END_SUBTYPE_CONSTRAINT;

SUBTYPE_CONSTRAINT exclusive_product_versions_236cc1 FOR Product_version;
ONEOF ( Document_version,
	Part_version,
	Functional_element_version,
	Physical_element_version,
	Product_as_individual,
	Requirement_version);
END_SUBTYPE_CONSTRAINT;


RULE addresses_are_assigned FOR
    (Address);
WHERE
WR1: SIZEOF ( QUERY ( a <* address | 
	SIZEOF( USEDIN( a, 'CATALOG_DATA_INFORMATION_ARM' + '.ADDRESS_ASSIGNMENT.ASSIGNED_ADDRESS')) =0
     ))=0;
END_RULE;

RULE Person_requires_person_and_organization FOR (Person);
WHERE
WR1: SIZEOF ( QUERY ( p <* Person | 
	SIZEOF ( USEDIN ( p ,'CATALOG_DATA_INFORMATION_ARM' + '.PERSON_IN_ORGANIZATION.CONCERNED_PERSON' )) =  0 )) =  0;
END_RULE; 

RULE Shape_requires_product_view FOR (Item_shape);
WHERE
WR1: SIZEOF(QUERY( is <* Item_shape |
	NOT ('CATALOG_DATA_INFORMATION_ARM' + '.PRODUCT_VIEW_DEFINITION' IN TYPEOF(is.described_element))
	))= 0;
WR2: SIZEOF(QUERY( is <* Item_shape |
	SIZEOF(TYPEOF(is.described_element)*
	['CATALOG_DATA_INFORMATION_ARM' + '.FUNCTIONAL_ELEMENT_DEFINITION',
	'CATALOG_DATA_INFORMATION_ARM' + '.DESIGN_CONSTRAINT_DEFINITION'])>0
	))= 0;
END_RULE;

RULE Design_or_specification_for_individual FOR (Product_as_individual);
WHERE
WR1: SIZEOF(QUERY( pai <* Product_as_individual |
  SIZEOF(USEDIN(pai, 'CATALOG_DATA_INFORMATION_ARM' + '.PRODUCT_DESIGN_TO_INDIVIDUAL.INDIVIDUAL_PRODUCT')) +
  SIZEOF(USEDIN(pai, 'CATALOG_DATA_INFORMATION_ARM' + '.PRODUCT_SPECIFICATION_TO_INDIVIDUAL.INDIVIDUAL_PRODUCT'))
	>1 ))=0;
END_RULE;

END_SCHEMA;
