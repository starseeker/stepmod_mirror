<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="2005-01-27T18:24:50" rcs.revision="1.0" description.file="mim_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="component_grouping_mim schema_instance"/>
   <schema name="Component_grouping_mim">
      <interface kind="use" schema="Physical_unit_design_view_mim"/>
      <interface kind="use" schema="Value_with_unit_extension_mim"/>
      <interface kind="use" schema="Interface_component_mim"/>
      <interface kind="use" schema="Assembly_structure_mim"/>
      <entity name="array_placement_group_component_definition" supertypes="assembly_group_component_definition" super.expression="ONEOF (linear_array_placement_group_component_definition, rectangular_array_placement_group_component_definition)"/>
      <entity name="array_placement_group_component_shape_aspect" supertypes="assembly_group_component_shape_aspect" super.expression="ONEOF (linear_array_placement_group_component_shape_aspect, rectangular_array_placement_group_component_shape_aspect)"/>
      <entity name="assembly_group_component_definition" supertypes="component_definition">
         <where label="WR1" expression="(SIZEOF (QUERY (gc &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATING_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'group component') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;       'COMPONENT_DEFINITION' IN&#10;       TYPEOF (gc.related_product_definition)))) &gt;= 1)  OR&#10;       (SIZEOF (QUERY(agcsa &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;        'ASSEMBLY_GROUP_COMPONENT_SHAPE_ASPECT' IN TYPEOF (agcsa)))) = 0)"/>
         <where label="WR2" expression="(SIZEOF (QUERY(aj &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (aj)))) = 0) OR&#10;       (SIZEOF (QUERY(aj &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;       'ASSEMBLY_JOINT' IN TYPEOF (aj)) AND&#10;       (SIZEOF (QUERY( acu &lt;* USEDIN (aj\shape_aspect_relationship.relating_shape_aspect,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;       'ASSEMBLY_COMPONENT_USAGE' IN TYPEOF (acu))&#10;       AND (acu\product_definition_relationship.relating_product_definition = SELF)&#10;       )) &gt;= 1))) &gt;= 1)"/>
         <where label="WR3" expression="(SIZEOF (QUERY(aj &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (aj)))) = 0) OR&#10;       (SIZEOF (QUERY(aj &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (aj))AND&#10;       (SIZEOF (QUERY( acu &lt;* USEDIN (aj\&#10;        shape_aspect_relationship.related_shape_aspect,&#10;        'COMPONENT_GROUPING_MIM.' +&#10;        'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;        ('COMPONENT_GROUPING_MIM.' +&#10;        'ASSEMBLY_COMPONENT_USAGE' IN TYPEOF (acu))&#10;        AND (acu\product_definition_relationship.relating_product_definition = SELF)&#10;        )) = 0))) = 0)"/>
         <where label="WR4" expression="(SIZEOF (QUERY(aj &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (aj)))) = 0) OR&#10;       (SIZEOF (QUERY(aj &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (aj)) AND&#10;       (SIZEOF (QUERY( cl &lt;* USEDIN (aj\&#10;        shape_aspect_relationship.related_shape_aspect.of_shape.definition,&#10;        'COMPONENT_GROUPING_MIM.' +&#10;        'REPRESENTATION.ITEMS') |&#10;        ('COMPONENT_GROUPING_MIM.' +&#10;        'COMPONENT_LOCATION' IN TYPEOF (cl))&#10;        AND (aj IN cl\representation.items))) = 0))) = 0)"/>
      </entity>
      <entity name="assembly_group_component_definition_placement_link" supertypes="product_definition product_definition_relationship">
         <where label="WR1" expression="SELF\product_definition_relationship.related_product_definition :&lt;&gt;:&#10;       SELF\product_definition_relationship.relating_product_definition"/>
         <where label="WR2" expression="'COMPONENT_GROUPING_MIM.' +&#10;       'COMPONENT_DEFINITION' IN&#10;       TYPEOF (SELF\product_definition_relationship.related_product_definition)"/>
         <where label="WR3" expression="'COMPONENT_GROUPING_MIM.' +&#10;       'COMPONENT_DEFINITION' IN&#10;       TYPEOF (SELF\product_definition_relationship.relating_product_definition)"/>
         <where label="WR4" expression="SIZEOF(TYPEOF(SELF) - TYPEOF(SELF\product_definition ||&#10;       SELF\product_definition_relationship ||&#10;       SELF\assembly_group_component_definition_placement_link)) = 0"/>
         <where label="WR5" expression="SELF\product_definition.name = ''"/>
         <where label="WR6" expression="SELF\product_definition_relationship.name = ''"/>
         <where label="WR7" expression="SIZEOF(USEDIN(SELF, &#10;             'COMPONENT_GROUPING_MIM.' +&#10;             'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')) = 1"/>
      </entity>
      <entity name="assembly_group_component_shape_aspect" supertypes="component_shape_aspect">
         <where label="WR1" expression="(SIZEOF (QUERY (gc &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'group component') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;       'COMPONENT_SHAPE_ASPECT' IN&#10;       TYPEOF (gc.related_shape_aspect))))&#10;       &gt;= 1)"/>
      </entity>
      <entity name="assembly_group_component_shape_aspect_placement_link" supertypes="shape_aspect shape_aspect_relationship">
         <where label="WR1" expression="SELF\shape_aspect_relationship.related_shape_aspect :&lt;&gt;:&#10;       SELF\shape_aspect_relationship.relating_shape_aspect"/>
         <where label="WR2" expression="'COMPONENT_GROUPING_MIM.' +&#10;       'COMPONENT_SHAPE_ASPECT' IN&#10;       TYPEOF (SELF\shape_aspect_relationship.related_shape_aspect)"/>
         <where label="WR3" expression="'COMPONENT_GROUPING_MIM.' +&#10;       'COMPONENT_SHAPE_ASPECT' IN&#10;       TYPEOF (SELF\shape_aspect_relationship.relating_shape_aspect)"/>
         <where label="WR4" expression="SIZEOF(TYPEOF(SELF) - TYPEOF(SELF\shape_aspect ||&#10;       SELF\shape_aspect_relationship ||&#10;       SELF\assembly_group_component_shape_aspect_placement_link)) = 0"/>
         <where label="WR5" expression="SELF\shape_aspect.name = ''"/>
         <where label="WR6" expression="SELF\shape_aspect_relationship.name = ''"/>
         <where label="WR7" expression="SIZEOF(USEDIN(SELF, &#10;             'COMPONENT_GROUPING_MIM.' +&#10;             'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) = 1"/>
      </entity>
      <entity name="interfaced_group_component_definition" supertypes="assembly_group_component_definition">
         <where label="WR1" expression="(SIZEOF (QUERY (gc &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'COMPONENT_GROUPING_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATING_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'group component') |&#10;       ('COMPONENT_GROUPING_MIM.' +&#10;       'INTERFACE_COMPONENT_DEFINITION' IN &#10;       TYPEOF (gc.related_product_definition))))&#10;       &gt;= 1)"/>
      </entity>
      <entity name="linear_array_component_definition_link" supertypes="product_definition product_definition_relationship">
         <where label="WR1" expression="SELF\product_definition_relationship.related_product_definition :&lt;&gt;:&#10;       SELF\product_definition_relationship.relating_product_definition"/>
         <where label="WR2" expression="'COMPONENT_GROUPING_MIM.' +&#10;       'LINEAR_ARRAY_PLACEMENT_GROUP_COMPONENT_DEFINITION' IN&#10;       TYPEOF (SELF\product_definition_relationship.related_product_definition)"/>
         <where label="WR3" expression="'COMPONENT_GROUPING_MIM.' +&#10;       'LINEAR_ARRAY_PLACEMENT_GROUP_COMPONENT_DEFINITION' IN&#10;       TYPEOF (SELF\product_definition_relationship.relating_product_definition)"/>
         <where label="WR4" expression="SIZEOF(TYPEOF(SELF) - TYPEOF(SELF\product_definition ||&#10;       SELF\product_definition_relationship ||&#10;       SELF\linear_array_component_definition_link)) = 0"/>
         <where label="WR5" expression="SELF\product_definition.name = ''"/>
         <where label="WR6" expression="SELF\product_definition_relationship.name = ''"/>
         <where label="WR7" expression="SIZEOF(USEDIN(SELF, &#10;             'COMPONENT_GROUPING_MIM.' +&#10;             'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')) = 1"/>
      </entity>
      <entity name="linear_array_component_shape_aspect_link" supertypes="shape_aspect shape_aspect_relationship">
         <where label="WR1" expression="SELF\shape_aspect_relationship.related_shape_aspect :&lt;&gt;:&#10;       SELF\shape_aspect_relationship.relating_shape_aspect"/>
         <where label="WR2" expression="'COMPONENT_GROUPING_MIM.' +&#10;       'LINEAR_ARRAY_PLACEMENT_GROUP_COMPONENT_SHAPE_ASPECT' IN&#10;       TYPEOF (SELF\shape_aspect_relationship.related_shape_aspect)"/>
         <where label="WR3" expression="'COMPONENT_GROUPING_MIM.' +&#10;       'LINEAR_ARRAY_PLACEMENT_GROUP_COMPONENT_SHAPE_ASPECT' IN&#10;       TYPEOF (SELF\shape_aspect_relationship.relating_shape_aspect)"/>
         <where label="WR4" expression="SIZEOF(TYPEOF(SELF) - TYPEOF(SELF\shape_aspect ||&#10;       SELF\shape_aspect_relationship ||&#10;       SELF\linear_array_component_shape_aspect_link)) = 0"/>
         <where label="WR5" expression="SELF\shape_aspect.name = ''"/>
         <where label="WR6" expression="SELF\shape_aspect_relationship.name = ''"/>
         <where label="WR7" expression="SIZEOF(USEDIN(SELF, &#10;             'COMPONENT_GROUPING_MIM.' +&#10;             'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) = 1"/>
      </entity>
      <entity name="linear_array_placement_group_component_definition" supertypes="array_placement_group_component_definition"/>
      <entity name="linear_array_placement_group_component_shape_aspect" supertypes="array_placement_group_component_shape_aspect"/>
      <entity name="rectangular_array_placement_group_component_definition" supertypes="array_placement_group_component_definition"/>
      <entity name="rectangular_array_placement_group_component_shape_aspect" supertypes="array_placement_group_component_shape_aspect"/>
      <rule name="product_definition_formation_requires_approval" appliesto="product_definition applied_approval_assignment">
         <where label="WR1" expression="SIZEOF (QUERY (pd &lt;* product_definition |&#10;       (NOT('COMPONENT_GROUPING_MIM.' +&#10;       'ASSEMBLY_GROUP_COMPONENT_DEFINITION' IN TYPEOF(pd))) AND&#10;       (NOT (SIZEOF (QUERY (aaa &lt;* applied_approval_assignment |&#10;       pd.formation IN aaa.items )) = 1 )))) = 0"/>
      </rule>
   </schema>
</express>
