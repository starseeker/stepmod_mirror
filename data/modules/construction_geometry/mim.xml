<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.25 2002/11/06 00:59:57 thendrix Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  description.file="mim_descriptions.xml"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.25"
    source="../data/modules/construction_geometry/mim.exp"/>

  <schema name="Construction_geometry_mim">
    <interface
      kind="use"
      schema="Elemental_geometric_shape_mim">
    </interface>

    <interface
      kind="use"
      schema="geometry_schema">
      <interfaced.item
        name="b_spline_curve"/>
      <interfaced.item
        name="circle"/>
      <interfaced.item
        name="composite_curve"/>
      <interfaced.item
        name="conical_surface"/>
      <interfaced.item
        name="curve"/>
      <interfaced.item
        name="curve_bounded_surface"/>
      <interfaced.item
        name="curve_replica"/>
      <interfaced.item
        name="cylindrical_surface"/>
      <interfaced.item
        name="ellipse"/>
      <interfaced.item
        name="hyperbola"/>
      <interfaced.item
        name="line"/>
      <interfaced.item
        name="offset_curve_2d"/>
      <interfaced.item
        name="offset_curve_3d"/>
      <interfaced.item
        name="parabola"/>
      <interfaced.item
        name="pcurve"/>
      <interfaced.item
        name="placement"/>
      <interfaced.item
        name="plane"/>
      <interfaced.item
        name="point_on_curve"/>
      <interfaced.item
        name="point_on_surface"/>
      <interfaced.item
        name="polyline"/>
      <interfaced.item
        name="rectangular_composite_surface"/>
      <interfaced.item
        name="rectangular_trimmed_surface"/>
      <interfaced.item
        name="spherical_surface"/>
      <interfaced.item
        name="surface"/>
      <interfaced.item
        name="surface_replica"/>
      <interfaced.item
        name="toroidal_surface"/>
      <interfaced.item
        name="trimmed_curve"/>
    </interface>

    <interface
      kind="use"
      schema="topology_schema">
      <interfaced.item
        name="edge_curve"/>
      <interfaced.item
        name="face_surface"/>
      <interfaced.item
        name="vertex_point"/>
    </interface>

    <entity
      name="constructive_geometry_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="('CONSTRUCTION_GEOMETRY_MIM.GEOMETRIC_REPRESENTATION_CONTEXT' IN         TYPEOF(SELF.context_of_items)) AND        ({2 &lt;= SELF.context_of_items\geometric_representation_context.        coordinate_space_dimension &lt;= 3})">
      </where>
      <where
        label="WR2"
        expression="SIZEOF( QUERY( cgr_i &lt;* SELF.items |                 SIZEOF(['CONSTRUCTIVE_GEOMETRY_MIM.PLACEMENT',                        'CONSTRUCTION_GEOMETRY_MIM.CURVE',                        'CONSTRUCTION_GEOMETRY_MIM.EDGE',                        'CONSTRUCTION_GEOMETRY_MIM.FACE',                        'CONSTRUCTION_GEOMETRY_MIM.POINT',                        'CONSTRUCTION_GEOMETRY_MIM.SURFACE',        	          'CONSTRUCTION_GEOMETRY_MIM.FACE_SURFACE',                        'CONSTRUCTION_GEOMETRY_MIM.VERTEX_POINT'] * TYPEOF(cgr_i)) &lt;&gt; 1              )) = 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF( USEDIN( SELF, 'CONSTRUCTION_GEOMETRY_MIM.' +                     'REPRESENTATION_RELATIONSHIP.REP_2')               ) &gt; 0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF( USEDIN( SELF, 'CONSTRUCTION_GEOMETRY_MIM.' +                     'REPRESENTATION_MAP.MAPPED_REPRESENTATION')              ) = 0">
      </where>
    </entity>

    <entity
      name="constructive_geometry_representation_relationship"
      supertypes="representation_relationship">
      <explicit
        name="rep_2">
        <redeclaration
          entity-ref="representation_relationship"/>
          <typename
            name="constructive_geometry_representation"/>
        </explicit>
        <where
          label="WR1"
          expression="(SELF.rep_1.context_of_items :=: SELF.rep_2.context_of_items) AND             ('CONSTRUCTION_GEOMETRY_MIM.GEOMETRIC_REPRESENTATION_CONTEXT' IN              TYPEOF(SELF.rep_1.context_of_items))">
        </where>
        <where
          label="WR2"
          expression="SIZEOF(['CONSTRUCTION_GEOMETRY_MIM.SHAPE_REPRESENTATION',              'CONSTRUCTION_GEOMETRY_MIM.CONSTRUCTIVE_GEOMETRY_REPRESENTATION'] *               TYPEOF(SELF.rep_1)) = 1">
        </where>
        <where
          label="WR3"
          expression="NOT('CONSTRUCTION_GEOMETRY_MIM.' +              'REPRESENTATION_RELATIONSHIP_WITH_TRANSFORMATION' IN TYPEOF(SELF))">
        </where>
      </entity>

    </schema>

  </express>
