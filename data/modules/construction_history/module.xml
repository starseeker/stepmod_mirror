<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: module.xml,v 1.1 2002/09/12 14:50:11 darla Exp $ -->
<!DOCTYPE module SYSTEM "../../../dtd/module.dtd">
<!-- Generated by mkmodule.js, Eurostep Limited, http://www.eurostep.com -->
 <!-- 
     To view the module in IExplorer, open: sys/1_scope.xml
      -->
<module
   name="construction_history"
   part="1119"
   version="1"
   wg.number="00000"
   wg.number.arm="1051"
   wg.number.mim="1052"
   checklist.internal_review=""
   checklist.project_leader=""
   checklist.convener=""
   status="CD-TS"
   language="E"
   publication.year=""
   published="n"
   rcs.date="$Date: 2002/09/12 14:50:11 $"
   rcs.revision="$Revision: 1.1 $">

 <keywords>
    module, procedural modelling, constructive solid geometry, operations, history
 </keywords>

 <!-- Reference to contacts detailed in stepmod/data/basic/contacts.xml -->
 <contacts>
   <projlead ref="ap203ed2.projlead"/>
   <editor ref="ap203ed2.editor"/>
 </contacts>

 <!-- Introduction -->
 <!-- The introduction should start as shown: -->
 <purpose>
   <p>
     This part of ISO 10303 specifies an application module for the
     representation of construction history.  This construction history application module supports the requirement to exchange feature-based construction operations that will enable editing the design in the target CAD system.    The principal objective for exchanging SMCH is to enable users to transfer a 'intelligent solid' in a native system through STEP into a target system, and still have an 'intelligent solid', that is, a solid that maintains the original relationships and that can be modified/edited.  
Any type of CAD system, while in operation, generates an explicit model with specific numerical values for all parameters. In this document such a model is referred to as an explicit shape representation. It is used during a design session to display a picture of the modeled product, and it allows the designer to interact with the system by picking entities of the current result model from the screen for modification or for use in constructional operations.  Since the schema accompanying this document is using a procedural or history-based approach, the current result is sent in the file as a Brep solid to validate that the procedural model created on the target system is correct.
It is important to note that the features are subtypes of shape_aspect, which is the same as in Part 224/214; a major difference is that construction history exchange has some additional requirements for a mechanism to explicitly capture certain entities, such as an edge used as the basis for defining a fillet. That edge is no longer in the brep model after filleting is done, but it must be represented in the exchange file for re-creation of the fillet and any subsequent modification in the receiving CAD system.

   </p>
 </purpose>

 <!-- Items in scope -->
 <inscope>
   <li>Mechanisms to represent a Hybrid model to enable an implicit representation and also a current result, which would be an explicit representation</li>
  <li>Basic features that provide the structure to access key data, such as the edge that was used to create a fillet  </li>
   <li>Structures from the Constructive_solid_ geometry_3d module using Boolean operations (regularised) of union, intersection, and difference on solid primitives, manifold breps, and other solids </li>
 
 </inscope>

 <!-- Items out of scope -->
 <outscope>
   <li>explicit representations without associated construction history</li>
 </outscope>

 <normrefs>

   <normref.inc normref="ref10303-31.2000"/>
   <normref.inc normref="ref10303-41.2000"/>
     <normref.inc normref="ref10303-42.2000"/>
       <normref.inc normref="ref10303-224.2001"/>
         <normref.inc normref="ref10303-1066.-"/>
 </normrefs>


<!-- <definition/>

 <abbreviations/>
-->

 <!-- Clause 4 ARM  -->
 <arm>
   <!-- Note ARM short form EXPRESS is in arm.xml -->
   <!-- Units of functionality -->
   <uof name="Construction_History">
     <description>The Construction_History UoF specifies the data structure for theexchange of design history of a solid model between CAD systems that will enable editing of the model in the receiving system.
     </description>
     <uof.ae entity="Hybrid_shape_model"/>
         <uof.ae entity="Procedural_shape_model"/>
             <uof.ae entity="Geometric_operation_sequence"/>
                 <uof.ae entity="Chosen_shape_element"/>
                     <uof.ae entity="Transition_feature_solid"/>
                         <uof.ae entity="Fillet"/>
                             <uof.ae entity="Round"/>
                                 <uof.ae entity="Chamfer"/>
   </uof>

   <!-- Short form EXPRESS-G -->
   <express-g>
     <imgfile file="armexpg1.xml"/>
   </express-g>
 </arm>


 <!-- Clause 5.1 Mapping specification -->
 <mapping_table>
   <ae entity="Hybrid_shape_model"> 
    <aimelt>explicit_procedural_shape_representation_relationship</aimelt>
<source> ISO 10303 WG12 N1036</source>
<refpath>explicit_procedural_shape_representation_relationship &lt;= 
		explicit_procedural_representation_relationship &lt;=
representation_relationship</refpath>
</ae>
<ae entity="Procedural_shape_model">
<aimelt>procedural_shape_representation</aimelt>
<source>ISO 10303 WG12 N1036</source>
<refpath> procedural_shape_representation &lt;= procedural_representation 
		 procedural_representation &lt;= representation</refpath>
</ae>
<ae entity="Transition_feature_solid">
<alt_map id="1">
<description>when the entity is a subtype of shape_aspect</description>
<aimelt> transition_feature_solid</aimelt>
<source>ISO 10303-41</source>
<refpath>transition_feature_solid &lt;= shape_aspect</refpath>
</alt_map> 
<alt_map id="2">
<description>when the entity is a subtype of solid_model</description>
<aimelt> transition_feature_solid</aimelt>
<source>ISO 10303-42</source>
<refpath>transition_feature_solid &lt;= solid_model</refpath>
</alt_map>
<alt_map id="3">
<description>when the entity is a subtype of procedural_shape_representation</description>
<aimelt> transition_feature_solid</aimelt>
<source>ISO 10303-42</source>
<refpath>transition_feature_solid &lt;= procedural_shape_representation_sequence</refpath>
</alt_map>
</ae>
<ae entity="Fillet">
<aimelt> edge_blend_fillet</aimelt>
<source>ISO 10303-41</source>
<refpath>edge_blend_fillet  &lt;=  transition_feature_solid
		  transition_feature_solid &lt;= shape_aspect</refpath>
		

<aa attribute="chosen_element" assertion_to="Detailed_geometric_model">
<aimelt>PATH</aimelt>
<refpath>edge_blend_fillet  &lt;=  selected_geometric_element
		  selected_geometric_element.picked_element -&gt; geometric_representation_item
		  geometric_representation_item = trimmed_curve</refpath>
</aa>

<aa attribute="chosen_element" assertion_to="Detailed_topological_model">
<refpath>edge_blend_fillet  &lt;=  selected_geometric_element
		  selected_geometric_element.picked_element -&gt; topological_representation_item
		  topological_representation_item = edge_curve</refpath>
</aa>

<aa attribute="chosen_element" assertion_to="Solid_model">
<aimelt>PATH</aimelt>
<refpath>edge_blend_fillet &lt;= transition_feature_solid
transition_feature_solid &lt;= shape_aspect
shape_definition = shape_aspect
shape_definition
characterized_definition = shape_definition
characterized_definition &lt;-
property_definition.definition
property_definition &lt;-
property_definition_representation.definition
{property_definition_representation =&gt;
shape_definition_representation}
property_definition_representation
property_definition_representation.used_representation -&gt;
representation =&gt;
shape_representation =&gt;
 representation
representation.items[i] -&gt;
representation_item =&gt; geometric_representation_item
geometric_representation_item =&gt; solid_model</refpath>
</aa>

<aa attribute="radius" assertion_to="Numerical_item_with_unit">
<aimelt>PATH</aimelt>

<refpath>edge_blend_fillet &lt;= transition_feature_solid
transition_feature_solid &lt;= shape_aspect
shape_definition = shape_aspect
shape_definition
characterized_definition = shape_definition
characterized_definition &lt;-
property_definition.definition
property_definition &lt;-
property_definition_representation.definition
{property_definition_representation =&gt;
shape_definition_representation}
property_definition_representation
property_definition_representation.used_representation ->
{representation =&gt;
shape_representation =&gt;
 shape_representation_with_parameters}
representation
representation.items[i] -&gt;
{representation_item
representation_item.name = 'fillet radius '}
representation_item =&gt;
measure_representation_item
{measure_representation_item &lt;=
measure_with_unit =&gt;
length_measure_with_unit}</refpath>
</aa>
</ae>
<ae entity="Round">

<aimelt>edge_blend_round</aimelt> 
<source>ISO 10303-41</source>
<refpath>edge_blend_round  &lt;=  transition_feature_solid
transition_feature_solid &lt;= shape_aspect</refpath> 

<aa attribute="chosen_enity" assertion_to="Detailed_geometric_model_element">
<aimelt>PATH</aimelt>

<refpath>edge_blend_round  &lt;=  selected_geometric_element
		  selected_geometric_element.picked_element -&gt; geometric_representation_item
		  geometric_representation_item = trimmed_curve</refpath>
</aa>
<aa attribute="chosen_enity" assertion_to="Detailed_topological_model_element">

<refpath>edge_blend_round  &lt;=  selected_geometric_element
		  selected_geometric_element.picked_element -&gt; topological_representation_item
		  topological_representation_item = edge_curve</refpath>
</aa>

<aa attribute="chosen_enity" assertion_to="Solid_model">
<aimelt>PATH</aimelt>

<refpath>edge_blend_round &lt;= transition_feature_solid
transition_feature_solid &lt;= shape_aspect
shape_definition = shape_aspect
shape_definition
characterized_definition = shape_definition
characterized_definition &lt;-
property_definition.definition
property_definition &lt;-
property_definition_representation.definition
{property_definition_representation =&gt;
shape_definition_representation}
property_definition_representation
property_definition_representation.used_representation -&gt;
representation =&gt;
shape_representation =&gt;
 representation
representation.items[i] -&gt;
representation_item =&gt; geometric_representation_item
geometric_representation_item =&gt; solid_model</refpath>
</aa>


<aa attribute="radius" assertion_to="Numerical_item_with_unit">
<aimelt>PATH</aimelt>
<refpath>edge_blend_fillet &lt;= transition_feature_solid
transition_feature_solid &lt;= shape_aspect
shape_definition = shape_aspect
shape_definition
characterized_definition = shape_definition
characterized_definition &lt;-
property_definition.definition
property_definition &lt;-
property_definition_representation.definition
{property_definition_representation =&gt;
shape_definition_representation}
property_definition_representation
property_definition_representation.used_representation -&gt;
{representation =&gt;
shape_representation =&gt;
 shape_representation_with_parameters}
representation
representation.items[i] -&gt;
{representation_item
representation_item.name = 'round radius '}
representation_item =&gt;
measure_representation_item
{measure_representation_item &lt;=
measure_with_unit =&gt;
length_measure_with_unit}</refpath>
</aa>
</ae>
<ae entity="Chamfer">
<aimelt>edge_blend_chamfer</aimelt>
 <source>ISO 10303-41</source>
<refpath>edge_blend_fillet  &lt;=  transition_feature_solid
		  transition_feature_solid &lt;= shape_aspect</refpath>
	

<aa attribute="chosen_element" assertion_to="Detailed_geometric_model_element">
<aimelt>PATH</aimelt>
<refpath>edge_blend_chamfer  &lt;=  selected_geometric_element
		  selected_geometric_element.picked_element -&gt; geometric_representation_item
		  geometric_representation_item = trimmed_curve</refpath>
</aa>

<aa attribute="chosen_element" assertion_to="Detailed_topological_model_element">
<refpath>edge_blend_chamfer &lt;=  selected_geometric_element
		  selected_geometric_element.picked_element -&gt; topological_representation_item
		  topological_representation_item = edge_curve</refpath>
</aa>
<aa attribute="chosen_element" assertion_to="Solid_model">
<aimelt>PATH</aimelt>
<refpath>edge_blend_chamfer &lt;= transition_feature_solid
transition_feature_solid &lt;= shape_aspect
shape_definition = shape_aspect
shape_definition
characterized_definition = shape_definition
characterized_definition &lt;-
property_definition.definition
property_definition &lt;-
property_definition_representation.definition
{property_definition_representation =&gt;
shape_definition_representation}
property_definition_representation
property_definition_representation.used_representation -&gt;
representation =&gt;
shape_representation =&gt;
 representation
representation.items[i] -&gt;
representation_item =&gt; geometric_representation_item
geometric_representation_item =&gt; solid_model</refpath>
</aa>

<aa attribute="distance1" assertion_to="Numerical_item_with_unit">
<aimelt>PATH</aimelt>

<refpath>edge_blend_chamfer &lt;= transition_feature_solid
transition_feature_solid &lt;= shape_aspect
shape_definition = shape_aspect
shape_definition
characterized_definition = shape_definition
characterized_definition &lt;-
property_definition.definition
property_definition &lt;-
property_definition_representation.definition
{property_definition_representation =&gt;
shape_definition_representation}
property_definition_representation
property_definition_representation.used_representation -&gt;
{representation =&gt;
shape_representation =&gt;
 shape_representation_with_parameters}
representation
representation.items[i] -&gt;
{representation_item
representation_item.name = 'distance along face1 '}
representation_item =&gt;
measure_representation_item
{measure_representation_item &lt;=
measure_with_unit =&gt;
length_measure_with_unit}</refpath>
</aa>

<aa attribute="distance2" assertion_to="Numerical_item_with_unit">
<aimelt>PATH</aimelt>

<refpath>edge_blend_chamfer &lt;= transition_feature_solid
transition_feature_solid &lt;= shape_aspect
shape_definition = shape_aspect
shape_definition
characterized_definition = shape_definition
characterized_definition &lt;-
property_definition.definition
property_definition &lt;-
property_definition_representation.definition
{property_definition_representation =&gt;
shape_definition_representation}
property_definition_representation
property_definition_representation.used_representation -&gt;
{representation =&gt;
shape_representation =&gt;
 shape_representation_with_parameters}
representation
representation.items[i] -&gt;
{representation_item
representation_item.name = 'distance along face1 '}
representation_item =&gt;
measure_representation_item
{measure_representation_item &lt;=
measure_with_unit =&gt;
length_measure_with_unit}</refpath>
</aa>


<aa attribute="face1" assertion_to="Face">
<aimelt>PATH</aimelt>

<refpath>edge_blend_chamfer &lt;= transition_feature_solid
transition_feature_solid &lt;= shape_aspect
shape_definition = shape_aspect
shape_definition
characterized_definition = shape_definition
characterized_definition &lt;-
property_definition.definition
property_definition &lt;-
property_definition_representation.definition
{property_definition_representation =&gt;
shape_definition_representation}
property_definition_representation
property_definition_representation.used_representation -&gt;
representation =&gt;
shape_representation =&gt;
 representation
representation.items[i] -&gt;
representation_item =&gt; topological_representation_item
topological_representation_item =&gt; face</refpath>
</aa>


<aa attribute="face2" assertion_to="Face">
<aimelt>PATH</aimelt>

<refpath>edge_blend_chamfer &lt;= transition_feature_solid
transition_feature_solid &lt;= shape_aspect
shape_definition = shape_aspect
shape_definition
characterized_definition = shape_definition
characterized_definition &lt;-
property_definition.definition
property_definition &lt;-
property_definition_representation.definition
{property_definition_representation =&gt;
shape_definition_representation}
property_definition_representation
property_definition_representation.used_representation -&gt;
representation =&gt;
shape_representation =&gt;
 representation
representation.items[i] -&gt;
representation_item =&gt; topological_representation_item
topological_representation_item =&gt; face</refpath>
</aa>
</ae>
<ae entity="Chosen_shape_element">
<aimelt>selected_geometric_element</aimelt>
<source>ISO 10303 WG12 N1036</source>
<refpath>selected_geometric_element &lt;= geometric_representation_item</refpath>

<aa attribute="picked_element" assertion_to="Detailed_geometric_model_element">
<aimelt>PATH</aimelt>
<refpath>selected_geometric_element &lt;= geometric_representation_item
		  selected_geometric_element.picked_element -&gt; geometric_representation_item
		  geometric_representation_item = trimmed_curve</refpath>
</aa>

<aa attribute="picked_element" assertion_to="Detailed_topological_model_element">
<aimelt>PATH</aimelt>
<refpath>selected_geometric_element &lt;= geometric_representation_item
		  selected_geometric_element.picked_element -&gt; topological_representation_item
		  geometric_representation_item = edge_curve</refpath>
</aa>

   </ae>
 </mapping_table>

 <!-- Clause 5.2 MIM -->
 <mim>
   <!--  Note MIM short form express is in mim.xml -->
   <express-g>
     <imgfile file="mimexpg1.xml"/>
   </express-g>

<shortnames>
      <shortname name="TRFTSL" entity="transition_feature_solid"/>
      <shortname name="EDGBLN" entity="edge_blend"/>
      <shortname name="EDBLFL" entity="edge_blend_fillet"/>
      <shortname name="EBFCR" entity="edge_blend_fillet_constant_radius"/>
      <shortname name="EDBLRN" entity="edge_blend_round"/>
      <shortname name="EBRCR" entity="edge_blend_round_constant_radius"/>
      <shortname name="EDBLCH" entity="edge_blend_chamfer"/>  
 	  </shortnames>
</mim>
</module>
