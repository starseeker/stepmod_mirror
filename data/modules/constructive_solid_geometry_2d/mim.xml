<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" description.file="mim_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="constructive_solid_geometry_2d_mim schema_instance"/>
   <schema name="Constructive_solid_geometry_2d_mim">
      <interface kind="use" schema="Elemental_geometric_shape_mim"/>
      <interface kind="use" schema="representation_schema">
         <interfaced.item name="compound_representation_item"/>
         <interfaced.item name="mapped_item"/>
      </interface>
      <interface kind="use" schema="geometric_model_schema">
         <interfaced.item name="boolean_result"/>
         <interfaced.item name="csg_solid"/>
         <interfaced.item name="elliptic_area"/>
         <interfaced.item name="polygonal_area"/>
         <interfaced.item name="rectangular_area"/>
         <interfaced.item name="half_space_2d"/>
         <interfaced.item name="primitive_2d"/>
      </interface>
      <interface kind="use" schema="geometry_schema">
         <interfaced.item name="composite_curve"/>
      </interface>
      <type name="boolean_operand_2d">
         <select selectitems="primitive_2d boolean_result_2d half_space_2d" genericentity="NO" extensible="NO"/>
      </type>
      <type name="compound_inner_area_boundary">
         <select selectitems="set_inner_area_boundary" genericentity="NO" extensible="NO"/>
      </type>
      <type name="csg_2d_area_select">
         <select selectitems="axis2_placement_2d csg_primitive_solid_2d" genericentity="NO" extensible="NO"/>
      </type>
      <type name="csg_2d_shape_select">
         <select selectitems="mapped_item axis2_placement_2d csg_solid_2d" genericentity="NO" extensible="NO"/>
      </type>
      <type name="csg_select_2d">
         <select selectitems="primitive_2d boolean_result_2d" genericentity="NO" extensible="NO"/>
      </type>
      <type name="set_inner_area_boundary">
         <aggregate type="SET" lower="1" upper="?" unique="NO" optional="NO"/>
         <typename name="primitive_2d"/>
      </type>
      <entity name="area_with_outer_boundary" supertypes="complex_area half_space_2d" abstract.supertype="NO" abstract.entity="NO">
         <explicit name="base_curve" optional="NO">
            <typename name="composite_curve"/>
            <redeclaration entity-ref="half_space_2d"/>
         </explicit>
      <where label="IP1"/>
      </entity>
      <entity name="boolean_result_2d" supertypes="boolean_result" abstract.supertype="NO" abstract.entity="NO">
         <explicit name="first_operand" optional="NO">
            <typename name="boolean_operand_2d"/>
            <redeclaration entity-ref="boolean_result"/>
         </explicit>
         <explicit name="second_operand" optional="NO">
            <typename name="boolean_operand_2d"/>
            <redeclaration entity-ref="boolean_result"/>
         </explicit>
      </entity>
      <entity name="bounded_area" abstract.supertype="YES" supertypes="half_space_2d" super.expression="area_with_outer_boundary" abstract.entity="NO">
         <explicit name="base_curve" optional="NO">
            <typename name="composite_curve"/>
            <redeclaration entity-ref="half_space_2d"/>
         </explicit>
         <where label="WR1" expression="base_curve.closed_curve"/>
         <where label="WR2" expression="NOT(base_curve.self_intersect)"/>
      </entity>
      <entity name="complex_area" abstract.supertype="YES" supertypes="primitive_2d" super.expression="area_with_outer_boundary" abstract.entity="NO"/>
      <entity name="csg_2d_shape_representation" supertypes="shape_representation" abstract.supertype="NO" abstract.entity="NO">
         <explicit name="items" optional="NO">
            <aggregate type="SET" lower="1" upper="?" unique="NO" optional="NO"/>
            <typename name="csg_2d_shape_select"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
         <where label="WR1" expression="SELF.context_of_items\geometric_representation_context.coordinate_space_dimension = 2"/>
         <where label="WR2" expression="SIZEOF(QUERY ( it &lt;* SELF.items | &#10;       (SIZEOF(['CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.CSG_SOLID']&#10;      * TYPEOF(it)) = 1) &#10;      OR &#10;    (('CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.MAPPED_ITEM' &#10;    IN TYPEOF(it)) AND&#10;    ('CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.' +&#10;    'CSG_2D_SHAPE_REPRESENTATION' &#10;    IN TYPEOF(it\mapped_item.mapping_source.mapped_representation))) &#10;       )) &gt;= 1"/>
         <where label="WR3" expression="SIZEOF(QUERY ( it &lt;* SELF.items | &#10;       (('CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.MAPPED_ITEM' &#10;       IN TYPEOF(it)) AND (NOT (( &#10;       'CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.' +&#10;       'CSG_2D_SHAPE_REPRESENTATION') &#10;       IN TYPEOF(it\mapped_item.mapping_source.mapped_representation)))) )) = 0"/>
      </entity>
      <entity name="csg_primitive_solid_2d" supertypes="csg_solid_2d" abstract.supertype="NO" abstract.entity="NO">
         <explicit name="tree_root_expression" optional="NO">
            <typename name="primitive_2d"/>
            <redeclaration entity-ref="csg_solid"/>
         </explicit>
      </entity>
      <entity name="csg_solid_2d" supertypes="csg_solid" abstract.supertype="NO" abstract.entity="NO">
         <explicit name="tree_root_expression" optional="NO">
            <typename name="csg_select_2d"/>
            <redeclaration entity-ref="csg_solid"/>
         </explicit>
      </entity>
      <entity name="primitive_2d_with_inner_boundary" supertypes="primitive_2d compound_representation_item" abstract.supertype="NO" abstract.entity="NO">
         <explicit name="inner_boundary" optional="NO">
            <typename name="compound_inner_area_boundary"/>
            <redeclaration entity-ref="compound_representation_item" old_name="item_element"/>
         </explicit>
         <where label="WR1" expression="SIZEOF(['GEOMETRIC_MODEL_SCHEMA.CIRCULAR_AREA', 'GEOMETRIC_MODEL_SCHEMA.ELLIPTIC_AREA', 'GEOMETRIC_MODEL_SCHEMA.RECTANGULAR_AREA',&#10;        'GEOMETRIC_MODEL_SCHEMA.POLYGONAL_AREA', 'CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.COMPLEX_AREA'] * TYPEOF(SELF)) &gt; 0"/>
         <where label="WR2" expression="SIZEOF(QUERY(inner &lt;* inner_boundary |&#10;        'CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.PRIMITIVE_2D_WITH_INNER_BOUNDARY' IN TYPEOF(inner))) = 0"/>
      </entity>
      <entity name="single_area_csg_2d_shape_representation" supertypes="csg_2d_shape_representation" abstract.supertype="NO" abstract.entity="NO">
         <explicit name="items" optional="NO">
            <aggregate type="SET" lower="1" upper="?" unique="NO" optional="NO"/>
            <typename name="csg_2d_area_select"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
         <where label="WR1" expression="SIZEOF (QUERY (it &lt;* SELF.items| &#10;     ('CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.MAPPED_ITEM' &#10;     IN TYPEOF(it)) )) = 0"/>
         <where label="WR2" expression="SIZEOF (QUERY (it &lt;* SELF.items| &#10;     ('CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.CSG_SOLID_2D' &#10;     IN TYPEOF(it)) )) = 1"/>
      </entity>
      <entity name="single_boundary_csg_2d_shape_representation" supertypes="single_area_csg_2d_shape_representation" abstract.supertype="NO" abstract.entity="NO">
         <where label="WR1" expression="SIZEOF(QUERY ( it &lt;* SELF.items |&#10;      (('CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.CSG_PRIMITIVE_SOLID_2D' IN TYPEOF(it)) AND&#10;      (NOT (( 'CONSTRUCTIVE_SOLID_GEOMETRY_2D_MIM.PRIMITIVE_2D_WITH_INNER_BOUNDARY') IN&#10;      TYPEOF(it\csg_primitive_solid_2d.tree_root_expression)))) )) = 0"/>
      </entity>
      <subtype.constraint name="primitive_2d_subtypes" entity="primitive_2d" super.expression="ONEOF (elliptic_area, rectangular_area, polygonal_area, complex_area)" abstract.supertype="NO"/>
   </schema>
</express>
