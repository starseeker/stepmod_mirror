<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.24 2002/10/21 13:28:40 goset1 Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  description.file="mim_descriptions.xml"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $"
>

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.24"
    source="mim.exp"/>

  <schema name="Default_tolerance_mim">
    <interface
      kind="use"
      schema="Foundation_representation_mim">
    </interface>

    <interface
      kind="use"
      schema="Measure_representation_mim">
    </interface>

    <interface
      kind="use"
      schema="representation_schema">
    </interface>

    <interface
      kind="use"
      schema="Shape_property_assignment_mim">
    </interface>

    <entity
      name="default_tolerance_table"
      supertypes="representation">
      <where
        label="WR1"
        expression="SIZEOF( QUERY( i &lt;* SELF.items |  NOT('DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.DEFAULT_TOLERANCE_TABLE_CELL' IN  TYPEOF(i)) )) = 0">
      </where>
      <where
        label="WR2"
        expression="(SIZEOF( QUERY( rr &lt;* USEDIN(SELF,'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.' + 'REPRESENTATION_RELATIONSHIP.REP_1') |  rr.name &lt; 'general tolerance definition' )) = 0) AND (SIZEOF( QUERY( rr &lt;* USEDIN(SELF,'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.' + 'REPRESENTATION_RELATIONSHIP.REP_1') | (rr.name = 'general tolerance definition') AND (rr.rep2.name &lt; 'default tolerance') )) = 0) AND (SIZEOF( USEDIN(SELF,'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.' + 'REPRESENTATION_RELATIONSHIP.REP_2') ) = 0)">
      </where>
    </entity>

    <entity
      name="default_tolerance_table_cell"
      supertypes="compound_representation_item">
      <where
        label="WR1"
        expression="SIZEOF(QUERY( x &lt;* USEDIN(SELF,'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.' + 'REPRESENTATION.ITEMS') | 'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.' + 'DEFAULT_TOLERANCE_TABLE' IN TYPEOF(x)))=1">
      </where>
      <where
        label="WR2"
        expression="default_tolerance_table_cell_wr2(SELF\  compound_representation_item.item_element)">
      </where>
      <where
        label="WR3"
        expression="default_tolerance_table_cell_wr3(SELF\  compound_representation_item.item_element)">
      </where>
      <where
        label="WR4"
        expression="default_tolerance_table_cell_wr4(SELF\  compound_representation_item.item_element)">
      </where>
      <where
        label="WR5"
        expression="default_tolerance_table_cell_wr5(SELF\  compound_representation_item.item_element)">
      </where>
    </entity>

    <function
      name="default_tolerance_table_cell_wr2">
      <parameter
        name="agg">
        <typename
          name="AGGREGATE OF representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
BEGIN 
IF SIZEOF(agg) &lt;= 5 THEN 
RETURN(TRUE); 
ELSE 
RETURN(FALSE); 
END_IF; 
END; 
      </algorithm>

    </function>

    <function
      name="default_tolerance_table_cell_wr3">
      <parameter
        name="agg">
        <typename
          name="AGGREGATE OF representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
BEGIN 
IF (SIZEOF(QUERY ( i &lt;* agg | (( 
'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) 
AND (i\representation_item.name = 'significant number of digits')) )) 
= 1) OR ((SIZEOF(QUERY ( i &lt;* agg | (( 
'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) 
AND (i\representation_item.name = 'lower limit')) )) + SIZEOF( 
QUERY ( i &lt;* agg | (( 
'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) 
AND (i\representation_item.name = 'upper limit')) ))) = 2) THEN 
RETURN(TRUE); 
ELSE 
RETURN(FALSE); 
END_IF; 
END; 
      </algorithm>

    </function>

    <function
      name="default_tolerance_table_cell_wr4">
      <parameter
        name="agg">
        <typename
          name="AGGREGATE OF representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
BEGIN 
IF (SIZEOF(QUERY ( i &lt;* agg | (( 
'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) 
AND (i\representation_item.name = 'plus minus tolerance value')) )) 
= 1) OR ((SIZEOF(QUERY ( i &lt;* agg | (( 
'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) 
AND (i\representation_item.name = 'lower tolerance value')) )) + 
SIZEOF(QUERY ( i &lt;* agg | (( 
'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i)) 
AND (i\representation_item.name = 'upper tolerance value')) ))) 
= 2) THEN 
RETURN(TRUE); 
ELSE 
RETURN(FALSE); 
END_IF; 
END; 
      </algorithm>

    </function>

    <function
      name="default_tolerance_table_cell_wr5">
      <parameter
        name="agg">
        <typename
          name="AGGREGATE OF representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
BEGIN 
IF (SIZEOF(QUERY ( i &lt;* agg | ( 
'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(i)) )) 
&lt;= 1) AND (SIZEOF(QUERY ( i &lt;* agg | ( 
'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(i)) )) 
= SIZEOF(QUERY ( i &lt;* agg | (( 'DEFAULT_TOLERANCES_FOR_GEOMETRIC_DIMENSIONS.DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(i)) 
AND (i\representation_item.name = 'cell description')) ))) THEN 
RETURN(TRUE); 
ELSE 
RETURN(FALSE); 
END_IF; 
END; 
      </algorithm>

    </function>

  </schema>

</express>
