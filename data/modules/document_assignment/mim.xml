<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express description.file="mim_descriptions.xml" language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" reference="ISO/TS 10303-1122">
   <application name="JSDAI" owner="LKSoft" source="document_assignment_mim schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="Document_assignment_mim">
      <interface kind="use" schema="Document_and_version_identification_mim"/>
      <interface kind="use" schema="Document_definition_mim"/>
      <interface kind="use" schema="document_schema">
         <interfaced.item name="document_product_association"/>
      </interface>
      <interface kind="use" schema="File_identification_mim"/>
      <interface kind="use" schema="management_resources_schema">
         <interfaced.item name="document_reference"/>
         <interfaced.item name="document_usage_constraint_assignment"/>
      </interface>
      <interface kind="use" schema="basic_attribute_schema">
         <interfaced.item name="role_association"/>
         <interfaced.item name="object_role"/>
      </interface>
      <type name="document_reference_item">
         <select extensible="YES" genericentity="YES"/>
      </type>
      <entity name="applied_document_reference" supertypes="document_reference">
         <explicit name="items">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="document_reference_item"/>
         </explicit>
      </entity>
      <entity name="applied_document_usage_constraint_assignment" supertypes="document_usage_constraint_assignment">
         <explicit name="items">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="document_reference_item"/>
         </explicit>
      </entity>
      <entity name="document_product_equivalence" supertypes="document_product_association">
         <where expression="SELF\document_product_association.name = 'equivalence'" label="WR1"/>
         <where expression="NOT ('PRODUCT_DEFINITION_SCHEMA.PRODUCT' IN TYPEOF(SELF\document_product_association.related_product)) OR ((SELF\document_product_association.relating_document.kind.product_data_type = 'configuration controlled document') AND (SIZEOF(QUERY(prpc &lt;* USEDIN(SELF\document_product_association.related_product, 'PRODUCT_DEFINITION_SCHEMA.' + 'PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'document')) = 1))" label="WR2"/>
         <where expression="NOT ('PRODUCT_DEFINITION_SCHEMA.PRODUCT_DEFINITION_FORMATION' IN TYPEOF(SELF.related_product)) OR ((SELF\document_product_association.relating_document.kind.product_data_type = 'configuration controlled document version') AND (SIZEOF(QUERY(prpc &lt;* USEDIN(SELF.related_product\product_definition_formation.of_product, 'PRODUCT_DEFINITION_SCHEMA.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'document')) = 1))" label="WR3"/>
         <where expression="NOT ('PRODUCT_DEFINITION_SCHEMA.PRODUCT_DEFINITION' IN TYPEOF(SELF.related_product)) OR ((SELF\document_product_association.relating_document.kind.product_data_type = 'configuration controlled document definition') AND (SIZEOF(QUERY(prpc &lt;* USEDIN(SELF\document_product_association.related_product\product_definition.formation.of_product, 'PRODUCT_DEFINITION_SCHEMA.PRODUCT_RELATED_PRODUCT_CATEGORY.PRODUCTS') | prpc.name = 'document')) = 1))" label="WR4"/>
      </entity>
      <subtype.constraint abstract.supertype="YES" entity="document_product_association" name="subtype_mandatory_document_product_association" super.expression="document_product_equivalence"/>
   </schema>
</express>
