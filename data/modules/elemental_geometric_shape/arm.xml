<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.16 2002/07/05 11:10:27 robbod Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  description.file="arm_descriptions.xml"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.16"
    source="../data/modules/elemental_geometric_shape/arm.exp"/>

  <schema name="Elemental_geometric_shape_arm">
    <interface
      kind="use"
      schema="Foundation_representation_arm">
    </interface>

    <interface
      kind="use"
      schema="Value_with_unit_arm">
    </interface>

    <type name="cartesian_transformation">
      <select
        selectitems="Cartesian_transformation_2d Cartesian_transformation_3d">
      </select>

    </type>
    <type name="geometric_mapping_target">
      <select
        selectitems="Axis_placement cartesian_transformation">
      </select>

    </type>
    <entity
      name="Geometric_coordinate_space"
      supertypes="Numerical_representation_context">
      <explicit
        name="dimension_count">
        <builtintype
          type="INTEGER"/>
      </explicit>
      <where
        label="WR1"
        expression="dimension_count &gt;0">
      </where>
    </entity>

    <entity
      name="Geometric_model"
      supertypes="Representation">
      <explicit
        name="version_id"
        optional="YES">
        <builtintype
          type="STRING"/>
      </explicit>
      <explicit
        name="model_extent"
        optional="YES">
        <typename
          name="length_measure"/>
      </explicit>
      <explicit
        name="context_of_items">
        <redeclaration
          entity-ref="Representation"/>
          <typename
            name="Geometric_coordinate_space"/>
        </explicit>
        <explicit
          name="items">
          <redeclaration
            entity-ref="Representation"/>
            <aggregate
              type="SET"
              lower="1"
              upper="?"/>
            <typename
              name="Detailed_geometric_model_element"/>
          </explicit>
        </entity>

        <entity
          name="Detailed_geometric_model_element"
          abstract.supertype="YES"
          super.expression="(ONEOF(Cartesian_point, Direction, Axis_placement, Cartesian_transformation_2d,	Cartesian_transformation_3d))"
          supertypes="Representation_item">
        </entity>

        <entity
          name="Cartesian_point"
          supertypes="Detailed_geometric_model_element">
          <explicit
            name="coordinates">
            <aggregate
              type="LIST"
              lower="1"
              upper="3"/>
            <typename
              name="length_measure"/>
          </explicit>
        </entity>

        <entity
          name="Direction"
          supertypes="Detailed_geometric_model_element">
          <explicit
            name="coordinates">
            <aggregate
              type="LIST"
              lower="2"
              upper="3"/>
            <typename
              name="length_measure"/>
          </explicit>
        </entity>

        <entity
          name="Axis_placement"
          supertypes="Detailed_geometric_model_element">
          <explicit
            name="origin">
            <typename
              name="Cartesian_point"/>
          </explicit>
          <explicit
            name="x_axis">
            <typename
              name="Direction"/>
          </explicit>
          <explicit
            name="y_axis">
            <typename
              name="Direction"/>
          </explicit>
          <derived
            name="dim"
            expression="SIZEOF(origin.coordinates)">
            <builtintype
              type="INTEGER"/>
          </derived>
          <where
            label="WR1"
            expression="dim &gt;1">
          </where>
          <where
            label="WR2"
            expression="dim = SIZEOF(x_axis.coordinates)">
          </where>
          <where
            label="WR3"
            expression="dim = SIZEOF(y_axis.coordinates)">
          </where>
        </entity>

        <entity
          name="Cartesian_transformation_2d"
          supertypes="Detailed_geometric_model_element">
          <explicit
            name="multiplication_matrix">
            <aggregate
              type="ARRAY"
              lower="1"
              upper="2"/>
            <typename
              name="Direction"/>
          </explicit>
          <explicit
            name="translation">
            <typename
              name="Cartesian_point"/>
          </explicit>
          <where
            label="WR1"
            expression="SIZEOF(multiplication_matrix[1]\Direction.coordinates)=2">
          </where>
          <where
            label="WR2"
            expression="SIZEOF(multiplication_matrix[2]\Direction.coordinates)=2">
          </where>
          <where
            label="WR3"
            expression="SIZEOF(translation.coordinates)=2">
          </where>
        </entity>

        <entity
          name="Cartesian_transformation_3d"
          supertypes="Detailed_geometric_model_element">
          <explicit
            name="multiplication_matrix">
            <aggregate
              type="ARRAY"
              lower="1"
              upper="3"/>
            <typename
              name="Direction"/>
          </explicit>
          <explicit
            name="translation">
            <typename
              name="Cartesian_point"/>
          </explicit>
          <where
            label="WR1"
            expression="SIZEOF(multiplication_matrix[1]\Direction.coordinates)=3">
          </where>
          <where
            label="WR2"
            expression="SIZEOF(multiplication_matrix[2]\Direction.coordinates)=3">
          </where>
          <where
            label="WR3"
            expression="SIZEOF(multiplication_matrix[3]\Direction.coordinates)=3">
          </where>
          <where
            label="WR4"
            expression="SIZEOF(translation.coordinates)=3">
          </where>
        </entity>

        <entity
          name="Axis_placement_mapping">
          <explicit
            name="source">
            <typename
              name="Axis_placement"/>
          </explicit>
          <explicit
            name="target">
            <typename
              name="Axis_placement"/>
          </explicit>
          <where
            label="WR1"
            expression="source\Axis_placement.dim = target\Axis_placement.dim">
          </where>
        </entity>

        <entity
          name="Axis_placement_transformation_mapping">
          <explicit
            name="source">
            <typename
              name="Axis_placement"/>
          </explicit>
          <explicit
            name="target">
            <typename
              name="cartesian_transformation"/>
          </explicit>
          <where
            label="WR1"
            expression="source\Axis_placement.dim = SIZEOF(target.translation\Cartesian_point.coordinates)">
          </where>
        </entity>

      </schema>

    </express>
