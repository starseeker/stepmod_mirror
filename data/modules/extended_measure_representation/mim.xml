<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.22 2002/08/14 06:43:41 goset1 Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  description.file="mim_descriptions.xml"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.22"
    source="../data/modules/extended_measure_representation/mim.exp"/>

  <schema name="Extended_measure_representation_mim">
    <interface
      kind="use"
      schema="Measure_representation_mim">
    </interface>

    <interface
      kind="use"
      schema="qualified_measure_schema">
      <interfaced.item
        name="precision_qualifier"/>
      <interfaced.item
        name="qualified_representation_item"/>
    </interface>

    <interface
      kind="use"
      schema="representation_schema">
      <interfaced.item
        name="compound_representation_item"/>
      <interfaced.item
        name="list_representation_item"/>
    </interface>

    <interface
      kind="use"
      schema="shape_tolerance_schema">
      <interfaced.item
        name="limits_and_fits"/>
      <interfaced.item
        name="plus_minus_tolerance"/>
      <interfaced.item
        name="tolerance_value"/>
    </interface>

    <interface
      kind="use"
      schema="Value_with_unit_mim">
    </interface>

    <entity
      name="value_range"
      supertypes="compound_representation_item">
      <where
        label="WR1"
        expression="( 'value_with_unit_mim.'+ 'SET_REPRESENTATION_ITEM' IN     TYPEOF ( item_element ) ) AND value_range_wr1 (     item_element )">
      </where>
      <where
        label="WR2"
        expression="value_range_wr2 ( item_element )">
      </where>
      <where
        label="WR3"
        expression="value_range_wr3 ( item_element )">
      </where>
    </entity>

    <function
      name="value_range_wr1">
      <parameter
        name="agg">
        <typename
          name="AGGREGATE OF representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
  BEGIN
    IF (SIZEOF(agg) = 2) AND ((SIZEOF(QUERY ( i1 &lt;* agg | (
    'value_with_unit_mim.MEASURE_REPRESENTATION_ITEM' IN TYPEOF
    (i1)) ))
    = 2) OR (SIZEOF(QUERY ( i2 &lt;* agg | (
    'value_with_unit_mim.VALUE_REPRESENTATION_ITEM' IN TYPEOF
    (i2)) ))
    = 2)) THEN
      RETURN(TRUE);
    ELSE
      RETURN(FALSE);
    END_IF;
  END;
      </algorithm>

    </function>

    <function
      name="value_range_wr2">
      <parameter
        name="agg">
        <typename
          name="AGGREGATE OF representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
  BEGIN
    IF (SIZEOF(QUERY ( i &lt;* agg | (i.name = 'upper limit')
        )) = 1)
    AND (SIZEOF(QUERY ( i &lt;* agg | (i.name = 'lower limit')
         )) = 1)
     THEN
      RETURN(TRUE);
    ELSE
      RETURN(FALSE);
    END_IF;
  END;
      </algorithm>

    </function>

    <function
      name="value_range_wr3">
      <parameter
        name="agg">
        <typename
          name="AGGREGATE OF representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
  BEGIN
    IF (SIZEOF(QUERY ( i &lt;* agg | (
    'value_with_unit_mim.MEASURE_REPRESENTATION_ITEM' IN 
    TYPEOF(i)) ))
    &lt;&gt; 2) OR (SIZEOF(QUERY ( i1 &lt;* agg | 
     ('value_with_unit_mim.MEASURE_REPRESENTATION_ITEM' 
     IN TYPEOF (i1))
     AND
     (SIZEOF(QUERY ( i2 &lt;* agg
     | ((i1\measure_with_unit.unit_component
    :=: i2\measure_with_unit.unit_component) OR
     (i1\measure_with_unit.unit_component :=:
     i2\measure_with_unit.unit_component)) ))
    = 2) )) = 2) THEN
      RETURN(TRUE);
    ELSE
      RETURN(FALSE);
    END_IF;
  END;
      </algorithm>

    </function>

  </schema>

</express>
