<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express description.file="arm_descriptions.xml" language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" reference="ISO/TS 10303-1789">
   <application name="JSDAI" owner="LKSoft" source="geometric_constraints_arm schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="Geometric_constraints_arm">
      <interface kind="use" schema="Composite_surface_arm"/>
      <interface kind="use" schema="Explicit_constraints_arm"/>
      <interface kind="use" schema="Primitive_solids_arm"/>
      <interface kind="use" schema="Swept_solid_arm"/>
      <type name="axial_geometry_element">
         <select extensible="YES" genericentity="YES" selectitems="Circle Circular_cone Circular_cylinder Conical_surface Cylindrical_surface Line Plane point_select Solid_of_revolution Sphere Spherical_surface Surface_of_revolution Toroidal_surface Torus"/>
      </type>
      <type name="curve_or_surface">
         <select selectitems="Curve Surface"/>
      </type>
      <type name="geometric_constraint_element">
         <select extensible="YES" genericentity="YES" selectitems="point_select Curve Surface Direction"/>
      </type>
      <type name="linear_geometry_element">
         <select extensible="YES" genericentity="YES" selectitems="Line Plane Direction"/>
      </type>
      <type name="parallel_offset_type">
         <enumeration items="curve_2d_offset curve_3d_offset surface_offset"/>
      </type>
      <type name="point_curve_or_surface">
         <select selectitems="Curve point_select Surface"/>
      </type>
      <type name="radial_geometry_element">
         <select selectitems="Circle Cylindrical_surface Conical_surface Spherical_surface Circular_cylinder Circular_cone Sphere"/>
      </type>
      <type name="swept_surface_or_solid">
         <select extensible="YES" genericentity="YES" selectitems="Swept_surface Swept_solid"/>
      </type>
      <type name="tangent_contact_type">
         <enumeration items="point_contact curve_contact surface_contact"/>
      </type>
      <entity name="Angle_geometric_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="linear_geometry_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="1"/>
            <typename name="linear_geometry_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <where expression="(SIZEOF(SELF\Explicit_constraint.reference_elements) = 1) OR&#10;    (('GEOMETRIC_CONSTRAINTS_ARM.DIMENSIONED_ANGLE_CONSTRAINT' &#10;    IN TYPEOF(SELF)) AND &#10;    (SIZEOF(SELF\Explicit_constraint.constrained_elements) = 2))" label="WR1"/>
      </entity>
      <entity name="Coaxial_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="axial_geometry_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="1"/>
            <typename name="axial_geometry_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <where expression="SIZEOF(QUERY(q &lt;* SELF\Explicit_constraint.reference_elements | &#10;    SIZEOF(TYPEOF(q) * ['GEOMETRIC_CONSTRAINTS_ARM.POINT','GEOMETRIC_CONSTRAINTS_ARM.PLANE',&#10;    'GEOMETRIC_CONSTRAINTS_ARM.SPHERICAL_SURFACE','GEOMETRIC_CONSTRAINTS_ARM.SPHERE']) &#10;    &gt; 0)) = 0" label="WR1"/>
      </entity>
      <entity name="Curve_distance_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="2"/>
            <typename name="Curve"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="4"/>
            <typename name="point_curve_or_surface"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="near_points">
            <aggregate lower="0" type="SET" upper="4"/>
            <typename name="Near_point_relationship"/>
         </explicit>
         <where expression="(SIZEOF(SELF\Explicit_constraint.reference_elements) &gt; 0) OR&#10;    (('GEOMETRIC_CONSTRAINTS_ARM.DIMENSIONED_CURVE_DISTANCE_CONSTRAINT'&#10;    IN TYPEOF(SELF)) &#10;    AND (SIZEOF(SELF\Explicit_constraint.constrained_elements) = 2))" label="WR1"/>
         <where expression="SIZEOF(near_points) &lt;= &#10;    SIZEOF(SELF\Explicit_constraint.reference_elements)" label="WR2"/>
         <where expression="SIZEOF(QUERY(q &lt;* near_points | NOT&#10;    (q.relating_item&#10;    IN SELF\Explicit_constraint.reference_elements))) = 0" label="WR3"/>
      </entity>
      <entity name="Curve_length_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="Curve"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <where expression="SIZEOF(SELF\Explicit_constraint.reference_elements) = 0" label="WR1"/>
      </entity>
      <entity name="Curve_segment">
         <explicit name="transition">
            <typename name="transition_code"/>
         </explicit>
         <explicit name="same_sense">
            <builtintype type="BOOLEAN"/>
         </explicit>
         <explicit name="parent_curve">
            <typename name="Curve"/>
         </explicit>
      </entity>
      <entity name="Curve_segment_set" supertypes="Detailed_geometric_model_element">
         <explicit name="segments">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="Curve_segment"/>
         </explicit>
      </entity>
      <entity name="Curve_smoothness_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="1"/>
            <typename name="Curve_segment_set"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="smoothness">
            <typename name="transition_code"/>
         </explicit>
         <where expression="SIZEOF(SELF\Explicit_constraint.reference_elements) = 0" label="WR1"/>
      </entity>
      <entity name="Dimensioned_angle_constraint" supertypes="Angle_geometric_constraint">
         <explicit name="angle_value">
            <typename name="plane_angle_measure"/>
         </explicit>
      </entity>
      <entity name="Dimensioned_curve_distance_constraint" supertypes="Curve_distance_constraint">
         <explicit name="distance">
            <typename name="length_measure"/>
         </explicit>
         <where expression="distance &gt;= 0.0" label="WR1"/>
      </entity>
      <entity name="Dimensioned_curve_length_constraint" supertypes="Curve_length_constraint">
         <explicit name="curve_length">
            <typename name="length_measure"/>
         </explicit>
         <where expression="curve_length &gt; 0.0" label="WR1"/>
      </entity>
      <entity name="Dimensioned_parallel_constraint" supertypes="Parallel_constraint">
         <explicit name="distance">
            <typename name="length_measure"/>
         </explicit>
         <explicit name="negative_direction">
            <builtintype type="BOOLEAN"/>
         </explicit>
         <where expression="(SIZEOF(SELF\Explicit_constraint.reference_elements) = 1)&#10;    OR (SIZEOF(SELF\Explicit_constraint.constrained_elements) = 2)" label="WR1"/>
         <where expression="SIZEOF(QUERY(q &lt;* (SELF\Explicit_constraint.reference_elements +&#10;    SELF\Explicit_constraint.constrained_elements) | SIZEOF(TYPEOF(q) *&#10;    ['EXPLICIT_CONSTRAINT.DIRECTION']) &gt; 0)) = 0" label="WR2"/>
         <where expression="distance &gt;= 0.0" label="WR3"/>
      </entity>
      <entity name="Dimensioned_parallel_offset_constraint" supertypes="Parallel_offset_constraint">
         <explicit name="offset_value">
            <typename name="length_measure"/>
         </explicit>
         <explicit name="offset_direction_constrained">
            <builtintype type="BOOLEAN"/>
         </explicit>
         <where expression="(SIZEOF(SELF\Explicit_constraint.reference_elements) = 1)&#10;    OR (SIZEOF(SELF\Explicit_constraint.constrained_elements) = 2)" label="WR1"/>
         <where expression="(NOT (offset_direction_constrained = TRUE)&#10;    AND ((offset_type = curve_2d_offset) &#10;    OR (offset_type = surface_offset)))" label="WR2"/>
         <where expression="offset_value &gt; 0.0" label="WR3"/>
      </entity>
      <entity name="Dimensioned_point_distance_constraint" supertypes="Point_distance_constraint">
         <explicit name="distance">
            <typename name="length_measure"/>
         </explicit>
         <where expression="distance &gt;= 0.0" label="WR1"/>
      </entity>
      <entity name="Dimensioned_radial_constraint" supertypes="Radius_geometric_constraint">
         <explicit name="radius_value">
            <typename name="length_measure"/>
         </explicit>
         <where expression="radius_value &gt; 0.0" label="WR1"/>
      </entity>
      <entity name="Dimensioned_surface_distance_constraint" supertypes="Surface_distance_constraint">
         <explicit name="distance">
            <typename name="length_measure"/>
         </explicit>
         <where expression="distance &gt;= 0.0" label="WR1"/>
      </entity>
      <entity abstract.supertype="YES" name="Explicit_geometric_constraint" super.expression="ONEOF (Fixed_element_geometric_constraint, Parallel_constraint, Point_distance_constraint, Skew_line_distance_constraint, Curve_distance_constraint, Surface_distance_constraint, Radius_geometric_constraint, Curve_length_constraint, Parallel_offset_constraint, Angle_geometric_constraint, Perpendicular_geometric_constraint, Incidence_geometric_constraint, Coaxial_constraint, Tangent_constraint, Symmetry_geometric_constraint, Swept_point_curve_constraint, Swept_curve_surface_constraint, Curve_smoothness_constraint, Surface_smoothness_constraint)" supertypes="Defined_constraint Detailed_geometric_model_element"/>
      <entity name="Fixed_element_geometric_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="geometric_constraint_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <where expression="SIZEOF(SELF\Explicit_constraint.reference_elements) = 0" label="WR1"/>
      </entity>
      <entity name="Incidence_geometric_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="geometric_constraint_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="?"/>
            <typename name="geometric_constraint_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="near_points">
            <aggregate lower="0" type="SET" upper="?"/>
            <typename name="Near_point_relationship"/>
         </explicit>
         <where expression="(SIZEOF(SELF\Explicit_constraint.reference_elements) &gt; 0)&#10;    OR (SIZEOF(SELF\Explicit_constraint.constrained_elements) = 2)" label="WR1"/>
         <where expression="SIZEOF(near_points) &lt;= &#10;    SIZEOF(SELF\Explicit_constraint.reference_elements)" label="WR2"/>
         <where expression="SIZEOF(QUERY(q &lt;* near_points | NOT&#10;    (q.relating_item&#10;    IN SELF\Explicit_constraint.reference_elements))) = 0" label="WR3"/>
      </entity>
      <entity name="Near_point_relationship">
         <explicit name="relating_item">
            <typename name="curve_or_surface"/>
         </explicit>
         <explicit name="ref_point">
            <typename name="point_select"/>
         </explicit>
      </entity>
      <entity name="Parallel_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="linear_geometry_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="1"/>
            <typename name="linear_geometry_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
      </entity>
      <entity name="Parallel_offset_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="curve_or_surface"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="1"/>
            <typename name="curve_or_surface"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="offset_type">
            <typename name="parallel_offset_type"/>
         </explicit>
         <where expression="NOT(((offset_type = curve_2d_offset) &#10;    OR (offset_type = curve_3d_offset)) AND &#10;    (SIZEOF(QUERY( q &lt;* (SELF\Explicit_constraint.constrained_elements &#10;    + SELF\Explicit_constraint.reference_elements) |&#10;    'GEOMETRIC_CONSTRAINTS_ARM.SURFACE' IN TYPEOF(q))) &gt; 0))" label="WR1"/>
         <where expression="NOT((offset_type = surface_offset) AND (SIZEOF(QUERY( q &lt;* &#10;    (SELF\Explicit_constraint.constrained_elements +&#10;    SELF\Explicit_constraint.reference_elements) | &#10;    'GEOMETRIC_CONSTRAINTS_ARM.CURVE' IN TYPEOF(q))) &gt; 0))" label="WR2"/>
      </entity>
      <entity name="Perpendicular_geometric_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="linear_geometry_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="2"/>
            <typename name="linear_geometry_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <where expression="NOT ((SIZEOF(SELF\Explicit_constraint.reference_elements) = 2) AND &#10;    NOT ((SIZEOF(QUERY(q &lt;* SELF\Explicit_constraint.constrained_elements + &#10;    SELF\Explicit_constraint.reference_elements | &#10;    'GEOMETRIC_CONSTRAINTS_ARM.LINE' IN TYPEOF(q))) =&#10;    SIZEOF(SELF\Explicit_constraint.reference_elements + &#10;    SELF\Explicit_constraint.constrained_elements)) XOR &#10;    (SIZEOF(QUERY(q &lt;* SELF\Explicit_constraint.constrained_elements + &#10;    SELF\Explicit_constraint.reference_elements | &#10;    'GEOMETRIC_CONSTRAINTS_ARM.PLANE' IN TYPEOF(q))) =&#10;    SIZEOF(SELF\Explicit_constraint.reference_elements + &#10;    SELF\Explicit_constraint.constrained_elements))))" label="WR1"/>
         <where expression="(SIZEOF(SELF\Explicit_constraint.reference_elements) &gt; 0) OR&#10;    (SIZEOF(SELF\Explicit_constraint.constrained_elements) IN [2,3])" label="WR2"/>
         <where expression="NOT ((SIZEOF(SELF\Explicit_constraint.reference_elements) = 0) AND &#10;    (SIZEOF(SELF\Explicit_constraint.constrained_elements) = 3)) AND NOT  &#10;    ((SIZEOF(QUERY(q &lt;* SELF\Explicit_constraint.constrained_elements | &#10;    'GEOMETRIC_CONSTRAINTS_ARM.LINE' IN TYPEOF(q))) = 3) XOR&#10;    (SIZEOF(QUERY(q &lt;* SELF\Explicit_constraint.constrained_elements | &#10;    'GEOMETRIC_CONSTRAINTS_ARM.PLANE' IN TYPEOF(q))) = 3))" label="WR3"/>
      </entity>
      <entity name="Point_distance_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="point_select"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="4"/>
            <typename name="point_curve_or_surface"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <where expression="(SIZEOF(SELF\Explicit_constraint.reference_elements) &gt; 0) OR&#10;    (('EXPLICIT_GEOMETRIC_CONSTRAINT_SCHEMA.DIMENSIONED_POINT_DISTANCE_CONSTRAINT' &#10;    IN TYPEOF(SELF)) AND &#10;    (SIZEOF(SELF\Explicit_constraint.constrained_elements) = 2))" label="WR1"/>
      </entity>
      <entity name="Radius_geometric_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="radial_geometry_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <where expression="SIZEOF(SELF\Explicit_constraint.reference_elements) = 0" label="WR1"/>
      </entity>
      <entity name="Skew_line_distance_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="2"/>
            <typename name="Line"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="1"/>
            <typename name="Line"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="distance">
            <typename name="length_measure"/>
         </explicit>
         <where expression="SIZEOF(SELF\Explicit_constraint.constrained_elements +&#10;    SELF\Explicit_constraint.reference_elements) = 2" label="WR1"/>
         <where expression="distance &gt;= 0.0" label="WR2"/>
      </entity>
      <entity name="Surface_distance_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="2"/>
            <typename name="Surface"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="4"/>
            <typename name="point_curve_or_surface"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="near_points">
            <aggregate lower="0" type="SET" upper="4"/>
            <typename name="Near_point_relationship"/>
         </explicit>
         <where expression="(SIZEOF(SELF\Explicit_constraint.reference_elements) &gt; 0) OR &#10;    (('GEOMETRIC_CONSTRAINTS_ARM.DIMENSIONED_SURFACE_DISTANCE_CONSTRAINT' &#10;    IN TYPEOF(SELF)) &#10;    AND (SIZEOF(SELF\Explicit_constraint.constrained_elements) = 2))" label="WR1"/>
         <where expression="SIZEOF(near_points) &lt;= &#10;    SIZEOF(SELF\Explicit_constraint.reference_elements)" label="WR2"/>
         <where expression="SIZEOF(QUERY(q &lt;* near_points | NOT&#10;    (q.relating_item&#10;    IN SELF\Explicit_constraint.reference_elements))) = 0" label="WR3"/>
      </entity>
      <entity name="Surface_patch_set" supertypes="Detailed_geometric_model_element">
         <explicit name="patches">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="Surface_patch"/>
         </explicit>
      </entity>
      <entity name="Surface_smoothness_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="1"/>
            <typename name="Surface_patch_set"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="u_smoothness">
            <typename name="transition_code"/>
         </explicit>
         <explicit name="v_smoothness">
            <typename name="transition_code"/>
         </explicit>
         <where expression="SIZEOF(SELF\Explicit_constraint.reference_elements) = 0" label="WR1"/>
      </entity>
      <entity name="Swept_curve_surface_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="Surface"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="1" type="SET" upper="1"/>
            <typename name="swept_surface_or_solid"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
      </entity>
      <entity name="Swept_point_curve_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="Curve"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="1" type="SET" upper="1"/>
            <typename name="Swept_solid"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
      </entity>
      <entity name="Symmetry_geometric_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="2" type="SET" upper="2"/>
            <typename name="Detailed_geometric_model_element"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="mirror_element">
            <typename name="linear_geometry_element"/>
         </explicit>
         <where expression="SIZEOF(SELF\Explicit_constraint.reference_elements) = 0" label="WR1"/>
         <where expression="SIZEOF(TYPEOF(mirror_element) * &#10;    ['GEOMETRIC_CONSTRAINTS_ARM.DIRECTION']) = 0" label="WR2"/>
      </entity>
      <entity name="Tangent_constraint" supertypes="Explicit_geometric_constraint">
         <explicit name="constrained_elements">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="curve_or_surface"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="reference_elements">
            <aggregate lower="0" type="SET" upper="?"/>
            <typename name="curve_or_surface"/>
            <redeclaration entity-ref="Explicit_constraint"/>
         </explicit>
         <explicit name="near_points">
            <aggregate lower="0" type="SET" upper="?"/>
            <typename name="Near_point_relationship"/>
         </explicit>
         <explicit name="tangent_contact">
            <typename name="tangent_contact_type"/>
         </explicit>
         <where expression="(SIZEOF(SELF\Explicit_constraint.reference_elements) &gt; 0) OR &#10;    (SIZEOF(SELF\Explicit_constraint.constrained_elements) = 2)" label="WR1"/>
         <where expression="SIZEOF(QUERY(q &lt;* near_points | NOT&#10;    (q.relating_item&#10;    IN SELF\Explicit_constraint.reference_elements))) = 0" label="WR2"/>
      </entity>
   </schema>
</express>
