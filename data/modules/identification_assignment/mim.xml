<?xml version="1.0"?>
<?xml-stylesheet 
  type="text/xsl" 
  href="../../../xsl/express.xsl"
?> <!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express language_version="2" rcs.date="$Date: $" rcs.revision="$Revision: $"
  description.file="mim_descriptions.xml"
>
<application name="GraphicalEXPRESS" owner="Eurostep" url="www.eurostep.com" version="1.3" source="identification_assignment_mim_v001.vsd" />
<schema name="Identification_assignment_mim">
<interface kind="use" schema="management_resources_schema">
<interfaced.item name="identification_assignment" />
<interfaced.item name="identification_role" />
</interface>
<type name="identification_item">
<select extensible="YES" />
<graphic.element page="2" xcoord="289" ycoord="700" />
</type>
<type name="versionable_item">
<select extensible="YES" />
<graphic.element page="2" xcoord="70" ycoord="643" />
</type>
<entity name="applied_identification_assignment" supertypes="identification_assignment">
<explicit name="items">
<aggregate type="SET" lower="1" upper="?" />
<typename name="identification_item" />
</explicit>
<graphic.element page="2" xcoord="93" ycoord="700" />
</entity>
    <rule
      name="version_assignments_are_valid"
      appliesto="applied_identification_assignment">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(aia &lt;* applied_identification_assignment | 		NOT version_assignment_is_valid(aia)))=0">
      </where>

    </rule>

    <function
      name="version_assignment_is_valid">
      <parameter
        name="aia">
        <typename
          name="applied_identification_assignment"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
LOCAL
  item: identification_item;
  role: identification_role;
END_LOCAL;

role:= aia.role;
IF role.name='version' THEN
  REPEAT i:=LOINDEX(aia.items) TO HIINDEX(aia.items);
    item:= aia.items[i];

    IF (SIZEOF(['IDENTIFICATION_ASSIGNMENT_MIM.' + 'VERSIONABLE_ITEM']*TYPEOF(item))=0) THEN
-- item invalid if item does not belong to versionable types
	RETURN(FALSE);
    END_IF;
  END_REPEAT;
  RETURN(TRUE);

ELSE		-- case where aia does not convey a version id
  RETURN(TRUE);
END_IF;
      </algorithm>

    </function>


<graphic.element page="1" xcoord="120" ycoord="748" />
</schema>
</express>
