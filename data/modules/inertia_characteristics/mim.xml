<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.26 2002/12/23 10:00:14 goset1 Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  description.file="mim_descriptions.xml"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.26"
    source="../data/modules/inertia_characteristics/mim.exp"/>

  <schema name="Inertia_characteristics_mim">
    <interface
      kind="use"
      schema="Elemental_geometric_shape_mim">
    </interface>

    <interface
      kind="use"
      schema="Shape_property_assignment_mim">
    </interface>

    <interface
      kind="use"
      schema="Value_with_unit_mim">
    </interface>

    <constant name="schema_name"
      expression="STRING := 'INERTIA_CHARACTERISTICS_MIM';">
    </constant>
    <entity
      name="moments_of_inertia_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="(SIZEOF(SELF.items) = 1) AND  (SIZEOF( QUERY( i &lt;* SELF.items | (schema_name + '.COMPOUND_REPRESENTATION_ITEM' IN TYPEOF(i)) AND   (i.name = 'moments of inertia matrix') )) = 1)">
      </where>
      <where
        label="WR2"
        expression="SIZEOF( QUERY( i &lt;* SELF.items | (schema_name + '.COMPOUND_REPRESENTATION_ITEM' IN TYPEOF(i)) AND   (SIZEOF(i\compound_representation_item.item_element) = 3) AND   (schema_name + '.LIST_REPRESENTATION_ITEM' IN TYPEOF(i\compound_representation_item.item_element)) AND   value_range_aggregate_rep_item (i\compound_representation_item.item_element) )) = 1">
      </where>
    </entity>

    <rule
      name="restrict_centre_of_mass_representation"
      appliesto="representation">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF ( QUERY ( r &lt;* representation | 	( r.name ='centre of mass' ) AND 	( ( SIZEOF ( r.items ) &lt;&gt;1 ) OR 	(SIZEOF ( QUERY ( i &lt;* r.items | 	( schema_name + '.POINT' IN TYPEOF ( i ) ) AND 	( i.name = 'centre point' ) )) &lt;&gt;1 ) ) ) ) 	=0">
      </where>

    </rule>

    <function
      name="value_range_aggregate_rep_item">
      <parameter
        name="agg">
        <aggregate
          type="AGGREGATE"/>
        <typename
          name="representation_item"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
  FUNCTION cri (agg : AGGREGATE OF representation_item) : BOOLEAN; 
  BEGIN 
  IF (SIZEOF(agg) = 3) AND 
	(SIZEOF(QUERY(i1 &lt;* agg | (schema_name + '.MEASURE_REPRESENTATION_ITEM' IN TYPEOF(i1)) )) = 3) THEN 
	  RETURN (TRUE); 
   ELSE 
	RETURN (FALSE); 
   END_IF; 
   END; 
      </algorithm>

    </function>

  </schema>

</express>
