(*
   $Id: arm.exp,v 1.21 2005/11/16 08:28:15 kovaliovas Exp $
   ISO TC184/SC4/WG12 N3447 - ISO/CD-TS 10303-1686 Interconnect module usage view - EXPRESS ARM
*)

SCHEMA Interconnect_module_usage_view_arm;

	USE FROM Extended_geometric_tolerance_arm;	-- ISO/TS 10303-1666
	USE FROM Functional_assignment_to_part_arm;	-- ISO/TS 10303-1674
	USE FROM Functional_usage_view_arm;	-- ISO/TS 10303-1705

	TYPE cavity_reference_select = SELECT(
		Interconnect_module_primary_surface,
		Interconnect_module_secondary_surface
	);
	END_TYPE;

  ENTITY Interconnect_module_cavity_surface
    SUBTYPE OF (Interconnect_module_surface_feature);
      reference_surface : cavity_reference_select;
    WHERE
      WR1 : SELF :<>: reference_surface;
  END_ENTITY;

  ENTITY Interconnect_module_cutout_segment_surface
    SUBTYPE OF (Interconnect_module_surface_feature);
      composed_surface : Interconnect_module_cutout_surface;
      start_vertex     : Edge_segment_vertex;
      end_vertex       : Edge_segment_vertex;
    WHERE
      WR1 : start_vertex :<>: end_vertex;
  END_ENTITY;

  ENTITY Interconnect_module_cutout_surface
    SUBTYPE OF (Interconnect_module_surface_feature);
  END_ENTITY;

  ENTITY Interconnect_module_edge_segment_surface
    SUBTYPE OF (Interconnect_module_surface_feature);
      composed_surface : Interconnect_module_edge_surface;
      start_vertex     : Edge_segment_vertex;
      end_vertex       : Edge_segment_vertex;
    WHERE
      WR1 : start_vertex :<>: end_vertex;
  END_ENTITY;

  ENTITY Interconnect_module_edge_surface
    SUBTYPE OF (Interconnect_module_surface_feature);
  END_ENTITY;

  ENTITY Interconnect_module_interface_terminal
    SUBTYPE OF (Interconnect_module_terminal);
  END_ENTITY;

  ENTITY Interconnect_module_primary_surface
    SUBTYPE OF (Interconnect_module_surface_feature);
  END_ENTITY;

  ENTITY Interconnect_module_secondary_surface
    SUBTYPE OF (Interconnect_module_surface_feature);
  END_ENTITY;

  ENTITY Interconnect_module_surface_feature
    ABSTRACT SUPERTYPE OF (ONEOF (Interconnect_module_cavity_surface,
 Interconnect_module_cutout_segment_surface,
 Interconnect_module_cutout_surface,
 Interconnect_module_secondary_surface,
 Interconnect_module_primary_surface,
 Interconnect_module_edge_surface,
 Interconnect_module_edge_segment_surface))
    SUBTYPE OF (Part_feature);
      SELF\Part_feature.associated_definition : Interconnect_module_usage_view;
  END_ENTITY;

  ENTITY Interconnect_module_terminal
    SUBTYPE OF (Part_terminal, Placed_feature);
      terminal_connection_zone                : OPTIONAL SET[1:?] OF Connection_zone_in_usage_view;
      SELF\Part_feature.associated_definition : Interconnect_module_usage_view;
    INVERSE
      SELF\Placed_feature.feature_shape : SET[1:?] OF geometric_model_constituent_relationship FOR constituent_element;
  END_ENTITY;

  ENTITY Interconnect_module_terminal_surface_constituent_relationship
    SUBTYPE OF (Shape_element_constituent_relationship);
      SELF\Shape_element_relationship.relating : Interconnect_module_surface_feature;
      SELF\Shape_element_relationship.related  : Interconnect_module_terminal;
  END_ENTITY;

  ENTITY Interconnect_module_usage_view
    SUPERTYPE OF (Pcb_usage_view)
    SUBTYPE OF (Part_usage_view);
      thickness_over_dielectric_requirement : OPTIONAL Tolerance_characteristic;
      thickness_over_metal_requirement      : OPTIONAL Tolerance_characteristic;
      measurement_condition                 : OPTIONAL Restraint_condition;
      located_thickness_requirement         : OPTIONAL SET[1:?] OF Located_interconnect_module_thickness_requirement;
      implemented_function                  : OPTIONAL Functional_unit_usage_view;
    WHERE
      WR1 : SIZEOF(QUERY(pf <* USEDIN(SELF,
 'INTERCONNECT_MODULE_USAGE_VIEW_ARM.INTERCONNECT_MODULE_SURFACE_FEATURE.ASSOCIATED_DEFINITION') | ('INTERCONNECT_MODULE_USAGE_VIEW_ARM.' + 'INTERCONNECT_MODULE_PRIMARY_SURFACE' IN TYPEOF(pf)))) <= 1;
      WR2 : SIZEOF(QUERY(pf <* USEDIN(SELF,
 'INTERCONNECT_MODULE_USAGE_VIEW_ARM.INTERCONNECT_MODULE_SURFACE_FEATURE.ASSOCIATED_DEFINITION') | ('INTERCONNECT_MODULE_USAGE_VIEW_ARM.' + 'INTERCONNECT_MODULE_SECONDARY_SURFACE' IN TYPEOF(pf)))) <= 1;
      WR3 : SIZEOF(QUERY(pf <* USEDIN(SELF,
 'INTERCONNECT_MODULE_USAGE_VIEW_ARM.INTERCONNECT_MODULE_SURFACE_FEATURE.ASSOCIATED_DEFINITION') | ('INTERCONNECT_MODULE_USAGE_VIEW_ARM.' + 'INTERCONNECT_MODULE_EDGE_SURFACE' IN TYPEOF(pf)))) <= 1;
      WR4 : EXISTS(thickness_over_metal_requirement) OR EXISTS(thickness_over_dielectric_requirement);
      WR5 : (TYPEOF(thickness_over_dielectric_requirement) = 'CHARACTERISTIC_ARM.STATISTICAL_TOLERANCE_CHARACTERISTIC') OR
        (TYPEOF(thickness_over_dielectric_requirement) = 'CHARACTERISTIC_ARM.SYMMETRICAL_TOLERANCE_CHARACTERISTIC') OR
        (SIZEOF(QUERY(it <* thickness_over_dielectric_requirement\Representation.items |
          NOT('VALUE_WITH_UNIT_EXTENSION_ARM.LENGTH_DATA_ELEMENT' IN TYPEOF(thickness_over_dielectric_requirement\Representation.items))
         )) = 0);
      WR6 : NOT(TYPEOF(thickness_over_dielectric_requirement) = 'CHARACTERISTIC_ARM.SYMMETRICAL_TOLERANCE_CHARACTERISTIC') OR
        (SIZEOF(QUERY(it <* thickness_over_dielectric_requirement\Representation.items |
        ('VALUE_WITH_UNIT_EXTENSION_ARM.LENGTH_DATA_ELEMENT' IN TYPEOF(thickness_over_dielectric_requirement\Representation.items))
           )) = 1);
      WR7 : (TYPEOF(thickness_over_metal_requirement) = 'CHARACTERISTIC_ARM.STATISTICAL_TOLERANCE_CHARACTERISTIC') OR
        (TYPEOF(thickness_over_metal_requirement) = 'CHARACTERISTIC_ARM.SYMMETRICAL_TOLERANCE_CHARACTERISTIC') OR
        (SIZEOF(QUERY(it <* thickness_over_metal_requirement\Representation.items |
          NOT('VALUE_WITH_UNIT_EXTENSION_ARM.LENGTH_DATA_ELEMENT' IN TYPEOF(thickness_over_metal_requirement\Representation.items))
         )) = 0);
      WR8 : NOT(TYPEOF(thickness_over_metal_requirement) = 'CHARACTERISTIC_ARM.SYMMETRICAL_TOLERANCE_CHARACTERISTIC') OR
        (SIZEOF(QUERY(it <* thickness_over_metal_requirement\Representation.items |
        ('VALUE_WITH_UNIT_EXTENSION_ARM.LENGTH_DATA_ELEMENT' IN TYPEOF(thickness_over_metal_requirement\Representation.items))
           )) = 1);
      WR9 : NOT EXISTS(SELF\Product_view_definition.additional_characterization);
  END_ENTITY;

  ENTITY Located_interconnect_module_thickness_requirement;
      reference_location    : Axis_placement;
      thickness_requirement : Tolerance_characteristic;
    INVERSE
      design : SET[1:?] OF interconnect_module_usage_view FOR located_thickness_requirement;
    UNIQUE
      UR1 : design,
 reference_location;
    WHERE
      WR1 : (TYPEOF(thickness_requirement) = 'CHARACTERISTIC_ARM.STATISTICAL_TOLERANCE_CHARACTERISTIC') OR
        (TYPEOF(thickness_requirement) = 'CHARACTERISTIC_ARM.SYMMETRICAL_TOLERANCE_CHARACTERISTIC') OR
        (SIZEOF(QUERY(it <* thickness_requirement\Representation.items |
          NOT('VALUE_WITH_UNIT_EXTENSION_ARM.LENGTH_DATA_ELEMENT' IN TYPEOF(thickness_requirement\Representation.items))
         )) = 0);
      WR2 : NOT(TYPEOF(thickness_requirement) = 'CHARACTERISTIC_ARM.SYMMETRICAL_TOLERANCE_CHARACTERISTIC') OR
        (SIZEOF(QUERY(it <* thickness_requirement\Representation.items |
        ('VALUE_WITH_UNIT_EXTENSION_ARM.LENGTH_DATA_ELEMENT' IN TYPEOF(thickness_requirement\Representation.items))
           )) = 1);
  END_ENTITY;

  ENTITY Pcb_usage_view
    SUBTYPE OF (Interconnect_module_usage_view);
  END_ENTITY;

  FUNCTION magnitude_of(input : length_data_element) : REAL;
  --purpose of this function is to return the normalized real number that is the magnitude of the length unit
  --including conversion of the prefix values to the exponent of the real number.
  --e.g., 10 u inches --> 1e-5
  --initial input just return the value component and not the exponent.
  RETURN(input\Value_with_unit.value_component);
  END_FUNCTION;
END_SCHEMA;

