<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" description.file="arm_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="interconnect_physical_requirement_allocation_arm schema_instance"/>
   <schema name="Interconnect_physical_requirement_allocation_arm">
      <interface kind="use" schema="Requirement_view_definition_relationship_arm"/>
      <interface kind="use" schema="Integral_shield_arm"/>
      <interface kind="reference" schema="Requirement_decomposition_arm">
         <interfaced.item name="get_rvd"/>
      </interface>
      <interface kind="reference" schema="Characterizable_object_arm">
         <interfaced.item name="bag_to_set"/>
      </interface>
      <type name="land_physical_template_or_inter_stratum_feature_template">
         <select selectitems="Land_physical_template Inter_stratum_feature_template"/>
      </type>
      <entity name="Dependent_electrical_isolation_removal_template" supertypes="Electrical_isolation_removal_template">
         <explicit name="associated_item">
            <typename name="land_physical_template_or_inter_stratum_feature_template"/>
         </explicit>
         <where label="WR1" expression="SIZEOF(QUERY (dtlipd &lt;* USEDIN(SELF,'PART_TEMPLATE_2D_SHAPE_ARM.TEMPLATE_LOCATION_IN_STRUCTURED_TEMPLATE.TEMPLATE') | &#10;                  NOT(&#10;                     (SIZEOF(QUERY (tlist &lt;* USEDIN(associated_item,'PART_TEMPLATE_2D_SHAPE_ARM.TEMPLATE_LOCATION_IN_STRUCTURED_TEMPLATE.TEMPLATE') | &#10;                             NOT(&#10;                                 (tlist\Template_location_in_structured_template.assembly :=: &#10;                                  dtlipd\Template_location_in_structured_template.assembly) AND&#10;                                 ('PART_TEMPLATE_2D_SHAPE_ARM.DEPENDENT_TEMPLATE_LOCATION_IN_PADSTACK_DEFINITION' IN TYPEOF(dtlipd)) AND                                 &#10;                                 (tlist :=: dtlipd\Dependent_template_location_in_padstack_definition.reference_location)&#10;                                 )&#10;                      )) = 0)&#10;                      )&#10;             )) = 0"/>
      </entity>
      <entity name="Dependent_thermal_isolation_removal_template" supertypes="Thermal_isolation_removal_template">
         <explicit name="associated_item">
            <typename name="Land_physical_template"/>
         </explicit>
         <where label="WR1" expression="SIZEOF(QUERY (dtlipd &lt;* USEDIN(SELF,'PART_TEMPLATE_2D_SHAPE_ARM.TEMPLATE_LOCATION_IN_STRUCTURED_TEMPLATE.TEMPLATE') | &#10;                  NOT(&#10;                     (SIZEOF(QUERY (tlist &lt;* USEDIN(associated_item,'PART_TEMPLATE_2D_SHAPE_ARM.TEMPLATE_LOCATION_IN_STRUCTURED_TEMPLATE.TEMPLATE') | &#10;                             NOT(&#10;                                 (tlist\Template_location_in_structured_template.assembly :=: &#10;                                  dtlipd\Template_location_in_structured_template.assembly) AND&#10;                                 ('PART_TEMPLATE_2D_SHAPE_ARM.DEPENDENT_TEMPLATE_LOCATION_IN_PADSTACK_DEFINITION' IN TYPEOF(dtlipd)) AND                                 &#10;                                 (tlist :=: dtlipd\Dependent_template_location_in_padstack_definition.reference_location)&#10;                                 )&#10;                      )) = 0)&#10;                      )&#10;             )) = 0"/>
      </entity>
      <entity name="Electrical_isolation_removal_template" supertypes="Material_removal_feature_template">
         <derived name="electrical_isolation_spacing_requirement" expression="get_rvd(SELF, 'electrical requirement')">
            <aggregate type="SET" lower="1" upper="?"/>
            <typename name="Requirement_view_definition"/>
         </derived>
         <where label="WR1" expression="SIZEOF(QUERY(eisr &lt;* electrical_isolation_spacing_requirement |&#10;         NOT('INTERCONNECT_PHYSICAL_REQUIREMENT_ALLOCATION_ARM.ELECTRICAL_ISOLATION_REQUIREMENT'&#10;        IN TYPEOF(eisr)) )) =0"/>
         <where label="WR2" expression="SIZEOF(QUERY(s &lt;* SELF\Geometric_template.shapes |&#10;        ('PART_TEMPLATE_EXTENSION_ARM.PLANAR_CLOSED_PATH_SHAPE_MODEL_WITH_PARAMETERS' IN TYPEOF(s)))) = 0"/>
         <where label="WR3" expression="SIZEOF(QUERY(s &lt;* SELF\Geometric_template.shapes |&#10;        NOT ('CONSTRUCTIVE_SOLID_GEOMETRY_2D_ARM.SINGLE_BOUNDARY_CSG_2D_MODEL' IN TYPEOF(s)))) = 0"/>
      </entity>
      <entity name="Electrical_isolation_requirement" supertypes="Requirement_view_definition">
         <explicit name="effective_voltage_withstand_capacity_requirement" optional="YES">
            <typename name="Value_limit"/>
         </explicit>
         <derived name="electrical_isolation_spacing_requirement" expression="get_specific_requirement_type_for_primary_rvd_relationship(SELF, 'electrical isolation spacing requirement', &#10;              'INTERCONNECT_PLACEMENT_REQUIREMENTS_ARM.LAYOUT_SPACING_REQUIREMENT_OCCURRENCE')">
            <aggregate type="SET" lower="1" upper="1"/>
            <typename name="Predefined_requirement_view_definition"/>
         </derived>
         <where label="WR1" expression="NOT EXISTS(effective_voltage_withstand_capacity_requirement) OR&#10;             ((effective_voltage_withstand_capacity_requirement\Qualified_representation_item.qualifiers[1]\Type_qualifier.name in ['minimum'])&#10;              AND&#10;             ('VALUE_WITH_UNIT_EXTENSION_ARM.ELECTRIC_POTENTIAL_DATA_ELEMENT' IN TYPEOF(effective_voltage_withstand_capacity_requirement)))"/>
         <where label="WR2" expression="'INTERCONNECT_PLACEMENT_REQUIREMENTS_ARM.LAYOUT_SPACING_REQUIREMENT_OCCURRENCE' IN TYPEOF(electrical_isolation_spacing_requirement[1])"/>
         <where label="WR3" expression="NOT EXISTS(SELF\Product_view_definition.additional_characterization)"/>
      </entity>
      <entity name="Interconnect_shield_allocation" supertypes="Requirement_assignment">
         <explicit name="assigned_to">
            <typename name="Integral_shield"/>
            <redeclaration entity-ref="Requirement_assignment"/>
         </explicit>
         <explicit name="assigned_requirement_property">
            <typename name="Predefined_requirement_view_definition"/>
            <redeclaration entity-ref="Requirement_assignment" old_name="assigned_requirement"/>
         </explicit>
         <where label="WR1" expression="assigned_requirement_property\Product_view_definition.initial_context\View_definition_context.application_domain = 'electrical'"/>
      </entity>
      <entity name="Thermal_isolation_removal_template" supertypes="Material_removal_structured_template">
         <derived name="thermal_isolation_spacing_requirement" expression="get_rvd(SELF, 'thermal requirement')">
            <aggregate type="SET" lower="1" upper="?"/>
            <typename name="Requirement_view_definition"/>
         </derived>
         <where label="WR1" expression="SIZEOF(QUERY(tisr &lt;* THERMAL_ISOLATION_SPACING_REQUIREMENT |&#10;       NOT('INTERCONNECT_PHYSICAL_REQUIREMENT_ALLOCATION_ARM.THERMAL_ISOLATION_REQUIREMENT' IN TYPEOF(tisr))&#10;       )) =0"/>
      </entity>
      <entity name="Thermal_isolation_requirement" supertypes="Requirement_view_definition">
         <explicit name="thermal_bar_width" optional="YES">
            <typename name="Length_tolerance_characteristic"/>
         </explicit>
         <explicit name="number_of_bars" optional="YES">
            <builtintype type="INTEGER"/>
         </explicit>
         <explicit name="effective_current_capacity_requirement" optional="YES">
            <typename name="Value_limit"/>
         </explicit>
         <explicit name="angular_orientation_requirement" optional="YES">
            <typename name="Value_range"/>
         </explicit>
         <explicit name="effective_thermal_resistance_requirement" optional="YES">
            <typename name="Value_limit"/>
         </explicit>
         <derived name="thermal_isolation_spacing_requirement" expression="get_specific_requirement_type_for_primary_rvd_relationship(SELF, 'thermal isolation spacing requirement', 'INTERCONNECT_PLACEMENT_REQUIREMENTS_ARM.LAYOUT_SPACING_REQUIREMENT_OCCURRENCE')">
            <aggregate type="SET" lower="1" upper="1"/>
            <typename name="Predefined_requirement_view_definition"/>
         </derived>
         <where label="WR1" expression="NOT EXISTS(SELF\Product_view_definition.additional_characterization)"/>
         <where label="WR2" expression="NOT(EXISTS(thermal_bar_width) XOR EXISTS(number_of_bars))"/>
         <where label="WR3" expression="'INTERCONNECT_PLACEMENT_REQUIREMENTS_ARM.LAYOUT_SPACING_REQUIREMENT_OCCURRENCE' IN TYPEOF(thermal_isolation_spacing_requirement[1])"/>
         <where label="WR4" expression="NOT EXISTS(effective_current_capacity_requirement) OR&#10;              ((effective_current_capacity_requirement\Qualified_representation_item.qualifiers[1]\Type_qualifier.name in ['minimum'])&#10;              AND&#10;              ('VALUE_WITH_UNIT_EXTENSION_ARM.ELECTRIC_CURRENT_DATA_ELEMENT' IN TYPEOF(effective_current_capacity_requirement)))"/>
         <where label="WR5" expression="NOT EXISTS(angular_orientation_requirement) OR&#10;              ('VALUE_WITH_UNIT_EXTENSION_ARM.ANGLE_DATA_ELEMENT' IN TYPEOF(angular_orientation_requirement))"/>
         <where label="WR6" expression="NOT EXISTS(effective_thermal_resistance_requirement) OR&#10;              ((effective_thermal_resistance_requirement\Qualified_representation_item.qualifiers[1]\Type_qualifier.name in ['minimum'])&#10;              AND&#10;              ('VALUE_WITH_UNIT_EXTENSION_ARM.THERMAL_RESISTANCE_DATA_ELEMENT' IN TYPEOF(effective_thermal_resistance_requirement)))"/>
      </entity>
      <function name="get_specific_requirement_type_for_primary_rvd_relationship">
         <parameter name="input">
            <typename name="Requirement_view_definition"/>
         </parameter>
         <parameter name="id">
            <builtintype type="STRING"/>
         </parameter>
         <parameter name="reqType">
            <builtintype type="STRING"/>
         </parameter>
         <aggregate type="SET" lower="0" upper="?"/>
         <typename name="Predefined_requirement_view_definition"/>
         <algorithm>LOCAL
    rvdr : SET[0:?] OF Requirement_view_definition_relationship := [];
    rdp : SET[0:?] OF Predefined_requirement_view_definition := [];  --this gives us access to the information base
END_LOCAL;
	rvdr := bag_to_set(QUERY(rvdre &lt;* USEDIN (input, 'REQUIREMENT_DECOMPOSITION_ARM.'+ 'REQUIREMENT_VIEW_DEFINITION_RELATIONSHIP.SECONDARY')|
	                           ((rvdre.relation_type = id) AND (reqType IN TYPEOF(rvdre.primary)))
                       ));
	-- iterate over rvdr
	REPEAT i := 1 to SIZEOF(rvdr) by 1;
      rdp := rdp + rvdr[i].primary;
	END_REPEAT;

	RETURN(rdp);</algorithm>
      </function>
   </schema>
</express>
