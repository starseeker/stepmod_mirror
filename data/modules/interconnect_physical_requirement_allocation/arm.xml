<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="2005-08-24T14:27:49" rcs.revision="1.0" description.file="arm_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="interconnect_physical_requirement_allocation_arm schema_instance"/>
   <schema name="Interconnect_physical_requirement_allocation_arm">
      <interface kind="use" schema="Fabrication_technology_arm"/>
      <interface kind="use" schema="Requirement_view_definition_relationship_arm"/>
      <type name="thermal_isolation_removal_structure_or_template">
         <select extensible="YES" genericentity="YES" selectitems="Thermal_isolation_removal_template"/>
      </type>
      <entity name="Thermal_isolation_removal_template" supertypes="Material_removal_feature_template"/>
      <entity name="Thermal_isolation_requirement" supertypes="Requirement_view_definition">
         <derived name="effective_current_capacity_requirement" expression="get_specific_requirement_property_for_collector(SELF, 'effective current capacity requirement')">
            <aggregate type="SET" lower="1" upper="1"/>
            <typename name="Requirement_definition_property"/>
         </derived>
         <derived name="angular_orientation_requirement" expression="get_specific_requirement_property_for_collector(SELF, 'angular orientation requirement')">
            <aggregate type="SET" lower="1" upper="1"/>
            <typename name="Requirement_definition_property"/>
         </derived>
         <derived name="thermal_isolation_spacing_requirement" expression="get_specific_requirement_view_type_for_primary_rvd_relationship(SELF, 'thermal isolation spacing requirement', 'LAYOUT_SPACING_REQUIREMENT_OCCURRENCE')">
            <aggregate type="SET" lower="1" upper="1"/>
            <typename name="Layout_spacing_requirement_occurrence"/>
         </derived>
      </entity>
      <subtype.constraint name="material_removal_feature_template_subtypes" entity="Material_removal_feature_template" super.expression="ONEOF (Electrical_isolation_removal_template, Thermal_isolation_removal_template)"/>
      <function name="get_specific_requirement_property_for_collector">
         <parameter name="input">
            <typename name="Requirement_view_definition"/>
         </parameter>
         <parameter name="id">
            <builtintype type="STRING"/>
         </parameter>
         <aggregate type="SET" lower="0" upper="?"/>
         <typename name="Requirement_definition_property"/>
         <algorithm>LOCAL
    rcr : SET[0:?] OF Requirement_collection_relationship := [];
	rvd : SET[0:?] OF Requirement_view_definition := [];  --this gives us access to the information base
	rdp : SET[0:?] OF Requirement_definition_property :=[];
END_LOCAL;
	rcr := (QUERY(rai &lt;* USEDIN (input, 'REQUIREMENT_VIEW_DEFINITION_ARM.'+
	'REQUIREMENT_COLLECTION_RELATIONSHIP.COLLECTION') | 
          (rai\View_definition_relationship.relation_type = id)));

	-- iterate over rcr 
	REPEAT i := 1 to SIZEOF(rcr) by 1;
		rvd := rvd + rcr[i].member;
	END_REPEAT;
        -- get rdp 
        rdp := USEDIN (input, 'REQUIREMENT_DECOMPOSITION_ARM.'+
	'REQUIREMENT_DEFINITION_PROPERTY.ASSOCIATED_DEFINITION');

	RETURN(rdp);</algorithm>
      </function>
      <function name="get_specific_requirement_view_type_for_primary_rvd_relationship">
         <parameter name="input">
            <typename name="Requirement_view_definition"/>
         </parameter>
         <parameter name="id">
            <builtintype type="STRING"/>
         </parameter>
         <parameter name="reqType">
            <builtintype type="STRING"/>
         </parameter>
         <aggregate type="SET" lower="0" upper="?"/>
         <typename name="Requirement_view_definition"/>
         <algorithm>LOCAL
    rvdr : SET[0:?] OF Requirement_view_definition_relationship := [];
    rvd : SET[0:?] OF Requirement_view_definition := [];  --this gives us access to the information base
END_LOCAL;
	rvdr := (QUERY(rai &lt;* USEDIN (input, 'REQUIREMENT_DECOMPOSITION_ARM.'+
	'REQUIREMENT_VIEW_DEFINITION_RELATIONSHIP.SECONDARY') | 
          (reqType IN TYPEOF(rai.primary))));

	-- iterate over rvdr
	REPEAT i := 1 to SIZEOF(rvdr) by 1;
		rvd := rvd + rvdr[i].primary;
	END_REPEAT;

	RETURN(rvd);</algorithm>
      </function>
   </schema>
</express>
