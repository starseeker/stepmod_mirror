(*
   $Id: mim.exp,v 1.10 2005/02/10 13:32:11 liutkus Exp $
   ISO TC184/SC4/WG12 N3460 - ISO/CD-TS 10303-1690 Interconnect placement requirements - EXPRESS MIM
*)


SCHEMA Interconnect_placement_requirements_mim;
	USE FROM Assembly_component_placement_requirements_mim;	-- ISO/TS 10303-1634
	USE FROM Characteristic_mim;	-- ISO/TS 10303-1654
	USE FROM Land_mim;	-- ISO/TS 10303-1692
	USE FROM Layered_interconnect_module_3d_shape_mim;	-- ISO/TS 10303-1697
	USE FROM Layered_interconnect_module_design_mim;	-- ISO/TS 10303-1698
	USE FROM Non_feature_shape_element_mim;	-- ISO/TS 10303-1706
	USE FROM Part_template_extension_mim;	-- ISO/TS 10303-1718
	USE FROM Requirement_decomposition_mim;	-- ISO/TS 10303-1740
	
TYPE ipr_requirement_assigned_item = EXTENSIBLE GENERIC_ENTITY SELECT BASED_ON requirement_assigned_item WITH 
     (group_shape_aspect);
END_TYPE;
	
ENTITY interconnect_module_design_object_category
  SUBTYPE OF (characterized_object);
WHERE
  WR1: SELF\characterized_object.description IN 
       ['cutout category', 
       'fill area category', 
       'inter stratum feature category', 
       'stratum feature category', 
       'via category'];
END_ENTITY;

RULE interconnect_module_constraint_region_constraint FOR
  ( group_shape_aspect );
WHERE

  WR1: SIZEOF(QUERY(gsa <* group_shape_aspect |
       NOT(gsa\shape_aspect.description =
       'interconnect module constraint region')
       OR NOT (SIZEOF (QUERY (pd <* USEDIN (gsa,
       'INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.' +
       'PROPERTY_DEFINITION.DEFINITION') |
       NOT (SIZEOF (QUERY (pdr <* USEDIN (pd,
       'INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.' +
       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |
       ('INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.' +
       'SHAPE_REPRESENTATION' IN 
       TYPEOF (pdr.used_representation)) AND
       (('INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.' +
       'CSG_2D_SHAPE_REPRESENTATION' IN 
       TYPEOF (pdr.used_representation)) OR
       (pdr.used_representation.context_of_items\geometric_representation_context.coordinate_space_dimension = 3))
       )) = 1))) = 0)
       )) = 0;
END_RULE;

RULE layout_spacing_requirement_non_conforming_design_object_constraint FOR
( shape_aspect_relationship );
WHERE
  WR1: SIZEOF(QUERY(sar <* shape_aspect_relationship |
       (sar\shape_aspect_relationship.name = 'layout spacing requirement violation')
       AND (SIZEOF([
       'INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.'
       + 'COMPONENT_TERMINAL',
       'INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.'
       + 'COMPONENT_INTERFACE_TERMINAL',
       'INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.'
       + 'STRATUM_FEATURE'] * TYPEOF(sar.related_shape_aspect)
       ) = 0))) = 0;
  WR2: SIZEOF(QUERY(sar <* shape_aspect_relationship |
       (sar\shape_aspect_relationship.name = 'layout spacing requirement violation')
       AND (SIZEOF([
       'INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.'
       + 'COMPONENT_TERMINAL',
       'INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.'
       + 'COMPONENT_INTERFACE_TERMINAL',
       'INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.'
       + 'STRATUM_FEATURE'] * TYPEOF(sar.relating_shape_aspect)
       ) = 0))) = 0;
  WR3: SIZEOF(QUERY(sar <* shape_aspect_relationship |
       (sar\shape_aspect_relationship.name = 'layout spacing requirement violation')
       AND NOT(SIZEOF(QUERY(grp <* USEDIN(sar,
       'INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.'
       + 'PROPERTY_DEFINITION.DEFINITION') |
       ('INTERCONNECT_PLACEMENT_REQUIREMENTS_MIM.'
       + 'GROUP' IN TYPEOF(grp))
       AND (grp\group.name = 'layout spacing requirements property')
       )) = 1))) = 0;
END_RULE;
	
END_SCHEMA;


