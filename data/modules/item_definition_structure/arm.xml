<?xml version="1.0"?>
<!-- $Id: arm.xml,v 1.7 2003/02/06 15:50:57 goset1 Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express language_version="2" description.file="arm_descriptions.xml" rcs.date="$Date: 2003/02/06 15:50:57 $" rcs.revision="$Revision: 1.7 $">
	<application name="express2xml.js" owner="Eurostep Limited" url="http://www.eurostep.com" version="1.26" source="../data/modules/item_definition_structure/arm.exp"/>
	<schema name="Item_definition_structure_arm">
		<interface kind="use" schema="Effectivity_application_arm"/>
		<interface kind="use" schema="Product_occurrence_arm"/>
		<interface kind="use" schema="Product_structure_arm"/>
		<interface kind="reference" schema="Product_identification_arm">
			<interfaced.item name="types_of_product"/>
		</interface>
		<type name="effectivity_for_replacement">
			<select basedon="effectivity_item" selectitems="Part_definition_relationship"/>
		</type>
		<entity name="Assembled_part_association" supertypes="Part_occurrence_definition_relationship Assembly_component_relationship">
			<explicit name="relating_view">
				<typename name="Assembly_definition"/>
				<redeclaration entity-ref="View_definition_relationship"/>
			</explicit>
		</entity>
		<entity name="Assembly_definition" supertypes="Part_view_definition">
			<where label="WR1" expression="'assembly' IN types_of(SELF\Product_view_definition.defined_version.of_product)"/>
		</entity>
		<entity name="Geometrical_relationship" supertypes="Part_definition_relationship">
			<explicit name="definition_placement">
				<typename name="template_instance"/>
			</explicit>
			<derived name="View_definition_relationship.relation_type" expression="'SELF\geometrical relationship'">
				<builtintype type="STRING"/>
			</derived>
		</entity>
		<entity name="Part_definition_relationship" supertypes="View_definition_relationship">
			<explicit name="relating_view">
				<typename name="Part_view_definition"/>
				<redeclaration entity-ref="View_definition_relationship"/>
			</explicit>
			<explicit name="related_view">
				<typename name="Part_view_definition"/>
				<redeclaration entity-ref="View_definition_relationship"/>
			</explicit>
		</entity>
		<rule name="Definition_replacement_requires_effectivity_assignment" appliesto="Part_definition_relationship">
			<algorithm/>
			<where label="WR1" expression="SIZEOF( QUERY( pdr &lt;* Part_definition_relationship | 	(pdr\View_definition_relationship.relation_type = 'definition replacement') AND 	(SIZEOF( USEDIN(pdr,'ITEM_DEFINITION_STRUCTURE_ARM.EFFECTIVITY_ASSIGNMENT.ITEMS') ) = 0) ))	 = 0"/>
		</rule>
		<rule name="Mandatory_part_occurrence_definition_relationship" appliesto="Assembly_component_relationship">
			<algorithm>
LOCAL
  assemblies_of_parts: SET OF Assembly_component_relationship := [];
END_LOCAL;
  assemblies_of_parts := QUERY(acr &lt;* Assembly_component_relationship |
	'ITEM_DEFINITION_STRUCTURE_MIM.PART_VIEW_DEFINITION' IN TYPEOF(SELF\View_definition_relationship.relating_view));
            </algorithm>
			<where label="WR1" expression="SIZEOF(QUERY(ar &lt;* assemblies_of_parts | 	NOT ('ITEM_DEFINITION_STRUCTURE_ARM.ASSEMBLED_PART_ASSOCIATION' IN TYPEOF(ar)) ))= 0"/>
		</rule>
	</schema>
</express>
