<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express description.file="arm_descriptions.xml" language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" reference="ISO/TS 10303-1796">
   <application name="JSDAI" owner="LKSoft" source="kinematic_motion_representation_arm schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="Kinematic_motion_representation_arm">
      <interface kind="use" schema="Kinematic_state_arm"/>
      <interface kind="use" schema="B_spline_geometry_arm"/>
      <interface kind="use" schema="Parametric_representation_arm"/>
      <interface kind="use" schema="Contextual_shape_positioning_arm"/>
      <interface kind="reference" schema="Foundation_representation_arm">
         <interfaced.item name="using_representations"/>
      </interface>
      <type name="interpolation_type">
         <enumeration items="undefined_interpolation_type discontinuous_interpolation_type synchronous_interpolation_type linear_interpolation_type"/>
      </type>
      <type name="kmr_geometric_representation_select">
         <select basedon="geometric_representation_select" extensible="YES" genericentity="YES" selectitems="Link_motion_representation_along_path"/>
      </type>
      <type name="kmr_initial_application_domain_enumeration">
         <enumeration basedon="initial_application_domain_enumeration" items="motion"/>
      </type>
      <type name="link_or_shape_representation">
         <select selectitems="Kinematic_link_representation Geometric_model"/>
      </type>
      <entity name="Circular_path" supertypes="Path_node">
         <explicit name="via_point">
            <typename name="Cartesian_point"/>
         </explicit>
      </entity>
      <entity name="Curve_based_path" supertypes="Path_node">
         <explicit name="path_curve">
            <typename name="Curve"/>
         </explicit>
      </entity>
      <entity name="Curve_based_path_with_orientation" supertypes="Kinematic_path_segment">
         <explicit name="position_curve">
            <typename name="Bounded_curve"/>
         </explicit>
         <explicit name="orientation_curve">
            <typename name="Bounded_curve"/>
         </explicit>
         <where expression="TYPEOF(position_curve) = TYPEOF(orientation_curve)" label="WR1"/>
      </entity>
      <entity name="Curve_based_path_with_orientation_and_parameters" supertypes="Curve_based_path_with_orientation">
         <explicit name="parameters">
            <typename name="Path_parameter_representation"/>
         </explicit>
      </entity>
      <entity name="Geometric_representation_context_with_parameter" supertypes="Geometric_coordinate_space">
         <explicit name="parameter_unit" optional="YES">
            <typename name="Unit"/>
         </explicit>
      </entity>
      <entity name="Interpolated_configuration_representation" supertypes="Representation">
         <explicit name="context_of_items">
            <typename name="Geometric_representation_context_with_parameter"/>
            <redeclaration entity-ref="Representation"/>
         </explicit>
         <explicit name="items">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="Interpolated_configuration_sequence"/>
            <redeclaration entity-ref="Representation"/>
         </explicit>
      </entity>
      <entity name="Interpolated_configuration_segment">
         <explicit name="state">
            <typename name="Mechanism_state_representation"/>
         </explicit>
         <explicit name="t_parameter">
            <typename name="parameter_value"/>
         </explicit>
         <explicit name="interpolation">
            <typename name="interpolation_type"/>
         </explicit>
      </entity>
      <entity name="Interpolated_configuration_sequence" supertypes="Representation_item">
         <explicit name="segments">
            <aggregate lower="2" type="LIST" upper="?"/>
            <typename name="Interpolated_configuration_segment"/>
         </explicit>
         <derived expression="SIZEOF(segments)" name="n_segments">
            <builtintype type="INTEGER"/>
         </derived>
         <derived expression="segments[n_segments].interpolation &lt;&gt; discontinuous_interpolation_type" name="closed_interpolation">
            <builtintype type="LOGICAL"/>
         </derived>
         <derived expression="segments[1].state.represented_mechanism" name="configured_mechanism">
            <typename name="Mechanism_representation"/>
         </derived>
         <where expression="SIZEOF( QUERY(ics &lt;* segments | ics.state.represented_mechanism :&lt;&gt;: configured_mechanism)) = 0" label="WR1"/>
      </entity>
      <entity name="Item_link_motion_relationship" supertypes="Link_motion_relationship">
         <explicit name="rep_1">
            <typename name="Geometric_model"/>
            <redeclaration entity-ref="Representation_relationship"/>
         </explicit>
         <explicit name="item">
            <typename name="Detailed_geometric_model_element"/>
         </explicit>
      </entity>
      <entity abstract.supertype="YES" name="Kinematic_path" super.expression="ONEOF (Kinematic_path_defined_by_nodes, Kinematic_path_defined_by_curves)" supertypes="Detailed_geometric_model_element">
         <explicit name="segments">
            <aggregate lower="1" type="LIST" upper="?"/>
            <typename name="Kinematic_path_segment"/>
         </explicit>
         <explicit name="t_start">
            <typename name="parameter_value"/>
         </explicit>
         <derived expression="SIZEOF(segments)" name="n_segments">
            <builtintype type="INTEGER"/>
         </derived>
         <derived expression="segments[n_segments].transition &lt;&gt; curve_transition_code.discontinuous" name="closed_path">
            <builtintype type="LOGICAL"/>
         </derived>
         <where expression="SIZEOF(QUERY(using_rep &lt;* using_representations(SELF)| &#10;        NOT('KINEMATIC_MOTION_REPRESENTATION_ARM.GEOMETRIC_REPRESENTATION_CONTEXT_WITH_PARAMETER' IN TYPEOF(using_rep.context_of_items))))= 0" label="WR1"/>
         <where expression="('KINEMATIC_MOTION_REPRESENTATION_ARM.CURVE_BASED_PATH_WITH_ORIENTATION' IN TYPEOF(segments[1]))&#10;      OR (n_segments &gt; 1)" label="WR2"/>
      </entity>
      <entity name="Kinematic_path_defined_by_curves" supertypes="Kinematic_path">
         <explicit name="segments">
            <aggregate lower="1" type="LIST" upper="?"/>
            <typename name="Curve_based_path_with_orientation"/>
            <redeclaration entity-ref="Kinematic_path"/>
         </explicit>
      </entity>
      <entity name="Kinematic_path_defined_by_nodes" supertypes="Kinematic_path">
         <explicit name="segments">
            <aggregate lower="1" type="LIST" upper="?"/>
            <typename name="Path_node"/>
            <redeclaration entity-ref="Kinematic_path"/>
         </explicit>
         <explicit name="placement_start">
            <typename name="Axis_placement"/>
         </explicit>
      </entity>
      <entity abstract.supertype="YES" name="Kinematic_path_segment" super.expression="ONEOF (Path_node, Curve_based_path_with_orientation)">
         <explicit name="t_end">
            <typename name="parameter_value"/>
         </explicit>
         <explicit name="transition">
            <typename name="curve_transition_code"/>
         </explicit>
      </entity>
      <entity name="Linear_path" supertypes="Path_node">
         <derived expression="curve_transition_code.continuous" name="transition">
            <typename name="curve_transition_code"/>
            <redeclaration entity-ref="Kinematic_path_segment"/>
         </derived>
      </entity>
      <entity name="Link_motion_relationship" supertypes="Definitional_representation_relationship Geometric_model_relationship_with_transformation">
         <explicit name="rep_1">
            <typename name="link_or_shape_representation"/>
            <redeclaration entity-ref="Geometric_model_relationship"/>
         </explicit>
         <explicit name="rep_2">
            <typename name="Link_motion_representation_along_path"/>
            <redeclaration entity-ref="Geometric_model_relationship"/>
         </explicit>
         <explicit name="transformation_operator">
            <typename name="Link_motion_transformation"/>
         </explicit>
         <where expression="transformation_operator.transform_item_1 IN rep_1.items" label="WR1"/>
         <where expression="transformation_operator.transform_item_2 IN rep_2.items" label="WR2"/>
      </entity>
      <entity name="Link_motion_representation_along_path" supertypes="Representation">
         <explicit name="items">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="Kinematic_path"/>
            <redeclaration entity-ref="Representation"/>
         </explicit>
         <explicit name="context_of_items">
            <typename name="Geometric_representation_context_with_parameter"/>
            <redeclaration entity-ref="Representation"/>
         </explicit>
      </entity>
      <entity name="Link_motion_transformation">
         <explicit name="transform_item_1">
            <typename name="rigid_placement"/>
         </explicit>
         <explicit name="transform_item_2">
            <typename name="Kinematic_path"/>
         </explicit>
      </entity>
      <entity abstract.supertype="YES" name="Path_node" super.expression="ONEOF (Point_to_point_path, Circular_path, Linear_path, Curve_based_path)" supertypes="Kinematic_path_segment">
         <explicit name="placement_end">
            <typename name="Axis_placement"/>
         </explicit>
      </entity>
      <entity name="Path_parameter_representation" supertypes="Definitional_representation">
         <explicit name="context_of_items">
            <typename name="Path_parameter_representation_context"/>
            <redeclaration entity-ref="Representation"/>
         </explicit>
         <explicit name="items">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="Bounded_curve"/>
            <redeclaration entity-ref="Representation"/>
         </explicit>
         <where expression="SELF\Representation.context_of_items\Geometric_coordinate_space.dimension_count = 2" label="WR1"/>
      </entity>
      <entity name="Path_parameter_representation_context" supertypes="Geometric_coordinate_space Parametric_representation_context"/>
      <entity name="Point_to_point_path" supertypes="Path_node">
         <derived expression="curve_transition_code.discontinuous" name="transition">
            <typename name="curve_transition_code"/>
            <redeclaration entity-ref="Kinematic_path_segment"/>
         </derived>
      </entity>
      <subtype.constraint entity="Representation" name="kmr_representation_subtypes" super.expression="ONEOF (Interpolated_configuration_representation, Link_motion_representation_along_path)"/>
      <subtype.constraint entity="Detailed_geometric_model_element" name="kmr_geometric_representation_item_subtypes" super.expression="ONEOF (Kinematic_path, Axis_placement)"/>
      <subtype.constraint entity="Geometric_coordinate_space" name="kmr_geometric_representation_context_subtypes" super.expression="ONEOF (Geometric_representation_context_with_parameter, Path_parameter_representation_context)"/>
   </schema>
</express>
