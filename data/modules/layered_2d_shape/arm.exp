(*
   $Id: arm.exp,v 1.25 2005/11/15 08:23:09 liutkus Exp $
   ISO TC184/SC4/WG12 N3468 - ISO/CD-TS 10303-1693 Layered 2d shape - EXPRESS ARM
*)

SCHEMA Layered_2d_shape_arm;

	USE FROM Constructive_solid_geometry_2d_arm;	-- ISO/TS 10303-1731
	USE FROM Wireframe_2d_arm; 	-- ISO/TS 10303-1347
	USE FROM Feature_arm;	-- ISO/TS 10303-xxxx
	USE FROM Area_2d_arm;	-- ISO/TS 10303-1631


  	TYPE part_template_or_physical_unit_2d_shape_select = EXTENSIBLE GENERIC_ENTITY SELECT;
  	END_TYPE;

  ENTITY Part_template_or_physical_unit_2d_shape_representation_relationship
  	SUBTYPE OF (Geometric_model_relationship);
      SELF\Geometric_model_relationship.rep_1 RENAMED principal_part_shape : part_template_or_physical_unit_2d_shape_select;
      SELF\Geometric_model_relationship.rep_2 RENAMED related_part_shape   : part_template_or_physical_unit_2d_shape_select;
    UNIQUE
      UR1 : principal_part_shape,
 related_part_shape;
    WHERE
      WR1 : principal_part_shape :<>: related_part_shape;
      WR2 : NOT EXISTS(SELF\Representation_relationship.relation_type);
  END_ENTITY;

  ENTITY Planar_projected_shape_model
    SUBTYPE OF (Planar_shape,
 Feature_shape_definition);
    WHERE
      WR1 : NOT EXISTS(SELF\Representation.name);
  END_ENTITY;

  ENTITY Planar_shape
    ABSTRACT SUPERTYPE OF(Planar_projected_shape_model) 
    SUBTYPE OF (Geometric_model);
    WHERE
      WR1 : SELF\Geometric_model.context_of_items.dimension_count = 2;
  END_ENTITY;

  ENTITY Reference_geometric_representation_relationship
    SUBTYPE OF (Geometric_model_relationship);
      related_feature_shape_placement : axis_placement_or_cto2d;
      SELF\Geometric_model_relationship.rep_1 RENAMED related_feature_shape   : Feature_shape_definition;
      SELF\Geometric_model_relationship.rep_2 RENAMED resultant_feature_shape : Feature_shape_definition;
    WHERE
      WR1 : EXISTS(related_feature_shape_placement) OR (related_feature_shape.context_of_items :=: resultant_feature_shape.context_of_items);
(** TODO For Tom - convert WR3 into a global rule in Assembly_module_design 
      WR3 : NOT ((SIZEOF(['LAYERED_2D_SHAPE_ARM.PHYSICAL_UNIT_PLANAR_SHAPE_MODEL',
 'LAYERED_2D_SHAPE_ARM.PHYSICAL_UNIT_3D_SHAPE_MODEL'] * TYPEOF(related_feature_shape)) = 1) AND ('LAYERED_2D_SHAPE_ARM.ASSEMBLY_MODULE' IN TYPEOF(related_feature_shape.shape_characterized_physical_unit))) OR NOT EXISTS(related_feature_shape_placement);
*) 
(** TODO For Tom - convert WR4 into a global rule in Interconnect_module_design 
      WR4 : NOT ((SIZEOF(['LAYERED_2D_SHAPE_ARM.PHYSICAL_UNIT_PLANAR_SHAPE_MODEL',
 'LAYERED_2D_SHAPE_ARM.PHYSICAL_UNIT_3D_SHAPE_MODEL'] * TYPEOF(related_feature_shape)) = 1) AND ('LAYERED_2D_SHAPE_ARM.INTERCONNECT_MODULE' IN TYPEOF(related_feature_shape.shape_characterized_physical_unit))) OR NOT EXISTS(related_feature_shape_placement);
*) 
  END_ENTITY;

END_SCHEMA;

