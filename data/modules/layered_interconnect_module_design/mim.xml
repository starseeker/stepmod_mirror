<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="2005-03-01T15:19:01" rcs.revision="1.0" description.file="mim_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="layered_interconnect_module_design_mim schema_instance"/>
   <schema name="Layered_interconnect_module_design_mim">
      <interface kind="use" schema="Basic_curve_mim"/>
      <interface kind="use" schema="Component_feature_mim"/>
      <interface kind="use" schema="Component_grouping_mim"/>
      <interface kind="use" schema="Extended_elemental_geometric_shape_mim"/>
      <interface kind="use" schema="Extended_geometric_tolerance_mim"/>
      <interface kind="use" schema="Fabrication_technology_mim"/>
      <interface kind="use" schema="Form_features_mim"/>
      <interface kind="use" schema="Interconnect_module_usage_view_mim"/>
      <interface kind="use" schema="Interconnect_physical_requirement_allocation_mim"/>
      <interface kind="use" schema="Part_template_2d_shape_mim"/>
      <interface kind="use" schema="Part_template_extension_mim"/>
      <interface kind="use" schema="Physical_connectivity_definition_mim"/>
      <interface kind="use" schema="Physical_unit_design_view_mim"/>
      <interface kind="use" schema="Printed_physical_layout_template_mim"/>
      <interface kind="use" schema="Requirement_assignment_mim"/>
      <type name="limd_document_reference_item">
         <select extensible="YES" genericentity="YES" basedon="document_reference_item" selectitems="inter_stratum_feature stratum stratum_feature"/>
      </type>
      <entity name="conductive_interconnect_element_terminal_link" supertypes="shape_aspect shape_aspect_relationship">
         <where label="WR1" expression="SELF\shape_aspect_relationship.related_shape_aspect :&lt;&gt;:&#10;       SELF\shape_aspect_relationship.relating_shape_aspect"/>
         <where label="WR2" expression="'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'COMPONENT_TERMINAL' IN&#10;       TYPEOF (SELF\shape_aspect_relationship.related_shape_aspect)"/>
         <where label="WR3" expression="'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'COMPONENT_TERMINAL' IN&#10;       TYPEOF (SELF\shape_aspect_relationship.relating_shape_aspect)"/>
         <where label="WR4" expression="SIZEOF(TYPEOF(SELF) - TYPEOF(SELF\shape_aspect ||&#10;       SELF\shape_aspect_relationship ||&#10;       SELF\conductive_interconnect_element_terminal_link)) = 0"/>
         <where label="WR5" expression="SELF\shape_aspect.name = ''"/>
         <where label="WR6" expression="SELF\shape_aspect_relationship.name = ''"/>
         <where label="WR7" expression="'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'COMPONENT_DEFINITION' IN&#10;       TYPEOF (SELF\shape_aspect.of_shape.definition)"/>
         <where label="WR8" expression="SELF\shape_aspect_relationship.related_shape_aspect.description = 'conductive interconnect element terminal'"/>
         <where label="WR9" expression="SELF\shape_aspect_relationship.relating_shape_aspect.description = 'conductive interconnect element terminal'"/>
         <where label="WR10" expression="SELF\shape_aspect.of_shape.definition\product_definition.description = 'laminate component'"/>
      </entity>
      <entity name="connected_area_component" supertypes="assembly_component">
         <where label="WR3" expression="SELF\product_definition.description = 'stratum feature template component'"/>
         <where label="WR4" expression="SIZEOF(TYPEOF(SELF) - TYPEOF(SELF\shape_aspect ||&#10;       SELF\component_definition||&#10;       SELF\connected_area_component)) = 0"/>
      </entity>
      <entity name="electrical_isolation_component_definition" supertypes="filled_area_material_removal_component_definition"/>
      <entity name="fiducial" supertypes="assembly_component">
         <where label="WR1" expression="(description = 'laminate component')"/>
      </entity>
      <entity name="fiducial_stratum_feature" supertypes="stratum_feature"/>
      <entity name="filled_area_material_removal_component_definition" supertypes="material_removal_component_definition"/>
      <entity name="footprint_occurrence" supertypes="assembly_group_component_definition"/>
      <entity name="footprint_occurrence_product_definition_relationship" supertypes="product_definition_relationship">
         <where label="WR1" expression="SELF\product_definition_relationship.related_product_definition :&lt;&gt;:&#10;       SELF\product_definition_relationship.relating_product_definition"/>
         <where label="WR2" expression="SELF\product_definition_relationship.name = 'footprint occurrence sub assembly relationship'"/>
      </entity>
      <entity name="inter_stratum_feature" supertypes="assembly_component">
         <where label="WR1" expression="SELF\product_definition.description IN ['bonded conductive base blind via', &#10;       'buried via', 'component termination passage', &#10;       'interfacial connection', 'non conductive base blind via', &#10;       'plated conductive base blind via', 'plated cutout', &#10;       'partially plated cutout', &#10;       'plated cutout edge segment', &#10;       'partially plated interconnect module edge', &#10;       'plated interconnect module edge segment', &#10;       'plated interconnect module edge', 'unsupported passage', 'cutout', &#10;       'physical connectivity interrupting cutout', &#10;       'dielectric material passage', 'cutout edge segment', &#10;       'interconnect module edge segment', 'interconnect module edge']"/>
         <where label="WR2" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       (SIZEOF (QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       SIZEOF (QUERY (it &lt;* pdr.used_representation.items |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'DESCRIPTIVE_REPRESENTATION_ITEM'&#10;       IN TYPEOF (it)) AND&#10;       (it\representation_item.name = 'feature of size') AND&#10;       (it\descriptive_representation_item.description IN ['true', 'false']))) = 1)) = 1))) = 1"/>
         <where label="WR3" expression="SIZEOF (QUERY (it &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'instantiated template') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'TEMPLATE_DEFINITION' IN&#10;       TYPEOF (it.relating_product_definition)) AND&#10;       (it.relating_product_definition\product_definition.description IN&#10;       ['inter stratum feature template',&#10;       'via template',&#10;       'component termination passage template',&#10;       'unsupported passage template']))) = 1"/>
         <where label="WR4" expression="(NOT (SELF\product_definition.description = 'cutout edge segment')) OR&#10;       (SIZEOF (QUERY (cc &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'composed cutout') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'INTER_STRATUM_FEATURE' IN&#10;       TYPEOF (cc.relating_product_definition)) AND&#10;       ((cc.relating_product_definition\product_definition.description =&#10;       'cutout') OR&#10;       (cc.relating_product_definition\product_definition.description =&#10;       'physical connectivity interrupting cutout') OR&#10;       (cc.relating_product_definition\product_definition.description =&#10;       'partially plated cutout')))) = 1)"/>
         <where label="WR5" expression="(NOT (SELF\product_definition.description = 'interconnect module edge segment')) OR&#10;       (SIZEOF (QUERY (ce &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'composed edge') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'INTER_STRATUM_FEATURE' IN&#10;       TYPEOF (ce.relating_product_definition)) AND&#10;       ((ce.relating_product_definition\product_definition.description =&#10;       'interconnect module edge') OR&#10;       (ce.relating_product_definition\product_definition.description =&#10;       'interconnect module edge')&#10;        ))) = 1)"/>
         <where label="WR6" expression="(NOT (SELF\product_definition.description = 'dielectric material passage')) OR&#10;       (SIZEOF (QUERY (pp &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'precedent passage') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'INTER_STRATUM_FEATURE' IN&#10;       TYPEOF (pp.relating_product_definition)) AND&#10;       ((pp.relating_product_definition\product_definition.description =&#10;       'cutout') OR&#10;       (pp.relating_product_definition\product_definition.description =&#10;       'physical connectivity interrupting cutout') OR&#10;       (pp.relating_product_definition\product_definition.description =&#10;       'partially plated cutout')))) = 1)"/>
         <where label="WR7" expression="(NOT (SELF\product_definition.description = 'dielectric material passage')) OR&#10;       ((SIZEOF (QUERY (rp &lt;* QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'REQUIREMENTS_PROPERTY' IN&#10;       TYPEOF (pd)) |&#10;       rp\property_definition.name = 'feature material')) &lt;= 1) OR&#10;       (SIZEOF (USEDIN (SELF, &#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MATERIAL_DESIGNATION.DEFINITIONS')) &lt;= 1))"/>
         <where label="WR8" expression="(NOT (SELF\product_definition.description = &#10;       'physical connectivity interrupting cutout')) OR&#10;       (SIZEOF (QUERY (ice &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'interrupted connectivity elements') |&#10;       ice.relating_product_definition\product_definition.name =&#10;       'conductive interconnect element')) &gt;= 1)"/>
         <where label="WR9" expression="(NOT (SELF\product_definition.description = 'unsupported passage')) OR&#10;       (SIZEOF (QUERY (it &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'instantiated template') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'TEMPLATE_DEFINITION' IN&#10;       TYPEOF (it.relating_product_definition)) AND&#10;       (it.relating_product_definition\product_definition.description =&#10;       'unsupported passage template'))) = 1)"/>
         <where label="WR10" expression="(NOT (SELF\product_definition.description = 'cutout edge segment')) OR&#10;       (SIZEOF (QUERY (it &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'instantiated template') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'INTER_STRATUM_FEATURE_EDGE_SEGMENT_TEMPLATE' IN&#10;       TYPEOF (it.relating_product_definition)))) = 1)"/>
         <where label="WR11" expression="(NOT (SELF\product_definition.description = &#10;       'plated cutout edge segment')) OR&#10;       (SIZEOF (QUERY (it &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'instantiated template') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'INTER_STRATUM_FEATURE_EDGE_SEGMENT_TEMPLATE' IN&#10;       TYPEOF (it.relating_product_definition)))) = 1)"/>
         <where label="WR12" expression="(NOT (SELF\product_definition.description = &#10;       'interconnect module edge segment')) OR&#10;       (SIZEOF (QUERY (it &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'instantiated template') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'INTER_STRATUM_FEATURE_EDGE_SEGMENT_TEMPLATE' IN&#10;       TYPEOF (it.relating_product_definition)))) = 1)"/>
         <where label="WR13" expression="(NOT (SELF\product_definition.description = &#10;       'plated interconnect module edge segment')) OR&#10;       (SIZEOF (QUERY (it &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'instantiated template') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'INTER_STRATUM_FEATURE_EDGE_SEGMENT_TEMPLATE' IN&#10;       TYPEOF (it.relating_product_definition)))) = 1)"/>
      </entity>
      <entity name="interconnect_module_join_terminal" supertypes="interconnect_module_terminal"/>
      <entity name="interface_access_component_definition" supertypes="assembly_component"/>
      <entity name="interface_access_material_removal_component_definition" supertypes="material_removal_component_definition"/>
      <entity name="internal_probe_access_area" supertypes="probe_access_area"/>
      <entity name="join_shape_aspect" supertypes="shape_aspect">
         <where label="WR1" expression="NOT(SELF\shape_aspect.name IN ['constrained intra layer join',&#10;       'inter stratum join', 'intra stratum join']) OR &#10;       (SIZEOF (QUERY (cp &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'connected point') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LAYER_CONNECTION_POINT' IN&#10;       TYPEOF (cp.related_shape_aspect))) &gt;= 2)"/>
         <where label="WR2" expression="SIZEOF (QUERY (nt &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'network topology') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PHYSICAL_NETWORK' IN&#10;       TYPEOF (nt.relating_shape_aspect))) = 1"/>
         <where label="WR3" expression="(NOT (SELF\shape_aspect.name = 'intra stratum join')) OR&#10;       (SIZEOF (QUERY (ji &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'join implementation') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_FEATURE' IN&#10;       TYPEOF (ji.related_shape_aspect)) AND&#10;       (ji.related_shape_aspect\shape_aspect.description = 'conductor'))) &lt;= 1)"/>
         <where label="WR4" expression="(NOT (SELF\shape_aspect.name = 'intra stratum join')) OR&#10;       (SIZEOF (QUERY (ji &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'join implementation') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_FEATURE' IN&#10;       TYPEOF (ji.related_shape_aspect)) AND&#10;       (ji.related_shape_aspect\shape_aspect.description = 'connected filled area'))) &#10;       &lt;= 1)"/>
         <where label="WR5" expression="(NOT (SELF\shape_aspect.name = 'inter stratum join')) OR&#10;       (SIZEOF (QUERY (ji &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'join implementation') |&#10;       (('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_CONCEPT_RELATIONSHIP' IN&#10;       TYPEOF (ji.related_shape_aspect)) AND&#10;       (ji.related_shape_aspect\shape_aspect.description = &#10;       'physical network supporting stratum feature conductive join')) OR&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PLATED_INTER_STRATUM_FEATURE' IN&#10;       TYPEOF (ji.related_shape_aspect)))) &lt;= 1)"/>
         <where label="WR6" expression="NOT(SELF\shape_aspect.name = 'unrouted join') OR&#10;       (SIZEOF (QUERY (cp &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'unrouted terminals') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'COMPONENT_TERMINAL' IN&#10;       TYPEOF (cp.related_shape_aspect))) &gt;= 2)"/>
      </entity>
      <entity name="laminate_component_feature" abstract.supertype="YES" supertypes="component_feature" super.expression="ONEOF (laminate_component_interface_terminal, laminate_component_join_terminal)"/>
      <entity name="laminate_component_interface_terminal" supertypes="laminate_component_feature">
         <where label="WR1" expression="(NOT (SELF\shape_aspect.description IN &#10;       ['component termination passage interface terminal', &#10;       'land interface terminal', &#10;       'printed connector component interface terminal',&#10;       'non functional land interface terminal'])) OR&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'COMPONENT_DEFINITION' IN&#10;       TYPEOF (SELF.of_shape.definition))"/>
         <where label="WR2" expression="SIZEOF (QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'instantiated feature')) = 1"/>
         <where label="WR4" expression="(NOT (SELF\shape_aspect.description = &#10;       'component termination passage interface terminal')) OR&#10;       (SIZEOF (QUERY (i_f &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'instantiated feature') |&#10;       i_f.relating_shape_aspect\shape_aspect.description =&#10;       'component termination passage template interface terminal')) = 1)"/>
         <where label="WR5" expression="(NOT (SELF\shape_aspect.description IN&#10;       ['land interface terminal',&#10;       'non functional land interface terminal'])) OR&#10;       (SIZEOF (QUERY (i_f &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'instantiated feature') |&#10;       (('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LAND_TEMPLATE_TERMINAL' IN&#10;       TYPEOF (i_f.relating_shape_aspect)) AND&#10;       (TRUE)))) = 1)"/>
         <where label="WR8" expression="(NOT (SELF\shape_aspect.description = &#10;       'printed connector component interface terminal')) OR&#10;       (SELF.product_definitional)"/>
         <where label="WR9" expression="(NOT (SELF\shape_aspect.description = &#10;       'printed connector component interface terminal')) OR&#10;       (('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRINTED_COMPONENT' IN&#10;       TYPEOF (SELF.of_shape.definition)) AND&#10;       (SELF.of_shape.definition\product_definition.description = &#10;       'printed connector component'))"/>
         <where label="WR10" expression="(NOT (SELF\shape_aspect.description = &#10;       'printed connector component interface terminal')) OR&#10;       (SIZEOF (QUERY (i_f &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'instantiated feature') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRINTED_PART_TEMPLATE_TERMINAL' IN&#10;       TYPEOF (i_f.relating_shape_aspect)) AND&#10;       (i_f.relating_shape_aspect\shape_aspect.description =&#10;       'interface terminal'))) = 1)"/>
         <where label="WR11" expression="(NOT (SELF\shape_aspect.description =&#10;       'printed connector component interface terminal')) OR&#10;       (SIZEOF (QUERY (i &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       pdr\shape_aspect_relationship.name = 'implementation') |&#10;       (SIZEOF (['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_FEATURE'] *&#10;       TYPEOF (i.relating_shape_aspect)) = 1)&#10;       )) = 1)"/>
         <where label="WR12" expression="('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'COMPONENT_DEFINITION' IN&#10;       TYPEOF (SELF.of_shape.definition)) AND&#10;       (SELF.of_shape.definition\&#10;        product_definition.frame_of_reference\&#10;        application_context_element.name = 'layout occurrence')"/>
      </entity>
      <entity name="laminate_component_join_terminal" supertypes="laminate_component_feature component_terminal"/>
      <entity name="laminate_group_component_make_from_relationship" supertypes="make_from_usage_option">
         <where label="WR1" expression="SIZEOF (['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'ASSEMBLY_GROUP_COMPONENT_DEFINITION'] *&#10;       TYPEOF (SELF.relating_product_definition)) = 1"/>
         <where label="WR2" expression="SIZEOF (['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'ASSEMBLY_GROUP_COMPONENT_DEFINITION'] *&#10;       TYPEOF (SELF.related_product_definition)) = 1"/>
         <where label="WR3" expression="SIZEOF( QUERY(pd &lt;* USEDIN(SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;        (SIZEOF( QUERY(pdr &lt;* USEDIN(SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION') |&#10;       ((pdr.name = 'stratum mapping') AND&#10;       (pdr.related_property_definition\property_definition.&#10;         definition\product_definition_relationship.name = 'stratum make from')&#10;        AND&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;        'MAKE_FROM_USAGE_OPTION' IN &#10;         TYPEOF(pdr.related_property_definition\property_definition.definition)))&#10;          )) &gt; 0) &#10;        )) &gt; 0"/>
      </entity>
      <entity name="layer" supertypes="shape_aspect">
         <unique label="UR1">
            <unique.attribute entity-ref="layer" attribute="name"/>
         </unique>
         <where label="WR1" expression="SIZEOF (QUERY (ada &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'APPLIED_DOCUMENT_REFERENCE.ITEMS') |&#10;       SIZEOF (QUERY (duc &lt;* USEDIN (ada.assigned_document,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'DOCUMENT_USAGE_CONSTRAINT.SOURCE') |&#10;       duc\document_usage_constraint.subject_element = 'layer definition')) = 1)) &lt;= 1"/>
         <where label="WR2" expression="('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP'&#10;       IN TYPEOF (SELF.of_shape.definition)) AND&#10;       (SELF.of_shape.definition\product_definition_relationship.name = &#10;                                    'inter stratum extent')"/>
      </entity>
      <entity name="layer_connection_point" supertypes="shape_aspect">
         <unique label="UR1">
            <unique.attribute entity-ref="layer_connection_point" attribute="name"/>
            <unique.attribute entity-ref="layer_connection_point" attribute="of_shape"/>
         </unique>
         <where label="WR1" expression="SELF\shape_aspect.of_shape.definition\product_definition.&#10;       name = 'design layer'"/>
         <where label="WR2" expression="SIZEOF (QUERY (cp &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'connected point') |&#10;       (('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'JOIN_SHAPE_ASPECT' IN&#10;       TYPEOF (cp.relating_shape_aspect)) AND &#10;       (cp.relating_shape_aspect.name = 'inter stratum join')))) &lt;= 1"/>
         <where label="WR3" expression="SIZEOF (QUERY (cp &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'connected point') |&#10;       (('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'JOIN_SHAPE_ASPECT' IN&#10;       TYPEOF (cp.relating_shape_aspect)) AND &#10;       (cp.relating_shape_aspect.name = 'intra stratum join')))) = 1"/>
         <where label="WR4" expression="NOT(&#10;       SIZEOF (QUERY (cp &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'connected point') |&#10;       (('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'JOIN_SHAPE_ASPECT' IN&#10;       TYPEOF (cp.relating_shape_aspect)) AND &#10;       (cp.relating_shape_aspect.name = 'inter stratum join')))) = 1)&#10;       OR&#10;       (SIZEOF (QUERY (cp &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'connected point') |&#10;       (('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'JOIN_SHAPE_ASPECT' IN&#10;       TYPEOF (cp.relating_shape_aspect)) AND &#10;       (cp.relating_shape_aspect.name = 'intra stratum join')))) = 1)"/>
         <where label="WR5" expression="(NOT (SELF\shape_aspect.description = 'dependently located')) OR&#10;       (SIZEOF (QUERY (ado &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'associated design object') |&#10;       (SIZEOF (['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'INTER_STRATUM_FEATURE',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'INTERCONNECT_MODULE_TERMINAL'] *&#10;       TYPEOF (ado.relating_shape_aspect)) = 1) OR&#10;       ((SIZEOF (['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'COMPONENT_TERMINAL'] *&#10;       TYPEOF (ado.relating_shape_aspect)) = 1) AND&#10;       (ado.relating_shape_aspect.description IN ['printed component join terminal',&#10;        'embedded component terminal']))&#10;       )) = 1)"/>
         <where label="WR6" expression="(SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_REPRESENTATION' IN &#10;       TYPEOF (pdr.used_representation)) AND&#10;       (pdr.used_representation\representation.name = 'connection point location 2d') AND&#10;       (SIZEOF (QUERY (it &lt;* pdr.used_representation.items |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'CARTESIAN_POINT' IN&#10;       TYPEOF (it)) AND (it\geometric_representation_item.dim = 2 )&#10;       )) = 1))) &lt;= 1))) = 0)"/>
         <where label="WR7" expression="(SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_REPRESENTATION' IN &#10;       TYPEOF (pdr.used_representation)) AND&#10;       (pdr.used_representation\representation.name = 'connection point location 3d') AND&#10;       (SIZEOF (QUERY (it &lt;* pdr.used_representation.items |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'CARTESIAN_POINT' IN&#10;       TYPEOF (it)) AND (it\geometric_representation_item.dim = 3 )&#10;       )) = 1))) &lt;= 1))) = 0)"/>
         <where label="WR8" expression="(SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_REPRESENTATION' IN &#10;       TYPEOF (pdr.used_representation)) AND&#10;       ((pdr.used_representation\representation.name = 'connection point location 2d')&#10;       OR&#10;       (pdr.used_representation\representation.name = 'connection point location 3d'))&#10;       )) &gt;= 1))) = 0)"/>
         <where label="WR9" expression="(NOT (SELF\shape_aspect.description = 'dependently located')) OR&#10;       (SIZEOF (QUERY (ado &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'reference zone') |&#10;       (SIZEOF (['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT'] *&#10;       TYPEOF (ado.relating_shape_aspect)) = 1) OR&#10;       ((SIZEOF (['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT'] *&#10;       TYPEOF (ado.relating_shape_aspect)) = 1) AND&#10;       (ado.relating_shape_aspect.description IN ['connection zone']))&#10;       )) &lt;= 1)"/>
      </entity>
      <entity name="layout_junction" supertypes="shape_aspect"/>
      <entity name="material_removal_component_definition" supertypes="assembly_component"/>
      <entity name="multi_layer_component_definition" supertypes="assembly_component"/>
      <entity name="multi_layer_material_removal_component_definition" supertypes="material_removal_component_definition"/>
      <entity name="multi_layer_stratum_feature" supertypes="stratum_feature"/>
      <entity name="padstack_occurrence" supertypes="assembly_group_component_definition"/>
      <entity name="padstack_occurrence_product_definition_relationship" supertypes="property_definition product_definition_relationship">
         <where label="WR1" expression="SELF\product_definition_relationship.related_product_definition :&lt;&gt;:&#10;       SELF\product_definition_relationship.relating_product_definition"/>
         <where label="WR2" expression="SIZEOF(TYPEOF(SELF)) - SIZEOF(TYPEOF(SELF\property_definition ||&#10;       SELF\product_definition_relationship ||&#10;       SELF\padstack_occurrence_product_definition_relationship)) = 0"/>
         <where label="WR3" expression="SELF\product_definition_relationship.name = &#10;        'padstack occurrence sub assembly relationship'"/>
      </entity>
      <entity name="passage_padstack_definition" supertypes="padstack_definition"/>
      <entity name="passage_technology" supertypes="shape_aspect">
         <unique label="UR1">
            <unique.attribute entity-ref="passage_technology" attribute="name"/>
            <unique.attribute entity-ref="passage_technology" attribute="of_shape"/>
         </unique>
         <where label="WR1" expression="'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION' IN &#10;       TYPEOF (SELF.of_shape.definition)"/>
         <where label="WR2" expression="SIZEOF (USEDIN (SELF, &#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MATERIAL_DESIGNATION.DEFINITIONS')) &lt;= 1"/>
         <where label="WR3" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation')) = 1))) = 0"/>
         <where label="WR4" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (&#10;          {1 &lt;= SIZEOF (pcr.used_representation.items) &lt;= 8}&#10;                                             ))) = 0))) = 0"/>
         <where label="WR5" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items | &#10;       NOT (it\representation_item.name IN ['maximum aspect ratio', 'plated passage', &#10;       'maximum allowed component terminal extent', &#10;       'minimum allowed component terminal extent', &#10;       'maximum as finished deposition thickness',  &#10;       'minimum as finished deposition thickness',  &#10;       'maximum as finished passage extent', &#10;       'minimum as finished passage extent']))) = 0))) = 0))) = 0"/>
         <where label="WR6" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       (SIZEOF (&#10;       ['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MEASURE_REPRESENTATION_ITEM',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'RATIO_MEASURE_WITH_UNIT'] *&#10;       TYPEOF (it)) = 2) AND&#10;       (it\representation_item.name = 'maximum aspect ratio') AND&#10;       (it\measure_with_unit.value_component &gt; 1.0))) &lt;= 1))) = 0))) = 0"/>
         <where label="WR7" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'DESCRIPTIVE_REPRESENTATION_ITEM' IN&#10;       TYPEOF (it)) AND&#10;       (it\representation_item.name = 'plated passage') AND&#10;       (it\descriptive_representation_item.description IN ['true', 'false']))) = 1))) = 0))) = 0"/>
         <where label="WR8" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       (SIZEOF (&#10;       ['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MEASURE_REPRESENTATION_ITEM',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LENGTH_MEASURE_WITH_UNIT'] *&#10;       TYPEOF (it)) = 2) AND&#10;       (it\representation_item.name = 'minimum as finished passage extent')&#10;       )) &lt;= 1))) = 0))) = 0"/>
         <where label="WR9" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       (SIZEOF (&#10;       ['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MEASURE_REPRESENTATION_ITEM',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LENGTH_MEASURE_WITH_UNIT'] *&#10;       TYPEOF (it)) = 2) AND&#10;       (it\representation_item.name = &#10;       'maximum as finished deposition thickness'))) &lt;= 1))) = 0))) = 0"/>
         <where label="WR10" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       (SIZEOF (&#10;       ['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MEASURE_REPRESENTATION_ITEM',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LENGTH_MEASURE_WITH_UNIT'] *&#10;       TYPEOF (it)) = 2) AND&#10;       (it\representation_item.name = &#10;       'minimum as finished deposition thickness'))) &lt;= 1))) = 0))) = 0"/>
         <where label="WR11" expression="(NOT (SELF\shape_aspect.description IN &#10;       ['default component termination passage definition',&#10;       'default via definition'])) OR &#10;       (SIZEOF (USEDIN (SELF, &#10;        'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MATERIAL_DESIGNATION.DEFINITIONS')) = 1)"/>
         <where label="WR12" expression="(NOT (SELF\shape_aspect.description IN  &#10;       ['default component termination passage definition',&#10;       'default unsupported passage definition',&#10;       'default via definition'])) OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       (SIZEOF (&#10;       ['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MEASURE_REPRESENTATION_ITEM',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LENGTH_MEASURE_WITH_UNIT'] *&#10;       TYPEOF (it)) = 2) AND&#10;       (it\representation_item.name = 'minimum as finished passage extent'))) &#10;        = 1))) = 0))) = 0)"/>
         <where label="WR13" expression="(NOT (SELF\shape_aspect.description =&#10;       'default component termination passage definition')) OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       (SIZEOF (&#10;       ['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MEASURE_REPRESENTATION_ITEM',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LENGTH_MEASURE_WITH_UNIT'] *&#10;       TYPEOF (it)) = 2) AND&#10;       (it\representation_item.name = &#10;       'minimum as finished deposition thickness'))) &#10;         = 1))) = 0))) = 0)"/>
         <where label="WR14" expression="(NOT (SELF\shape_aspect.description =&#10;       'default component termination passage definition')) OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       (SIZEOF (&#10;       ['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MEASURE_REPRESENTATION_ITEM',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LENGTH_MEASURE_WITH_UNIT'] *&#10;       TYPEOF (it)) = 2) AND&#10;       (it\representation_item.name = &#10;       'minimum allowed component terminal extent'))) = 1))) = 0))) = 0)"/>
         <where label="WR15" expression="(NOT (SELF\shape_aspect.description =&#10;       'default component termination passage definition')) OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       (SIZEOF (&#10;       ['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MEASURE_REPRESENTATION_ITEM',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LENGTH_MEASURE_WITH_UNIT'] *&#10;       TYPEOF (it)) = 2) AND&#10;       (it\representation_item.name = &#10;       'maximum allowed component terminal extent'))) = 1))) = 0))) = 0)"/>
         <where label="WR16" expression="(NOT (SELF\shape_aspect.description = 'default via definition')) OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pcr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       pdr.used_representation\representation.name = &#10;       'physical characteristics representation') |&#10;       NOT (SIZEOF (QUERY (it &lt;* pcr.used_representation.items |&#10;       (SIZEOF (&#10;       ['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'MEASURE_REPRESENTATION_ITEM',&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LENGTH_MEASURE_WITH_UNIT'] *&#10;       TYPEOF (it)) = 2) AND&#10;       (it\representation_item.name = &#10;       'minimum as finished deposition thickness'))) = 1))) = 0))) = 0)"/>
         <where label="WR17" expression="SIZEOF (QUERY (rpt &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'as finished inter stratum extent') |&#10;       (rpt.related_shape_aspect.of_shape\property_definition.description =&#10;       'finished stratum extent') AND&#10;       (('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP' &#10;       IN &#10;        TYPEOF (rpt.related_shape_aspect.of_shape\property_definition.&#10;       definition)) &#10;       AND    &#10;       (rpt.related_shape_aspect.of_shape\property_definition.&#10;        definition\product_definition_relationship.name =&#10;       'inter stratum extent')))) = 1"/>
      </entity>
      <entity name="physical_network" supertypes="shape_aspect">
         <where label="WR1" expression="SIZEOF (QUERY (cr &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'connectivity requirement') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'COMPONENT_TERMINAL' IN&#10;       TYPEOF (cr.related_shape_aspect)) AND&#10;((cr.related_shape_aspect\shape_aspect.description = &#10;     'component termination passage join terminal') OR&#10;(cr.related_shape_aspect\shape_aspect.description = &#10;                              'land join terminal') OR&#10;(cr.related_shape_aspect\shape_aspect.description = &#10;               'non functional land join terminal') OR&#10;(cr.related_shape_aspect\shape_aspect.description = &#10;                 'printed component join terminal'))&#10;)) &gt;= 2"/>
         <where label="WR2" expression="SIZEOF (QUERY (nt &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'network topology') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'JOIN_SHAPE_ASPECT' IN&#10;       TYPEOF (nt.related_shape_aspect))) &gt;= 1"/>
         <where label="WR3" expression="SIZEOF (QUERY (nt &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'reference connected terminals') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PART_CONNECTED_TERMINALS_DEFINITION' IN&#10;       TYPEOF (nt.relating_shape_aspect))) &lt;= 1"/>
      </entity>
      <entity name="plated_inter_stratum_feature" supertypes="inter_stratum_feature" super.expression="plated_passage">
         <where label="WR1" expression="(SELF\product_definition.description IN ['bonded conductive base blind via', &#10;        'buried via',&#10;       'component termination passage', 'interfacial connection', &#10;       'non conductive base blind via', &#10;       'join two physical connectivity definition supporting inter stratum feature', &#10;       'plated conductive base blind via', &#10;       'plated cutout', 'plated interconnect module edge']) OR &#10;       (SIZEOF &#10;       (['LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;	'PLATED_CUTOUT_EDGE_SEGMENT',&#10;	'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;	'PLATED_INTERCONNECT_MODULE_EDGE_SEGMENT'] * TYPEOF (SELF)) = 1 )"/>
      </entity>
      <entity name="plated_passage" supertypes="plated_inter_stratum_feature">
         <where label="WR1" expression="SELF\product_definition.description IN ['bonded conductive base blind via', &#10;       'buried via', 'component termination passage', &#10;       'interfacial connection', 'non conductive base blind via',&#10;       'plated conductive base blind via']"/>
         <where label="WR3" expression="(NOT (SELF\product_definition.description = 'component termination passage')) OR&#10;       (SIZEOF (QUERY (it &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       pdr\product_definition_relationship.name = 'instantiated template') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PART_TEMPLATE_DEFINITION' IN&#10;       TYPEOF (it.relating_product_definition)) AND&#10;       (it.relating_product_definition\product_definition.description =&#10;       'component termination passage template'))) = 1)"/>
         <where label="WR6" expression="(NOT (SELF\product_definition.description IN&#10;       ['bonded conductive base blind via',&#10;       'buried via',&#10;       'interfacial connection',&#10;       'non conductive base blind via',&#10;       'plated conductive base blind via'])) OR&#10;       (SIZEOF (QUERY (it &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       pdr\product_definition_relationship.name = 'instantiated template') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PART_TEMPLATE_DEFINITION' IN&#10;       TYPEOF (it.relating_product_definition)) AND&#10;       (it.relating_product_definition\product_definition.description =&#10;       'via template'))) = 1)"/>
      </entity>
      <entity name="probe_access_area" supertypes="assembly_component">
         <where label="WR1" expression="EXISTS(SELF.of_shape.definition\product_definition.name)"/>
      </entity>
      <entity name="stratum" supertypes="product_definition">
         <unique label="UR1">
            <unique.attribute entity-ref="stratum" attribute="id"/>
            <unique.attribute entity-ref="stratum" attribute="formation"/>
         </unique>
         <where label="WR1" expression="EXISTS(SELF\product_definition.name)"/>
         <where label="WR2" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       SIZEOF (QUERY (tu &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_RELATIONSHIP.RELATED_PROPERTY_DEFINITION') |&#10;       pdr\property_definition_relationship.name = 'technology usage') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_TECHNOLOGY' IN &#10;       TYPEOF (tu.relating_property_definition.definition))) = 1)) = 1"/>
         <where label="WR3" expression="(SIZEOF (QUERY (ada &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'APPLIED_DOCUMENT_REFERENCE.ITEMS') |&#10;       SIZEOF (QUERY (duc &lt;* USEDIN (ada.assigned_document,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'DOCUMENT_USAGE_CONSTRAINT.SOURCE') |&#10;       duc\document_usage_constraint.subject_element = 'attachment region size')) = 1)) &lt;= 1) OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       SIZEOF (QUERY (tu &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_RELATIONSHIP.RELATED_PROPERTY_DEFINITION') |&#10;       pdr\property_definition_relationship.name = 'stratum usage') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'EXTERNAL_DEFINITION' IN &#10;       TYPEOF (tu.relating_property_definition))) = 1)) &lt;= 1)"/>
         <where label="WR4" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (sr_pdr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_REPRESENTATION' IN &#10;       TYPEOF (pdr.used_representation)) |&#10;       sr_pdr.used_representation\representation.name = '3d bound volume shape')) &lt;= 1))) &#10;       = 0"/>
         <where label="WR5" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (sr_pdr &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_REPRESENTATION' IN &#10;       TYPEOF (pdr.used_representation)) |&#10;       sr_pdr.used_representation\representation.name = &#10;                  'planar projected shape')) &lt;= 1))) = 0"/>
         <where label="WR6" expression="SIZEOF (QUERY (acu &lt;* QUERY (pdr &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'ASSEMBLY_COMPONENT_USAGE' IN&#10;       TYPEOF (pdr)) |&#10;       acu\product_definition_relationship.name = 'interconnect module stratum assembly relationship'&#10;       )) &gt;= 1"/>
         <where label="WR7" expression="NOT(SELF\product_definition.name = 'design layer') OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       SIZEOF (QUERY (tu &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_RELATIONSHIP.RELATED_PROPERTY_DEFINITION') |&#10;       pdr\property_definition_relationship.name = 'technology usage') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_TECHNOLOGY' IN &#10;       TYPEOF (tu.relating_property_definition.definition)) AND&#10;       (tu.relating_property_definition.definition\characterized_object.description =&#10;       'design layer'))) = 1)) = 1)"/>
         <where label="WR8" expression="NOT(SELF\product_definition.name = 'design layer') OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       SIZEOF (QUERY (sa &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'LAYER_CONNECTION_POINT' IN&#10;       TYPEOF (sa))) &gt;= 1)) &gt;= 1)"/>
         <where label="WR9" expression="NOT(SELF\product_definition.name = 'documentation layer') OR&#10;       (SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       SIZEOF (QUERY (tu &lt;* QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_RELATIONSHIP.RELATED_PROPERTY_DEFINITION') |&#10;       pdr\property_definition_relationship.name = 'technology usage') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_TECHNOLOGY' IN &#10;       TYPEOF (tu.relating_property_definition.definition)) AND&#10;       (tu.relating_property_definition.definition\characterized_object.description =&#10;       'documentation layer'))) = 1)) = 1)"/>
         <where label="WR10" expression="NOT(SELF\product_definition.name = 'design layer') OR&#10;       ((NOT(SELF\product_definition.description = 'primary design layer stratum') OR &#10;       (SIZEOF(QUERY(imps &lt;* USEDIN(SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       SIZEOF (QUERY (sa &lt;* USEDIN (imps,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       SIZEOF (QUERY (sar &lt;* USEDIN (sa,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT' IN&#10;       TYPEOF (sar.relating_shape_aspect)) AND &#10;        (sar.relating_shape_aspect\shape_aspect.description = &#10;       'interconnect module primary surface'))) &gt;= 0)) &gt;= 0)) = 1)) OR &#10;       (NOT (SELF\product_definition.description = 'non primary design layer stratum') OR&#10;       (SIZEOF(QUERY(imps &lt;* USEDIN(SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       SIZEOF (QUERY (sa &lt;* USEDIN (imps,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT.OF_SHAPE') |&#10;       SIZEOF(QUERY (sar &lt;* USEDIN (sa,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT' IN&#10;       TYPEOF (sar.relating_shape_aspect)) AND&#10;        (sar.relating_shape_aspect\shape_aspect.description =&#10;       'interconnect module primary surface'))) &gt;= 0)) &gt;= 0)) = 0)))"/>
      </entity>
      <entity name="stratum_concept_relationship" supertypes="shape_aspect shape_aspect_relationship">
         <where label="WR1" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'REQUIREMENTS_PROPERTY' IN&#10;       TYPEOF (pd))) &gt;= 1"/>
         <where label="WR2" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       SIZEOF (USEDIN (pd, &#10;        'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) = 1)) = 1"/>
         <where label="WR3" expression="(NOT (SELF\shape_aspect_relationship.name = &#10;       'dielectric crossover area')) OR&#10;       (('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_FEATURE' IN &#10;       TYPEOF (SELF.relating_shape_aspect)) AND&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_FEATURE' IN&#10;       TYPEOF (SELF.related_shape_aspect)))"/>
         <where label="WR4" expression="(NOT (SELF\shape_aspect_relationship.name = &#10;       'dielectric crossover area')) OR&#10;       (SIZEOF (QUERY (rdc &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'resulting dielectric crossover') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM_FEATURE' IN&#10;       TYPEOF (rdc.relating_shape_aspect)))) = 1)"/>
         <where label="WR7" expression="(NOT (SELF\shape_aspect_relationship.name =&#10;       'stratum feature conductive join')) OR&#10;       (SIZEOF (QUERY (fj &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'features join') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PLATED_PASSAGE' IN&#10;       TYPEOF (fj.related_shape_aspect)) AND&#10;       (fj.related_shape_aspect\shape_aspect.description =&#10;       'bonded conductive base blind via'))) &lt;= 1)"/>
         <where label="WR8" expression="(NOT ((SELF\shape_aspect.description =&#10;       'physical network supporting stratum feature conductive join') AND&#10;       (SELF\shape_aspect_relationship.name =&#10;       'stratum feature conductive join'))) OR&#10;       (SIZEOF (QUERY (ji &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'join implementation') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'JOIN_SHAPE_ASPECT' IN&#10;       TYPEOF (ji.relating_shape_aspect)) AND&#10;       (ji.relating_shape_aspect\shape_aspect.name =&#10;       'inter stratum join'))) = 1)"/>
      </entity>
      <entity name="stratum_feature" supertypes="shape_aspect" super.expression="fiducial_stratum_feature">
         <where label="WR1" expression="'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'STRATUM' IN&#10;       TYPEOF (SELF.of_shape.definition)"/>
         <where label="WR2" expression="SIZEOF (QUERY (pd &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;       NOT (SIZEOF (QUERY (pdr &lt;* USEDIN (pd,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION') |&#10;       SIZEOF (QUERY (it &lt;* pdr.used_representation.items |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'DESCRIPTIVE_REPRESENTATION_ITEM'&#10;       IN TYPEOF (it)) AND&#10;       (it\representation_item.name = 'feature of size') AND&#10;       (it\descriptive_representation_item.description IN &#10;             ['true', 'false']))) = 1)) = 1))) = 0"/>
         <where label="WR3" expression="(NOT(EXISTS(SELF\shape_aspect.description))) OR&#10;       (NOT (SELF\shape_aspect.description = 'conductor') OR&#10;       (SIZEOF (QUERY (ji &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'join implementation') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'JOIN_SHAPE_ASPECT' IN&#10;       TYPEOF (ji.relating_shape_aspect)) AND&#10;       (ji.relating_shape_aspect\shape_aspect.name = &#10;       'intra stratum join'))) = 1))"/>
         <where label="WR4" expression="(NOT(EXISTS(SELF\shape_aspect.description))) OR&#10;       (NOT (SELF\shape_aspect.description = 'connected filled area') OR&#10;       (SIZEOF (QUERY (ji &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'join implementation') |&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;       'JOIN_SHAPE_ASPECT' IN&#10;       TYPEOF (ji.relating_shape_aspect)) AND&#10;       (ji.relating_shape_aspect\shape_aspect.name = &#10;       'intra stratum join'))) = 1))"/>
         <where label="WR5" expression="(NOT(EXISTS(SELF\shape_aspect.description))) OR&#10;       (NOT (SELF\shape_aspect.description = 'conductor') OR&#10;       (SELF\shape_aspect.of_shape.definition.name = 'design layer'))"/>
         <where label="WR6" expression="(NOT(EXISTS(SELF\shape_aspect.description))) OR&#10;       (NOT (SELF\shape_aspect.description = 'connected filled area') OR&#10;       (SELF\shape_aspect.of_shape.definition.name = 'design layer'))"/>
      </entity>
      <entity name="stratum_specific_part_template_location_in_padstack_definition" supertypes="assembly_component_usage property_definition">
         <where label="WR1" expression="SIZEOF(TYPEOF(SELF) - TYPEOF(SELF\assembly_component_usage ||&#10;       SELF\product_definition_usage ||&#10;       SELF\product_definition_relationship ||&#10;       SELF\stratum_specific_part_template_location_in_padstack_definition || &#10;       SELF\property_definition)) = 0"/>
         <where label="WR2" expression="SELF\property_definition.name = ''"/>
         <where label="WR3" expression="SELF\property_definition.description = ''"/>
         <where label="WR4" expression="SELF\product_definition_relationship.name = 'part template location in padstack definition'"/>
         <where label="WR5" expression="SELF\product_definition_relationship.description = ''"/>
      </entity>
      <entity name="stratum_surface" supertypes="shape_aspect">
         <where label="WR1" expression="SELF\shape_aspect.description IN ['primary surface',&#10;         'secondary surface', 'average surface']"/>
         <where label="WR2" expression="'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;         'STRATUM' IN TYPEOF(SELF\shape_aspect.of_shape.definition)"/>
      </entity>
      <entity name="thermal_isolation_component_definition" supertypes="filled_area_material_removal_component_definition"/>
      <subtype.constraint name="interconnect_module_terminal_subtypes" entity="interconnect_module_terminal" super.expression="ONEOF (interconnect_module_interface_terminal, interconnect_module_join_terminal)"/>
      <rule name="adjacent_stratum_surface_definition_constraint" appliesto="shape_aspect_relationship">
         <where label="WR1" expression="SIZEOF (QUERY (sar &lt;* shape_aspect_relationship |&#10;               (sar\shape_aspect_relationship.name = 'adjacent stratum surface definition') AND&#10;     (NOT(('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;           'STRATUM_SURFACE' IN TYPEOF (sar.related_shape_aspect)) AND&#10;   (sar.related_shape_aspect\shape_aspect.description IN ['secondary surface']))))) = 0"/>
         <where label="WR2" expression="SIZEOF (QUERY (sar &lt;* shape_aspect_relationship |&#10;               (sar\shape_aspect_relationship.name = 'adjacent stratum surface definition') AND&#10;     (NOT(('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +&#10;     'STRATUM_SURFACE' IN TYPEOF (sar.relating_shape_aspect)) AND&#10;    (sar.relating_shape_aspect\shape_aspect.description IN ['primary surface']))))) = 0"/>
      </rule>
      <rule name="adjacent_stratum_surface_definition_unique_constraint" appliesto="shape_aspect_relationship">
         <algorithm>LOCAL
  assd : BAG OF shape_aspect_relationship := 
      QUERY( sar &lt;* shape_aspect_relationship
| (sar\shape_aspect_relationship.description = 'adjacent stratum surface definition') );
  pass1 : BOOLEAN := TRUE;
  name_bag : BAG OF STRING := [];
  pss_bag : BAG OF stratum_surface := [];
  sar_bag : BAG OF shape_aspect_relationship;
  pass2 : BOOLEAN := TRUE;
  sss_bag : BAG OF stratum_surface;
END_LOCAL;

REPEAT i := 1 to SIZEOF(assd) by 1;
  IF EXISTS( assd[i]\shape_aspect_relationship.name ) THEN
    IF ( assd[i]\shape_aspect_relationship.name IN name_bag ) THEN
      pass1 := FALSE;
      ESCAPE;
    ELSE
      name_bag := name_bag + assd[i]\shape_aspect_relationship.name;
    END_IF;
  END_IF;
END_REPEAT;

REPEAT i := 1 to SIZEOF(assd) by 1;
  IF EXISTS( assd[i].relating_shape_aspect ) THEN
    IF ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'STRATUM_SURFACE' IN TYPEOF(assd[i].relating_shape_aspect) ) THEN
      IF( NOT( assd[i].relating_shape_aspect IN pss_bag ) ) THEN
        pss_bag := pss_bag + assd[i].relating_shape_aspect;
      END_IF;
    END_IF;
  END_IF;
END_REPEAT;

REPEAT i := 1 to SIZEOF(pss_bag) by 1;
  IF ( NOT pass2 ) THEN ESCAPE;
  END_IF;
  sss_bag := [];
  sar_bag := QUERY( sar &lt;* assd | (sar.relating_shape_aspect :=: 
              pss_bag[i]) );
  REPEAT j := 1 to SIZEOF(sar_bag) by 1;
    IF EXISTS( sar_bag[j].related_shape_aspect ) THEN
      IF ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'STRATUM_SURFACE' IN TYPEOF(assd[j].related_shape_aspect) ) THEN
        IF ( sar_bag[j].related_shape_aspect IN sss_bag ) THEN
          pass2 := FALSE;
          ESCAPE;
        ELSE
          sss_bag := sss_bag + sar_bag[j].related_shape_aspect;
        END_IF;
      END_IF;
    END_IF;
  END_REPEAT;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass1"/>
         <where label="WR2" expression="pass2"/>
      </rule>
      <rule name="default_passage_based_land_physical_template_unique_constraint" appliesto="land_physical_template">
         <algorithm>LOCAL
  dpblpt : BAG OF land_physical_template := 
QUERY( lpt &lt;* land_physical_template |
(lpt\shape_aspect.description IN ['default via based',
'default attachment size and via based',
'default unsupported passage based',
'default component termination passage based',
'default attachment size and component termination passage based']) );
  sar_bag : BAG OF shape_aspect_relationship;
  pt_bag : BAG OF passage_technology := [];
  pdr_bag : BAG OF property_definition_relationship;
  pass : BOOLEAN := TRUE;
  st_bag : BAG OF stratum_technology;
END_LOCAL;

REPEAT i := 1 to SIZEOF(dpblpt) by 1;
  sar_bag := QUERY( sar &lt;* USEDIN(dpblpt[i],
'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') | ((sar\shape_aspect_relationship.name =
'technology usage') AND 
('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'PASSAGE_TECHNOLOGY' IN TYPEOF(sar.related_shape_aspect))) );
  REPEAT j := 1 to SIZEOF(sar_bag) by 1;
    IF EXISTS( sar_bag[j].related_shape_aspect ) THEN
      IF ( NOT ( sar_bag[j].related_shape_aspect IN pt_bag ) ) THEN
        pt_bag := pt_bag + sar_bag[j].related_shape_aspect;
      END_IF;
    END_IF;
  END_REPEAT;
END_REPEAT;

REPEAT i := 1 to SIZEOF(pt_bag) by 1;
  IF ( NOT pass ) THEN ESCAPE;
  END_IF;
  st_bag := [];
  sar_bag := QUERY( sar &lt;* USEDIN(pt_bag[i],
'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') | ((sar\shape_aspect_relationship.name =
'technology usage') AND (sar.relating_shape_aspect IN dpblpt)) );
  REPEAT j := 1 to SIZEOF(sar_bag) by 1;
    IF ( NOT pass ) THEN ESCAPE;
    END_IF;
    pdr_bag := 
    QUERY( pdr &lt;* USEDIN(sar_bag[j].relating_shape_aspect\shape_aspect.of_shape,
'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'PROPERTY_DEFINITION_RELATIONSHIP.RELATED_PROPERTY_DEFINITION') |
((pdr\property_definition_relationship.name = 'technology usage') AND
('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'STRATUM_TECHNOLOGY' IN 
      TYPEOF(pdr.relating_property_definition.definition))) );
    REPEAT k := 1 to SIZEOF(pdr_bag) by 1;
      IF EXISTS( pdr_bag[k].relating_property_definition.definition ) THEN
        IF 
          ( pdr_bag[k].relating_property_definition.definition IN st_bag ) 
                                                                      THEN
          pass := FALSE;
          ESCAPE;
        ELSE
          st_bag := st_bag + 
                       pdr_bag[k].relating_property_definition.definition;
        END_IF;
      END_IF;
    END_REPEAT;
  END_REPEAT;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
      <rule name="inter_stratum_extent_constraint" appliesto="product_definition_relationship">
         <where label="WR1" expression="SIZEOF(QUERY(pdr &lt;* product_definition_relationship |&#10;       (pdr\product_definition_relationship.name = 'inter stratum extent') AND&#10;       NOT(('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.'&#10;       + 'STRATUM' IN TYPEOF(pdr.related_product_definition)) AND&#10;       ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.'&#10;       + 'STRATUM' IN TYPEOF(pdr.relating_product_definition)) &#10;       ))) = 0"/>
      </rule>
      <rule name="interconnect_module_stratum_assembly_relationship_constraint" appliesto="assembly_component_usage">
         <where label="WR1" expression="SIZEOF(QUERY(acu &lt;* assembly_component_usage |&#10;       (acu\product_definition_relationship.name = 'interconnect module stratum assembly relationship')&#10;       AND NOT('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.'&#10;       + 'PHYSICAL_UNIT' IN TYPEOF(acu.relating_product_definition))&#10;       )) = 0"/>
         <where label="WR2" expression="SIZEOF(QUERY(acu &lt;* assembly_component_usage |&#10;       (acu\product_definition_relationship.name = 'interconnect module stratum assembly relationship')&#10;       AND NOT('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.'&#10;       + 'STRATUM' IN TYPEOF(acu.related_product_definition))&#10;       )) = 0"/>
      </rule>
      <rule name="interconnect_module_stratum_assembly_relationship_unique_constraint" appliesto="assembly_component_usage">
         <algorithm>LOCAL
  imsar : BAG OF assembly_component_usage := 
QUERY( acu &lt;* assembly_component_usage |
(acu\product_definition_relationship.name = 'interconnect module stratum assembly relationship') );
  pu_bag : BAG OF physical_unit := [];
  acu_bag : BAG OF assembly_component_usage;
  pass : BOOLEAN := TRUE;
  refdes_bag : BAG OF STRING;
END_LOCAL;

REPEAT i := 1 to SIZEOF(imsar) by 1;
  IF EXISTS( imsar[i].relating_product_definition ) THEN
    IF( (imsar[i].relating_product_definition.frame_of_reference.name = 
        'physical design')
AND ('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'PHYSICAL_UNIT' IN TYPEOF(imsar[i].relating_product_definition)) ) THEN
      IF ( NOT ( imsar[i].relating_product_definition IN pu_bag )) THEN
        pu_bag := pu_bag + imsar[i].relating_product_definition;
      END_IF;
    END_IF;
  END_IF;
END_REPEAT;

REPEAT i := 1 to SIZEOF(pu_bag) by 1;
  IF ( NOT pass ) THEN ESCAPE;
  END_IF;
  refdes_bag := [];
  acu_bag := 
   QUERY( acu &lt;* imsar | (acu.relating_product_definition :=: pu_bag[i]) );
  REPEAT j := 1 to SIZEOF(acu_bag) by 1;
    IF EXISTS( acu_bag[j].reference_designator ) THEN
      IF ( acu_bag[j].reference_designator IN refdes_bag ) THEN
        pass := FALSE;
        ESCAPE;
      ELSE
        refdes_bag := refdes_bag + acu_bag[j].reference_designator;
      END_IF;
    END_IF;
  END_REPEAT;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
      <rule name="internal_stratum_access_unique_constraint" appliesto="shape_aspect_relationship">
         <algorithm>LOCAL
  isa : BAG OF shape_aspect_relationship := 
QUERY( r &lt;* shape_aspect_relationship |
(r\shape_aspect_relationship.name = 'internal stratum access'));
  paa_bag : BAG OF probe_access_area := [];
  sar_bag : BAG OF shape_aspect_relationship;
  pass : BOOLEAN := TRUE;
  pp_bag : BAG OF plated_passage;
END_LOCAL;

REPEAT i := 1 to SIZEOF(isa) by 1;
  IF EXISTS( isa[i].relating_shape_aspect ) THEN
    IF ( (isa[i].relating_shape_aspect\shape_aspect.description = 
'internal probe access area') AND
('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'PROBE_ACCESS_AREA' IN TYPEOF(isa[i].relating_shape_aspect)) ) THEN
      IF ( NOT ( isa[i].relating_shape_aspect IN paa_bag ) ) THEN
        paa_bag := paa_bag + isa[i].relating_shape_aspect;
      END_IF;
    END_IF;
  END_IF;
END_REPEAT;

REPEAT i := 1 to SIZEOF(paa_bag) by 1;
  IF ( NOT pass ) THEN ESCAPE;
  END_IF;
  pp_bag := [];
  sar_bag := QUERY( sar &lt;* isa | ((sar.relating_shape_aspect :=: 
paa_bag[i]) AND
('LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.' +
'PLATED_PASSAGE' IN TYPEOF(sar.related_shape_aspect)) AND
(sar.related_shape_aspect\shape_aspect.description IN 
['bonded conductive base blind via',
'buried via','interfacial connection','non conductive base blind via',
'plated conductive base blind via'])) );
  REPEAT j := 1 to SIZEOF(sar_bag) by 1;
    IF EXISTS( sar_bag[j].related_shape_aspect ) THEN
      IF ( sar_bag[j].related_shape_aspect IN pp_bag ) THEN
        pass := FALSE;
        ESCAPE;
      ELSE
        pp_bag := pp_bag + sar_bag[j].related_shape_aspect;
      END_IF;
    END_IF;
  END_REPEAT;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
      <rule name="stratum_feature_unique_constraint" appliesto="stratum_feature">
         <algorithm>LOCAL
  sf_bag : BAG OF stratum_feature;
  s_bag : BAG OF stratum := [];
  pass : BOOLEAN := TRUE;
  name_bag : BAG OF STRING;
END_LOCAL;

REPEAT i := 1 to SIZEOF(stratum_feature) by 1;
  IF EXISTS( stratum_feature[i].of_shape.definition ) THEN
    IF( NOT( stratum_feature[i].of_shape.definition IN s_bag ) ) THEN
      s_bag := s_bag + stratum_feature[i].of_shape.definition;
    END_IF;
  END_IF;
END_REPEAT;

REPEAT i := 1 to SIZEOF(s_bag) by 1;
  IF ( NOT pass ) THEN ESCAPE;
  END_IF;
  sf_bag := QUERY( r &lt;* stratum_feature | 
             (r.of_shape.definition :=: s_bag[i]) );
  name_bag := [];
  REPEAT j := 1 to SIZEOF(sf_bag) by 1;
    IF EXISTS( sf_bag[j]\shape_aspect.name ) THEN
      IF ( sf_bag[j]\shape_aspect.name IN name_bag ) THEN
        pass := FALSE;
        ESCAPE;
      ELSE
        name_bag := name_bag + sf_bag[j]\shape_aspect.name;
      END_IF;
    END_IF;
  END_REPEAT;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
      <rule name="stratum_surface_unique_constraint" appliesto="stratum_surface">
         <algorithm>LOCAL
  ss_bag : BAG OF stratum_surface;
  s_bag : BAG OF stratum := [];
  pass : BOOLEAN := TRUE;
  desc_bag : BAG OF STRING;
END_LOCAL;

REPEAT i := 1 to SIZEOF(stratum_surface) by 1;
  IF EXISTS( stratum_surface[i].of_shape.definition ) THEN
    IF( NOT( stratum_surface[i].of_shape.definition IN s_bag ) ) THEN
      s_bag := s_bag + stratum_surface[i].of_shape.definition;
    END_IF;
  END_IF;
END_REPEAT;

REPEAT i := 1 to SIZEOF(s_bag) by 1;
  IF ( NOT pass ) THEN ESCAPE;
  END_IF;
  ss_bag := QUERY( r &lt;* stratum_surface | 
               (r.of_shape.definition :=: s_bag[i]) );
  desc_bag := [];
  REPEAT j := 1 to SIZEOF(ss_bag) by 1;
    IF EXISTS( ss_bag[j]\shape_aspect.description ) THEN
      IF ( ss_bag[j]\shape_aspect.description IN desc_bag ) THEN
        pass := FALSE;
        ESCAPE;
      ELSE
        desc_bag := desc_bag + ss_bag[j]\shape_aspect.description;
      END_IF;
    END_IF;
  END_REPEAT;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
      <rule name="via_template_terminal_unique_constraint" appliesto="shape_aspect">
         <algorithm>LOCAL
  vt : BAG OF shape_aspect := 
         QUERY( r &lt;* shape_aspect | (r\shape_aspect.description = 'via template'));
  sar_bag : BAG OF shape_aspect_relationship;
  pass : BOOLEAN := TRUE;
  name_bag : BAG OF STRING;
END_LOCAL;

REPEAT i := 1 to SIZEOF(vt) by 1;
  IF ( NOT pass ) THEN ESCAPE;
  END_IF;
  sar_bag := QUERY( sar &lt;* USEDIN( vt[i],
'LAYERED_INTERCONNECT_MODULE_DESIGN_MIM.'
 + 'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |
((sar\shape_aspect_relationship.name = 'access mechanism') AND 
(sar.related_shape_aspect\shape_aspect.description = 
'via template terminal' )) );
  name_bag := [];
  REPEAT j := 1 to SIZEOF(sar_bag) by 1;
    IF EXISTS( sar_bag[j].related_shape_aspect\shape_aspect.name ) THEN
      IF ( sar_bag[j].related_shape_aspect\shape_aspect.name IN name_bag ) THEN
        pass := FALSE;
        ESCAPE;
      ELSE
        name_bag := name_bag + sar_bag[j].related_shape_aspect\shape_aspect.name;
      END_IF;
    END_IF;
  END_REPEAT;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
   </schema>
</express>
