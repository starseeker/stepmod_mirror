(*
   $Id: arm.exp,v 1.22 2005/10/24 21:59:12 thomasrthurman Exp $
   ISO TC184/SC4/WG12 N3516 - ISO/CD-TS 10303-1714 Part feature location - EXPRESS ARM
*)

SCHEMA Part_feature_location_arm;

	USE FROM Feature_arm;	-- ISO/TS 10303-xxxx
	
	TYPE feature_or_non_feature_usage = EXTENSIBLE GENERIC_ENTITY SELECT
		(part_template_or_physical_unit_shape_model_select);
	END_TYPE;

 	TYPE part_template_or_physical_unit_shape_model_select = EXTENSIBLE GENERIC_ENTITY SELECT;
	END_TYPE;

	TYPE usage_concept = EXTENSIBLE GENERIC_ENTITY SELECT;
	END_TYPE;

  ENTITY Usage_concept_usage_relationship
    SUBTYPE OF (Geometric_model_constituent_relationship);
      associating_usage_shape        : feature_or_non_feature_usage;
      SELF\Geometric_model_constituent_relationship.constituent_element RENAMED associated_usage          : usage_concept;
      SELF\Geometric_model_constituent_relationship.constituent_model RENAMED associated_shape_definition : Geometric_model;
    WHERE
      WR1 : (  ('PART_FEATURE_LOCATION_ARM.NON_FEATURE_SHAPE_DEFINITION' IN 
                 TYPEOF(associated_shape_definition)) AND 
               ('PART_FEATURE_LOCATION_ARM.NON_FEATURE_SHAPE_DEFINITION' IN 
                 TYPEOF(associating_usage_shape))) OR 
            (('PART_FEATURE_LOCATION_ARM.FEATURE_SHAPE_DEFINITION' IN 
               TYPEOF(associated_shape_definition)) AND 
             ('PART_FEATURE_LOCATION_ARM.FEATURE_SHAPE_DEFINITION' IN TYPEOF(associating_usage_shape)));
      WR2 : NOT 
          ( ('PART_FEATURE_LOCATION_ARM.GEOMETRIC_OPERATOR_TRANSFORMATION' IN
              TYPEOF(SELF)) AND
            ('PART_FEATURE_LOCATION_ARM.CARTESIAN_TRANSFORMATION_2D' IN 
              TYPEOF(SELF\Geometric_operator_transformation.target))) OR 
            ('PART_FEATURE_LOCATION_ARM.NON_FEATURE_SHAPE_DEFINITION' IN 
              TYPEOF(associating_usage_shape));  
      WR3 : associating_usage_shape = SELF\Geometric_model_constituent_relationship.composed_model[1]; 
      WR4 : NOT EXISTS(SELF\Representation_item.name);
  END_ENTITY;

END_SCHEMA;

