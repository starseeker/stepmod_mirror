<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="2005-02-22T14:41:19" rcs.revision="1.0" description.file="mim_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="physical_connectivity_definition_mim schema_instance"/>
   <schema name="Physical_connectivity_definition_mim">
      <interface kind="use" schema="Part_external_reference_mim"/>
      <interface kind="use" schema="Physical_component_feature_mim"/>
      <interface kind="use" schema="Requirement_decomposition_mim"/>
      <interface kind="use" schema="Specification_document_mim"/>
      <type name="fde_document_reference_item">
         <select extensible="YES" genericentity="YES" basedon="document_reference_item" selectitems="physical_connectivity_definition physical_connectivity_element"/>
      </type>
      <entity name="make_from_connectivity_relationship" supertypes="shape_aspect_relationship">
         <where label="WR1" expression="'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION'&#10;       IN TYPEOF (SELF.relating_shape_aspect)"/>
         <where label="WR2" expression="'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION'&#10;       IN TYPEOF (SELF.related_shape_aspect)"/>
      </entity>
      <entity name="physical_connectivity_definition" supertypes="shape_aspect">
         <unique label="UR1">
            <unique.attribute entity-ref="physical_connectivity_definition" attribute="name"/>
            <unique.attribute entity-ref="physical_connectivity_definition" attribute="of_shape"/>
         </unique>
         <where label="WR1" expression="SIZEOF (QUERY (at &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'associated terminals') |&#10;       ('PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'COMPONENT_TERMINAL' IN&#10;       TYPEOF (at.related_shape_aspect)) AND&#10;((at.related_shape_aspect\shape_aspect.description = &#10;                 'assembly module component terminal') OR&#10;(at.related_shape_aspect\shape_aspect.description = &#10;                        'bare die component terminal') OR&#10;(at.related_shape_aspect\shape_aspect.description = &#10;               'interconnect component join terminal') OR&#10;(at.related_shape_aspect\shape_aspect.description = &#10;             'interconnect module component terminal') OR&#10;(at.related_shape_aspect\shape_aspect.description = &#10;              'minimally defined component terminal') OR&#10;(at.related_shape_aspect\shape_aspect.description = &#10;                     'packaged component join terminal'))&#10;       )) &gt; 1"/>
         <where label="WR2" expression="SIZEOF (QUERY( pd &lt;* USEDIN(SELF,&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'PROPERTY_DEFINITION.DEFINITION') |&#10;        (SIZEOF (QUERY (pdr &lt;* USEDIN (pd,&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'PROPERTY_DEFINITION_RELATIONSHIP.RELATED_PROPERTY_DEFINITION') |&#10;       pdr\property_definition_relationship.name = 'connectivity allocation')) = 1)&#10;       ))&#10;       &lt;= 1"/>
      </entity>
      <entity name="physical_connectivity_element" supertypes="shape_aspect_relationship shape_aspect">
         <where label="WR1" expression="(SELF.relating_shape_aspect\shape_aspect.description = &#10;                          'topological junction') XOR&#10;       (SIZEOF ([&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'COMPONENT_TERMINAL'] *&#10;       TYPEOF (SELF.relating_shape_aspect)) = 1)"/>
         <where label="WR2" expression="(SELF.related_shape_aspect\shape_aspect.description = 'topological junction') XOR&#10;       (SIZEOF ([&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'COMPONENT_TERMINAL'] *&#10;       TYPEOF (SELF.related_shape_aspect)) = 1)"/>
         <where label="WR3" expression="SIZEOF (QUERY (se &lt;* QUERY (sar &lt;* USEDIN (SELF,&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;       sar\shape_aspect_relationship.name = 'structure element') |&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'PHYSICAL_CONNECTIVITY_DEFINITION' IN&#10;       TYPEOF (se.relating_shape_aspect))) = 1"/>
         <where label="WR4" expression="('PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'PHYSICAL_UNIT' IN &#10;       TYPEOF (SELF.of_shape.definition)) AND&#10;       (SELF.of_shape.definition\product_definition.&#10;         frame_of_reference.name = &#10;       'physical design')"/>
      </entity>
      <entity name="physical_unit_network_definition" supertypes="product_definition">
         <where label="WR1" expression="(NOT ('PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'PRODUCT_DEFINITION_WITH_ASSOCIATED_DOCUMENTS' IN &#10;       TYPEOF (SELF))) OR&#10;       (SIZEOF (QUERY (docs &lt;* &#10;       SELF\product_definition_with_associated_documents.&#10;        documentation_ids |&#10;       docs.kind\document_type.product_data_type = 'CAD filename')) &lt;= 1)"/>
         <where label="WR2" expression="SIZEOF (QUERY (adta &lt;* USEDIN (SELF, &#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' + &#10;       'APPLIED_DATE_AND_TIME_ASSIGNMENT.ITEMS') |&#10;       adta.role\date_time_role.name = 'creation date')) + &#10;       SIZEOF (QUERY (ada &lt;* USEDIN (SELF, &#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' + &#10;       'APPLIED_DATE_ASSIGNMENT.ITEMS') |&#10;       ada.role\date_role.name = 'creation date')) = 1"/>
         <where label="WR3" expression="SIZEOF (USEDIN (SELF, &#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'APPLIED_APPROVAL_ASSIGNMENT.ITEMS')) = 1"/>
         <where label="WR4" expression="SIZEOF (QUERY (apoa &lt;* USEDIN (SELF, &#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'APPLIED_PERSON_AND_ORGANIZATION_ASSIGNMENT.ITEMS') |&#10;       apoa.role\person_and_organization_role.name = 'creator')) +&#10;       SIZEOF (QUERY (apoa &lt;* USEDIN (SELF, &#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'APPLIED_ORGANIZATION_ASSIGNMENT.ITEMS') |&#10;       apoa.role\organization_role.name = 'creator')) &gt;= 1"/>
         <where label="WR5" expression="SIZEOF (USEDIN (SELF, &#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +&#10;       'APPLIED_SECURITY_CLASSIFICATION_ASSIGNMENT.ITEMS')) = 1"/>
         <where label="WR6" expression="SELF.frame_of_reference.name IN ['physical network design']"/>
      </entity>
      <rule name="physical_connectivity_definition_relationship_constraint" appliesto="shape_aspect_relationship">
         <where label="WR1" expression="SIZEOF(QUERY(sar &lt;* shape_aspect_relationship |&#10;       (sar\shape_aspect_relationship.name = 'physical connectivity definition change')&#10;       AND NOT('PHYSICAL_CONNECTIVITY_DEFINITION_MIM.'&#10;       + 'PHYSICAL_CONNECTIVITY_DEFINITION' IN&#10;       TYPEOF(sar.related_shape_aspect))&#10;       )) = 0"/>
         <where label="WR2" expression="SIZEOF(QUERY(sar &lt;* shape_aspect_relationship |&#10;       (sar\shape_aspect_relationship.name = 'physical connectivity definition change')&#10;       AND NOT('PHYSICAL_CONNECTIVITY_DEFINITION_MIM.'&#10;       + 'PHYSICAL_CONNECTIVITY_DEFINITION' IN&#10;       TYPEOF(sar.relating_shape_aspect))&#10;       )) = 0"/>
         <where label="WR3" expression="SIZEOF(QUERY(sar &lt;* shape_aspect_relationship |&#10;       (sar\shape_aspect_relationship.name = 'physical connectivity definition change')&#10;       AND (SIZEOF(QUERY(rpd &lt;* USEDIN(sar, &#10;       'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.'&#10;       + 'PROPERTY_DEFINITION.DEFINITION') |&#10;       ('PHYSICAL_CONNECTIVITY_DEFINITION_MIM.'&#10;       + 'REQUIREMENTS_PROPERTY' IN TYPEOF(rpd))&#10;       )) = 0)&#10;       )) = 0"/>
      </rule>
      <rule name="physical_connectivity_element_unique_constraint" appliesto="physical_connectivity_element">
         <algorithm>LOCAL
  name_bag : BAG OF STRING := [];
  pce_bag : BAG OF physical_connectivity_element;
  sar_bag : BAG OF shape_aspect_relationship;
  pass : BOOLEAN := TRUE;
  pcd_bag : BAG OF physical_connectivity_definition;
END_LOCAL;

REPEAT i := 1 to SIZEOF(physical_connectivity_element) by 1;
  IF EXISTS( physical_connectivity_element[i]\shape_aspect.name ) THEN
    IF( NOT( physical_connectivity_element[i]\shape_aspect.name IN 
         name_bag ) ) THEN
      name_bag := name_bag + 
                physical_connectivity_element[i]\shape_aspect.name;
    END_IF;
  END_IF;
END_REPEAT;

REPEAT i := 1 to SIZEOF(name_bag) by 1;
  IF ( NOT pass ) THEN ESCAPE;
  END_IF;
  pcd_bag := [];
  pce_bag := QUERY( pce &lt;* physical_connectivity_element |
(pce\shape_aspect.name = name_bag[i]) );
  REPEAT j := 1 to SIZEOF(pce_bag) by 1;
    IF ( NOT pass ) THEN ESCAPE;
    END_IF;
    sar_bag := QUERY( sar &lt;* USEDIN( pce_bag[j],
'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +
'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') | ((sar\shape_aspect_relationship.name =
'structure element') AND (
'PHYSICAL_CONNECTIVITY_DEFINITION_MIM.' +
'PHYSICAL_CONNECTIVITY_DEFINITION' IN 
TYPEOF(sar.relating_shape_aspect))) );
    REPEAT k := 1 to SIZEOF(sar_bag) by 1;
      IF EXISTS( sar_bag[j].relating_shape_aspect ) THEN
        IF ( sar_bag[j].relating_shape_aspect IN pcd_bag ) THEN
          pass := FALSE;
          ESCAPE;
        ELSE
          pcd_bag := pcd_bag + sar_bag[j].relating_shape_aspect;
        END_IF;
      END_IF;
    END_REPEAT;
  END_REPEAT;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
   </schema>
</express>
