(*
   $Id: mkmodule.js,v 1.41 2004/10/11 20:17:49 thendrix Exp $
   ISO TC184/SC4/WG12 N - ISO/CD-TS 10303-xxxx Physical layout template - EXPRESS ARM
*)

SCHEMA Physical_layout_template_arm;

USE FROM Analytical_model_arm;

USE FROM Characteristic_arm;

USE FROM Part_view_definition_arm;

USE FROM Part_and_version_identification_arm;

USE FROM Shape_property_assignment_arm; 

USE FROM Feature_and_connection_zone_arm;

USE FROM Functional_decomposition_to_design_arm;

REFERENCE FROM product_identification_arm(          -- ISO/TS 10303-1017 
        types_of_product 
); 

  TYPE correlated_or_independent = SELECT
    (coordinated_characteristic,
     characteristic);
  END_TYPE; -- correlated_or_independent

  ENTITY Connection_zone_in_layout_template
  	SUBTYPE OF (Connection_zone);
  	SELF\shape_element.containing_shape : shape_element;
  END_ENTITY; 
  
(** String attribute of subtypes must be synchronized *)
  ENTITY Layout_template_definition
    SUBTYPE OF (Template_definition, Shape_element);
      physical_characteristic                 : OPTIONAL SET[1:?] OF correlated_or_independent;
    DERIVE
			SELF\shape_element.containing_shape     : layout_template_definition := SELF;      
    WHERE
      WR1 : SIZEOF(QUERY(prpc <* USEDIN(SELF\product_view_definition.defined_version.of_product,
 'AP210_ARM.PRODUCT_CATEGORY_ASSIGNMENT.PRODUCTS') | (prpc.name = 'template model'))) >= 0;
      WR2 : SELF\shape_element.element_name = 'NULL';
  END_ENTITY; -- layout_template_definition

  ENTITY Reference_functional_unit_assignment_to_template;
      functional_design_definition_path : reference_composition_path;
      implementation                    : layout_template_definition;
      of_property                       : OPTIONAL SET[1:?] OF coordinated_characteristic;
      path_alias                        : STRING; --ee_name;
      swap_code                         : OPTIONAL STRING;
    UNIQUE
      UR1 : implementation,
 path_alias;
  END_ENTITY; 

	ENTITY Reference_part_template_for_analytical_model ;
		template 									: Layout_template_definition;
		analytical_representation : Analytical_representation;
		UNIQUE
			UR1 : template;
	END_ENTITY;

  ENTITY Template
  	SUBTYPE OF (Product);
  	WHERE 
  		WR1 : SIZEOF([ 'template model' ] * types_of_product(SELF))= 1 ;
  END_ENTITY; -- template

  ENTITY Template_definition
    SUBTYPE OF (item_shape, product_view_definition);
    	SELF\product_view_definition.defined_version 	: template_version;
    DERIVE	
    	SELF\item_shape.described_element     				: template_definition := SELF;      
  END_ENTITY; -- layout_template_definition
  
  ENTITY Template_version
  	SUBTYPE OF (Product_version);
  		SELF\product_version.of_product : Template;
  END_ENTITY; -- template_version

END_SCHEMA;
