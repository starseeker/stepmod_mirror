<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="2005-02-02T15:43:11" rcs.revision="1.0" description.file="mim_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="physical_unit_2d_design_view_mim schema_instance"/>
   <schema name="Physical_unit_2d_design_view_mim">
      <interface kind="use" schema="Layered_2d_shape_mim"/>
      <interface kind="use" schema="Physical_unit_design_view_mim"/>
      <interface kind="use" schema="Assembly_module_with_interconnect_component_mim"/>
      <interface kind="reference" schema="Physical_unit_usage_view_mim">
         <interfaced.item name="is_laminate_component"/>
      </interface>
      <interface kind="reference" schema="Physical_unit_design_view_mim">
         <interfaced.item name="is_interconnect_module_occurrence"/>
      </interface>
      <interface kind="reference" schema="support_resource_schema">
         <interfaced.item name="bag_to_set"/>
      </interface>
      <entity name="component_2d_location" supertypes="representation">
         <where label="WR1" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'DESCRIPTIVE_REPRESENTATION_ITEM'&#10;       IN TYPEOF (it)) AND&#10;       (it\representation_item.name = 'placement fixed') AND &#10;       ((it\descriptive_representation_item.description = 'true') OR&#10;       (it\descriptive_representation_item.description = 'false')))) = 1"/>
         <where label="WR2" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'DESCRIPTIVE_REPRESENTATION_ITEM'&#10;       IN TYPEOF (it)))) = 1"/>
         <where label="WR3" expression="(NOT &#10;       (SELF.context_of_items\geometric_representation_context.&#10;       coordinate_space_dimension&#10;       = 2)) OR (SIZEOF (QUERY (it &lt;* SELF.items |&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (it))) = 1)"/>
         <where label="WR4" expression="(NOT &#10;       (SELF.context_of_items\geometric_representation_context.&#10;       coordinate_space_dimension&#10;        = 3)) OR (SIZEOF (QUERY (it &lt;* SELF.items |&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'AXIS2_PLACEMENT_3D' IN TYPEOF (it))) = 1)"/>
         <where label="WR5" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'MAPPED_ITEM'&#10;       IN TYPEOF (it)) &#10;       )) = 1"/>
         <where label="WR6" expression="NOT (SIZEOF (QUERY (it &lt;* SELF.items |&#10;        'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (it))) = 1)&#10;        OR&#10;        (SIZEOF (QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D'&#10;        IN TYPEOF (cto2d)) AND&#10;        (SIZEOF (QUERY (mi &lt;* USEDIN (cto2d,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'MAPPED_ITEM.MAPPING_TARGET') | (&#10;       (SIZEOF (QUERY (cl &lt;* USEDIN (mi,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'REPRESENTATION.ITEMS') |(cl = SELF))) = 1)))) &gt;= 1)&#10;        )) = 1)"/>
         <where label="WR7" expression="NOT (SIZEOF (QUERY (it &lt;* SELF.items |&#10;        'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'AXIS2_PLACEMENT_3D' IN TYPEOF (it))) = 1)&#10;      OR&#10;       (SIZEOF (QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'AXIS2_PLACEMENT_3D'&#10;        IN TYPEOF (cto2d)) AND&#10;        (SIZEOF (QUERY (mi &lt;* USEDIN (cto2d,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'MAPPED_ITEM.MAPPING_TARGET') | (&#10;       (SIZEOF (QUERY (cl &lt;* USEDIN (mi,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'REPRESENTATION.ITEMS') |(cl = SELF))) = 1)))) = 1)&#10;        )) = 1)"/>
         <where label="WR8" expression="NOT((SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2) AND &#10;          (SELF.context_of_items.context_type = 'component surface') AND&#10;        (( SIZEOF (QUERY (pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       (&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (pdr.definition.definition)) AND&#10;       (pdr.name = 'mounting surface assembly joint') AND&#10;       (pdr.definition.definition.relating_shape_aspect\shape_aspect.description =&#10;         'interconnect module component surface feature') AND&#10;       (SIZEOF(QUERY ( sar &lt;* USEDIN (pdr.definition.definition.relating_shape_aspect,&#10;        'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;        ((sar.relating_shape_aspect\shape_aspect.description =&#10;         'interconnect module primary surface') OR&#10;        (sar.relating_shape_aspect\shape_aspect.description =&#10;         'interconnect module edge surface') OR&#10;        (sar.relating_shape_aspect\shape_aspect.description =&#10;         'interconnect module edge segment surface')))) = 1)&#10;       )&#10;       )) = 1)))&#10;       OR&#10;       (SIZEOF(QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      (cto2d_determinant_test(cto2d,1.0,0.001 )))) = 1)"/>
         <where label="WR9" expression="NOT((SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2) AND &#10;          (SELF.context_of_items.context_type = 'component surface') AND&#10;         (( SIZEOF (QUERY (pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       (&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (pdr.definition.definition)) AND&#10;       (pdr.name = 'mounting surface assembly joint') AND&#10;       (pdr.definition.definition.relating_shape_aspect\shape_aspect.description =&#10;         'interconnect module component surface feature') AND&#10;       (SIZEOF(QUERY ( sar &lt;* USEDIN (pdr.definition.definition.relating_shape_aspect,&#10;        'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;        sar.relating_shape_aspect\shape_aspect.description =&#10;         'interconnect module secondary surface')) = 1)&#10;       ))) = 1)))&#10;       OR&#10;    (SIZEOF(QUERY( cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      (cto2d_determinant_test(cto2d,-1.0,0.001 )))) = 1)"/>
         <where label="WR10" expression="(NOT(is_laminate_component_location(SELF))) OR&#10;      (SIZEOF(QUERY( pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (pdr.definition.definition)) AND&#10;      (pdr.definition.definition.relating_shape_aspect\shape_aspect.description =&#10;        'interconnect module component surface feature'))) = 0)"/>
         <where label="WR11" expression="(NOT(is_laminate_component_location(SELF) AND&#10;         (SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)))&#10;         OR&#10;         (SIZEOF(QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      (cto2d_determinant_test(cto2d,1.0,0.001 )))) = 1)"/>
         <where label="WR12" expression="SIZEOF(QUERY( pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'SHAPE_ASPECT' IN TYPEOF (pdr.definition.definition)) AND&#10;       (pdr.definition.definition\shape_aspect.description =&#10;        'interconnect module component surface feature'))) = 0"/>
         <where label="WR13" expression="(NOT((SELF.context_of_items\geometric_representation_context.&#10;        coordinate_space_dimension = 2) AND&#10;        (SELF.context_of_items.context_type = 'component stacked')))&#10;        OR &#10;      (SIZEOF(QUERY( pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (pdr.definition.definition)) AND&#10;      (pdr.definition.definition.relating_shape_aspect\shape_aspect.description =&#10;        'interconnect module component surface feature'))) = 0)"/>
         <where label="WR14" expression="NOT((SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)&#10;          AND&#10;         (SELF.context_of_items.context_type = 'component edge'))&#10;       OR&#10;        ((NOT(is_laminate_component_location(SELF)))&#10;          AND&#10;       (( SIZEOF (QUERY (pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       (&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (pdr.definition.definition)) AND&#10;       (pdr.name = 'reference terminal assembly joint') AND&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'COMPONENT_TERMINAL' IN &#10;                      TYPEOF (pdr.definition.definition.related_shape_aspect)) &#10;         AND&#10;       (pdr.definition.definition.related_shape_aspect\shape_aspect.description IN&#10;       ['packaged component join terminal',&#10;       'package terminal occurrence'])&#10;         AND&#10;       (SIZEOF(QUERY ( sar &lt;* USEDIN &#10;                          (pdr.definition.definition.related_shape_aspect,&#10;        'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;        (sar\shape_aspect_relationship.name = 'instantiated feature')&#10;           AND&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'PRIMARY_REFERENCE_TERMINAL' IN TYPEOF (sar.relating_shape_aspect))&#10;         )) = 1)&#10;         AND&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'COMPONENT_DEFINITION' IN&#10;         TYPEOF (pdr.definition.definition.related_shape_aspect.of_shape.definition))&#10;         AND&#10;       (component_definition_located_by_component_location(SELF) =&#10;                 pdr.definition.definition.related_shape_aspect.of_shape.definition) &#10;       ))) = 1))&#10;         AND&#10;       (( SIZEOF (QUERY (pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       (&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (pdr.definition.definition)) AND&#10;       (pdr.name = 'mounting surface assembly joint') AND&#10;       (pdr.definition.definition.relating_shape_aspect\shape_aspect.description =&#10;         'interconnect module component surface feature') AND&#10;       (SIZEOF(QUERY ( sar &lt;* USEDIN (pdr.definition.definition.relating_shape_aspect,&#10;        'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT') |&#10;        (sar.relating_shape_aspect\shape_aspect.description =&#10;         'interconnect module edge surface') OR&#10;        (sar.relating_shape_aspect\shape_aspect.description =&#10;         'interconnect module edge segment surface'))) = 1)&#10;         AND&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'COMPONENT_MOUNTING_FEATURE' IN &#10;                      TYPEOF (pdr.definition.definition.related_shape_aspect)) &#10;         AND&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'COMPONENT_DEFINITION' IN&#10;         TYPEOF (pdr.definition.definition.related_shape_aspect.of_shape.definition))&#10;         AND&#10;       (component_definition_located_by_component_location(SELF) =&#10;                 pdr.definition.definition.related_shape_aspect.of_shape.definition) &#10;       ))) = 1))&#10;      )"/>
         <where label="WR15" expression="NOT((SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)&#10;          AND&#10;         (SELF.context_of_items.context_type = 'component stacked'))&#10;       OR&#10;        ((NOT(is_laminate_component_location(SELF)))&#10;          AND&#10;       (( SIZEOF (QUERY (pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       (&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (pdr.definition.definition))&#10;         AND&#10;       ('mounting joint' = pdr.name)&#10;         AND&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'COMPONENT_MOUNTING_FEATURE' IN&#10;                      TYPEOF (pdr.definition.definition.related_shape_aspect))&#10;         AND&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'COMPONENT_DEFINITION' IN&#10;         TYPEOF (pdr.definition.definition.related_shape_aspect.of_shape.definition))&#10;         AND&#10;       (component_definition_located_by_component_location(SELF) :=:&#10;                 pdr.definition.definition.related_shape_aspect.of_shape.definition)    &#10;         AND&#10;       (component_definition_located_by_component_location(SELF) :&lt;&gt;: &#10;                 pdr.definition.definition.relating_shape_aspect.of_shape.definition)    &#10;       )&#10;      )) = 1))&#10;        )"/>
         <where label="WR16" expression="(NOT(is_interconnect_module_component_location(SELF))) OR&#10;      (SIZEOF(QUERY( pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (pdr.definition.definition)) AND&#10;      (pdr.definition.definition.relating_shape_aspect\shape_aspect.description =&#10;        'interconnect module component surface feature'))) = 0)"/>
         <where label="WR17" expression="NOT((SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)&#10;          AND&#10;         (SELF.context_of_items.context_type = 'component stacked'))&#10;       OR&#10;       (SIZEOF(QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      ((cto2d_determinant_test(cto2d,1.0,0.001 )) OR&#10;      (cto2d_determinant_test(cto2d,-1.0,0.001 )))&#10;      )) = 1)"/>
         <where label="WR18" expression="SIZEOF (QUERY (it &lt;* SELF\representation.items| NOT&#10;     (SIZEOF(&#10;    ['PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;     'CARTESIAN_TRANSFORMATION_OPERATOR_2D', &#10;     'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;     'MAPPED_ITEM', &#10;     'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;     'DESCRIPTIVE_REPRESENTATION_ITEM', &#10;     'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;     'AXIS2_PLACEMENT_3D'] &#10;     * TYPEOF(it)) = 1 ))) = 0"/>
         <where label="WR19" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'AXIS2_PLACEMENT_3D'&#10;       IN TYPEOF (it)) AND&#10;       (it\representation_item.name = 'origin') &#10;       )) = 0"/>
         <where label="WR20" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'MAPPED_ITEM'&#10;       IN TYPEOF (it))&#10;       AND NOT&#10;       (((it\representation_item.name = 'component assembly 2d position')&#10;        OR&#10;       (it\representation_item.name = 'component assembly 3d position'))&#10;       AND&#10;       (it.mapping_source.mapping_origin\representation_item.name = 'origin')&#10;       AND&#10;       (('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'AXIS2_PLACEMENT_2D' IN TYPEOF (it.mapping_source.mapping_origin))&#10;        OR&#10;       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;       'AXIS2_PLACEMENT_3D' IN TYPEOF (it.mapping_source.mapping_origin))))&#10;       )) = 0"/>
         <where label="WR21" expression="SIZEOF(QUERY(pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.'&#10;       + 'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.'&#10;       + 'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN &#10;            TYPEOF(pdr.definition.definition))&#10;       )) = 1"/>
         <where label="WR22" expression="(NOT(is_top_footprint_occurrence_location(SELF) AND&#10;         (SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)))&#10;         OR&#10;         (SIZEOF(QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      (cto2d_determinant_test(cto2d,1.0,0.001 )))) = 1)"/>
         <where label="WR23" expression="(NOT(is_bottom_footprint_occurrence_location(SELF) AND&#10;         (SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)))&#10;         OR&#10;         (SIZEOF(QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      (cto2d_determinant_test(cto2d,-1.0,0.001 )))) = 1)"/>
         <where label="WR24" expression="(NOT(is_symmetrical_footprint_occurrence_location(SELF) AND&#10;         (SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)))&#10;         OR&#10;         (SIZEOF(QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      (cto2d_determinant_test(cto2d,1.0,0.001 )))) = 1)"/>
         <where label="WR25" expression="(NOT(is_top_padstack_occurrence_location(SELF) AND&#10;         (SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)))&#10;         OR&#10;         (SIZEOF(QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      (cto2d_determinant_test(cto2d,1.0,0.001 )))) = 1)"/>
         <where label="WR26" expression="(NOT(is_bottom_padstack_occurrence_location(SELF) AND&#10;         (SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)))&#10;         OR&#10;         (SIZEOF(QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      (cto2d_determinant_test(cto2d,-1.0,0.001 )))) = 1)"/>
         <where label="WR27" expression="(NOT(is_symmetrical_padstack_occurrence_location(SELF) AND&#10;         (SELF.context_of_items\geometric_representation_context.coordinate_space_dimension&#10;         = 2)))&#10;         OR&#10;         (SIZEOF(QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (cto2d)) AND&#10;      (cto2d_determinant_test(cto2d,1.0,0.001 )))) = 1)"/>
      </entity>
      <rule name="component_part_2d_geometric_representation_relationship_constraint" appliesto="shape_representation_relationship">
         <algorithm>LOCAL
 rr: SET OF representation_relationship :=
      QUERY ( srr &lt;* shape_representation_relationship |
       srr\representation_relationship.name = 
                            'component part planar shape');
 pass: BOOLEAN := TRUE;
END_LOCAL;
REPEAT i := 1 to SIZEOF(rr) by 1;
IF ((rr[i].rep_1.context_of_items.coordinate_space_dimension) &lt;&gt;
          (rr[i].rep_2.context_of_items.coordinate_space_dimension))
THEN
  pass := FALSE;
END_IF;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
      <function name="component_definition_located_by_component_location">
         <parameter name="cl">
            <typename name="component_2d_location"/>
         </parameter>
         <typename name="component_definition"/>
         <algorithm>LOCAL
  pdr : BAG OF property_definition_representation := USEDIN (cl,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION');
END_LOCAL;
   REPEAT i := 1 TO HIINDEX(pdr) BY 1;
    IF(('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
        'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN 
                                  TYPEOF (pdr[i].definition.definition))
        AND
       ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
        'COMPONENT_DEFINITION' IN 
        TYPEOF (pdr[i].definition.definition\product_definition_relationship.
                                                  related_product_definition)))
     THEN 
      RETURN(pdr[i].definition.definition\product_definition_relationship.
                                                   related_product_definition);
    END_IF;
   END_REPEAT;
 RETURN (?);</algorithm>
      </function>
      <function name="cto2d_determinant_test">
         <parameter name="cto2d">
            <typename name="cartesian_transformation_operator_2d"/>
         </parameter>
         <parameter name="expected_value">
            <builtintype type="REAL"/>
         </parameter>
         <parameter name="delta">
            <builtintype type="REAL"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  det : REAL := 0.0;
  DRs : LIST [4:4] OF REAL := [];
END_LOCAL;
     DRs[1] := cto2d.u[1].direction_ratios[1];
     DRs[2] := cto2d.u[1].direction_ratios[2];
     DRs[3] := cto2d.u[2].direction_ratios[1];
     DRs[4] := cto2d.u[2].direction_ratios[2];
     det  :=  (DRs[1] * DRs[4]) - (DRs[2] * DRs[3]);
IF (Abs(expected_value - det) &lt; Abs(delta) ) THEN
    RETURN (TRUE);
ELSE
    RETURN (FALSE);
END_IF;</algorithm>
      </function>
      <function name="is_bottom_footprint_occurrence">
         <parameter name="pd">
            <typename name="product_definition"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pds : SET OF property_definition := BAG_TO_SET(USEDIN ( pd,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION.DEFINITION'));
   fo : SET OF shape_aspect :=  [];
  sar : SET OF shape_aspect_relationship := [];
  dri : SET OF descriptive_representation_item := [];
  pdr : SET OF property_definition_representation := [];
 pass : BOOLEAN := FALSE;
END_LOCAL;
REPEAT i := 1 to SIZEOF(pds) by 1;
      fo := fo + BAG_TO_SET(QUERY( sa &lt;* (USEDIN(pds[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT.OF_SHAPE')) |
     'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'FOOTPRINT_OCCURRENCE' IN TYPEOF(sa)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(fo) by 1;
      sar := sar + BAG_TO_SET(QUERY( sar &lt;* (USEDIN ( fo[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) | 
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' + 
  'FOOTPRINT_DEFINITION' IN 
      TYPEOF(sar.relating_shape_aspect.of_shape.definition)) AND
  ('usage definition' = sar\shape_aspect_relationship.name)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(sar) by 1;
      pdr := pdr + BAG_TO_SET(QUERY( pdr &lt;* (
          USEDIN (sar[i].relating_shape_aspect.of_shape.definition,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'REPRESENTATION' IN TYPEOF(pdr.used_representation)) AND
  (pdr.used_representation\representation.name = 'product definition context description')));
END_REPEAT;

REPEAT i := 1 to SIZEOF(pdr) by 1;
      dri := dri + (QUERY( dri &lt;* pdr[i].used_representation.items |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(dri)) AND
   (dri\representation_item.name = 'text') AND
   (dri.description = 'bottom')));
END_REPEAT;

IF (SIZEOF(dri) = 1) THEN
    RETURN (TRUE);
END_IF;
RETURN (pass);</algorithm>
      </function>
      <function name="is_bottom_footprint_occurrence_location">
         <parameter name="cl">
            <typename name="component_2d_location"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pdrs : SET OF property_definition_representation := BAG_TO_SET(USEDIN ( cl, 
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION'));
END_LOCAL;
IF sizeof (pdrs) = 1 THEN
  IF (('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN TYPEOF 
     (pdrs[1].definition.definition)) AND
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'ASSEMBLY_GROUP_COMPONENT_DEFINITION' IN TYPEOF 
     (pdrs[1].definition.definition.related_product_definition)) AND
   is_bottom_footprint_occurrence(pdrs[1].definition.definition.related_product_definition)) THEN
    RETURN (TRUE);
  ELSE
    RETURN (FALSE);
  END_IF;
ELSE
    RETURN (FALSE);
END_IF;</algorithm>
      </function>
      <function name="is_bottom_padstack_occurrence">
         <parameter name="pd">
            <typename name="product_definition"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pds : SET OF property_definition := BAG_TO_SET(USEDIN ( pd,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION.DEFINITION'));
   fo : SET OF shape_aspect :=  [];
  sar : SET OF shape_aspect_relationship := [];
  dri : SET OF descriptive_representation_item := [];
  pdr : SET OF property_definition_representation := [];
 pass : BOOLEAN := FALSE;
END_LOCAL;
REPEAT i := 1 to SIZEOF(pds) by 1;
      fo := fo + BAG_TO_SET(QUERY( sa &lt;* (USEDIN(pds[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT.OF_SHAPE')) |
     'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PADSTACK_OCCURRENCE' IN TYPEOF(sa)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(fo) by 1;
      sar := sar + BAG_TO_SET(QUERY( sar &lt;* (USEDIN ( fo[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) | 
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' + 
  'PADSTACK_DEFINITION' IN 
      TYPEOF(sar.relating_shape_aspect.of_shape.definition)) AND
  ('usage definition' = sar\shape_aspect_relationship.name)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(sar) by 1;
      pdr := pdr + BAG_TO_SET(QUERY( pdr &lt;* (
          USEDIN (sar[i].relating_shape_aspect.of_shape.definition,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'REPRESENTATION' IN TYPEOF(pdr.used_representation)) AND
  (pdr.used_representation\representation.name = 'product definition context description')));
END_REPEAT;

REPEAT i := 1 to SIZEOF(pdr) by 1;
      dri := dri + (QUERY( dri &lt;* pdr[i].used_representation.items |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(dri)) AND
   (dri\representation_item.name = 'text') AND
   (dri.description = 'bottom')));
END_REPEAT;

IF (SIZEOF(dri) = 1) THEN
    RETURN (TRUE);
END_IF;
RETURN (pass);</algorithm>
      </function>
      <function name="is_bottom_padstack_occurrence_location">
         <parameter name="cl">
            <typename name="component_2d_location"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pdrs : SET OF property_definition_representation := BAG_TO_SET(USEDIN ( cl, 
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION'));
END_LOCAL;
IF sizeof (pdrs) = 1 THEN
  IF (('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN TYPEOF 
     (pdrs[1].definition.definition)) AND
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'ASSEMBLY_GROUP_COMPONENT_DEFINITION' IN TYPEOF 
     (pdrs[1].definition.definition.related_product_definition)) AND
   is_bottom_padstack_occurrence(pdrs[1].definition.definition.related_product_definition)) THEN
    RETURN (TRUE);
  ELSE
    RETURN (FALSE);
  END_IF;
ELSE
    RETURN (FALSE);
END_IF;</algorithm>
      </function>
      <function name="is_interconnect_module_component_location">
         <parameter name="cl">
            <typename name="component_2d_location"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pdrs : SET OF property_definition_representation := BAG_TO_SET(USEDIN ( cl, 
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION'));
END_LOCAL;
IF sizeof (pdrs) = 1 THEN
  IF (('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN TYPEOF 
     (pdrs[1].definition.definition)) AND
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'COMPONENT_DEFINITION' IN TYPEOF 
     (pdrs[1].definition.definition.related_product_definition)) AND
   is_interconnect_module_occurrence(pdrs[1].definition.definition.related_product_definition)) THEN
    RETURN (TRUE);
  ELSE
    RETURN (FALSE);
  END_IF;
ELSE
    RETURN (FALSE);
END_IF;</algorithm>
      </function>
      <function name="is_laminate_component_location">
         <parameter name="cl">
            <typename name="component_2d_location"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pdrs : SET OF property_definition_representation := BAG_TO_SET(USEDIN ( cl, 
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION'));
END_LOCAL;
IF sizeof (pdrs) = 1 THEN
  IF (('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN TYPEOF 
     (pdrs[1].definition.definition)) AND
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'COMPONENT_DEFINITION' IN TYPEOF 
     (pdrs[1].definition.definition.related_product_definition)) AND
   is_laminate_component(pdrs[1].definition.definition.related_product_definition)) THEN
    RETURN (TRUE);
  ELSE
    RETURN (FALSE);
  END_IF;
ELSE
    RETURN (FALSE);
END_IF;</algorithm>
      </function>
      <function name="is_symmetrical_footprint_occurrence">
         <parameter name="pd">
            <typename name="product_definition"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pds : SET OF property_definition := BAG_TO_SET(USEDIN ( pd,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION.DEFINITION'));
   fo : SET OF shape_aspect :=  [];
  sar : SET OF shape_aspect_relationship := [];
  dri : SET OF descriptive_representation_item := [];
  pdr : SET OF property_definition_representation := [];
 pass : BOOLEAN := FALSE;
END_LOCAL;
REPEAT i := 1 to SIZEOF(pds) by 1;
      fo := fo + BAG_TO_SET(QUERY( sa &lt;* (USEDIN ( pds[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT.OF_SHAPE')) |
     'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'FOOTPRINT_OCCURRENCE' IN TYPEOF(sa)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(fo) by 1;
      sar := sar + BAG_TO_SET(QUERY( sar &lt;* (USEDIN ( fo[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) | 
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' + 
  'FOOTPRINT_DEFINITION' IN 
      TYPEOF(sar.relating_shape_aspect.of_shape.definition)) AND
  ('usage definition' = sar\shape_aspect_relationship.name)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(sar) by 1;
      pdr := pdr + BAG_TO_SET(QUERY( pdr &lt;* (
          USEDIN (sar[i].relating_shape_aspect.of_shape.definition,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'REPRESENTATION' IN TYPEOF(pdr.used_representation)) AND
  (pdr.used_representation\representation.name = 'product definition context description')));
END_REPEAT;

REPEAT i := 1 to SIZEOF(pdr) by 1;
      dri := dri + (QUERY( dri &lt;* pdr[i].used_representation.items |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(dri)) AND
   (dri\representation_item.name = 'text') AND
   (dri.description = 'symmetrical')));
END_REPEAT;

IF (SIZEOF(dri) = 1) THEN
    RETURN (TRUE);
END_IF;
RETURN (pass);</algorithm>
      </function>
      <function name="is_symmetrical_footprint_occurrence_location">
         <parameter name="cl">
            <typename name="component_2d_location"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pdrs : SET OF property_definition_representation := BAG_TO_SET(USEDIN ( cl, 
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION'));
END_LOCAL;
IF sizeof (pdrs) = 1 THEN
  IF (('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN TYPEOF 
     (pdrs[1].definition.definition)) AND
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'ASSEMBLY_GROUP_COMPONENT_DEFINITION' IN TYPEOF 
     (pdrs[1].definition.definition.related_product_definition)) AND
   is_symmetrical_footprint_occurrence(pdrs[1].definition.definition.related_product_definition)) THEN
    RETURN (TRUE);
  ELSE
    RETURN (FALSE);
  END_IF;
ELSE
    RETURN (FALSE);
END_IF;</algorithm>
      </function>
      <function name="is_symmetrical_padstack_occurrence">
         <parameter name="pd">
            <typename name="product_definition"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pds : SET OF property_definition := BAG_TO_SET(USEDIN ( pd,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION.DEFINITION'));
   fo : SET OF shape_aspect :=  [];
  sar : SET OF shape_aspect_relationship := [];
  dri : SET OF descriptive_representation_item := [];
  pdr : SET OF property_definition_representation := [];
 pass : BOOLEAN := FALSE;
END_LOCAL;
REPEAT i := 1 to SIZEOF(pds) by 1;
      fo := fo + BAG_TO_SET(QUERY( sa &lt;* (USEDIN ( pds[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT.OF_SHAPE')) |
     'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PADSTACK_OCCURRENCE' IN TYPEOF(sa)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(fo) by 1;
      sar := sar + BAG_TO_SET(QUERY( sar &lt;* (USEDIN ( fo[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) | 
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' + 
  'PADSTACK_DEFINITION' IN 
      TYPEOF(sar.relating_shape_aspect.of_shape.definition)) AND
  ('usage definition' = sar\shape_aspect_relationship.name)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(sar) by 1;
      pdr := pdr + BAG_TO_SET(QUERY( pdr &lt;* (
          USEDIN (sar[i].relating_shape_aspect.of_shape.definition,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'REPRESENTATION' IN TYPEOF(pdr.used_representation)) AND
  (pdr.used_representation\representation.name = 'product definition context description')));
END_REPEAT;

REPEAT i := 1 to SIZEOF(pdr) by 1;
      dri := dri + (QUERY( dri &lt;* pdr[i].used_representation.items |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(dri)) AND
   (dri\representation_item.name = 'text') AND
   (dri.description = 'symmetrical')));
END_REPEAT;

IF (SIZEOF(dri) = 1) THEN
    RETURN (TRUE);
END_IF;
RETURN (pass);</algorithm>
      </function>
      <function name="is_symmetrical_padstack_occurrence_location">
         <parameter name="cl">
            <typename name="component_2d_location"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pdrs : SET OF property_definition_representation := BAG_TO_SET(USEDIN ( cl, 
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION'));
END_LOCAL;
IF sizeof (pdrs) = 1 THEN
  IF (('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN TYPEOF 
     (pdrs[1].definition.definition)) AND
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'ASSEMBLY_GROUP_COMPONENT_DEFINITION' IN TYPEOF 
     (pdrs[1].definition.definition.related_product_definition)) AND
   is_symmetrical_padstack_occurrence(pdrs[1].definition.definition.related_product_definition)) THEN
    RETURN (TRUE);
  ELSE
    RETURN (FALSE);
  END_IF;
ELSE
    RETURN (FALSE);
END_IF;</algorithm>
      </function>
      <function name="is_top_footprint_occurrence">
         <parameter name="pd">
            <typename name="product_definition"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pds : SET OF property_definition := BAG_TO_SET(USEDIN ( pd,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION.DEFINITION'));
   fo : SET OF shape_aspect :=  [];
  sar : SET OF shape_aspect_relationship := [];
  dri : SET OF descriptive_representation_item := [];
  pdr : SET OF property_definition_representation := [];
 pass : BOOLEAN := FALSE;
END_LOCAL;
REPEAT i := 1 to SIZEOF(pds) by 1;
      fo := fo + BAG_TO_SET(QUERY( sa &lt;* (USEDIN ( pds[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT.OF_SHAPE')) |
     'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'FOOTPRINT_OCCURRENCE' IN TYPEOF(sa)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(fo) by 1;
      sar := sar + BAG_TO_SET(QUERY( sar &lt;* (USEDIN ( fo[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) | 
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' + 
  'FOOTPRINT_DEFINITION' IN 
      TYPEOF(sar.relating_shape_aspect.of_shape.definition)) AND
  ('usage definition' = sar\shape_aspect_relationship.name)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(sar) by 1;
      pdr := pdr + BAG_TO_SET(QUERY( pdr &lt;* (
          USEDIN (sar[i].relating_shape_aspect.of_shape.definition,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'REPRESENTATION' IN TYPEOF(pdr.used_representation)) AND
  (pdr.used_representation\representation.name = 'product definition context description')));
END_REPEAT;

REPEAT i := 1 to SIZEOF(pdr) by 1;
      dri := dri + (QUERY( dri &lt;* pdr[i].used_representation.items |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(dri)) AND
   (dri\representation_item.name = 'text') AND
   (dri.description = 'top')));
END_REPEAT;

IF (SIZEOF(dri) = 1) THEN
    RETURN (TRUE);
END_IF;
RETURN (pass);</algorithm>
      </function>
      <function name="is_top_footprint_occurrence_location">
         <parameter name="cl">
            <typename name="component_2d_location"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pdrs : SET OF property_definition_representation := BAG_TO_SET(USEDIN ( cl, 
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION'));
END_LOCAL;
IF sizeof (pdrs) = 1 THEN
  IF (('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN TYPEOF 
     (pdrs[1].definition.definition)) AND
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'ASSEMBLY_GROUP_COMPONENT_DEFINITION' IN TYPEOF 
     (pdrs[1].definition.definition.related_product_definition)) AND
   is_top_footprint_occurrence(pdrs[1].definition.definition.related_product_definition)) THEN
    RETURN (TRUE);
  ELSE
    RETURN (FALSE);
  END_IF;
ELSE
    RETURN (FALSE);
END_IF;</algorithm>
      </function>
      <function name="is_top_padstack_occurrence">
         <parameter name="pd">
            <typename name="product_definition"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pds : SET OF property_definition := BAG_TO_SET(USEDIN ( pd,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION.DEFINITION'));
   fo : SET OF shape_aspect :=  [];
  sar : SET OF shape_aspect_relationship := [];
  dri : SET OF descriptive_representation_item := [];
  pdr : SET OF property_definition_representation := [];
 pass : BOOLEAN := FALSE;
END_LOCAL;
REPEAT i := 1 to SIZEOF(pds) by 1;
      fo := fo + BAG_TO_SET(QUERY( sa &lt;* (USEDIN ( pds[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT.OF_SHAPE')) |
     'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PADSTACK_OCCURRENCE' IN TYPEOF(sa)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(fo) by 1;
      sar := sar + BAG_TO_SET(QUERY( sar &lt;* (USEDIN ( fo[i],
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) | 
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' + 
  'PADSTACK_DEFINITION' IN 
      TYPEOF(sar.relating_shape_aspect.of_shape.definition)) AND
  ('usage definition' = sar\shape_aspect_relationship.name)));
END_REPEAT;
REPEAT i := 1 to SIZEOF(sar) by 1;
      pdr := pdr + BAG_TO_SET(QUERY( pdr &lt;* (
          USEDIN (sar[i].relating_shape_aspect.of_shape.definition,
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'REPRESENTATION' IN TYPEOF(pdr.used_representation)) AND
  (pdr.used_representation\representation.name = 'product definition context description')));
END_REPEAT;

REPEAT i := 1 to SIZEOF(pdr) by 1;
      dri := dri + (QUERY( dri &lt;* pdr[i].used_representation.items |
     ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'DESCRIPTIVE_REPRESENTATION_ITEM' IN TYPEOF(dri)) AND
   (dri\representation_item.name = 'text') AND
   (dri.description = 'top')));
END_REPEAT;

IF (SIZEOF(dri) = 1) THEN
    RETURN (TRUE);
END_IF;
RETURN (pass);</algorithm>
      </function>
      <function name="is_top_padstack_occurrence_location">
         <parameter name="cl">
            <typename name="component_2d_location"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
  pdrs : SET OF property_definition_representation := BAG_TO_SET(USEDIN ( cl, 
  'PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION'));
END_LOCAL;
IF sizeof (pdrs) = 1 THEN
  IF (('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN TYPEOF 
     (pdrs[1].definition.definition)) AND
  ('PHYSICAL_UNIT_2D_DESIGN_VIEW_MIM.' +
  'ASSEMBLY_GROUP_COMPONENT_DEFINITION' IN TYPEOF 
     (pdrs[1].definition.definition.related_product_definition)) AND
   is_top_padstack_occurrence(pdrs[1].definition.definition.related_product_definition)) THEN
    RETURN (TRUE);
  ELSE
    RETURN (FALSE);
  END_IF;
ELSE
    RETURN (FALSE);
END_IF;</algorithm>
      </function>
   </schema>
</express>
