<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express language_version="2" rcs.date="2005-02-02T15:43:11" rcs.revision="1.0" description.file="mim_descriptions.xml">
   <application name="JSDAI" owner="LKSoft" url="www.lksoft.com" version="4.0 beta" source="physical_unit_3d_design_view_mim schema_instance"/>
   <schema name="Physical_unit_3d_design_view_mim">
      <interface kind="use" schema="Layered_3d_shape_mim"/>
      <interface kind="use" schema="Physical_unit_design_view_mim"/>
      <entity name="component_3d_location" supertypes="representation">
         <where label="WR1" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'DESCRIPTIVE_REPRESENTATION_ITEM'&#10;       IN TYPEOF (it)) AND&#10;       (it\representation_item.name = 'placement fixed') AND &#10;       ((it\descriptive_representation_item.description = 'true') OR&#10;       (it\descriptive_representation_item.description = 'false')))) = 1"/>
         <where label="WR2" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'DESCRIPTIVE_REPRESENTATION_ITEM'&#10;       IN TYPEOF (it)))) = 1"/>
         <where label="WR3" expression="(NOT &#10;       (SELF.context_of_items\geometric_representation_context.&#10;       coordinate_space_dimension&#10;       = 2)) OR (SIZEOF (QUERY (it &lt;* SELF.items |&#10;       'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (it))) = 1)"/>
         <where label="WR4" expression="(NOT &#10;       (SELF.context_of_items\geometric_representation_context.&#10;       coordinate_space_dimension&#10;        = 3)) OR (SIZEOF (QUERY (it &lt;* SELF.items |&#10;       'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'AXIS2_PLACEMENT_3D' IN TYPEOF (it))) = 1)"/>
         <where label="WR5" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'MAPPED_ITEM'&#10;       IN TYPEOF (it)) &#10;       )) = 1"/>
         <where label="WR6" expression="NOT (SIZEOF (QUERY (it &lt;* SELF.items |&#10;        'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D' IN TYPEOF (it))) = 1)&#10;        OR&#10;        (SIZEOF (QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;        'CARTESIAN_TRANSFORMATION_OPERATOR_2D'&#10;        IN TYPEOF (cto2d)) AND&#10;        (SIZEOF (QUERY (mi &lt;* USEDIN (cto2d,&#10;       'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'MAPPED_ITEM.MAPPING_TARGET') | (&#10;       (SIZEOF (QUERY (cl &lt;* USEDIN (mi,&#10;       'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'REPRESENTATION.ITEMS') |(cl = SELF))) = 1)))) &gt;= 1)&#10;        )) = 1)"/>
         <where label="WR7" expression="NOT (SIZEOF (QUERY (it &lt;* SELF.items |&#10;        'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;        'AXIS2_PLACEMENT_3D' IN TYPEOF (it))) = 1)&#10;      OR&#10;       (SIZEOF (QUERY (cto2d &lt;* SELF.items |&#10;        ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;        'AXIS2_PLACEMENT_3D'&#10;        IN TYPEOF (cto2d)) AND&#10;        (SIZEOF (QUERY (mi &lt;* USEDIN (cto2d,&#10;       'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'MAPPED_ITEM.MAPPING_TARGET') | (&#10;       (SIZEOF (QUERY (cl &lt;* USEDIN (mi,&#10;       'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'REPRESENTATION.ITEMS') |(cl = SELF))) = 1)))) = 1)&#10;        )) = 1)"/>
         <where label="WR8" expression="SIZEOF(QUERY( pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;        'SHAPE_ASPECT' IN TYPEOF (pdr.definition.definition)) AND&#10;       (pdr.definition.definition\shape_aspect.description =&#10;        'interconnect module component surface feature'))) = 0"/>
         <where label="WR9" expression="(NOT((SELF.context_of_items\geometric_representation_context.&#10;        coordinate_space_dimension = 2) AND&#10;        (SELF.context_of_items.context_type = 'component stacked')))&#10;        OR &#10;      (SIZEOF(QUERY( pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;       ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;        'ASSEMBLY_JOINT' IN TYPEOF (pdr.definition.definition)) AND&#10;      (pdr.definition.definition.relating_shape_aspect\shape_aspect.description =&#10;        'interconnect module component surface feature'))) = 0)"/>
         <where label="WR10" expression="SIZEOF (QUERY (it &lt;* SELF\representation.items| NOT&#10;     (SIZEOF(&#10;    ['PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;     'CARTESIAN_TRANSFORMATION_OPERATOR_2D', &#10;     'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;     'MAPPED_ITEM', &#10;     'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;     'DESCRIPTIVE_REPRESENTATION_ITEM', &#10;     'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;     'AXIS2_PLACEMENT_3D'] &#10;     * TYPEOF(it)) = 1 ))) = 0"/>
         <where label="WR11" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'AXIS2_PLACEMENT_3D'&#10;       IN TYPEOF (it)) AND&#10;       (it\representation_item.name = 'origin') &#10;       )) = 0"/>
         <where label="WR12" expression="SIZEOF (QUERY (it &lt;* SELF.items |&#10;       ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'MAPPED_ITEM'&#10;       IN TYPEOF (it))&#10;       AND NOT&#10;       (((it\representation_item.name = 'component assembly 2d position')&#10;        OR&#10;       (it\representation_item.name = 'component assembly 3d position'))&#10;       AND&#10;       (it.mapping_source.mapping_origin\representation_item.name = 'origin')&#10;       AND&#10;       (('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'AXIS2_PLACEMENT_2D' IN TYPEOF (it.mapping_source.mapping_origin))&#10;        OR&#10;       ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.' +&#10;       'AXIS2_PLACEMENT_3D' IN TYPEOF (it.mapping_source.mapping_origin))))&#10;       )) = 0"/>
         <where label="WR13" expression="SIZEOF(QUERY(pdr &lt;* USEDIN (SELF,&#10;       'PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.'&#10;       + 'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION') |&#10;        ('PHYSICAL_UNIT_3D_DESIGN_VIEW_MIM.'&#10;       + 'NEXT_ASSEMBLY_USAGE_OCCURRENCE' IN &#10;            TYPEOF(pdr.definition.definition))&#10;       )) = 1"/>
      </entity>
      <rule name="component_part_3d_geometric_representation_relationship_constraint" appliesto="shape_representation_relationship">
         <algorithm>LOCAL
 rr: SET OF representation_relationship :=
      QUERY ( srr &lt;* shape_representation_relationship |
       srr\representation_relationship.name = 'component part 3d shape');
 pass: BOOLEAN := TRUE;
END_LOCAL;
REPEAT i := 1 to SIZEOF(rr) by 1;
IF ((rr[i].rep_1.context_of_items.coordinate_space_dimension) &lt;&gt; 
          (rr[i].rep_2.context_of_items.coordinate_space_dimension))
THEN
  pass := FALSE;
END_IF;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
      <rule name="component_part_3d_geometric_representation_relationship_constraint" appliesto="shape_representation_relationship">
         <algorithm>LOCAL
 rr: SET OF representation_relationship :=
      QUERY ( srr &lt;* shape_representation_relationship |
       srr\representation_relationship.name = 'component part 3d shape');
 pass: BOOLEAN := TRUE;
END_LOCAL;
REPEAT i := 1 to SIZEOF(rr) by 1;
IF ((rr[i].rep_1.context_of_items.coordinate_space_dimension) &lt;&gt; 
          (rr[i].rep_2.context_of_items.coordinate_space_dimension))
THEN
  pass := FALSE;
END_IF;
END_REPEAT;</algorithm>
         <where label="WR1" expression="pass"/>
      </rule>
   </schema>
</express>
