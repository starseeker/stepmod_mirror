<?xml version="1.0"?>
<!-- $Id: arm.xml,v 1.13 2002/05/28 19:01:43 buchanan Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  rcs.date="$Date: 2002/05/28 19:01:43 $"
  rcs.revision="$Revision: 1.13 $"
  description.file="arm_descriptions.xml">

  <schema name="Product_identification_arm">
    <interface
      kind="use"
      schema="Product_categorization_arm">
    </interface>

    <entity
      name="Product">
      <explicit
        name="id">
        <builtintype
          type="STRING"/>
      </explicit>
      <explicit
        name="name">
        <builtintype
          type="STRING"/>
      </explicit>
      <explicit
        name="description"
        optional="YES">
        <builtintype
          type="STRING"/>
      </explicit>
    </entity>

    <entity
      name="Product_category_assignment">
      <explicit
        name="category">
        <typename
          name="Product_category"/>
      </explicit>
      <explicit
        name="products">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="Product"/>
      </explicit>
    </entity>

    <function
      name="types_of_product">
      <parameter
        name="obj">
        <typename
          name="Product"/>
      </parameter>
      <aggregate
        type="SET"/>
      <typename
        name="STRING"/>
      <algorithm>
LOCAL
	category_assignments: BAG OF Product_category_assignment;
	categories: SET OF STRING:=[];
	i: INTEGER;
END_LOCAL;

category_assignments := USEDIN(obj,'PRODUCT_IDENTIFICATION_ARM' + 'PRODUCT_CATEGORY_ASSIGNMENT.PRODUCTS');
   
REPEAT i := LOINDEX(category_assignments) TO HIINDEX(category_assignments) BY 1;
      categories := categories + category_assignments[i].category.name;
END_REPEAT;

RETURN(categories);
      </algorithm>

    </function>

  </schema>

</express>
