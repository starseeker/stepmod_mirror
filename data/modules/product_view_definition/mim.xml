<?xml version="1.0"?>
<?xml-stylesheet 
  type="text/xsl" 
  href="../../../xsl/express.xsl"
?> <!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express language_version="2" rcs.date="$Date: $" rcs.revision="$Revision: $"
  description.file="mim_descriptions.xml"
>
<application name="GraphicalEXPRESS" owner="Eurostep" url="www.eurostep.com" version="1.3" source="product_view_definition_mim_v01.vsd" />
<schema name="Product_view_definition_mim">
<interface kind="use" schema="application_context_schema">
<interfaced.item name="product_definition_context" />
</interface>
<interface kind="use" schema="product_definition_schema">
<interfaced.item name="product_definition" />
<interfaced.item name="product_definition_context_association" />
</interface>
<interface kind="use" schema="Product_version_mim">
</interface>
<interface kind="reference" schema="support_resource_schema">
<interfaced.item name="bag_to_set" />
</interface>

    <rule
      name="valid_context_partitions"
      appliesto="product_definition">
      <algorithm>
      </algorithm>

      <where
        label="WR1"
        expression="SIZEOF (QUERY(pd &lt;* product_definition | initial_context_is_additional(pd))) = 0">
      </where>

    </rule>

    <function
      name="initial_context_is_additional">
      <parameter
        name="pd">
        <typename
          name="product_definition"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
LOCAL
  initial_context: product_definition_context;
  context_associations: SET OF product_definition_context_association;
END_LOCAL;

initial_context := pd.frame_of_reference;
context_associations := QUERY(pdca &lt;* bag_to_set(USEDIN(pd, 
'PRODUCT_VIEW_DEFINITION_MIM.PRODUCT_DEFINITION_CONTEXT_ASSOCIATION.DEFINITION'))|
(pdca.role.name='additional context') AND (pdca.frame_of_reference :=: initial_context));

RETURN (SIZEOF(context_associations) &gt; 0);
      </algorithm>

    </function>

<graphic.element page="1" xcoord="138" ycoord="749" />
</schema>
</express>
