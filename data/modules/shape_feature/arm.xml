<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express
  SYSTEM "../../../dtd/express.dtd">
<express description.file="arm_descriptions.xml" language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" reference="">
   <application name="JSDAI" owner="LKSoft" source="shape_feature_arm schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="Shape_feature_arm">
      <interface kind="use" schema="Characterizable_object_arm"/>
      <interface kind="use" schema="Contextual_shape_positioning_arm"/>
      <interface kind="use" schema="Property_assignment_arm"/>
      <interface kind="reference" schema="Support_resource_arm">
         <interfaced.item name="bag_to_set"/>
      </interface>
      <type name="sf_property_assignment_select">
         <select basedon="property_assignment_select" selectitems="Shape_element Characterizable_object"/>
      </type>
      <type name="sf_shapeable_item">
         <select basedon="shapeable_item" selectitems="Characterizable_object"/>
      </type>
      <entity name="Instanced_feature" supertypes="Shape_feature_occurrence Shape_feature_definition"/>
      <entity name="Placed_feature" supertypes="Shape_feature_occurrence">
         <explicit name="definition">
            <typename name="Shape_feature_definition"/>
         </explicit>
      </entity>
      <entity name="Shape_feature_definition" supertypes="Characterizable_object">
         <derived expression="get_geometric_model(of_shape)" name="feature_model">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="Geometric_model"/>
         </derived>
         <inverse attribute="described_element" entity="Item_shape" name="of_shape"/>
         <where expression="EXISTS(feature_model)" label="WR1"/>
      </entity>
      <entity abstract.supertype="YES" name="Shape_feature_occurrence" super.expression="ONEOF (Instanced_feature, Placed_feature)" supertypes="Shape_element"/>
      <function name="get_geometric_model">
         <parameter name="input">
            <typename name="Item_shape"/>
         </parameter>
         <aggregate lower="0" type="SET" upper="?"/>
         <typename name="Geometric_model"/>
         <algorithm>LOCAL
  sda : SET OF Shape_description_association := [];
  gm : SET OF Geometric_model := [];
 END_LOCAL;
 
  sda := bag_to_set(USEDIN(input,
	 	'SHAPE_PROPERTY_ASSIGNMENT_ARM.' + 
	 	'SHAPE_DESCRIPTION_ASSOCIATION.' + 'REPRESENTED_CHARACTERISTIC'));
 
 REPEAT i := 1 to SIZEOF(sda) BY 1;
  gm := gm + sda[i].representation;
 END_REPEAT;
 RETURN(gm);</algorithm>
      </function>
   </schema>
</express>