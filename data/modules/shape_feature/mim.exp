(*
   $Id: mim.exp,v 1.3 2005/09/26 15:49:08 liutkus Exp $
   N - ISO/CD-TS - 10303- shape_feature - EXPRESS MIM*)
(* UNDER DEVELOPMENT *)
SCHEMA Shape_feature_mim;
USE FROM Contextual_shape_positioning_mim;

ENTITY feature_definition
  SUBTYPE OF (characterized_object);
(* Need to review  
WHERE
 WR1: SIZEOF ( QUERY ( pdr <*
     get_property_definition_representations ( SELF ) |
     'AUTOMOTIVE_DESIGN.'+
     'SHAPE_REPRESENTATION_WITH_PARAMETERS' IN TYPEOF ( pdr.
     used_representation ) ) ) <=1;
 WR2: ( SIZEOF ( QUERY ( pdr <*
     get_property_definition_representations ( SELF ) |
     'AUTOMOTIVE_DESIGN.'+
     'SHAPE_REPRESENTATION_WITH_PARAMETERS' IN TYPEOF ( pdr.
     used_representation ) ) ) =0 ) OR ( SIZEOF ( QUERY ( pdr <*
     get_property_definition_representations ( SELF ) | (
     'AUTOMOTIVE_DESIGN.'+
     'SHAPE_REPRESENTATION_WITH_PARAMETERS' IN TYPEOF ( pdr.
     used_representation ) ) AND ( SIZEOF ( QUERY ( i <* pdr.
     used_representation.items | ( i.name='orientation' ) AND (
     'AUTOMOTIVE_DESIGN.'+ 'PLACEMENT' IN TYPEOF ( i ) ) ) ) <=1
     ) ) ) =1 ) ;
 WR3: NOT ( ( SIZEOF ( ['AUTOMOTIVE_DESIGN.'+ 'BARRING_HOLE' ,
     'AUTOMOTIVE_DESIGN.'+ 'BEAD' , 'AUTOMOTIVE_DESIGN.'+
     'HOLE_IN_PANEL' , 'AUTOMOTIVE_DESIGN.'+ 'FEATURE_IN_PANEL'
     , 'AUTOMOTIVE_DESIGN.'+ 'JOGGLE' , 'AUTOMOTIVE_DESIGN.'+
     'LOCATOR']*TYPEOF ( SELF ) ) =1 ) OR (
     'AUTOMOTIVE_DESIGN.'+ 'COMPOUND_FEATURE' IN TYPEOF ( SELF )
     ) AND ( SIZEOF ( QUERY ( sa <* get_shape_aspects ( SELF ) |
     ( sa. name = 'compound feature in panel' ) ) ) =1 ) ) OR (
     ( SIZEOF ( QUERY ( pdr <*
     get_property_definition_representations ( SELF ) |
     'AUTOMOTIVE_DESIGN.'+ 'DIRECTION_SHAPE_REPRESENTATION' IN
     TYPEOF ( pdr. used_representation ) ) ) <=1 ) AND ( (
     SIZEOF ( QUERY ( pdr <*
     get_property_definition_representations ( SELF ) |
     'AUTOMOTIVE_DESIGN.'+ 'DIRECTION_SHAPE_REPRESENTATION' IN
     TYPEOF ( pdr. used_representation ) ) ) =0 ) OR ( SIZEOF (
     QUERY ( pdr <* get_property_definition_representations (
     SELF ) | ( 'AUTOMOTIVE_DESIGN.'+
     'DIRECTION_SHAPE_REPRESENTATION' IN TYPEOF ( pdr.
     used_representation ) ) AND ( pdr. used_representation.name
     = 'punch direction' ) ) ) =1 ) ) ) ;
 WR4: ( SIZEOF ( QUERY ( pdr <*
     get_property_definition_representations ( SELF ) |
     'AUTOMOTIVE_DESIGN.'+
     'SHAPE_REPRESENTATION_WITH_PARAMETERS' IN TYPEOF ( pdr.
     used_representation ) ) ) =0 ) OR ( SIZEOF ( QUERY ( pdr <*
     get_property_definition_representations ( SELF ) | (
     'AUTOMOTIVE_DESIGN.'+
     'SHAPE_REPRESENTATION_WITH_PARAMETERS' IN TYPEOF ( pdr.
     used_representation ) ) AND ( 'AUTOMOTIVE_DESIGN.'+
     'GEOMETRIC_REPRESENTATION_CONTEXT' IN TYPEOF ( pdr.
     used_representation.context_of_items ) ) AND ( pdr.
     used_representation.context_of_items\
     geometric_representation_context.coordinate_space_dimension
     =3 ) ) ) =1 ) ;
 WR5: NOT ( ( SIZEOF ( ['AUTOMOTIVE_DESIGN.'+ 'BOSS' ,
     'AUTOMOTIVE_DESIGN.'+ 'RIB' , 'AUTOMOTIVE_DESIGN.'+ 'SLOT'
     , 'AUTOMOTIVE_DESIGN.'+ 'ROUND_HOLE' ,
     'AUTOMOTIVE_DESIGN.'+ 'POCKET']*TYPEOF ( SELF ) ) =1 ) OR (
     'AUTOMOTIVE_DESIGN.'+ 'COMPOUND_FEATURE' IN TYPEOF ( SELF )
     ) AND ( SIZEOF ( QUERY ( sa <* get_shape_aspects ( SELF ) |
     ( 'AUTOMOTIVE_DESIGN.'+ 'COMPOSITE_SHAPE_ASPECT' IN TYPEOF
     ( sa ) ) AND ( sa. name = 'compound feature in solid' ) ) )
     =1 ) ) OR ( ( SIZEOF ( QUERY ( pdr <*
     get_property_definition_representations ( SELF ) |
     'AUTOMOTIVE_DESIGN.'+ 'DIRECTION_SHAPE_REPRESENTATION' IN
     TYPEOF ( pdr. used_representation ) ) ) =1 ) AND ( SIZEOF (
     QUERY ( pdr <* get_property_definition_representations (
     SELF ) | ( 'AUTOMOTIVE_DESIGN.'+
     'DIRECTION_SHAPE_REPRESENTATION' IN TYPEOF ( pdr.
     used_representation ) ) AND ( SIZEOF ( QUERY ( i <* pdr.
     used_representation.items | ( i.name ='orientation' ) AND (
     'AUTOMOTIVE_DESIGN.'+ 'PLACEMENT' IN TYPEOF ( i ) ) ) ) =1
     ) ) ) =1 ) ) ;
 WR6: SIZEOF ( ['AUTOMOTIVE_DESIGN.'+ 'BEAD' ,
     'AUTOMOTIVE_DESIGN.'+ 'BARRING_HOLE' ,
     'AUTOMOTIVE_DESIGN.'+ 'BOSS' , 'AUTOMOTIVE_DESIGN.'+
     'COMPOUND_FEATURE' , 'AUTOMOTIVE_DESIGN.'+
     'EXTERNALLY_DEFINED_FEATURE_DEFINITION' ,
     'AUTOMOTIVE_DESIGN.'+ 'FEATURE_IN_PANEL' ,
     'AUTOMOTIVE_DESIGN.'+ 'GENERAL_FEATURE' ,
     'AUTOMOTIVE_DESIGN.'+ 'HOLE_IN_PANEL' ,
     'AUTOMOTIVE_DESIGN.'+ 'JOGGLE' , 'AUTOMOTIVE_DESIGN.'+
     'LOCATOR' , 'AUTOMOTIVE_DESIGN.'+ 'POCKET' ,
     'AUTOMOTIVE_DESIGN.'+ 'RIB' , 'AUTOMOTIVE_DESIGN.'+
     'REPLICATE_FEATURE' , 'AUTOMOTIVE_DESIGN.'+ 'ROUND_HOLE' ,
     'AUTOMOTIVE_DESIGN.'+ 'SLOT' , 'AUTOMOTIVE_DESIGN.'+
     'THREAD']* TYPEOF ( SELF ) ) <=1; *)
END_ENTITY;

ENTITY instanced_feature
  SUBTYPE OF (shape_aspect,feature_definition);
(* Need a review  
WHERE
 WR1:'AUTOMOTIVE_DESIGN.'+ 'PRODUCT_DEFINITION' IN TYPEOF (
     SELF.of_shape. definition ) ;
 WR2:SELF.product_definitional;
 WR3: SIZEOF ( QUERY ( pdr <*
     get_shape_aspect_property_definition_representations ( SELF
     ) | ( 'AUTOMOTIVE_DESIGN.'+ 'PLANAR_SHAPE_REPRESENTATION'
     IN TYPEOF ( pdr. used_representation ) ) AND ( pdr.
     used_representation.name = 'maximum feature limit' ) ) )
     =1;
*)     
END_ENTITY;

ENTITY placed_feature
  SUBTYPE OF (shape_aspect);
(* Need a review  
WHERE
 WR1:'AUTOMOTIVE_DESIGN.'+ 'PRODUCT_DEFINITION' IN TYPEOF (
     SELF.of_shape. definition ) ;
 WR2: SIZEOF ( QUERY ( pdr <*
     get_shape_aspect_property_definition_representations ( SELF
     ) | ( 'AUTOMOTIVE_DESIGN.'+ 'SHAPE_REPRESENTATION' IN
     TYPEOF ( pdr. used_representation ) ) AND ( pdr.
     used_representation.name = 'feature definition placement' )
     AND ( SIZEOF ( QUERY ( i <* pdr. used_representation.items
     | ( 'AUTOMOTIVE_DESIGN.'+ 'MAPPED_ITEM' IN TYPEOF ( i ) )
     AND ( SIZEOF ( QUERY ( pdr1 <* USEDIN ( i\mapped_item.
     mapping_source.mapped_representation ,
     'AUTOMOTIVE_DESIGN.PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION'
     ) | ( 'AUTOMOTIVE_DESIGN.'+ 'FEATURE_DEFINITION' IN TYPEOF
     ( pdr1. definition\property_definition. definition ) ) ) )
     =1 ) ) ) =1 ) ) ) =1;
 WR3: SIZEOF ( QUERY ( pdr <*
     get_shape_aspect_property_definition_representations ( SELF
     ) | ( 'AUTOMOTIVE_DESIGN.'+ 'PLANAR_SHAPE_REPRESENTATION'
     IN TYPEOF ( pdr. used_representation ) ) AND ( pdr.
     used_representation.name = 'maximum feature limit' ) ) )
     =1;
*)     
END_ENTITY;


END_SCHEMA;
