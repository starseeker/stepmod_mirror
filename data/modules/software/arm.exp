(*
   $Id: arm.exp,v 1.11 2005/02/02 14:44:45 budreckytej Exp $
   ISO TC184/SC4/WG12 N3609 - ISO/CD-TS 10303-1746 Software - EXPRESS ARM
*)



SCHEMA Software_arm;

	USE FROM Document_and_version_identification_arm;	-- ISO/TS 10303-1121
	USE FROM Document_definition_arm;	-- ISO/TS 10303-1123
	USE FROM Product_view_definition_arm;	-- ISO/TS 10303-1019

REFERENCE FROM product_identification_arm(          -- ISO/TS 10303-1017 
        types_of_product 
); 

  ENTITY Software 
    SUBTYPE OF (Document);
  	WHERE 
  		WR1 : SIZEOF([ 'software', 'analytical model', 'rule' ] * types_of_product(SELF))= 1 ;
  END_ENTITY;

  ENTITY Software_definition 
    SUBTYPE OF (Digital_document_definition);
    SELF\Product_view_definition.defined_version : Software_version;
  END_ENTITY;

  ENTITY Software_version
    SUBTYPE OF (Document_version);
    SELF\Product_version.of_product : Software;
  END_ENTITY;

RULE software_version_constraint FOR 
(Product_version);
WHERE
  WR1: SIZEOF ( QUERY ( pv <* Product_version | ( NOT ( 'SOFTWARE_ARM.' + 'SOFTWARE_VERSION' IN TYPEOF ( pv) ) ) AND ( 'SOFTWARE_ARM.' + 'SOFTWARE' IN TYPEOF ( pv.of_product) ) ) ) =0 ;
END_RULE; 


RULE software_definition_constraint FOR 
(Product_view_definition);
WHERE
  WR1: SIZEOF ( QUERY ( pvd <* Product_view_definition | ( NOT ( 'SOFTWARE_ARM.' + 'SOFTWARE_DEFINITION' IN TYPEOF (pvd) ) ) AND ( 'SOFTWARE_ARM.' + 'SOFTWARE_VERSION' IN TYPEOF ( pvd.defined_version) ) ) ) =0 ;
END_RULE; 

END_SCHEMA;

