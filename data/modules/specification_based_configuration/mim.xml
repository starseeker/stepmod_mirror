<?xml version='1.0' encoding='UTF-8'?>
<!-- $Id: express2xml.js,v 1.38 2004/08/24 16:58:55 thendrix Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  description.file="mim_descriptions.xml"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml2.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.38"
    source="../data/modules/specification_based_configuration/mim.exp"/>

  <schema name="Specification_based_configuration_mim">

    <interface
      kind="use"
      schema="Effectivity_application_mim">
    </interface>
    <interface
      kind="use"
      schema="Product_class_mim">
    </interface>
    <interface
      kind="use"
      schema="management_resources_schema">
      <interfaced.item
        name="effectivity_context_assignment"/>
    </interface>
    <interface
      kind="use"
      schema="product_definition_schema">
      <interfaced.item
        name="product_definition"/>
    </interface>
    <type name="configured_effectivity_context_item">
      <select
        selectitems="product_concept_feature_association">
      </select>
    </type>

    <type name="configured_effectivity_item">
      <select
        extensible="YES"
        genericentity="YES"
        selectitems="product_definition">
      </select>
    </type>

    <entity
      name="configured_effectivity_context_assignment"
      supertypes="effectivity_context_assignment">
      <explicit
        name="assigned_effectivity_assignment">
        <typename
          name="configured_effectivity_assignment"/>
        <redeclaration
          entity-ref="effectivity_context_assignment"/>
        </explicit>
        <explicit
          name="items">
          <aggregate
            type="SET"
            lower="1"
            upper="?"/>
          <typename
            name="configured_effectivity_context_item"/>
        </explicit>
        <where
          label="WR1"
          expression="SIZEOF(SELF.items) = 1">
        </where>
      </entity>

      <entity
        name="configured_effectivity_assignment"
        supertypes="effectivity_assignment">
        <explicit
          name="items">
          <aggregate
            type="SET"
            lower="1"
            upper="?"/>
          <typename
            name="configured_effectivity_item"/>
        </explicit>
        <where
          label="WR1"
          expression="(SIZEOF(['EFFECTIVITY_SCHEMA.EFFECTIVITY'] * TYPEOF(SELF.assigned_effectivity)) = 1) AND (SELF.assigned_effectivity.id = 'configuration validity')">
        </where>
        <where
          label="WR2"
          expression="SIZEOF(SELF.items) = 1">
        </where>
        <where
          label="WR3"
          expression="SIZEOF(QUERY(i &lt;* SELF.items | NOT ('PRODUCT_DEFINITION_SCHEMA.PRODUCT_DEFINITION' IN TYPEOF(i)) OR NOT (i\product_definition.frame_of_reference.name IN ['conceptual definition','part occurrence', 'functional definition','alternative definition']))) = 0">
        </where>
        <where
          label="WR4"
          expression="SELF.role.name IN ['design', 'usage']">
        </where>
        <where
          label="WR5"
          expression="(SELF.role.name &lt;&gt; 'design') OR (SIZEOF(QUERY(i &lt;* SELF.items | ('PRODUCT_DEFINITION_SCHEMA.PRODUCT_DEFINITION' IN TYPEOF(i)) AND (i\product_definition.frame_of_reference.name = 'part occurrence'))) = 0)">
        </where>
        <where
          label="WR6"
          expression="(SELF.role.name &lt;&gt; 'usage') OR (SIZEOF(QUERY(i &lt;* SELF.items | ('PRODUCT_DEFINITION_SCHEMA.PRODUCT_DEFINITION' IN TYPEOF(i)) AND (i\product_definition.frame_of_reference.name = 'conceptual definition'))) = 0)">
        </where>
        <where
          label="WR7"
          expression="SELF.role.description IN ['exception', 'inherited', 'local']">
        </where>
        <where
          label="WR8"
          expression="SIZEOF(QUERY(x &lt;* USEDIN(SELF,'MANAGEMENT_RESOURCES_SCHEMA.' + 'EFFECTIVITY_CONTEXT_ASSIGNMENT.ASSIGNED_EFFECTIVITY_ASSIGNMENT') | 'SPECIFICATION_BASED_CONFIGURATION_MIM.CONFIGURED_EFFECTIVITY_CONTEXT_ASSIGNMENT' IN TYPEOF(x))) = 1">
        </where>
      </entity>

    </schema>
  </express>
