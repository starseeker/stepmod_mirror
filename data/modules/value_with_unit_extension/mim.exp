(*
   $Id: mim.exp,v 1.10 2005/01/04 07:21:34 kovaliovas Exp $
   ISO TC184/SC4/WG12 N3631 - ISO/CD-TS 10303-1753 Value with unit extension - EXPRESS MIM
*)


SCHEMA Value_with_unit_extension_mim;
	USE FROM Value_with_unit_mim;	-- ISO/TS 10303-1054

	USE FROM Iso13584_generic_expressions_schema
		(environment,
		generic_literal,
		variable_semantics);

	USE FROM basic_attribute_schema
		(name_attribute);
	
ENTITY absorbed_dose_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\absorbed_dose_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = gray;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY activity_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\activity_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = becquerel;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
   WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY capacitance_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\capacitance_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = farad;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
   WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY conductance_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\conductance_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = siemens;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY dose_equivalent_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\dose_equivalent_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = sievert;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY electric_charge_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\electric_charge_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = coulomb;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY electromotive_force_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\electromotive_force_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = volt ;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY energy_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\energy_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = joule;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY expression_conversion_based_unit
  SUBTYPE OF (context_dependent_unit, variable_semantics); 
INVERSE
  associated_variable_environment: environment FOR semantics; 
END_ENTITY;

ENTITY force_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\force_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = newton;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY frequency_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\frequency_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = hertz;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY illuminance_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\illuminance_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = lux;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY inductance_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\inductance_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = henry;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY luminous_flux_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\luminous_flux_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = lumen;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY magnetic_flux_density_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\magnetic_flux_density_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = tesla;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY magnetic_flux_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\magnetic_flux_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = weber;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY polar_complex_number_literal
  SUBTYPE OF (generic_literal);
  radius    : REAL;
  angle     : REAL;
WHERE
  WR1: radius >= 0;
  WR2: { 0 <= angle < 2*PI };
END_ENTITY;

ENTITY power_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\power_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = watt;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY pressure_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\pressure_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = pascal;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY resistance_measure_with_unit
 SUBTYPE OF (measure_with_unit);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\measure_with_unit ||
       SELF\resistance_measure_with_unit))) = 0;
  WR2: SELF\measure_with_unit.unit_component\si_unit.name = ohm;
  WR3: 'VALUE_WITH_UNIT_EXTENSION_MIM.SI_UNIT' IN 
       TYPEOF(SELF\measure_with_unit.unit_component);
  WR4: 'VALUE_WITH_UNIT_EXTENSION_MIM.NUMERIC_MEASURE' IN 
       TYPEOF(SELF\measure_with_unit.value_component);
END_ENTITY;

ENTITY scattering_parameter
 SUBTYPE OF (polar_complex_number_literal);
WHERE
  WR1: SIZEOF(TYPEOF(SELF) - (TYPEOF(SELF\polar_complex_number_literal ||
       SELF\scattering_parameter))) = 0;
END_ENTITY;

RULE subtype_exclusive_measure_with_unit FOR (measure_with_unit);
WHERE
  WR1: SIZEOF (QUERY (mwu <* measure_with_unit |
       NOT (SIZEOF ([
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'ABSORBED_DOSE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'ACTIVITY_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'AMOUNT_OF_SUBSTANCE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'AREA_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'CAPACITANCE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'CELSIUS_TEMPERATURE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'CONDUCTANCE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'DOSE_EQUIVALENT_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'ELECTRIC_CHARGE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'ELECTRIC_CURRENT_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'ELECTROMOTIVE_FORCE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'ENERGY_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'FORCE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'FREQUENCY_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'ILLUMINANCE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'INDUCTANCE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'LENGTH_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'LUMINOUS_FLUX_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'LUMINOUS_INTENSITY_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'MAGNETIC_FLUX_DENSITY_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'MAGNETIC_FLUX_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'MASS_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'PLANE_ANGLE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'POWER_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'PRESSURE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'RATIO_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'RESISTANCE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'SOLID_ANGLE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'TIME_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'UNCERTAINTY_MEASURE_WITH_UNIT',
       'VALUE_WITH_UNIT_EXTENSION_MIM.' +
       'VOLUME_MEASURE_WITH_UNIT'] *
       TYPEOF(mwu)) <= 1))) = 0;
END_RULE;
	
END_SCHEMA;


