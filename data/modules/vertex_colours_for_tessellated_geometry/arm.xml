<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?><!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express description.file="arm_descriptions.xml" language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" reference="">
   <application name="JSDAI" owner="LKSoft" source="vertex_colours_for_tessellated_geometry_arm schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="Vertex_colours_for_tessellated_geometry_arm">
      <interface kind="use" schema="Tessellated_geometry_arm"/>
      <interface kind="use" schema="Appearance_assignment_arm"/>
      <type name="colour_type_enum">
         <enumeration items="RGB8 RGBT8"/>
      </type>
      <type name="tessellated_surface_item">
         <select selectitems="Tessellated_face Tessellated_shell Tessellated_solid Tessellated_surface_set"/>
      </type>
      <type name="unsigned_8_bit_integer">
         <builtintype type="INTEGER"/>
         <where expression="{ 0 &lt;= SELF &lt;= 255 }" label="WR1"/>
      </type>
      <entity name="Styled_tessellated_element_with_colours" supertypes="Styled_element">
         <explicit name="element">
            <typename name="tessellated_surface_item"/>
            <redeclaration entity-ref="Styled_element"/>
         </explicit>
         <explicit name="colour_type">
            <typename name="colour_type_enum"/>
         </explicit>
         <explicit name="colour_values">
            <aggregate lower="1" type="LIST" upper="?"/>
            <aggregate lower="3" type="LIST" upper="4"/>
            <typename name="unsigned_8_bit_integer"/>
         </explicit>
         <derived expression="get_coordinate_values(element)" name="coloured_coordinate_values">
            <typename name="Coordinates_list"/>
         </derived>
         <where expression="((colour_type = RGB8) AND (SIZEOF(QUERY(clist &lt;* SELF.colour_values | NOT (SIZEOF(clist) = 3)))= 0)) OR&#10;           ((colour_type = RGBT8) AND (SIZEOF(QUERY(clist &lt;* SELF.colour_values | NOT (SIZEOF(clist) = 4)))= 0))" label="WR1"/>
         <where expression="SIZEOF(colour_values) = coloured_coordinate_values.npoints" label="WR2"/>
         <where expression="NOT EXISTS(SELF\styled_element.appearance)" label="WR3"/>
         <where expression="SELF\styled_element.invisible = FALSE" label="WR4"/>
      </entity>
      <function name="get_coordinate_values">
         <parameter name="input">
            <typename name="tessellated_surface_item"/>
         </parameter>
         <typename name="Coordinates_list"/>
         <algorithm>RETURN(?);</algorithm>
      </function>
   </schema>
</express>
