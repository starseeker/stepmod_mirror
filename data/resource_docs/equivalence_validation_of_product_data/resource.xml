<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: resource.xml,v 1.2 2016/12/01 04:00:18 fumikitanaka Exp $ -->
<!DOCTYPE resource SYSTEM "../../../dtd/res_doc/resource.dtd">
<!-- Generated by mkresource.js, Eurostep Limited, http://www.eurostep.com -->
 <!-- 
     To view the resource in IExplorer, open: sys/1_scope.xml
      -->
<resource
   name="equivalence_validation_of_product_data"
   part="62"
   version="1"
   sc4.working_group="12"
   wg.number="xxxx"
   wg.number.express="0000"
   checklist.internal_review="xxxx"
   checklist.project_leader="xxxx"
   checklist.convener=""
   status="DIS"
   language="E"
   publication.year="2016"
   published="n"
   rcs.date="$Date: 2016/12/01 04:00:18 $"
   rcs.revision="$Revision: 1.2 $">

 <keywords>
    Product data equivalence, Annotated 3d model data, Criteria representation, Inspection requirement,
    Threshold, Accuracy, Inspection result representation
 </keywords>

<!-- the abstract for the resource. If not provided, the XSL will use the in scope -->
 <abstract>
    <p>This part of ISO 10303 provides structured representation of criteria together with inspection requirement,
       and inspection results for the equivalence validation of product data. It is designed for use in the representation
       of requirement/declaration of equivalence, equivalence assurance and for the representation of equivalence inspection
       result of product data, thus enabling equivalence guaranteed use of product data.</p>
 </abstract>

 <!-- Reference to contacts detailed in stepmod/data/basic/contacts.xml -->
 <contacts>
   <projlead ref="akihiko.ohtaka"/>
   <editor ref="hiroyuki.hiraoka"/>
   <editor ref="fumiki.tanaka"/>
 </contacts>

 <!-- Introduction -->
 <!-- The introduction should start as shown: -->
 <purpose>
        <p>
        This part of ISO 10303 concerns the equivalence validation of two sets of product data.</p>
        <p>
        Before going into details of equivalence validation, it is appropriate to discuss why equivalence validation
        of product data is required.
        All product model data sets are created by some CAD system and the product data frequently travels
        two or more different IT (Information Technology) systems to support applications of various types such as design, simulation,
        manufacturing preparation.
        For transmission between different IT systems, data conversion by the use of STEP translators, or other types
        of translators, is required.
        Since the mathematical representation method and numerical precision are IT system dependent,
        data conversion may cause slight data differences.
		For users of the data, whether or not the data differences are significant for the intended application is
		critically important.
		The check to detect differences and determine whether, or not, the difference between two data sets,
		referred to as comparing data set and compared data set, is acceptable for the intended application is the purpose of 
		“Equivalence Validation”. 
		Potential scenarios for the use of equivalence validation include the recognition of design change details by comparing
		two data sets before and after design change, the validation of an archived data model by comparing it with the required
		data model, and the comparison of a neutral model intended for export with the original version.
        </p>
                       
        <p>Comparison for the purpose of equivalence validation is conducted between two different <b>representation</b>s or between two different
           <b>product_definition</b>s. The target data for comparison exist in the same file or in different files.</p>
        
        <p>Each criterion for equivalence validation may include a pertaining inspection requirement.
        An inspection requirement provides a textual description of how the criterion is to be inspected and may have additional
        attributes and rules to control the test and the element or elements to be tested.
        It does not provide an algorithm for the inspection process.
        It is expected that the developer of a product data equivalence validation checking program will develop his/her algorithm
        for the inspection so that that algorithm satisfies the inspection requirement specified in this standard.
        Depending upon the assessment may require a logical test or numerical test.
        </p>
        
        <note number="1">Inspection algorithms are outside the scope of this part of ISO 10303 since it is understood that algorithm
         development is a competitive arena for engineering system vendors and cannot be standardized by an international standard.</note>
        
        <p>For the assessment of equivalence validation by numerical test, thresholds play a key role.
           They are user definable based on application protocols supporting shape, assembly and PMI data representations,
           such as ISO 10303-242[3].
        </p>
        <example>
           An example of a typical threshold is a distance threshold for validating the maximum deviation of
           the geometric elements representing the compared and comparing product data.
           That distance threshold implies that if the maximum distance between corresponding geometric elements of two product data
           sets is greater than or equal to the specified minimum value, then the deviation is understood to be unacceptable deviation.
           Appropriate thresholds depend on many factors such as size of a product, design requirements, and sensitivity of engineering
           systems to numerical imprecision. Therefore, the actual threshold value to use has to be carefully determined in each
           business situation based on agreement among business partners.
        </example>

		<p>
		Many data types are classified as product data. 
		In this part of ISO 10303, annotated 3d model data is the main target for equivalence validation. 
		</p>
		
		<note number="2">
		Shape data, assembly data and PMI data are major constituents of annotated 3d model data.
		</note>

        <p>See Annex E Figure E.1 for the structural relationship of schemas and proposed modules,
           Figure E.2 for the relationship between schemas defined in this standard and target product data,
           Figure E.3 the structural relationship of the three generic schemas,
           that are <b>product_data_equivalence_definition</b> schema, <b>product_data_equivalence_criteria</b> schema,
           and <b>product_data_equivalence_inspection_result</b> schema.</p>

        <note number="3"><p>Together with five schemas defined in this standard, six modules are proposed as constituents
         of equivalence validation standards, that are;</p>

        <ul>
            <li><b>product_data_equivalence_definition</b> module</li>
            <li><b>annotated_3d_model_equivalence_criteria</b> module</li>
            <li><b>annotated_3d_model_equivalence_inspection_result</b> module</li>
            <li><b>annotated_3d_model_equivalence_shape</b> module</li>
            <li><b>annotated_3d_model_equivalence_assembly</b> module</li>
            <li><b>annotated_3d_model_equivalence_PMI</b> module</li>
        </ul>
        </note>
        <note number="4">See Annex E, Figure E.4 for the relationship of criteria related resource schemas and modules, and E.5 for the relationship of inspection result related resource schemas and modules.</note>

        <p>Constituent schemas of this part of ISO 10303 are as follows:</p>
        <ul>
            <li>
                <b>product_data_equivalence_definition schema:</b> defines high level data elements for managing product data equivalence validation information;                        
            </li>
            <li>
                <b>product_data_equivalence_criteria schema:</b> provides general specifications for the representation of equivalence validation criteria, equivalence inspection requirements and equivalence assessment specifications for product data;                        
            </li>
            <li>
                <b>product_data_equivalence_inspection_result schema:</b> provides general specifications for the representation of equivalence inspection results for a particular pair of product data inspected;                        
            </li>
            <li>
                <b>annotated_3d_model_equivalence_criteria schema:</b> provides representations of equivalence validation criteria
                 for annotated 3d model data together with the pertaining inspection requirements, 
                 assessment specifications and thresholds for judging whether, or not, equivalence is satisfied;                        
            </li>
            <li>
                <b>annotated_3d_model_equivalence_inspection_result schema:</b> provides representations of equivalence inspection results
                 for a particular pair of product data inspected with regard to specified equivalence criteria.
                 Detailed information on what type of inequivalence defect exists, and how serious it is,
                 together with the product element data where the problem is detected can also be represented.                        
            </li>
        </ul>
        <p>Specifications defined in <b>product_data_equivalence_criteria_schema</b> and 
        <b>product_data_equivalence_inspection_result_schema</b> are sufficiently general to enable extensions,
        in future editions of this part, to other types of product data such as CAE data, or manufacturing preparation data.</p>
 </purpose>

 <!-- Schema Interface express-g diagrams  -->
 <!-- refer to p41ed2 as example  -->
 <schema_diag>
   <express-g>
     <!-- imgfile file="schema_diagexpg1.xml"/ -->
     <imgfile file="schema_diagexpg1.xml" title="Schema level diagram of relationships among ISO 10303-62 schemas (inside the box) and with other resource schemas" />
   </express-g>
 </schema_diag>

 <!-- Items in scope -->
 <scope>
  This part is concerned with comparing two sets of product data to determine their equivalence.
  This part focuses on detailed specifications for the representation of equivalence validation criterion together with
  the pertaining inspection requirement, equivalence assessment specification and detailed result of annotated 3d model
  equivalence inspection.<p/>
 </scope>
 <inscope>
        <li>representation of high level data elements for managing equivalence validation related data;</li>
        <li>representation of general equivalence validation criteria for product data;</li>
        <li>representation of general equivalence validation criteria for product data associated with the corresponding validation
            inspection requirements;</li>
        <li>representation of general equivalence validation criteria for product data associated with the corresponding assessment
            specifications;</li>
        <li>representation of equivalence validation results of given two product data;</li>
        <li>representation of equivalence validation criteria for annotated 3d model data coupled with the inspection requirements
            for the evaluation of criteria, and with the pertinent assessment specifications;
            <note number="1">Equivalence validation criteria can be used for the representation of requirements on equivalence,
                             declaration of equivalence, and assurance of equivalence of two annotated 3d model data.
                             The target shape model data are conformant to those defined in ISO 10303-42[2], or application protocol
                             based on ISO 10303-42;</note></li>
        <li>representation of equivalence validation results of the given two annotated 3d model data.
            <note number="2">Requirements of product data equivalence is application context-dependent.
            This part of ISO 10303 provides a means to select appropriate criteria together with required inspection requirements
            and with required thresholds.</note></li>
 </inscope>
 <!-- Items out of scope -->
 <outscope>
        <li>equivalence validation algorithm;</li>
        <li>detailed information relating to equivalence validation of product data other than annotated 3d model data;                                                                                                                                        
            <note number="3">Though general specifications for the representation of criterion, inspection requirement, assessment specification and inspection result of product data are given, detailed specifications are provided only for annotated 3d model data.</note>
        </li>
        <li>data model to improve equivalence of annotated 3d model data;</li>
        <li>process model to ensure equivalence of product data.</li>
 </outscope>

    <normrefs>
        <normref.inc normref="ref8824-1" />
        <normref.inc normref="ref10303-1">
            <term.ref linkend="term_application" />
            <term.ref linkend="term_application_context" />
            <term.ref linkend="term_application_protocol" />
            <term.ref linkend="term_data_exchange" />
            <term.ref linkend="term_product" />
            <term.ref linkend="term_product_data" />
        </normref.inc>
        <!--
        <normref.inc normref="ref10303-11.2004" />
        -->
        <normref.inc normref="ref10303-41" />
        <!-- 
        <normref.inc normref="ref10303-42"/>
        -->
        <!-- 
            <term.ref linkend="term_curve" />
            <term.ref linkend="term_surface" />
        -->
        <normref.inc normref="ref10303-43">
            <term.ref linkend="term_representation" />
            <!-- <term.ref linkend="context_rep" /> -->
            <term.ref linkend="ele_rep" />
        </normref.inc>


        <normref.inc normref="ref10303-45" />
        <!--
        <normref.inc normref="ref10303-59">
            <term.ref linkend="term_accuracy" />
            <term.ref linkend="term_Hausdorff_distance" />
            <term.ref linkend="term_inspection_result" />
            <term.ref linkend="term_measurement_requirement" />
            <term.ref linkend="term_product_data_quality" />
            <term.ref linkend="term_product_data_quality_criterion" />
            <term.ref linkend="term_product_shape_data" />
            <term.ref linkend="term_quality_criterion" />
            <term.ref linkend="term_threshold" />
        </normref.inc>
        -->
        <normref.inc normref="ref10303-59"/>
        <!-- 
        <normref.inc normref="ref9000.2005">
            <term.ref linkend="term_inspection" />
            <term.ref linkend="term_quality" />
            <term.ref linkend="term_quality_requirement" />
        </normref.inc> -->
        <!-- 
            <normref.inc normref="ref31-all" />

 	<normref.inc normref="ref5459"><term.ref linkend="term_datum"/><term.ref linkend="term_datum_feature"/><term.ref linkend="term_datum_system"/><term.ref linkend="term_datum_target"/></normref.inc>
 	 -->
    </normrefs>
    
    <definition>
      <term id="annotated_3d_model_data">annotated 3d model data</term>
      <def>three dimensional shape data together with PMI (Product and Manufacturing Information) data</def>
    </definition>
    <definition>
      <term id="PMI">Product and manufacturing information(PMI)</term>
      <def>non-geometric attributes in 3D CAD and Collaborative Product Development systems necessary for manufacturing
            product components and assemblies.
            PMI may include geometric dimensions and tolerances, symbols, notes, surface finish, and material specifications.</def>
    </definition> 
    <definition>
      <term id="product_data_equivalence">product data equivalence</term>
      <def>equivalence for its purpose of the comparing product data with the compared product data</def>
    </definition>
    <definition>
      <term id="product_data_equivalence_criterion">product data equivalence criterion</term>
      <def>a requirement for detecting a non-equivalence defect between two product data compared,
           whose presence can be judged by a logical test or a numerical test</def>
    </definition>
    <definition>
      <term id="product_data_equivalence_inspection_result">product data equivalence inspection result</term>
      <def>data representing the result of inspection for the specified product data equivalence criterion</def>
    </definition> 
    <abbreviations>
        <abbreviation id="a3m">
            <acronym>a3m</acronym>
            <term>annotated 3d model</term>
        </abbreviation>
        <abbreviation id="AP">
            <acronym>AP</acronym>
            <term>Application Protocol</term>
        </abbreviation>
        <abbreviation id="B_rep">
            <acronym>B-rep</acronym>
            <term>Boundary representation</term>
        </abbreviation>
        <abbreviation id="CSG">
            <acronym>CSG</acronym>
            <term>Constructive Solid Geometry</term>
        </abbreviation>
        <abbreviation id="IR">
            <acronym>IR</acronym>
            <term>Integrated Resource (of ISO 10303)</term>
        </abbreviation>
        <abbreviation id="PMI">
            <acronym>PMI</acronym>
            <term>Product and Manufacturing Information</term>
        </abbreviation>
    </abbreviations>

<schema name="product_data_equivalence_definition_schema" version="1">
<!-- Note schema EXPRESS are in ..\resources\resource_name name_of_schema.xml -->
   <introduction>
   </introduction>
        <fund_cons>
                This schema provides the following information:
            <ul>
                <li>
                  The identification and definition of product data equivalence information.
                  In case some product data converted from other product data is inspected for checking whether, or not,
                  it is equivalent with the original product data, inspection results will be created relating to a particular
                  pair of product data. 
                  Equivalence validation information shall be identified and defined separately from a product
                  definition with relationship to the pertaining product definitions as necessary.
                  <note>It is understood that equivalence validation information is not a constituent of a product data.</note>
                </li>
                <li>
                  The relationship between product data equivalence information and product data.
                  This relationship is required to represent inspection results of a particular pair of product data.
                  Actual relationship will be created between an equivalence definition entity and a pair of product definition
                  entities.
                </li>
            </ul>
            <p>Existence of a data equivalence definition entity implies the existence of a set of product data equivalence criteria. Related inspection results may also exist. The product data equivalence criteria are represented using entities defined in 
                <b>product_data_equivalence_criteria_schema</b> and the inspection results are represented using entities defined in 
                <b>product_data_equivalence_inspection_result_schema</b>.                                                                                    
            </p>
        </fund_cons>

<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="product_data_equivalence_definition_schemaexpg1.xml"/>
     <imgfile file="product_data_equivalence_definition_schemaexpg2.xml"/>
     <imgfile file="product_data_equivalence_definition_schemaexpg3.xml"/>
   </express-g>
</schema>

<schema name="product_data_equivalence_criteria_schema" version="1">
<!-- Note schema EXPRESS are in ..\resources\resource_name name_of_schema.xml -->
   <introduction>
   </introduction>
        <fund_cons>
            <p>In order to unambiguously share product data equivalence information, the following are required:</p>
            <ul>
                <li>A clear statement of each equivalence requirement.
                    Such a requirement will be referred to as an 'equivalence criterion' in this standard;</li>
                <li>Specification of necessary conditions for the inspection to be used for ensuring that equivalence criteria
                    are met.
                    Such conditions are referred to as 'inspection requirements' in this standard.
                    Each inspection requirement shall specify the types of entities to be checked, the inspection process to be used
                    (if definable), and the required accuracy of the inspection.
                     Inspection processes are specified in descriptive terms only.
                     The actual inspection algorithms are outside the scope of this standard;</li>
                <li>Specification of criteria for judging the acceptability of the equivalence inspection.
                    Such specifications are referred to as 'assessment specifications' in this standard.
                    Assessment specifications for the equivalence of annotated 3d model data fall into two classes,
                    the first involving numerical tests with one or more thresholds for acceptability,
                    and the second involving logical tests (details will be presented in clause 7);</li>
                <li>A method for the representation of the requirements for reporting the equivalence of annotated 3d model data inspected;</li>
                <li>A method for the representation of inspection results;</li>
            </ul>
            <p>This schema provides representations for the first four items in the foregoing list, which are mandatory in any application.</p>
            <note number="1">Scenarios of the expected use of this standard are described in Annex E.5.</note>
            <note number="2">The information corresponding to the last item in the list is specified in                                 
                <b>product_data_equivalence_inspection_result_schema</b>.                        
            </note>
            <b>5.2.1    Representation of product data equivalence criteria</b>
            <p>Product data equivalence requirement can be unambiguously represented by a combination of equivalence criteria.
            Each criterion may have one or more associated inspection requirement and assessment specification.</p>
            <p>It is anticipated that there are equivalence criteria of which inspection requirement is not possible to clearly specify. For this reason, this schema provides both equivalence criteria with or without relationship to pertaining inspection requirement.</p>
            <example number="1">'implied semantics shall be completely converted' is a clear and important product data 
               equivalence requirement. In this case, 'different implied semantics' will become a criterion.
               Therefore, satisfaction of the criterion implies existence of inequivalence defect.
               But, unambiguous specification of identical implied semantics will be quite difficult to define.</example>
            <example number="2">
                Significant deviation between corresponding positions of the two product data will be problematic for receiver side
                since it will deteriorate reliability of the data.
                In order to detect this type of inequivalent data, a criterion for checking equivalence of two arcwise-connected
                surfaces will be provided in <b>annotated_3d_model_equivalence_shape</b> module,
                which will be prepared as a companion module of this standard.
                In order to judge the equivalence, related inspection shall be based on the calculation of distance between
                two corresponding surfaces. 
                The distance shall be calculated ideally for any point on a surface as minimum distance to the corresponding surface.
                After calculating this distance for all points on the surface, maximum value among them shall be obtained. 
                Then this maximum distance shall be compared with the threshold defined for this criterion for evaluating 
                if inequivalence defect exists or not. 
                This example shows combination of quality criterion, associated inspection requirement and assessment specification 
                form core part of equivalence validation model representation.                                   
            </example>
            <p>Equivalence requirement is application dependent and target design requirement dependent. 
               This schema allows users to select a set of necessary criteria from the standardized criteria and combine them 
               to represent their requirements on product data equivalence.</p>
            <p>Specifications in this schema are sufficiently general so that they can be applied for equivalence of any property
               of product data.
               Specialization of this schema to product data equivalence of any property other than annotated 3d model data
               will also be possible in the future.</p>
            <b>5.2.2    Representation of the requirements on product data equivalence inspection</b>
            <p>In order to inspect if an inequivalence defect exists or not, reliable inspection shall be associated with 
               each equivalence criterion.</p>
            <p>The following are requirements for reliable inspection:</p>
            <ul>
                <li>Appropriate data element shall be inspected;</li>
                <li>Necessary conditions for appropriate inspection shall be clarified such as mandatory inspection process if 
                    definable, what physical quantity shall be inspected, what special cases shall be considered and required 
                    precision of inspection result;</li>
                <li>Robust algorithm that satisfies all the requirements described above shall be deployed.</li>
            </ul>
            <p>It is understood that inspection algorithm belongs to competitive arena for engineering system vendors and 
               therefore shall not be standardized by an International Standard.
               By this reason, the third requirement described above is outside the scope of this standard.</p>
            <p>The representation of inspection requirement is designed so that it can be used both for equivalence criteria representation and inspection result representation.</p>
            <b>5.2.3    Control of inspection result report</b>
            <p>Type of information and level of details of inspection result report may differ depending on the scenario of its use
               or the purpose of the inspection. The entity               
                <b>data_equivalence_report_request</b> provides the representation of a request for an inspection report with regard to a particular criterion. It has two subtypes,                 
                <b>summary_report_request_with_number_of_instances</b> and                 
                <b>detailed_equivalence_report_request</b>. The use of                 
                <b>summary_report_request_with_number_of_instances</b> is recommended to capture overall equivalence level such as how many
                entities were checked regarding the criterion and how many entities among them were judged as
                 having inequivalence defect. The use of                 
                <b>detailed_equivalence_report_request</b> is suited to obtain more detailed report such as what entity instance
                caused inequivalence defect and how serious it is.
                It has attributes to request a report on all the inspected elements or only on elements with inequivalence defect.
                Expected number of elements to be reported and their expected sequence in the report may also be specified.
                Since these specifications affects to other schemas in this standard, it is recommended to look into Figure 1
                 of Introduction or Figures in Annex E.1 to understand related entities in other schemas.                            
                <b>data_equivalence_inspection_report</b> of                 
                <b>product_data_equivalence_inspection_result_schema</b> corresponds to 
                <b>data_equivalence_report_request</b> of this schema. It has two subtypes,                 
                <b>data_equivalence_inspection_criterion_report</b> which corresponds to 
                <b>summary_report_request_with_number_of_instances</b> of this schema and                 
                <b>data_equivalence_inspection_instance_report</b> which corresponds to                                                                                                             
                <b>detailed_equivalence_report_request</b> of this schema.                 
                <b>data_equivalence_inspection_instance_report</b> is a collection of 
                <b>data_equivalence_inspection_instance_report_item</b> which corresponds to one instance or one pair of instances of the given product data.
            </p>
            <note>In the <b>annotated_3d_model_equivalence_inspection_result_schema</b>,                 
                <b>data_equivalence_inspection_instance_report_item</b> is specialized to 
                <b>a3m_equivalence_inspection_instance_report_item</b> which has a subtype                 
                <b>equivalence_instance_report_item_with_extreme_instances</b> for representing inequivalence defect
                in entity instance level and how serious it is.
            </note>
        </fund_cons>

<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="product_data_equivalence_criteria_schemaexpg1.xml"/>
     <imgfile file="product_data_equivalence_criteria_schemaexpg2.xml"/>
     <imgfile file="product_data_equivalence_criteria_schemaexpg3.xml"/>
   </express-g>
</schema>

<schema name="product_data_equivalence_inspection_result_schema" version="1">
<!-- Note schema EXPRESS are in ..\resources\resource_name name_of_schema.xml -->
   <introduction>
   </introduction>
        <fund_cons>
            <p>This schema provides general specifications for the representation of equivalence inspection result of product data. Inspection results show the level of equivalence of particular pair of product data instances with regard to specified equivalence criteria. Therefore, identification of the product data instances inspected and the relationship to corresponding equivalence criteria specified are provided.</p>
            <p>The necessity of inspection results depends on usage scenario of product data equivalence information. When only equivalence requirements are transferred or declaration of satisfied equivalence is transferred, inspection results are not required.</p>
            <note>See  annex E.5 for details on what kind of equivalence related information is required for each expected usage scenario.</note>
            <p>An instance of <b>data_equivalence_inspection_result</b> represents inspection result corresponding to exactly one
               data equivalence criterion. There are cases that judgement on whether to regard obtained inspection result as
               inequivalence defect or not is application dependent.
               Therefore, two entities with and without judgement are provided.                                                                        
            </p>
            <p>To represent entire inspection result corresponding to a set of specified product data equivalence criteria, 
                <b>data_equivalence_inspection_result_representation</b> is provided. It is a collection of 
                <b>data_equivalence_inspection_result</b>s. The relationship between the former and the latter is identical with the relationship between 
                <b>representation</b> and                 
                <b>representation_item</b>.                                                                        
            </p>
            <p>There are two types of inspection result report. One is a summary report that represents what equivalence
               criterion was checked and what were inspection results without going into detail about what entity instance caused
               what extent of inequivalence defect. 
               This information will be effectively used for judging equivalence level of the target pair of product data with
               regard to one criterion.
               The other is detailed information in entity instance level to represent what particular entity instance caused what
               kind and degree of inequivalence defect.
               This information will be effectively used for improving the equivalence of the target product data instances.</p>
            <p>Specifications in this schema are enough general so that they can be applied for the representation of inspection result of any property of a product data. Specialization of this schema to annotated 3d model data is given in clause 8. Specialization to inspection result of any property other than annotated 3d model will also be possible in the future as a specialization of this schema.</p>
        </fund_cons>

<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="product_data_equivalence_inspection_result_schemaexpg1.xml"/>
     <imgfile file="product_data_equivalence_inspection_result_schemaexpg2.xml"/>
     <imgfile file="product_data_equivalence_inspection_result_schemaexpg3.xml"/>
   </express-g>
</schema>

<schema name="annotated_3d_model_equivalence_criteria_schema" version="1">
<!-- Note schema EXPRESS are in ..\resources\resource_name name_of_schema.xml -->
   <introduction>
   </introduction>
        <fund_cons>
            <p>This schema provides representation of equivalence criteria for annotated 3d model data.
               This schema is a specialization of <b>product_data_equivalence_criteria_schema</b> presented in clause 5 to the 
               equivalence of annotated 3d model data. 
               Therefore, all the fundamental concepts and assumptions described in 5.2 also apply.
               This schema provides specifications of equivalence criteria common to any type of annotated 3d model data together
               with pertaining inspection requirements and thresholds for the assessment of annotated 3d model data equivalence.
               </p>
               <note number="1">
               Detailed criteria will be defined in companion standards, 
               <b>annotated_3d_model_equivalence_shape</b> module for the equivalence of shape data,
               <b>annotated_3d_model_equivalence_assembly</b> module for the equivalence of assembly data,
               and <b>annotated_3d_model_equivalence_PMI</b> module for the equivalence of PMI data, respectively.
               In those modules, criteria are classified and enumerated based on equivalence concerns,
               rather than defining what is good equivalence data.
               Accuracy is also related to each criterion when appropriate.
               </note>
               
            <b>7.2.1    Representation of the criteria of annotated 3d model equivalence and its classification</b>
            <p>The equivalence of annotated 3d model data will be defined in detail in companion modules
               by classifying practical inconveniences based on taxonomy of known problems.
               Practical inconveniences may cause rework in receiver side after conversion for improving received data usable
               in receiver’s job. 
               These inconveniences mainly arise due to incorrect or inappropriate translation of data.</p>
            <note number="2">Shape data concerned shall be represented using entities defined
             in ISO 10303-42 or entities defined in AP based on ISO 10303-42.
             Among various representation methods such as boundary representation (B-Rep) and CSG,
             boundary representation (B-Rep) is mainly focused.</note>
            <note number="3">Detailed criteria are classified as subtypes of                 
                <b>a3m_equivalence_criterion</b> that is a type of 
                <b>data_equivalence_criterion</b> as defined in clause 5:                 
                <b>product_data_equivalence_criteria_schema</b> of this part of ISO 10303.
            </note>
            <p>Whether or not design quality of the original data is kept unchanged in the converted data is decisively important
               in equivalence validation of some type of product data. 
               With regard to this concern, only criteria requiring whether or not smoothness of free form curves and surfaces are kept equivalent in the 
               converted model will be included (See <b>annotated_3d_model_equivalence_shape</b> module).</p>
            <b>7.2.2    Representation of the requirements on annotated 3d model equivalence inspection</b>
            <p>Each criterion has an associated inspection requirement.
               An inspection requirement provides a textual description of how the criterion is to be inspected and may have
               additional attributes and rules to control the test and the element or elements to be tested.
               It does not provide an algorithm for the inspection process. 
               It is expected that an inspection requirement plays a role of external specification for reliable inspection algorithm.
             </p>
            <b>7.2.3    Correspondence of data elements to compare</b>
            <p>Correspondence of data elements to compare, one in the compared product model, the other in the comparing model
               shall be exactly known.
               As for shape model, external specification of correspondence finding algorithm is given in the 
               <b>annotated_3d_model_equivalence_shape</b> module.</p>
            <p>As for assembly model and PMI data, it is understood that there is no commonly used method for detecting the
               correspondence, but the use of user given names when applicable, or bounding box for knowing spatial extent
               are used for detecting the correspondence. 
               In the definition of criteria in <b>annotated_3d_model_equivalence_assembly</b> module and <b>annotated_3d_model_equivalence_PMI</b> module,
               it is assumed that the correspondence is known outside of those standards.
               If unique naming method such as UUID(Universally Unique Identifier) is developed in the future, it is assumed that unique name will be transferred via STEP translator.</p>
            <b>7.2.4    Specialization of data equivalence assessment specification</b>
            <p>
                <b>data_equivalence_assessment_specification</b> defined in                 
                <b>product_data_equivalence_criteria_schema</b> is specialized to annotated 3d model equivalence by 
                <b>a3m_equivalence_assessment_by_numerical_test</b> and 
                <b>a3m_equivalence_assessment_by_logical_test</b>. For the assessment of                 
                <b>a3m_equivalence_assessment_by_numerical_test</b>, attribute 
                <b>threshold</b> which is user definable from AP (Application Protocol) plays a key role. 
            </p>
                <example>
                An example of a typical threshold is a distance threshold for evaluating a deviation between corresponding positions
                of the two product data inspected. That distance threshold implies that maximum distance between the two 
                corresponding arc-wise connected surfaces shall be smaller than the threshold. Appropriate thresholds depend on many
                factors such as size of a product, design requirements, robustness of engineering systems on numerical precision.
                Therefore, what threshold value to use shall be carefully determined in each business situation based on agreement
                among business partners.                                                
                </example>
            
            <b>7.2.5    Representation of required accuracy for annotated 3d model data equivalence inspection</b>
            <p>In most cases, especially when free form geometry is involved, the inspection algorithm calculates an approximate
               solution not an exact solution.
               In the above example, arc-wise connected surfaces consist of an infinite number of points.
               Since calculation at an infinite number of points is impossible, any algorithm tries to calculate the solution
               using a sufficient number of finite points.
               In order to require the difference of the approximate solution and the exact solution, even when it is unknown, smaller than the expected value, accuracy specification is provided. The accuracy shall be understood that an approximate solution is acceptable if the difference of the approximate solution and other approximate solution obtained by calculation with any other finer sampling points is smaller than the given accuracy. There are two types of accuracies, one is general accuracy applied to all the inspections and the other is specific accuracy applied only to specified inspection.</p>
            <note number="4">ISO 10303-45 includes                  
                <b>qualified_measure_schema</b> where specifications to qualify inspection results of physical object from accuracy
                point of view are defined. Though there are some similarities between the concept defined in that schema and the
                accuracy concept defined in this standard, the latter concerns with the accuracy of numerical calculation.
                It therefore includes accuracy of value without any unit such as accuracy of parameter value that is not taken into
                account in the <b>qualified_measure_schema</b>. 
                The accuracy information in this standard is effective for representing requirement of accuracy of numerical
                calculation even when the target product data is not yet identified.
                These are the reasons why the accuracy concept in this standard makes use of only appropriate portion of the 
                <b>qualified_measure_schema</b>.                                                 
            </note>
            <!-- 
            <note number="4">The accuracy specific to each inspection can be represented by the attribute 
                <b>required_specific_accuracy</b> of the entity                 
                <b>a3m_equivalence_criterion_and_accuracy_association</b>. Actual accuracy applied by equivalence inspection can be represented using entities in the 
                <b>annotated_3d_model_equivalence_inspection_result_schema</b>.
            </note>
             -->
        </fund_cons>

<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="annotated_3d_model_equivalence_criteria_schemaexpg1.xml"/>
     <imgfile file="annotated_3d_model_equivalence_criteria_schemaexpg2.xml"/>
     <imgfile file="annotated_3d_model_equivalence_criteria_schemaexpg3.xml"/>
   </express-g>
</schema>

<schema name="annotated_3d_model_equivalence_inspection_result_schema" version="1">
<!-- Note schema EXPRESS are in ..\resources\resource_name name_of_schema.xml -->
   <introduction>
   </introduction>
                 
   <fund_cons>
            <p>This schema provides representation of inspection results of annotated 3d model equivalence. This schema is a specialization of                                                                 
                <b>product_data_equivalence_inspection_result_schema</b> presented in clause 6 to the equivalence of annotated 3d model data. Therefore, all the fundamental concepts and assumptions described in 6.2 also apply.
            </p>
            <p>As this schema deals with inspection result of the equivalence of annotated 3d model data, a relationship is established between 
                <b>a3m_equivalence_inspection_result_representation</b> that is a type of                 
                <b>data_equivalence_inspection_result_representation</b> defined in 
                <b>product_data_equivalence_inspection_result_schema</b> and                 
                <b>representation</b> representing inspection target annotated 3d model data by 
                <b>a3m_inspected_model_and_inspection_result_relationship</b>.
            </p>
            <note>
              Geometric data newly created for representing inspection results, such as points where inequivalence defect is
              detected, shall be created in the context of the inspected product data.</note>
            <p>
                <b>a3m_equivalence_criterion_report_item_with_measured_value</b> that is a type of                 
                <b>data_equivalence_inspection_criterion_report_item</b> defined in 
                <b>product_data_equivalence_inspection_result_schema</b> reports summarized inspection result for a specific criterion together with a measured value obtained.
            </p>
            <p>
                <b>a3m_equivalence_inspection_instance_report_item</b> is a type of                 
                <b>data_equivalence_inspection_instance_report_item</b> defined in the 
                <b>product_data_equivalence_inspection_result_schema</b> represents the most detailed information on the result of 
                inspection for a specific annotated 3d model equivalence criterion together with a measured value.
                If the exact location is required to know where an extreme inspected value is detected, 
                <b>equivalence_instance_report_item_with_extreme_instances</b> that has location information on inspected data
                elements where inequivalence defects were detected shall be used.
            </p>
            <p>Users will specify thresholds to judge if a criterion is satisfied or not, which depends on business situation. They may or may not specify the accuracy for controlling precision of numerical calculation used in the inspection. But there are many cases that the information on the accuracy that is actually applied by the inspection is useful to interpret an inspection result. For this purpose, representation of the common accuracy applied to every inspection as well as the accuracy applied to inspection of specific criterion are provided in this schema.</p>
        </fund_cons>

<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="annotated_3d_model_equivalence_inspection_result_schemaexpg1.xml"/>
     <imgfile file="annotated_3d_model_equivalence_inspection_result_schemaexpg2.xml"/>
     <imgfile file="annotated_3d_model_equivalence_inspection_result_schemaexpg3.xml"/>
   </express-g>
</schema>
 <!-- shortnames  -->
 <shortnames>
  <shortname name="AEAA" entity="a3m_equivalence_accuracy_association"/>
  <shortname name="AEABLT" entity="a3m_equivalence_assessment_by_logical_test"/>
  <shortname name="AEABNT" entity="a3m_equivalence_assessment_by_numerical_test"/>
  <shortname name="AECR" entity="a3m_equivalence_criteria_representation"/>
  <shortname name="AEC" entity="a3m_equivalence_criterion" />
  <shortname name="AECWSE" entity="a3m_equivalence_criterion_with_specified_elements" />
  <shortname name="AEIIRI" entity="a3m_equivalence_inspection_instance_report_item" />
  <shortname name="AEIRWV" entity="a3m_equivalence_inspection_requirement_with_values"/>
  <shortname name="AEIRR" entity="a3m_equivalence_inspection_result_representation" />
  <shortname name="AIMAIRR" entity="a3m_inspected_model_and_inspection_result_relationship" />
  <shortname name="AECRIWMV" entity="a3m_equivalence_criterion_report_item_with_measured_value" />
  <shortname name="AESRRWRV" entity="a3m_equivalence_summary_report_request_with_representative_value" />
  <shortname name="CRIWNOI" entity="criterion_report_item_with_number_of_instances" />
  <shortname name="CRIWV" entity="criterion_report_item_with_value" />
  <shortname name="DEAIA" entity="data_equivalence_assessment_inspection_association" />
  <shortname name="DEAS" entity="data_equivalence_assessment_specification" />
  <shortname name="DECR" entity="data_equivalence_criteria_representation" />
  <shortname name="DEC" entity="data_equivalence_criterion" />
  <shortname name="DECAA" entity="data_equivalence_criterion_assessment_association" />
  <shortname name="DECIA" entity="data_equivalence_criterion_inspection_association" />
  <shortname name="DED" entity="data_equivalence_definition" />
  <shortname name="DEDR" entity="data_equivalence_definition_relationship" />
  <shortname name="DEDRR" entity="data_equivalence_definition_representation_relationship" />
  <shortname name="DEIEP" entity="data_equivalence_inspected_element_pair" />
  <shortname name="DEICR" entity="data_equivalence_inspection_criterion_report" />
  <shortname name="DEICRI" entity="data_equivalence_inspection_criterion_report_item" />
  <shortname name="DEIIR" entity="data_equivalence_inspection_instance_report" />
  <shortname name="DEIIRI" entity="data_equivalence_inspection_instance_report_item" />
  <shortname name="DEIR" entity="data_equivalence_inspection_report" />
  <shortname name="DEIRQ" entity="data_equivalence_inspection_requirement" />
  <shortname name="DEIRT" entity="data_equivalence_inspection_result" />
  <shortname name="DEIRR" entity="data_equivalence_inspection_result_representation" />
  <shortname name="DEIRWJ" entity="data_equivalence_inspection_result_with_judgement" />
  <shortname name="DERIA" entity="data_equivalence_report_inspection_association" />
  <shortname name="DERR" entity="data_equivalence_report_request" />
  <shortname name="DERRQ" entity="detailed_equivalence_report_request" />
  <shortname name="DERRWNOI" entity="detailed_equivalence_report_request_with_number_of_instances" />
  <shortname name="EEI" entity="equivalence_extreme_instance" />
  <shortname name="EIRIWEI" entity="equivalence_instance_report_item_with_extreme_instances" />
  <shortname name="PDADER" entity="product_data_and_data_equivalence_relationship" />
  <shortname name="SRRWNOI" entity="summary_report_request_with_number_of_instances"/>	
  <shortname name="VSI" entity="validation_software_identification"/>	
 </shortnames>

<tech_discussion>
<h2><b>E.1 Structural relationship between the equivalence validation related standards</b></h2>
<p>Equivalence validation related standards consist of one generic resource part and six AMs(Application Modules) as follows;</p>
<ul>
  <li>ISO 10303-62(Part 62): Equivalence validation of product data;</li>
  <li>product_data_equivalence_definition module;</li>
  <li>annotated_3d_model_equivalence_criteria module;</li>
  <li>annotated_3d_model_equivalence_inspection_result module;</li>
  <li>annotated_3d_model_equivalence_shape module;</li>
  <li>annotated_3d_model_equivalence_assembly module;</li>
  <li>annotated_3d_model_equivalence_PMI module.</li>
</ul>
<p>
The structural relationship of these standards is as shown in Figure E.1. 
This part of ISO 10303 is a foundation of all of these standards where all the general specifications regarding 
Equivalence Validation are defined.
</p>
<figure number="E.1">
   <title> Structural relationship between schemas and modules</title>
   <img src="fig-E.1.gif"/>
  </figure>
<p>
Figure E.2 shows the relationship between schemas defined in this standard and the target product model data 
that are compared for equivalence.</p>
<figure number="E.2">
   <title>Relationship between schemas defined in this standard and target product data</title>
   <img src="fig-E.2.gif"/>
  </figure>
 <p>Figure E.3 shows major entities in the top three schemas and how these schemas are related.</p>
<figure number="E.3">
   <title>EXPRESS-G diagram showing the structural relationship of top three schemas</title>
   <img src="fig-E.3.gif"/>
  </figure>
<p>Figure E.4 shows how criteria related schemas in this standard relate to 
<b>annotated_3d_model_equivalence_shape</b> module.</p>
<figure number="E.4">
   <title>EXPRESS-G diagram of the relationship of criteria related resource schemas and the shape module</title>
   <img src="fig-E.4.gif"/>
  </figure>
<p>Figure E.5 shows how inspection result related schemas in this standard relate to 
<b>annotated_3d_model_equivalence_shape</b> module.</p>
<figure number="E.5">
   <title>EXPRESS-G diagram of the relationship of inspection result related resource schema and the shape module</title>
   <img src="fig-E.5.gif"/>
  </figure>
<h2><b>E.2 Comparability</b></h2>
<p>The target product data of equivalence validation will be represented in various formats such as STEP format, native CAD formats and visualization system formats. Comparability of two things is a basic issue. If direct comparison of product data represented in different formats is feasible, there is no need to care about comparability. But, it is well known that product data representation and control mechanism of numerical calculation error are slightly different system by system, that is a major reason to prevent direct comparison.</p>
<p>There are mainly two types of comparison: </p>
<ul>
<li>The most basic case is the case when calculation of a physical quantity is required as a preparation for comparison. 
    For doing this, a space where pertaining metric is unique and product data representation is unique is required. 
    STEP representation will be a single reasonable space for dealing with this case;
</li>
<li>Physical quantity for use in comparison such as validation properties may be passed together with 
the compared data and/or comparing data as meta data. In this case, there will be no need to stick to STEP representation.
</li>
</ul>
<p>Shape data to compare are required to be conformant to ISO 10303-42 specification, or to AP's based on ISO 10303-42.
  As for assembly representation, STEP conformant representation is assumed though representation of leaf part shape may not be STEP conformant. As for PMI representation, ISO 10303-242 conformant representation is assumed.</p>

<h2><b>E.3 Identification of corresponding data elements</b></h2>

<p>In order to compare two product data, it is crucially important to know what data elements of the
 compared data correspond to what data elements of the comparing data. This correspondence may be 1-1 correspondence,
 1-N correspondence, N-1correspondence, or even N-M correspondence.
 As for shape data, correspondence search is included in 
 <b>annotated_3d_model_equivalence_shape</b> module. 
 As for Assembly data and PMI data, it is assumed that the correspondence will be given from outside of 
 <b>annotated_3d_model_equivalence_assembly</b> module and 
 <b>annotated_3d_model_equivalence_PMI</b> module.
Though there is no common method, it is well known that the correspondence is obtained in engineering IT tools by using 
information such as user given name, bounding box.
If persistent id creation and maintenance mechanism such as UUID is established in the future, it will be transferred by STEP translation.</p>
<h2><b>E.4 Similarity/Difference of this standard with ISO 10303-59(PDQ-S)</b></h2>
<p></p>
<b>E.4.1 Similarity</b>
<p>This standard consists of the following five schemas and related modules:</p>
<ul>
<li>product data equivalence definition schema;</li>
<li>product data equivalence criteria schema;</li>
<li>product data equivalence inspection result schema;</li>
<li>annotated 3d model equivalence criteria schema;</li>
<li>annotated 3d model equivalence inspection result schema.</li>
</ul>
<p>
  where the first plays the role of root node by defining high level data elements for managing product data equivalence validation
  information, the second provides general specifications for the representation of equivalence validation criteria, equivalence
  inspection requirements and equivalence assessment specifications for product data, the third provides general specifications
  for the representation of equivalence inspection results for a particular pair of product data, the fourth provides
  representations of equivalence validation criteria for annotated 3d model data. together with the pertaining inspection
  requirements, assessment specifications and thresholds for judging whether or not equivalence is satisfied, and the fifth provides
  representations of equivalence inspection results for a particular pair of product data with regard to specified equivalence
  criteria. Detailed information on what type of inequivalence defect exists, and how serious it is, together with the product
  element data where the problem is detected can also be represented.</p>
<p>ISO 10303-59(PDQ-S) also consists of the following five schemas and related modules:</p>
<ul>
<li>product data quality definition schema;</li>
<li>product data quality criteria schema;</li>
<li>product data quality inspection result schema;</li>
<li>shape data quality criteria schema;</li>
<li>shape data quality inspection result schema.</li>
</ul>
<p>The top three schemas are general schemas for treating product data quality of any constituent of product data,
and the fourth is a specialization of the second, and the fifth is a specialization of the third to 3D shape data quality,
respectively.</p>
<b>E.4.2 Differences</b>
<p>The differences of equivalence validation and PDQ-S (Product Data Quality for Shape) are understood as follows:</p>
<dl>
<dt>- Difference of number of product data focused;</dt>
<dd>In PDQ-S, we focus only on one product data and investigate it from data quality point of view.
In equivalence validation, we focus on two product data, one is the compared data and the other is the comparing data,
and we investigate whether or not the comparing data can be regarded as identical with the compared data within tolerance
from the view point of expected usage of the comparing data, that is controlled by giving appropriate threshold;</dd>
<dt>- Equivalence validation and PDQ-S are complimentary ideas.</dt>
<dd>
   Good equivalence of two product data does not necessary imply that they have good quality. 
   On the contrary, good quality of the comparing data does not necessary imply it has good equivalence with the compared data.
   The following is an example of the former.
</dd>
</dl>
<example>
In the outer panel shape of a passenger car body, unintended oscillations of positive and negative curvature are not acceptable.
If two product shape elements compared for equivalence have the same curvature oscillations, they may pass as equivalent, 
even though they are unsuitable for their intended purpose.
This type of quality defect shall be detected by applying PDQ-S standard(s).
</example>
<p>On the contrary, even if data inspected has good quality, there is no guarantee that it has good equivalence with the compared data.
These are the reasons why both aerospace industry and automotive industry recognized that both equivalence validation check
and PDQ check are required in the context of long term data retention.
</p>

<h2><b>E.5 Potential scenarios of the use of this standard</b></h2>
<p>The following are some typical application scenarios of this standard and companion modules, though they may also be useful
   for other purposes such as identification of design change portion by comparing two product data before and after design change,
   or check of validity of CAD system version up by comparing two product data before and after the 
   version change of a CAD system.</p>
<b>E.5.1 Requirement/Declaration on the level of equivalence of the comparing data with the compared data</b>
<p>Potential user of the comparing data may ask an information technology vendor to provide a good quality translator which satisfies specified
   requirements.
   Some examples of the requirements are, the shape of the comparing data shall be equivalent with that of the compared data
   within tolerance at the specified inspection points, the comparing data shall have exactly the same assembly structure with
   the compared data, the comparing data shall have the same semantics of PMI data as that of the compared data.
   These requirements will be represented by specific criteria.
   These criteria may be used together with thresholds for representing allowable deviation.
   As shown in the data structure presented in Figure E.4 and E.5, concrete criteria will be provided in the 
   <b>annotated_3d_model_equivalence_shape</b> module, or <b>annotated_3d_model_equivalence_assembly</b> module, or 
   <b>annotated_3d_model_equivalence_PMI</b> module so that the user can select the most appropriate criteria for the problem.
   These requirements could be presented before data translation.</p>
<p>In order to declare the level of equivalence satisfied, criteria (together with thresholds as necessary) will be presented.
   In this scenario, combination of criteria, the compared data and the comparing data will usually be presented.</p>

<b>E.5.2 Assurance of data equivalence and long term data archiving</b>
<p>In order to assure or guarantee satisfaction of requirements on data equivalence, combination of (criterion, inspection result)
   is required together with the compared data and the comparing data.
   Required inspection result information in this scenario will be criterion report item level information,
   that is what criterion was tested with what threshold, and whether or not the test passed.</p>
<p>In order to check long term stored data before its re-use, whether it is exactly wanted one and it is reliable, the user of the data
   will ask similar check by identifying criteria such as “equivalence at specified inspection points” together with the required
   threshold.</p>

<b>E.5.3 Data equivalence information for use in improvement of data equivalence</b>
<p>If inequivalence defect is detected by some equivalence validation system, necessary actions such as healing of problem data
   should be taken.
   For that purpose, information on what criterion concerns with the defect, what entity instance causes the defect and the
   seriousness of the defect are required. 
   This standard and companion modules provide sufficient capability (data types) to support this scenario.
</p>
</tech_discussion>
 <!-- optional annexes
 <examples/>

 <add_scope/>
-->
 <bibliography>
        <bibitem.inc ref="ISO-10303-11" />
        <bibitem.inc ref="ISO-10303-42" />
        <bibitem.inc ref="ISO-10303-242" />
        <bibitem.inc ref="ISO-9000" />
        <bibitem.inc ref="ISO 31-all" />
        <bibitem.inc ref="EN-NAS-9300-100" />
        <bibitem.inc ref="EN-NAS-9300-110" />
        <bibitem.inc ref="EN-NAS-9300-115" />
        <bibitem.inc ref="EN-NAS-9300-120" />
        <bibitem.inc ref="JAMA-eqv-1.0" />
        <bibitem.inc ref="MIL-STD-31000A" />
        <bibitem.inc ref="NAS-3500" />
        <bibitem.inc ref="CAXIF-GAVP-4.4" />
        <bibitem.inc ref="CAXIF-3DTG-1.0" />
        <bibitem.inc ref="CAXIF-RPP-4.0" />
    </bibliography>
</resource>

