<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id: resource.xml,v 1.37 2013/10/29 14:22:46 darla Exp $ -->
<!DOCTYPE resource SYSTEM "../../../dtd/res_doc/resource.dtd">
<!-- Generated by mkresource.js, Eurostep Limited, http://www.eurostep.com -->
 <!-- 
     To view the resource in IExplorer, open: sys/1_scope.xml
      -->
<resource
   name="kinematics"
   name.french="Cin&#233;matique"
   part="105"
   version="2"
   object.reg.version="4"
   sc4.working_group="12"
   wg.number="7301"
   wg.number.express="7302"
   checklist.internal_review=""
   checklist.project_leader=""
   checklist.convener=""
   status="IS"
   language="E"
   publication.year="2013"
   publication.date="2013-01-01"
   published="n"
   previous.revision.year="1996" 
   previous.revision.cancelled="NO"
   rcs.date="$Date: 2013/10/29 14:22:46 $"
   rcs.revision="$Revision: 1.37 $">

 <keywords>
    resource,  kinematic model, kinematic motion representation, kinematic analysis, 
    Sheth-Uicker Parameter, joint, link, pair
 </keywords>


<!-- the abstract for the resource. If not provided, the XSL will use the in scope -->
 <abstract>
    <p>
		This part of ISO 10303 specifies an information model for the kinematic aspects of 
		a mechanical product as required for the communication between CAD systems and kinematic
		analysis systems as well as between dissimilar kinematic analysis systems.
	</p>
 </abstract>

 <!-- Reference to contacts detailed in stepmod/data/basic/contacts.xml -->
 <contacts>
   <projlead ref="ap242.projlead"/>
   <editor ref="lothar.klein"/>
 </contacts>
	<foreword>
		This second edition of ISO 10303-105 cancels and replaces the first edition (ISO 10303-105:1996), 
		of which it constitutes a technical revision. 
		It also incorporates the Technical Corrigenda ISO 10303-105:1996/Cor 1:2000 and ISO 10303-105:1996/Cor 2:2000.
	</foreword>
 <!-- Change History -->
<changes>
	<change_edition version="2">
    	<description> 
<p>
This second edition of ISO 10303-105 is not upward compatible with the first edition along the definition given above. 
However the principle concept on how to describe kinematics is unchanged. 
So all concepts from the first edition are preserved or transformed into equivalent concepts. 
</p>
<p>
With this second edition a much deeper integration with the principle representation structure concepts as defined in ISO 10303-43 had been achieved. 
This allows a wide re-use of concepts in different variations, increasing the functionality during the design process. 
Also it is now possible to apply properties to low level concepts, e.g. a friction property to a kinematic_joint.
</p>
<p>
All entities from the first edition have either been directly modified or transformed into equivalent concepts, or are affected by modifications of their super-types. 
</p>
<p>
Note: See ISO TC184 / SC4 WG12 N6610 for the main issues and rationales that lead to the non compatible changes.
</p>
<p>
The former kinematic_structure_schema has been split into 4 schemas:
</p>
<ul>
<li>kinematic_property_schema;</li> 
<li>kinematic_topology_schema;</li>
<li>kinematic_structure_schema;</li>
<li>kinematic_state_schema.</li>
</ul>
<p>
Motion related concepts have been moved (and transformed) from the kinematic_analysis_control_and_result_schema to the kinematic_motion_representation_schema. 
As a result kinematic motion can be used without kinematic analysis.
</p>
	   	</description>
	</change_edition>
</changes>	

 

 <!-- Introduction -->
 <!-- The introduction should start as shown: -->
 <purpose>
   <p>
	This part of ISO 10303 specifies an information model for the kinematic aspects of a mechanical
	product as required for the communication between CAD systems and kinematic analysis systems, 
	and among dissimilar kinematic analysis systems.
	Kinematic information in the context of this part of ISO 10303 may be used in:
   </p>
   <ul>
   		<li>
   			early design stages, where detailed component shape is yet undetermined.
   			The purpose of the kinematic description in these stages is to develop 
   			the conceptual model of the mechanical product to understand its motion characteristics;
   		</li>
   		<li>
   			detail design stage where detailed shapes of components are determined.
   			The purpose of the kinematic description in that stage is to verify the 
   			performance of the kinematic characteristics of a mechanical product using 
   			the final shape of its components, e.g., by means of collision checking.
   		</li>
   </ul>
   <p>
   	The kinematic structure in this part of ISO 10303 is composed of rigid components related by
	kinematic pairs along a surface, on a curve, or at a point.
   </p>
   <p>
   	The kinematic structure schema defines the kinematic structure of rigid objects in terms of
	links, pairs, and joints.
	A link is the rigid part of a kinematic object.
	A pair represents the geometric aspects of the kinematic constraints of motion of these objects, 
	and a joint represents the topological aspects of these constraints.
	The kinematic structures are represented by graphs in which the vertices of the graph correspond 
	to the links, and the edges of the graph correspond to the joints.
   </p>
   <p>
   	The kinematic motion representation schema specifies the motion of a mechanical product by
	using a parametric path definition.
   </p>
   <p>
   	The kinematic analysis control and result schema specifies configurations of kinematic structures
	and the interpolation between configurations.
	This schema describes prescribed paths for a kinematic analysis and paths resulting 
	from such a kinematic analysis.
   </p>   
 </purpose>

 <!-- Schema Interface express-g diagrams  -->
 <!-- refer to p41ed2 as example  -->
 <schema_diag>
	<express-g>
     <imgfile file="schema_diagexpg1.xml" title="The main relationships between the schemas of ISO 10303-105 and schemas of other parts of ISO 10303"/>
   </express-g>   
 </schema_diag>

 <!-- Items in scope -->
 <inscope>
   <li>definition of kinematic relationships between rigid and linear flexible objects called links;</li>
   <li>representation of the topology for a kinematic structure;</li>
   <li>definition of a kinematic motion as a sequence of discretised positions and orientations;</li>
   <li>representation of the input to and the result of a kinematic analysis.</li>
 </inscope>

 <!-- Items out of scope -->
 <outscope>
   <li>description of tolerances and clearances in kinematic structures;</li>
   <li>representation of intermittent joints with variable constraints on motion;</li>
   <li>representation of dynamic mechanical assemblies;</li>
   <li>representation of force, mass, and friction.</li>
 </outscope>


 <normrefs>
 	<normref.inc normref="ref10303-1">
 		<!-- application resource -->
 		<term.ref linkend="term_application_resource"/>
 		<!-- data -->
 		<term.ref linkend="term_data"/>
 		<!-- generic resource -->
 		<term.ref linkend="term_generic_resource"/>
 		<!-- information -->
 		<term.ref linkend="term_information"/>
 		<!-- product -->
 		<term.ref linkend="term_product"/>
 	</normref.inc>
 	<normref.inc normref="ref10303-11.2004"/>
 	<!--  <normref.inc normref="ref10303-21.2002"/>  -->
 	<normref.inc normref="ref10303-41"/>
 	<normref.inc normref="ref10303-42">
 		<term.ref linkend="term_geom_coord_system"/>
 		<term.ref linkend="term_geom_founded"/>
 		<term.ref linkend="term_graph"/>
 	</normref.inc>
 	<normref.inc normref="ref10303-43"/>
 </normrefs>	

 <definition>
 	<term id="base">base</term>
 	<def>
 		a link which is fixed to the ground or whose motion is prescribed along a defined path
 	</def>
 </definition>	
 
 <definition>
 	<term id="frame">frame</term>
 	<def>
 		a coordinate system used in kinematic representations
 	</def>
 </definition>
 
 <definition>
 	<term id="ground">ground</term>
 	<def>
 		the immobile part of a mechanical product in the world coordinate system
 	</def>
 </definition>
 
 <definition>
 	<term id="joint">joint</term>
 	<def>
 		the topological aspect of an ordered connection or motion constraint between two
		and only two links
 	</def>
 </definition>
 
 <definition>
 	<term id="kinematics">kinematics</term>
 	<def>
 		the description of movable mechanical structures consisting of joints and
		links including the number, location, and orientation of the joints
 	</def>
 </definition>
 
 <definition>
 	<term id="kinematic_chain">kinematic chain</term>
 	<def>
 		a sequence of kinematic links connected by joints
 	</def>
 </definition>
 
 <definition>
 	<term id="linear_flexible_link">linear flexible link</term>
 	<def>
 		<p>a link whose shape can bend in one direction.</p>
 		<example>Roller chain, conveyor belt and wire rope are typical examples of a linear flexible link.</example>
 	</def>
 </definition>
 
 <definition>
 	<term id="link">link</term>
 	<def>
 		a rigid kinematic object whose motion is constrained by one or more joints
 	</def>
 </definition>
 
 <definition>
 	<term id="link_frame">link frame</term>
 	<def>
 		the local coordinate system of a link, implicitly defined as the geometric
		context of the link, with respect to which all geometric definitions of the link are defined
 	</def>
 </definition>
 
 <definition>
 	<term id="loop">loop</term>
 	<def>
 		a part of a mechanical structure whose joints and links together form a closed kinematic chain
 	</def>
 </definition>
 
 <definition>
 	<term id="mechanism">mechanism</term>
 	<def>
 		a mechanical product whose motion is constrained by joints
 	</def>
 </definition>
 
 <definition>
 	<term id="motion">motion</term>
 	<def>
 		change of position and orientation of a rigid body
 	</def>
 </definition>
 
 <definition>
 	<term id="pair">pair</term>
 	<def>
 		the geometric aspect of either an ordered connection or motion constraint between
		two and only two links
 	</def>
 </definition>
 
 <definition>
 	<term id="pair_frame">pair frame</term>
 	<def>
 		a coordinate system of a link that is defined relatively to the link frame,
 		used to establish the geometric relationship of a pair
 	</def>
 </definition>
 
 <definition>
 	<term id="pair_actuation">pair actuation</term>
 	<def>
 		the assignment of a pair value to a kinematic pair by an application
 	</def>
 </definition>
 
 <definition>
 	<term id="placement">placement</term>
 	<def>
 		the location and orientation of a frame
 	</def>
 </definition>
 
 <definition>
 	<term id="rigid_link">rigid link</term>
 	<def>
 		a link with a fixed shape that is not deforming in use or where the deformation can be neglected
 	</def>
 </definition>
 
 <definition>
 	<term id="transform">transform</term>
 	<def>
 		a representation of a placement that is specified with respect to an independent reference frame
 	</def>
 </definition>
 
 <definition>
 	<term id="su_arameters">SU-parameters</term>
 	<def>
 		the parameters that specify the placement between a pair of frames
 	</def>
 </definition>
 
 <definition>
 	<term id="world_oordinate_system">world coordinate system</term>
 	<def>
 		the initial coordinate system from which all other frames are defined
 	</def>
 </definition>
 
<definition>
 	<term id="yaw">yaw</term>
 	<def>
 		the angle of rotation about the z axis
 	</def>
 </definition>	
 <abbreviations>
 
 
 	<abbreviation id="dof">
 		<acronym>DOF</acronym>
 		<term>degree of freedom</term>
 	</abbreviation>
 	<abbreviation id="SU">
 		<acronym>SU</acronym>
 		<term>Sheth-Uicker</term>
 	</abbreviation>
 	<abbreviation id="ypr">
 		<acronym>ypr</acronym>
 		<term>rotation angles called yaw, pitch, and roll</term>
 	</abbreviation>
 </abbreviations>


<schema name="kinematic_property_schema" version="4">
	<introduction>
   	<p>
		The subject of the <b>kinematic_property_schema</b> is the description of
		kinematic properties and their association with kinematic representations.
	</p>	
	</introduction>
	<fund_cons>
		<p>
		The <b>kinematic_property_schema</b> provides the linking between a
	<express_ref linkend="kinematic_structure_schema:ir_express:kinematic_structure_schema.mechanism_representation" />
		or a
		kinematic_topology_representation
		with
		product_definition.
		This is done by specializations of
		property_definition
		and
		property_definition_representation.
		</p> 
	</fund_cons>
	<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="kinematic_property_schemaexpg1.xml"/>
     <imgfile file="kinematic_property_schemaexpg2.xml"/>
   </express-g>
</schema>


<schema name="kinematic_topology_schema" version="4">
	<introduction>
   	<p>
		The subject of the <b>kinematic_topology_schema</b> is the description of the topology of
		a kinematic structure consisting of kinematic joints and links, independent of particular
		pair types, ranges and geometry.
	</p>	
	</introduction>
	<fund_cons>
		<p>
			Kinematic topology is a specialization of general topological concepts defined in the
			<express_ref linkend="topology_schema:ir_express:topology_schema">topology_schema</express_ref>
			of ISO 10303-42.
		</p> 
		<p>
		    The <b>kinematic_topology_schema</b> provides different kinds of representations for the purpose of representing kinematic topology:
		</p>
	<ul>
		<li><express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_structure"/>;</li>
		<li><express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_substructure"/>;</li>
		<li><express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_directed_structure"/>;</li>
		<li><express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_tree_structure"/>;</li>
		<li><express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_network_structure"/>.</li>
	</ul>
		<p> 
			A 
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_structure"/>
			provides the basic grouping of connected kinematic topology elements, where the edges
			are given by  
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_joint"/>s
			that references two
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_link"/>s
			as their vertices. All the other kinematic representations uses a
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_structure"/>
			as their parent, of which a connected sub-set of the 
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_joint"/>s is referenced
			and that are sharing the same representation_context.
		</p> 
		<p>
			A
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_substructure"/>
			is used to represent a sub-set of 
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_joint"/>s
			of the parent 			
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_structure"/> or another
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_substructure"/>.
		</p> 
		<p>
			A
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_directed_structure"/>
			defines an directed graph within a 
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_structure"/> by
			using 
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.oriented_joint"/>s.
			When using the subtype
			<express_ref linkend="kinematic_topology_schema:ir_express:kinematic_topology_schema.kinematic_topology_tree_structure"/>
			the directed graph is required to be acyclic.
		</p> 
	</fund_cons>
	<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="kinematic_topology_schemaexpg1.xml"/>
     <imgfile file="kinematic_topology_schemaexpg2.xml"/>
   </express-g>
</schema>


<schema name="kinematic_structure_schema" version="4">
<!-- Note schema EXPRESS are in ..\resources\resource_name name_of_schema.xml -->
   <introduction>
   	<p>
		The subject of the <b>kinematic_structure_schema</b> is the description of the kinematic information 
		of a mechanical product defining its motion capabilities.
	</p>
	<p>
		Motion in this part of ISO 10303 comprises both free, unconstrained motion of objects in a
		Cartesian coordinate system and motion constrained by kinematic joints and pairs.
	</p>
	<p>
		This part of ISO 10303 covers the following types of pairs.
	</p>
	<ul>
	 <li>low order pairs covered in a generic way by 
	   low_order_kinematic_pair
	   and the following common specialisatizions that shall be used when possible.
	  <ul>
		<li>fully constrained pair (no DOF);</li>
		<li>revolute pair (one rotation DOF);</li>
		<li>prismatic pair (one translation DOF);</li>
		<li>cylindrical pair (one rotation and one translation DOF);</li>
		<li>universal pair (two rotation DOF);</li>
		<li>homokinetic pair (two rotation DOF);</li>
		<li>spherical pair with pin (two rotation DOF);</li>
		<li>spherical pair (three rotation DOF);</li>
		<li>planar pair (one rotation and two translation DOF);</li>
		<li>unconstrained pair (3 rotation and 3 translation DOF);</li>
 	  </ul></li>
	 <li>low order pairs with motion coupling:
	  <ul>
		<li>screw pair;</li>
		<li>rack and pinion pair;</li>
		<li>gear pair;</li>
 	  </ul></li>
	 <li>high order pairs:
	  <ul>
		<li>point on surface pair;</li>
		<li>sliding surface pair;</li>
		<li>rolling surface pair;</li>
		<li>point on planar curve pair;</li>
		<li>sliding curve pair;</li>
		<li>rolling curve pair.</li>
 	  </ul></li>
	</ul>
		<note>
			Low order pairs do not require explicit geometric information to describe their
			kinematic behaviour.
			High order pairs require a reference to a surface or to a curve in order
			to be defined kinematically.
		</note>
	<p>
		For surface pairs and curve pairs, two specialisations are distinguished: the sliding and rolling subtypes.
		A rolling pair is constrained in the relative motion of the two surfaces or curves such
		that they cannot slide on each other.
	</p>
		<example number="1">
			High levels of friction between two surfaces or curves may be the cause for relative
			motion to be constrained to rolling.
		</example>
	<p>
		For sliding pairs such a constraint does not exist.
	</p>
	<p>
		Low order pairs can be represented as sliding high order pairs.
		If a pair can be represented as a low order pair, it should be so represented and 
		not as a high order pair.
	</p>
   </introduction>
   <fund_cons>
   	<!-- Kinematic model structure -->
   	<b><i>Kinematic model structure</i></b>
   	<p>
   		Mechanical products with kinematic representations may have arbitrary topological structures.
		The topological structures are not constrained to simple chains (i.e., open kinematic chains
		without branches) or to tree-type structures; they may include loops or a network structure.
   	</p>
   		<note>
   			Every kinematic structure can be described in terms of its joints and links.
   			Joints constrain the motion between two rigid objects called links.
   			Joints and links are sufficient to describe the topology of kinematic structures, 
   			but for computation it is meaningful to introduce additional levels of structure based on graph theory.
   			Information related to the graph representation of a kinematic structure is given in <b>kinematic_substructure</b>.
   		</note>
   		<example number="2">
   			Simple chains are suitable kinematic structures for many industrial robots or cranes.
   			Tree-type structures are used to represent multi-arm manipulators.
   		</example>
   		<example number="3">
   			Network structures occur in industrial products.
   			One example is the mechanism used for windscreen wipers.
   		</example>
   	<p>
   		In this part of ISO 10303, kinematic structures are represented by graphs where the links represent 
   		the vertices of the graph, and the joints represent the edges.
   		The rigid objects with kinematic representations are defined kinematically in terms of links and 
   		geometrically in terms of their associated shape representation.
   		All coordinate systems related to a kinematic link are founded in the link frame, 
   		which is the geometric context of the related link representation.
   		These coordinate systems are called frames in this part of ISO 10303.
   		For the purpose of representing the kinematic aspect of a mechanism, the shape of the link is 
   		represented by the relative location and orientation of all its pair frames with respect to 
   		its link frame.
   	</p>
   	
   	<!-- Positioning and placement -->
   	<b><i>Positioning and placement</i></b>
   	<p>
   		Whenever constraints are imposed on the relative motion of two kinematic links, this fact is 
   		topologically represented by a joint.
   		The geometric aspect of this motion constraint is represented by the corresponding pair.
   	</p>
   	<p>
   		A placement describes a relative position and orientation of a frame with respect to another frame.
   		There are different ways of representing a placement.
   		Eight different representations of placement are used in this part of ISO 10303:
   	</p>
   	<ul>
   		<li>rigid homogenous matrix;</li>
   		<li><b>axis2_placement_3d</b>;</li>
   		<li><b>su_parameters</b>;</li>
   		<li><b>point_on_curve</b>;</li>
   		<li><b>point_on_surface</b>;</li>
   		<li>a <b>pair_value</b> applied to a <b>kinematic_pair</b>.</li>
   	</ul>
   	<p>
   		The rigid homogeneous matrix is used only as a notation in mathematical formulas.
   		It defines the relative position and orientation of one frame with respect to another.
   		The terms of this matrix are as follows:
   	</p>
   	<img src="hom_matrix.gif"/>
   	<p>
   		where the notation used for a frame <b>P</b> shall be <i><sup>k</sup><b>P</b><sub>i</sub></i> with:
   	</p>
   	<p><i>k</i> = identification of the reference frame in which the position of frame <i>i</i> is described;</p>
   	<p><i>i</i> = identification of the frame whose position is described with respect to frame <i>k</i>;</p>
   	<p><i>&#948;x</i>, <i>&#948;y</i>, <i>&#948;z</i> = the components of the translation vector.</p>
   	<p><sup>0</sup><i><b>P</b><sub>i</sub></i> represents the placement relative to the world coordinate system.</p>
   	<p>
   		The transform includes three rotational and three translational components.
   		The transform is the only form of placement representation which is suitable for interpolation 
   		or approximation via weighting functions.
   	</p>
   	<p>
   		The remaining representations are described in the schema.
   	</p>
   	
   	<!-- Positive sense of rotations -->
   	<b><i>Positive sense of rotations</i></b>
   	<p>
   		For any rotation defined in the <b>kinematic_structure_schema</b>, a positive value of the rotation
		angle indicates a counter-clockwise rotation when looking in the negative direction with respect
		to the axis of that rotation.
   	</p>
   	
   	<!-- Shape representations -->
   	<b><i>Shape representations</i></b>
   	<p>
   		Kinematic structure representations are frequently associated with shape representations for
		single parts of the structure at various levels of detail.
		In this part of ISO 10303, three kinds of shape representations are distinguished:
   	</p>
   	<ul>
   		<li>
   			shape representations of parts that belong to the immobile environment of a kinematic
			structure, referred to as the <i>ground shape</i>;
		</li>
   		<li>
   			shape representations describing the shape of a link of a kinematic structure, referred
			to as the <i>link shape</i>;
   		</li>
   		<li>
   			shape representations describing specific aspects of the shape of a kinematic pair, 
   			referred to as the <i>pair shape</i>.
   		</li>
   	</ul>
   	<p>
   		The <b>geometric_representation_items</b> which contribute to the ground shape representation
		may be in the <b>items</b> set either of the <b>kinematic_ground_representation</b> of the kinematic
		structure which, in this case, should be simultaneously a <b>shape_representation</b>, or of a
		<b>shape_representation</b> which is related to the <b>kinematic_ground_representation</b> of the
		kinematic structure by any means.
		This part of ISO 10303 does not specify any specific constraints on the representation of ground shape.
   	</p>
   	<p>
   		The <b>geometric_representation_items</b> contributing to a link shape representation shall not
		be in the <b>items</b> set of the corresponding <b>kinematic_link_representation</b>;
		rather they shall be in the <b>items</b> set of a <b>shape_representation</b> which is related to 
		this <b>kinematic_link_representation</b> by means of a <b>kinematic_link_representation_association</b>.
		Any number of <b>shape_representation</b>s may be related in this way to a specific 
		<b>kinematic_link_representation</b>.
   	</p>
   	<p>
   		For the purpose of a pair shape representation, only <b>geometric_representation_items</b> of
		type <b>kinematic_frame_background</b>, i.e., <b>point</b>, <b>curve</b>, or <b>surface</b> are allowed.
		They shall be in the <b>items</b> set of a <b>kinematic_frame_background_representation</b> which, 
		in turn, is related to one of the <b>kinematic_link_representation</b>s of the pair by means of a 
		<b>kinematic_frame_background_representation_association</b>.
		The <b>items</b> set of a <b>kinematic_frame_background_representation</b> may contain more than one item, 
		and in general any number of <b>kinematic_frame_background_representation</b>s may be related to a 
		<b>kinematic_link_representation</b> and to any frame in its <b>items</b> set.
		In the case of the higher pair types, however, which need explicit geometric information to describe 
		their kinematic behaviour, at least one <b>kinematic_frame_background_representation</b> is required 
		for each <b>curve</b> or <b>surface</b> that is referenced in its specification.
   	</p>
   	
   	<!-- Consistent use of units -->
   	<b><i>Consistent use of units</i></b>
   	<p>
   		It is required that units are used consistently throughout a kinematic structure, although such
		a kinematic structure will include a variety of <b>representation</b>s and related 
		<b>representation_context</b>s.
		To ensure this consistency, it is further required that all units which are to be used
		in a kinematic structure are assigned globally to the items of the respective <b>representation</b>s
		by means of the <b>global_unit_assigned_context</b> subtype of the <b>representation_context</b> 
		(see ISO 10303-41).
		Units for <b>measure_value</b>s of the same kind shall be identical throughout all
		the <b>representation</b>s in a kinematic structure.
   	</p>
   		<example number="4">
   			The pair placements of a <b>kinematic_pair</b> are founded in two different 
   			<b>kinematic_link_representation</b>s.
   			Consistent use of units requires that these two <b>kinematic_link_representation</b>s 
   			share the same units via their <b>global_unit_assigned_context</b>s.
   		</example>
   </fund_cons>

<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="kinematic_structure_schemaexpg1.xml"/>
     <imgfile file="kinematic_structure_schemaexpg2.xml"/>
     <imgfile file="kinematic_structure_schemaexpg3.xml"/>
     <imgfile file="kinematic_structure_schemaexpg4.xml"/>
     <imgfile file="kinematic_structure_schemaexpg5.xml"/>
     <imgfile file="kinematic_structure_schemaexpg6.xml"/>
     <imgfile file="kinematic_structure_schemaexpg7.xml"/>
   </express-g>
</schema>

<schema name="kinematic_state_schema" version="4">
	<introduction>
	<p>	
		The subject of the <b>kinematic_state_schema</b> is the description of a kinematic mechanism in a particular state,
		that is defined by applying actual pair values to each kinematic pair within the kinematic mechanism. 
	</p>	
	</introduction>
	<fund_cons>
	   	<p>
   			A
   			<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.mechanism_state_representation"/>
			is the root object to describe a kinematic state.
			It defines the state for one particular
			<express_ref linkend="kinematic_structure_schema:ir_express:kinematic_structure_schema.mechanism_representation"/>.
			There might be zero, one or many
   			<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.mechanism_state_representation"/>s
   			for a single
			<express_ref linkend="kinematic_structure_schema:ir_express:kinematic_structure_schema.mechanism_representation"/>.
			Motion can be simulated by interpolating through a sequence of kinematic states.
		</p>	
		<p>
			The items of a 
   			<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.mechanism_state_representation"/>
   			are
   			<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.pair_value"/>s.
			For each particular sub-subtype of  
			<express_ref linkend="kinematic_structure_schema:ir_express:kinematic_structure_schema.kinematic_pair"/>
			except for
			<express_ref linkend="kinematic_structure_schema:ir_express:kinematic_structure_schema.fully_constrained_pair"/>
			and
			<express_ref linkend="kinematic_structure_schema:ir_express:kinematic_structure_schema.unconstrained_pair"/> 
			a corresponding subtype of
   			<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.pair_value"/>
   			is defined that provides actual values for all available degrees of freedoms of that pair. 
   			These values tight the adjacent links of the pair into a particular relative position to each other. 
		</p> 
		<p>
			A particular
   			<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.pair_value"/>
   			can be used by many 
   			<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.mechanism_state_representation"/>s.
			This allows implementations to minimise the number of needed  
   			<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.pair_value"/>s
   			even in situations with many kinematic states and kinematic pairs.
		</p> 
	</fund_cons>
	<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="kinematic_state_schemaexpg1.xml"/>
     <imgfile file="kinematic_state_schemaexpg2.xml"/>
     <imgfile file="kinematic_state_schemaexpg3.xml"/>
     <imgfile file="kinematic_state_schemaexpg4.xml"/>
     <imgfile file="kinematic_state_schemaexpg5.xml"/>
   </express-g>
</schema>

<schema name="kinematic_motion_representation_schema" version="4">
<!-- Note schema EXPRESS are in ..\resources\resource_name name_of_schema.xml -->
   <introduction>
   <p>
		The subject of the <b>kinematic_motion_representation_schema</b> is the description of motion.
		It specifies different types of paths that comprise the motion for a kinematic model.
   </p>
   </introduction>
   <fund_cons>
   	<p>
   		Motion in this part of ISO 10303 is defined in terms of a parameter t. t is a non-decreasing
		parameter as motion progresses.
		Several motions may be synchronised by the requirement that the actual state of all motion in a 
		kinematic model is controlled by a single parameter t which appears as an attribute in the 
		<b>kinematic_control</b> and in the <b>kinematic_result</b>.
   	</p>
   </fund_cons>

<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="kinematic_motion_representation_schemaexpg1.xml"/>
     <imgfile file="kinematic_motion_representation_schemaexpg2.xml"/>
     <imgfile file="kinematic_motion_representation_schemaexpg3.xml"/>
   </express-g>
</schema>

<schema name="kinematic_analysis_control_and_result_schema" version="4">
<!-- Note schema EXPRESS are in ..\resources\resource_name name_of_schema.xml -->
   <introduction>
   <p>
   		The subject of the <b>kinematic_analysis_control_and_result_schema</b> is the identification and
		analysis of configurations of <b>kinematic_structure</b>s and the interpolation between configurations.
		The schema covers the prescribed paths and the paths resulting from analysis.
   </p>
   </introduction>
   <fund_cons>
   <p>
	   	A kinematic analysis is a specific presentation of the kinematic behaviour of a mechanical product.
	   	There are two possible ways to check the kinematic behaviour of a kinematic structure:
   </p>
		<ul>
			<li>forward analysis;</li>
			<li>backward analysis.</li>
		</ul>
   <p>
	   	The forward analysis specifies the motion of a kinematic structure in terms of a sequence of
		configurations and of the interpolations between them.
		The result of a forward analysis is the path of specified frames on specified links.
   </p>
   <p>
   		The backward analysis specifies the motion of a kinematic structure with a prescribed path defined by frames.
   		The result of a backward analysis is the sequence of configuration definitions in the form of 
   		the pair parameter values for a sufficiently large number of pairs to control the motion.
   </p>
   <p>
   		A configuration of a kinematic structure is defined by the specification of pair values for a set
		of pairs of the kinematic structure.
   </p>
   </fund_cons>

<!-- EXPRESS-G -->
   <express-g>
     <imgfile file="kinematic_analysis_control_and_result_schemaexpg1.xml"/>
     <imgfile file="kinematic_analysis_control_and_result_schemaexpg2.xml"/>
   </express-g>
</schema>

 <!-- shortnames  -->
 <shortnames>
 	<shortname name="RTABDR" entity="rotation_about_direction"/>
 	<shortname name="KNMJNT" entity="kinematic_joint"/>
 	<shortname name="KNMLNK" entity="kinematic_link"/>
 	<shortname name="KNLNRP" entity="kinematic_link_representation"/>
 	<shortname name="KLRA" entity="kinematic_link_representation_association"/>
 	<shortname name="SPRM" entity="su_parameters"/>
 	<shortname name="KNMPR" entity="kinematic_pair"/>
 	<shortname name="PRVL" entity="pair_value"/>
 	<shortname name="RVLPR" entity="revolute_pair"/>
 	<shortname name="RVPRVL" entity="revolute_pair_value"/>
 	<shortname name="PRSPR" entity="prismatic_pair"/>
 	<shortname name="PRPRVL" entity="prismatic_pair_value"/>
 	<shortname name="SCRPR" entity="screw_pair"/>
 	<shortname name="SCPRVL" entity="screw_pair_value"/>
 	<shortname name="CYLPR" entity="cylindrical_pair"/>
 	<shortname name="CYPRVL" entity="cylindrical_pair_value"/>
 	<shortname name="SPHPR" entity="spherical_pair"/>
 	<shortname name="SPPRVL" entity="spherical_pair_value"/>
 	<shortname name="UNVPR" entity="universal_pair"/>
 	<shortname name="NPRVL" entity="universal_pair_value"/>
 	<shortname name="PLNPR" entity="planar_pair"/>
 	<shortname name="PLPRVL" entity="planar_pair_value"/>
 	<shortname name="UNCPR" entity="unconstrained_pair"/>
 	<shortname name="UNPRV" entity="unconstrained_pair_value"/>
 	<shortname name="FLCNPR" entity="fully_constrained_pair"/>
 	<shortname name="POSP" entity="point_on_surface_pair"/>
 	<shortname name="POSPV" entity="point_on_surface_pair_value"/>
 	<shortname name="SRFPR" entity="surface_pair"/>
 	<shortname name="SLSRPR" entity="sliding_surface_pair"/>
 	<shortname name="SSPV" entity="sliding_surface_pair_value"/>
 	<shortname name="RLSRPR" entity="rolling_surface_pair"/>
 	<shortname name="RSPV" entity="rolling_surface_pair_value"/>
 	<shortname name="POPCP" entity="point_on_planar_curve_pair"/>
 	<shortname name="POPCPV" entity="point_on_planar_curve_pair_value"/>
 	<shortname name="PLCRPR" entity="planar_curve_pair"/>
 	<shortname name="PCPR" entity="planar_curve_pair_range"/>
 	<shortname name="SLCRPR" entity="sliding_curve_pair"/>
 	<shortname name="SCPV" entity="sliding_curve_pair_value"/>
 	<shortname name="RLCRPR" entity="rolling_curve_pair"/>
 	<shortname name="RCPV" entity="rolling_curve_pair_value"/>
 	<shortname name="GRPR" entity="gear_pair"/>
 	<shortname name="GRPRVL" entity="gear_pair_value"/>
 	<shortname name="RAPP" entity="rack_and_pinion_pair"/>
 	<shortname name="RAPPV" entity="rack_and_pinion_pair_value"/>		
 	<shortname name="KNMLP" entity="kinematic_loop"/>
 	<shortname name="ORNJNT" entity="oriented_joint"/>
	<shortname name="PTHND" entity="path_node"/>
 	<shortname name="KNMPTH" entity="kinematic_path"/>
 	<shortname name="PTPP" entity="point_to_point_path"/>
 	<shortname name="CRCPTH" entity="circular_path"/>
 	<shortname name="LNRPTH" entity="linear_path"/>
 	<shortname name="CRBSPT" entity="curve_based_path"/>
 	<shortname name="KNMCNT" entity="kinematic_control"/>
 	<shortname name="INCNSQ" entity="interpolated_configuration_sequence"/>
 	<shortname name="PRSPTH" entity="prescribed_path"/>
 	<shortname name="KNANRS" entity="kinematic_analysis_result"/>
 	<shortname name="KNANCN" entity="kinematic_analysis_consistency"/>
 	<shortname name="RSLPTH" entity="resulting_path"/>
 	<shortname name="KPDR" entity="kinematic_property_definition_representation"/>
 	<shortname name="KPTR" entity="kinematic_property_topology_representation"/>
 	<shortname name="PRDFKN" entity="product_definition_kinematics"/>
 	<shortname name="KTDS" entity="kinematic_topology_directed_structure"/>
 	<shortname name="KTNS" entity="kinematic_topology_network_structure"/>
 	<shortname name="KNTPST" entity="kinematic_topology_structure"/>
 	<shortname name="KNTPSB" entity="kinematic_topology_substructure"/>
 	<shortname name="KTTS" entity="kinematic_topology_tree_structure"/>
 	<shortname name="ACKNPR" entity="actuated_kinematic_pair"/>
 	<shortname name="CPW0" entity="cylindrical_pair_with_range"/>
 	<shortname name="GPWR" entity="gear_pair_with_range"/>
 	<shortname name="HMKPR" entity="homokinetic_pair"/>
 	<shortname name="MCHRPR" entity="mechanism_representation"/>
 	<shortname name="PRR0" entity="pair_representation_relationship"/>
 	<shortname name="PPW0" entity="planar_pair_with_range"/>
 	<shortname name="POPCPW" entity="point_on_planar_curve_pair_with_range"/>
 	<shortname name="POSPWR" entity="point_on_surface_pair_with_range"/>
 	<shortname name="PPWR" entity="prismatic_pair_with_range"/>
 	<shortname name="RAPPWR" entity="rack_and_pinion_pair_with_range"/>
 	<shortname name="RPWR" entity="revolute_pair_with_range"/>
 	<shortname name="SPWR" entity="screw_pair_with_range"/>
 	<shortname name="SPW0" entity="spherical_pair_with_range"/>
 	<shortname name="SPW1" entity="surface_pair_with_range"/>
 	<shortname name="UPWR" entity="universal_pair_with_range"/>
 	<shortname name="MCSTRP" entity="mechanism_state_representation"/>
 	<shortname name="GRCWP" entity="geometric_representation_context_with_parameter"/>
 	<shortname name="LNMTRL" entity="link_motion_relationship"/>
 	<shortname name="LMRAP" entity="link_motion_representation_along_path"/>
 	<shortname name="LNMTTR" entity="link_motion_transformation"/>
 	<shortname name="CDKLR" entity="context_dependent_kinematic_link_representation"/>
 	<shortname name="MCHRPR" entity="kinematic_property_mechanism_representation"/>
 	<shortname name="PDRK" entity="product_definition_relationship_kinematics"/>
 	<shortname name="HOKP" entity="high_order_kinematic_pair"/>
 	<shortname name="LFAPP" entity="linear_flexible_and_pinion_pair"/>
 	<shortname name="LFAPCP" entity="linear_flexible_and_planar_curve_pair"/>
 	<shortname name="LFLR" entity="linear_flexible_link_representation"/>
 	<shortname name="LOKP" entity="low_order_kinematic_pair"/>
 	<shortname name="LOKPWM" entity="low_order_kinematic_pair_with_motion_coupling"/>
 	<shortname name="RGLNRP" entity="rigid_link_representation"/>
 	<shortname name="SPWP" entity="spherical_pair_with_pin"/>
 	<shortname name="SPWPAR" entity="spherical_pair_with_pin_and_range"/>
 	<shortname name="CBPWO" entity="curve_based_path_with_orientation"/>
 	<shortname name="INC0" entity="interpolated_configuration_representation"/>
 	<shortname name="INCNSG" entity="interpolated_configuration_segment"/>
 	<shortname name="KNPTSG" entity="kinematic_path_segment"/>
 	<shortname name="PTPRRP" entity="path_parameter_representation"/>
 	<shortname name="PPRC" entity="path_parameter_representation_context"/>
 	<shortname name="PTHPRM" entity="path_parametrization"/>
 	<shortname name="LOKPWR" entity="low_order_kinematic_pair_with_range"/>
 	<shortname name="LOKPV" entity="low_order_kinematic_pair_value"/>
 	<shortname name="CBPWOA" entity="curve_based_path_with_orientation_and_parameters"/>
 	<shortname name="ILMR" entity="item_link_motion_relationship"/>
 	<shortname name="KPDBC" entity="kinematic_path_defined_by_curves"/>
 	<shortname name="KPDBN" entity="kinematic_path_defined_by_nodes"/>
 </shortnames>

  
<tech_discussion>
 
<b><b>E.1 Overview</b></b>
<p>
In the kinematic_topology_schema five different kinematic_topology_representations are defined. There must always be a main kinematic_topology_structure that consists of all kinematic_joints and kinematic_links but no other elements. The other four kinematic topology representations define sub-structures, some with higher level concepts such as tree and loop, within the main kinematic_topology_structure. This is done by re-using the same instances of kinematic_joint and kinematic_link.
</p>
<p>
For each kinematic_topology_representation there might be zero, one or many mechanism_representations, defined in the kinematic_structure_schema. A mechanism_representation is related to exactly one kinematic_topology_representation and defines a kinematic_pair for each kinematic_joint and a kinematic_link_representation for each kinematic_joint of the referenced kinematic_topology_representation. This is done by the items of a mechanism_representations that are constraint to be of type pair_representation_relationships. A  pair_representation_relationships provides the geometric relationship between two kinematic_link_representations for a kinematic_pair. Different  mechanism_representations may re-use the same instances of  pair_representation_relationship, kinematic_link_representation, and kinematic_pair.
</p>
<p>
A kinematic_link_representation is related to exactly one kinematic_link. However a kinematic_link may have different kinematic_link_representations that are used in different  mechanism_representations. A  kinematic_link_representation 
may be rigid or linear_flexible. A roller chain is an example for a linear_flexible_link_representation. For a kinematic_pair the first link might be either rigid or linear-flexible, however the second link must must always be rigid. A kinematic_link_representation may be related to one or several shape_representation via a kinematic_link_representation_association; e.g. an advanced_brep_shape_representation that represent the geometry of the kinematic_link. Either the kinematic_link_representation  and associated shape_representation shall share the same geometric_representation_context, or the  kinematic_link_representation_association shall be instantiated together with a representation_relationship_with_transformation.
</p>
<p>
Each kinematic_pair fall into one of these categories:
</p>
<ul>
  <li>low_order_kinematic_pair;</li>
  <li>low_order_with_motion_constraint_kinematic_pair;</li>
  <li>high_order_kinematic_pair.</li>
</ul>
	<p>
		In addition each kinematic_pair might be an actuated_kinematic_pair.		
	</p>
<p>
A low_order_pair may have up to three translation and three rotation degrees of freedom. Wherever possible on of the specific subtypes shall be used:
</p>
<ul>
  <li>revolute_pair;</li>
  <li>cylindrical_pair;</li>
  <li>spherical_pair;</li>
  <li>spherical_pair_with_pin;</li>
  <li>planar_pair;</li>
  <li>unconstrained_pair;</li>
  <li>fully_constrained_pair;</li>
  <li>prismatic_pair;</li>
  <li>universal_pair.</li>
</ul>
<p>
For most of the specific kinds of kinematic_pair a range subtype is defined to further constrain the degree of freedom within some interval.
</p>
<p>
The main entity of the kinematic_state_representation_schema is mechanism_state_representation that represents a particular state of a mechanism_representation. The items of a  mechanism_state_representation are pair_values, that define a particular state for the kinematic_pairs of the referenced  mechanism_representation.
</p>
<p>
Kinematic motion as defined in the  kinematic_motion_representation_schema is controlled along a parameter t whose context is given by a geometric_representation_context_with_parameter. This allows to define a unit for the parameter, e.g. seconds. Kinematic motion can be realised in two different ways:
</p>
<p>
A interpolated_configuration_representation defines a sequence of mechanism_state_representation at a given parameter value. The transition of one state to another is controlled by interpolation_type. 
A link_motion_representation_along_path defines a parameter controlled path for each kinematic_link_representation or any kind of shape_representation. This is independent of the availability of a mechanism_representation or kinematic_pair information.
</p>

<p><b>E.2 Hinge example</b></p>
<p>
The example illustrates the kinematics of a simple hinge.
The hinge itself (#300) is an assembly of two parts (#100 and #200), each with an associated advanced_shape_representation whose details are not given here. Instances #100 to #312 as well as #900 to #9xx corresponds to current recommended practises and are not further explained here.
</p>
<p>
Instances #321 amd #322 define a kinematic property and assign the mechansim representation #500 as its representation. The mechanism itself is based on the kinematic_topological_representation #400 that consists of a single joint (#402) with two links (#403 and #404).
</p>
<p>
For each of the kinematic_link a kinematic_link_representation is defined. Because the links of a hinge are typically rigid the subtype rigid_link_representation (#510,,#520) is used. Each of the  kinematic_link_representations contains an axis2_placement_3d that are needed as pair frames for the kinematic_pair. In addition each  kinematic_link_representation is associated to the  advanced_shape_representation of the of the hinge components via a kinematic_link_representation_association (#513, #523).
</p>
<p>
The main contents of the hinge mechanism is a kinematic_pair that is a revolute_pair (#503) with a particular range between 0 and 180 degrees. Each kinematic_pair is applying the needed geometric information for a kinematic_joint for which it provides geometric information. In this case these are the references to the axis2_placement_3d  (#512 and #522) that define the pair frames. The association with the corresponding kinematic_link_representations is done by the pair_representation_relationship (#502) that is called out as an item for the mechanism_representation.
</p>
<p>
Instances #610, #620 and #630 define three different states of the same mechanism #500. In this case a revolute_pair_value is used to define the rotations 0, 90 and 180 degree for the revolute pair.
</p>
<p>
Motion of the hinge is defined by the interpolated_configuration_representation #700. An interpolation sequence with the three segments #703, #704 and #705 is defined for the parameter values 0, 5 and 7 (e.g. seconds). The interpolation type between 0 and 5 and 5 to 7 is synchronous,  but the interpolation type for the last segment is discontinuous,  indicating that the  interpolated_configuration_representation is ending here; it is not cyclic.
</p>
<p>
Note that the kinematic_link_representations (#510, #520) share the same representation_contexts as the ones used by the advanced_shape_representation (#105, #205). So no additional transformation is needed. Also the mechanism_representation (#500) and the states of this mechanism (#610, #620, #630) share the same representation context. However the representation contexts of the kinematic_topology_structure (#400) and the interpolated_configuration_representation (#700) can not be shared with others.
</p>
	<screen>
ISO-10303-21;
HEADER;

FILE_DESCRIPTION(
/* description */ (' '),
/* implementation_level */ '2;1');
FILE_NAME(
/* name */ 'hinge',
/* time_stamp */ '2011-04-15T13:16:22',
/* author */ ('Lothar Klein'),
/* organization */ ('LKSoftWare GmbH'),
/* preprocessor_version */ 'x.x.x - partially hand populated',
/* originating_system */ 'IDA-STEP',
/* authorization */ 'draft');
FILE_SCHEMA(('AP242_MANAGED_MODEL_BASED_3D_ENGINEERING_MIM'));
ENDSEC;
DATA;

/* the first part of the hinge */
#100=PRODUCT('4711-1','Hinge Part A',$,(#902));
#101=PRODUCT_DEFINITION_FORMATION('',$,#100);
#102=PRODUCT_DEFINITION('1',$,#101,#903);
#103=PRODUCT_DEFINITION_SHAPE('',$,#102);
#104=SHAPE_DEFINITION_REPRESENTATION(#103,#105);
#105=ADVANCED_BREP_SHAPE_REPRESENTATION('',(#107,...),#106);
#106=(GEOMETRIC_REPRESENTATION_CONTEXT(3)
      GLOBAL_UNIT_ASSIGNED_CONTEXT((...))
      REPRESENTATION_CONTEXT('',''));
#107=AXIS2_PLACEMENT_3D(...);      

/* the second part of the hinge */
#200=PRODUCT('4711-2','Hinge Part B',$,(#902));
#201=PRODUCT_DEFINITION_FORMATION('',$,#200);
#202=PRODUCT_DEFINITION('1',$,#201,#06);
#203=PRODUCT_DEFINITION_SHAPE('',$,#202);
#204=SHAPE_DEFINITION_REPRESENTATION(#203,#205);
#205=ADVANCED_BREP_SHAPE_REPRESENTATION('',(#207,...),#206);
#206=(GEOMETRIC_REPRESENTATION_CONTEXT(3)
      GLOBAL_UNIT_ASSIGNED_CONTEXT((...))
      REPRESENTATION_CONTEXT('',''));
#207=AXIS2_PLACEMENT_3D(...);      

/* the hinge itself, an assembly of the first and second part with a kinematic property */
#300=PRODUCT('4711','Hinge',$,(#902));
#301=PRODUCT_DEFINITION_FORMATION('',$,#300);
#302=PRODUCT_DEFINITION('1',$,#301,#903);
#303=PRODUCT_DEFINITION_CONTEXT_ASSOCIATION(#302,#904,#905);
#311=NEXT_ASSEMBLY_USAGE_OCCURRENCE('1','',$,#302,#102,'1');
#312=NEXT_ASSEMBLY_USAGE_OCCURRENCE('2','',$,#302,#202,'2');

#320=PRODUCT_DEFINITION_KINEMATICS('',$,#302);
#321=KINEMATIC_PROPERTY_MECHANISM_REPRESENTATION(#320,#500,#510);
#330=PRODUCT_DEFINITION_RELATIONSHIP_KINEMATICS('',$,#311);
#331=CONTEXT_DEPENDENT_KINEMATIC_LINK_REPRESENTATION(#513,#330);
#340=PRODUCT_DEFINITION_RELATIONSHIP_KINEMATICS('',$,#312);
#341=CONTEXT_DEPENDENT_KINEMATIC_LINK_REPRESENTATION(#523,#340);

/* Kinematic topology */
#400=KINEMATIC_TOPOLOGY_STRUCTURE('',(#402),#401);
#401=REPRESENTATION_CONTEXT('','');
#402=KINEMATIC_JOINT('',#403,#404);
#403=KINEMATIC_LINK('L1');
#404=KINEMATIC_LINK('L2');

/* Mechanism */
#500=MECHANISM_REPRESENTATION('',(#502),#501,#400);
#501=(GEOMETRIC_REPRESENTATION_CONTEXT(3)
      GLOBAL_UNIT_ASSIGNED_CONTEXT((...))
      REPRESENTATION_CONTEXT('',''));
#502=PAIR_REPRESENTATION_RELATIONSHIP('','',$,#510,#520,#503);   
#503=REVOLUTE_PAIR_WITH_RANGE('',*,'pair-X',#512,#522,#402,*,*,*,*,*,*,0,180); 

#510=RIGID_LINK_REPRESENTATION('',(#512),#106,#403);
#512=AXIS2_PLACEMENT_3D(...);      
#513=KINEMATIC_LINK_REPRESENTATION_ASSOCIATION('',$,#510,#105);

#520=RIGID_LINK_REPRESENTATION('',(#522),#206,#404);
#522=AXIS2_PLACEMENT_3D(...);      
#523=KINEMATIC_LINK_REPRESENTATION_ASSOCIATION('',$,#520,#205);

/* Kinematic state 1, 2 and 3 */
#610=MECHANISM_STATE_REPRESENTATION('state-1',(#612),*,#500);
#612=REVOLUTE_PAIR_VALUE('',#503,0);      

#620=MECHANISM_STATE_REPRESENTATION('state-2',(#622),*,#500);
#622=REVOLUTE_PAIR_VALUE('',#503,90);      

#630=MECHANISM_STATE_REPRESENTATION('state-3',(#632),*,#500);
#632=REVOLUTE_PAIR_VALUE('',#503,180);      

/* kinematic motion */
#700=INTERPOLATED_CONFIGURATION_REPRESENTATION('',(#702),#701);
#701=(GEOMETRIC_REPRESENTATION_CONTEXT(3)
      GEOMETRIC_REPRESENTATION_CONTEXT_WITH_PARAMETER($)
      GLOBAL_UNIT_ASSIGNED_CONTEXT((...))
      REPRESENTATION_CONTEXT('',''));
#702=INTERPOLATED_CONFIGURATION_SEQUENCE('',(#703,#704,#705));
#703=INTERPOLATED_CONFIGURATION_SEGMENT(#610,0,.SYNCHRONOUS_INTERPOLATION_TYPE.);
#704=INTERPOLATED_CONFIGURATION_SEGMENT(#620,5,.SYNCHRONOUS_INTERPOLATION_TYPE.);
#705=INTERPOLATED_CONFIGURATION_SEGMENT(#630,7,.DISCONTINUOUS_INTERPOLATION_TYPE.);

/* auxiliary stuff */
#900=APPLICATION_PROTOCOL_DEFINITION('CD','AP242_MANAGED_MODEL_BASED_3D_ENGINEERING_MIM','2011',#901);
#901=APPLICATION_CONTEXT('mechanical design');
#902=PRODUCT_CONTEXT('part',#901,'');
#903=PRODUCT_DEFINITION_CONTEXT('part definition',#901,'design');
#904=PRODUCT_DEFINITION_CONTEXT('assembly definition',#901,'design');
#905=PRODUCT_DEFINITION_CONTEXT_ROLE('part definition type',$);
#906=PRODUCT_RELATED_PRODUCT_CATEGORY('part',$,(#100,#200,#300));
#910=APPLIED_ORGANIZATION_ASSIGNMENT(#912,#911,(#100,#200,#300));
#911=ORGANIZATION_ROLE('id owner');
#912=ORGANIZATION('No.1','John Doe Ltd.','company');

/* missing
   - details of ABREPS
   - units
   - action/action_method to which the motion is associated
*/   

ENDSEC;
END-ISO-10303-21;

	</screen>

	 <b><b>E.3 Rotation matrix corresponding to ypr_rotation</b></b>
	 <p>
	 	A 
		<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.ypr_rotation"/>.
	 	defines a sequence of three rotations about the yaw, pitch, and roll axes (in this order).
	 	In this part of ISO 10303, this rotation sequence is applied mainly to frames;
	 	in the case of a 
	 	<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.spherical_pair_value"/>,
	 	e.g., it relates the axis directions of the pair frame on the second link of a
	 	<express_ref linkend="kinematic_structure_schema:ir_express:kinematic_structure_schema.spherical_pair"/>
	 	to the axis directions of the pair frame on the first link of the same pair.
	 	It may be applied, however, to any vector-valued quantity in <b><i>R</i></b><sup>3</sup>.
	 </p>
	 
	 <b><b>E.4 Matrix representation of ypr_rotation</b></b>
	 <p>
	 	Let <img src="v_vector.gif"/> be a 3D vector to which a <b>ypr_rotation</b>
	 	is applied, and let <img src="w_vector.gif"/> be the same vector, but measured with respect to the unrotated,
	 	i.e., inertial coordinate system.
	 	Then the transformation from <img src="v_to_w.gif"/> can be written in matrix notation as follows:
	 	<img src="w_formula.gif"/>
	 	where
	 	<img src="t_formula.gif"/>
	 	(the rightmost transformation is performed first).
	 	Since the yaw, pitch, and roll rotations are rotations about the z-, y-, and x-axis, respectively, 
	 	of temporary coordinate systems, it is easily shown that
	 	<img src="t_yaw_matrix.gif"/>
	 	with <i>&#945;</i> being the yaw angle,
	 	<img src="t_pitch_matrix.gif"/>
	 	with <i>&#946;</i> being the pitch angle, and
	 	<img src="t_roll_matrix.gif"/>
	 	with <i>&#947;</i> being the roll angle.
	 	Hence, the rotation matrix for the entire <b>ypr_rotation</b> becomes
	 	<img src="t_ypr_matrix.gif"/>
	 </p>
	 
	 <b><b>E.5 EXPRESS function compute_rotation_matrix_from_ypr_rotation</b></b>
	 <p>
	 	The function <b>compute_rotation_matrix_from_ypr_rotation</b> computes the rotation matrix
		which corresponds to a <b>ypr_rotation</b>, given by its angles <b>yaw</b>, <b>pitch</b>, and <b>roll</b>, 
		according to the notation specified in E.1. 
		The function returns an ARRAY [1 : 3] OF ARRAY [1 : 3] OF REAL.
	 </p>
	 <note number="1">
	 	This function is provided as an example for applications which need rotations to be given in
		matrix notation rather than in terms of ypr angles.
		It should fit into a schema that USEs or REFERENCEs the <b>kinematic_structure_schema</b>.
	 </note>
	 <note number="2">
	 	The term 'rotation matrix' is not used uniquely within the scientific community.
	 	The result of <b>compute_rotation_matrix_from_ypr_rotation</b> is valid only for a notation as used in E.1.
	 </note>
	 <i>EXPRESS</i> specification:
	 
	 <screen>
FUNCTION compute_rotation_matrix_from_ypr_rotation
		 (yaw		: REAL;
		  pitch		: REAL;
		  roll		: REAL;
		  factor	: REAL)
				: ARRAY [1 : 3] OF ARRAY [1 : 3] OF REAL;
  LOCAL
	y, p, r	: REAL;
	result	: ARRAY [1 : 3] OF ARRAY [1 : 3] OF REAL;
  END_LOCAL;

  y := factor * yaw;
  p := factor * pitch;
  r := factor * roll;
  
  result := [ [	COS(y) * COS(p),
	-	SIN(y) * COS(p),
		SIN(p) ],
	[	SIN(y) * COS(r) + COS(y) * SIN(p) * SIN(r),
		COS(y) * COS(r) - SIN(y) * SIN(p) * SIN(r),
	-	COS(p) * SIN(r) ],
	[	SIN(y) * SIN(r) - COS(y) * SIN(p) * COS(r),
		COS(y) * SIN(r) + SIN(y) * SIN(p) * COS(r),
		COS(p) * COS(r) ] ];
  RETURN (result);
END_FUNCTION;
	 </screen>
	 <p>
	 Argument definitions:
	 </p>
	 <p>
	 	<b>yaw:</b> the yaw angle of the <b>ypr_rotation</b> which is being evaluated.
	 </p>
	 <note number="3">
	 	For an attribute <b>ypr</b> of type <b>ypr_rotation</b> in an entity <b>e</b>, the actual parameter for <b>yaw</b>
		could be either <b>e.ypr[ypr index(ypr enumeration.yaw)]</b> or just <b>e.ypr[3]</b>.
	 </note>
	 <p>
	 	<b>pitch:</b> The pitch angle of the <b>ypr_rotation</b> which is being evaluated.
	 </p>
	 <note number="4">
	 	For an attribute <b>ypr</b> of type <b>ypr_rotation</b> in an entity <b>e</b>, the actual parameter for
		<b>pitch</b> could be either <b>e.ypr[ypr index(ypr enumeration.pitch)]</b> or just <b>e.ypr[1]</b>.
	 </note>
	 <p>
	 	<b>roll:</b> The roll angle of the <b>ypr_rotation</b> which is being evaluated.
	 </p>
	 <note number="5">
	 	For an attribute <b>ypr</b> of type <b>ypr_rotation</b> in an entity <b>e</b>, the actual parameter for <b>roll</b>
		could be either <b>e.ypr[ypr index(ypr enumeration.roll)]</b> or just <b>e.ypr[2]</b>.
	 </note>
	 <p>
	 	<b>factor:</b> The conversion factor that is required to convert <b>yaw</b>, <b>pitch</b>, and <b>roll</b> into equivalent
		angle measurements using radian as the plane angle unit.
	 </p>
	 <note number="6">
	 	ISO 10303-11 requires the parameters of the <b>SIN</b> and <b>COS</b> functions to be expressed in radians.
	 </note>
 
	 <b><b>E.6 Replacement of DH-Parameters by SU-Parameters</b></b>
 	<p>
 		The principle of the DH-notation is to relate a target frame on a link (denoted <i>k</i>, e.g.) to that
		pair frame on the preceeding link (denoted <i>k</i> - 1) in the kinematic chain which belongs to the
		pair by which link <i>k</i> is connected to link <i>k</i> - 1.
		The target frame may either be a pair frame of another pair on link <i>k</i> or any other frame on link <i>k</i>, 
		e.g., a tool center point frame.
		The four DH-parameters <i>a<sub>k</sub><sup>DH</sup></i>, <i>&#945;<sub>k</sub><sup>DH</sup></i>, 
		<i>&#952;<sub>k</sub><sup>DH</sup></i>, and <i>s<sub>k</sub><sup>DH</sup></i> define the transformation 
		from the relating pair frame on link <i>k</i> - 1 to the target frame on link <i>k</i>, 
		including the motion in the pair shared by both links.
		See [2] for details of the DH-notation.
 	</p>
 	<p>
 		The use of DH-parameters is commonly restricted to links that are connected to their predecessor
		by either a revolute pair or a prismatic pair.
		One could imagine its application also to cylindrical pairs and to screw pairs.
 	</p>
 	<p>
 		When using SU-parameters, the relationship between the pair frames of the shared pair is
		separated from the kinematic link description.
		The pair is characterised by a transformation involving the pair parameters, which is specific to the pair type, 
		whereas the link data relevant to kinematics are constant transformations from an arbitrarily chosen, 
		but fixed link frame to the various pair frames on the same link. See 
		<express_ref linkend="kinematic_structure_schema:ir_express:kinematic_structure_schema.su_parameters"/>.
 	</p>
 	<p>
 		A pair and a link whose data are specified using DH-notation can easily be redefined using SU-notation.
 		The resulting frame definition will probably not take full advantage of the exibility given by 
 		the SU-notation, but it will be a valid definition.
 		The following paragraphs provide a guidance to such a redefinition.
 		The 'target frame' of the DH-notation is chosen as the link frame of link <i>k</i>, 
 		as it is usually done implicitly also with the DH-notation.
 		The SU-parameters for the pair frame on link <i>k</i> which mates with the 'relating' pair frame 
 		on the preceeding link <i>k</i> - 1 are derived from the inverse of the transformation matrix 
 		defined by the DH-parameters, with zero pair parameters.
 		Angles are given in radians; occasionally, the given values have to be replaced
		by the equivalent values in the plane angle units that are actually used by an application.
 	</p>
 	<p>
 		<b>Revolute pair:</b> For a link <i>k</i> connected to its predecessor <i>k</i> - 1 by a revolute pair, 
 		the pair transformation corresponds essentially to the yaw rotation as given in E.1, replacing there
 		<i>&#945;</i> by the pair parameter <i>&#952;<sub>k</sub><sup>DH</sup></i>.
 		The SU-parameters for the pair frame of the revolute pair on link <i>k</i>, as defined in
 		<express_ref linkend="kinematic_structure_schema:ir_express:kinematic_structure_schema.su_parameters"/>,
 		are found by setting <i>a<sub>k</sub> = a<sub>k</sub><sup>DH</sup></i>, 
 		<i>&#945;<sub>k</sub> = &#945;<sub>k</sub><sup>DH</sup></i>,
 		<i>b<sub>k</sub> = -s<sub>k</sub><sup>DH</sup></i>,
 		<i>&#946;<sub>k</sub> = &#960;</i>, <i>c<sub>k</sub> = 0</i>, and <i>&#947;<sub>k</sub> = &#960;</i>.
 	</p>
 	<p>
 		<b>Prismatic pair:</b> For a link <i>k</i> connected to its predecessor <i>k</i> - 1 by a prismatic pair, 
 		the pair transformation is a pure translational transformation along the z-axes, with
 		<i>s<sub>k</sub><sup>DH</sup></i> being the pair parameter.
 		The SU-parameters for the pair frame of the prismatic pair on link <i>k</i> are found by setting
 		<i>a<sub>k</sub> = a<sub>k</sub><sup>DH</sup></i>, 
 		<i>&#945;<sub>k</sub> = &#945;<sub>k</sub><sup>DH</sup></i>,
 		<i>b<sub>k</sub> = 0</i>,
 		<i>&#946;<sub>k</sub> = &#960; - &#952;<sub>k</sub><sup>DH</sup></i>,
 		<i>c<sub>k</sub> = 0</i>, and <i>&#947;<sub>k</sub> = &#960;</i>.
 	</p>
 	<p>
 		<b>Cylindrical pair and screw pair:</b> For a link <i>k</i> connected to its predecessor <i>k</i> - 1 by a
		cylindrical pair or by a screw pair, the pair transformation is composed of a translational transformation along the z-axes
		(pair parameter <i>s<sub>k</sub><sup>DH</sup></i>) and a rotational yaw transformation (pair
		parameter <i>&#952;<sub>k</sub><sup>DH</sup></i>).
		In the case of a cylindrical pair, the pair parameters <i>s<sub>k</sub><sup>DH</sup></i> and
		<i>&#952;<sub>k</sub><sup>DH</sup></i> are independent one from the other, whereas for a screw pair 
		one of them depends functionally on the other (see
		<express_ref linkend="kinematic_state_schema:ir_express:kinematic_state_schema.screw_pair_value"/>).
		The SU-parameters for the pair frame of the cylindrical pair or of the screw pair on link <i>k</i> 
		are found by setting
		<i>a<sub>k</sub> = a<sub>k</sub><sup>DH</sup></i>, 
 		<i>&#945;<sub>k</sub> = &#945;<sub>k</sub><sup>DH</sup></i>,
 		<i>b<sub>k</sub> = 0</i>,
 		<i>&#946;<sub>k</sub> = &#960;</i>,
 		<i>c<sub>k</sub> = 0</i>, and <i>&#947;<sub>k</sub> = &#960;</i>.
 		Here it is supposed that both pair frames of the cylindrical or screw pair coincide if both parameters,
 		<i>s<sub>k</sub><sup>DH</sup></i> and <i>&#952;<sub>k</sub><sup>DH</sup></i>, are equal to zero.
 	</p>
 </tech_discussion>
 <!-- optional annexes
 <examples/>

 <add_scope/>
-->
 <bibliography>
 <bibitem.inc ref="ISO_10303-21"/>
  <bibitem.inc ref="ref8824-1"/>  
  <bibitem.inc ref="ISO-8855"/> 
    <bibitem.inc ref="dh_knflpmbom"/>             
    <bibitem.inc ref="hr_pgt"/>       
 	<bibitem.inc ref="su_gsnfm"/>
 	 </bibliography>

</resource>

