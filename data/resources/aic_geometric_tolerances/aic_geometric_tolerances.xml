<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.17 2002/07/09 14:29:45 robbod Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  reference="ISO 10303-519"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.17"
    source="../data/resources/aic_geometric_tolerances/aic_geometric_tolerances.exp"/>

  <schema name="aic_geometric_tolerances">
    <interface
      kind="use"
      schema="measure_schema">
      <interfaced.item
        name="derived_unit"/>
      <interfaced.item
        name="named_unit"/>
    </interface>

    <interface
      kind="use"
      schema="product_property_definition_schema">
      <interfaced.item
        name="shape_aspect_relationship"/>
    </interface>

    <interface
      kind="use"
      schema="shape_aspect_definition_schema">
      <interfaced.item
        name="apex"/>
      <interfaced.item
        name="centre_of_symmetry"/>
      <interfaced.item
        name="composite_shape_aspect"/>
      <interfaced.item
        name="datum"/>
      <interfaced.item
        name="datum_feature"/>
      <interfaced.item
        name="datum_reference"/>
      <interfaced.item
        name="datum_target"/>
      <interfaced.item
        name="derived_shape_aspect"/>
      <interfaced.item
        name="extension"/>
      <interfaced.item
        name="geometric_alignment"/>
      <interfaced.item
        name="geometric_intersection"/>
      <interfaced.item
        name="parallel_offset"/>
      <interfaced.item
        name="perpendicular_to"/>
      <interfaced.item
        name="referenced_modified_datum"/>
      <interfaced.item
        name="shape_aspect_deriving_relationship"/>
      <interfaced.item
        name="symmetric_shape_aspect"/>
      <interfaced.item
        name="tangent"/>
    </interface>

    <interface
      kind="use"
      schema="shape_tolerance_schema">
      <interfaced.item
        name="dimension_related_tolerance_zone_element"/>
      <interfaced.item
        name="geometric_tolerance"/>
      <interfaced.item
        name="geometric_tolerance_relationship"/>
      <interfaced.item
        name="geometric_tolerance_with_datum_reference"/>
      <interfaced.item
        name="geometric_tolerance_with_defined_unit"/>
      <interfaced.item
        name="modified_geometric_tolerance"/>
      <interfaced.item
        name="projected_zone_definition"/>
      <interfaced.item
        name="runout_zone_definition"/>
      <interfaced.item
        name="runout_zone_orientation_reference_direction"/>
      <interfaced.item
        name="tolerance_zone"/>
      <interfaced.item
        name="tolerance_zone_definition"/>
    </interface>

    <entity
      name="angularity_tolerance"
      supertypes="geometric_tolerance_with_datum_reference">
      <where
        label="WR1"
        expression="SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt; 3">
      </where>
    </entity>

    <entity
      name="circular_runout_tolerance"
      supertypes="geometric_tolerance_with_datum_reference">
      <where
        label="WR1"
        expression="SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt;= 2">
      </where>
    </entity>

    <entity
      name="coaxiality_tolerance"
      supertypes="geometric_tolerance_with_datum_reference">
      <where
        label="WR1"
        expression="SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt;= 2">
      </where>
    </entity>

    <entity
      name="common_datum"
      supertypes="composite_shape_aspect datum">
      <where
        label="WR1"
        expression="SIZEOF (SELF.component_relationships) = 2">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (  QUERY ( sar &lt;* SELF.component_relationships| NOT (('AIC_GEOMETRIC_TOLERANCES.DATUM' IN TYPEOF (sar.related_shape_aspect)) AND NOT ('AIC_GEOMETRIC_TOLERANCES.COMMON_DATUM' IN TYPEOF (sar.related_shape_aspect))) )) = 0">
      </where>
    </entity>

    <entity
      name="concentricity_tolerance"
      supertypes="geometric_tolerance_with_datum_reference">
      <where
        label="WR1"
        expression="SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) = 1">
      </where>
    </entity>

    <entity
      name="cylindricity_tolerance"
      supertypes="geometric_tolerance">
      <where
        label="WR1"
        expression="NOT ('AIC_GEOMETRIC_TOLERANCES.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF))">
      </where>
    </entity>

    <entity
      name="flatness_tolerance"
      supertypes="geometric_tolerance">
      <where
        label="WR1"
        expression="NOT ('AIC_GEOMETRIC_TOLERANCES.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF))">
      </where>
    </entity>

    <entity
      name="line_profile_tolerance"
      supertypes="geometric_tolerance">
      <where
        label="WR1"
        expression="NOT ('AIC_GEOMETRIC_TOLERANCES.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF)) OR ( SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt;= 3)">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (  QUERY ( sar &lt;* USEDIN (SELF\geometric_tolerance.toleranced_shape_aspect, 'AIC_GEOMETRIC_TOLERANCES.' + 'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT')| (sar.name IN [ 'affected plane association', 'resulting intersection curve association' ]) )) = 1">
      </where>
    </entity>

    <entity
      name="parallelism_tolerance"
      supertypes="geometric_tolerance_with_datum_reference">
      <where
        label="WR1"
        expression="SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt; 3">
      </where>
    </entity>

    <entity
      name="perpendicularity_tolerance"
      supertypes="geometric_tolerance_with_datum_reference">
      <where
        label="WR1"
        expression="SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt;= 3">
      </where>
    </entity>

    <entity
      name="position_tolerance"
      supertypes="geometric_tolerance">
      <where
        label="WR1"
        expression="NOT ('AIC_GEOMETRIC_TOLERANCES.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF)) OR ( SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt;= 3)">
      </where>
    </entity>

    <entity
      name="roundness_tolerance"
      supertypes="geometric_tolerance">
      <where
        label="WR1"
        expression="NOT ('AIC_GEOMETRIC_TOLERANCES.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF))">
      </where>
    </entity>

    <entity
      name="straightness_tolerance"
      supertypes="geometric_tolerance">
      <where
        label="WR1"
        expression="NOT ('AIC_GEOMETRIC_TOLERANCES.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF))">
      </where>
    </entity>

    <entity
      name="surface_profile_tolerance"
      supertypes="geometric_tolerance">
      <where
        label="WR1"
        expression="NOT ('AIC_GEOMETRIC_TOLERANCES.' + 'GEOMETRIC_TOLERANCE_WITH_DATUM_REFERENCE' IN TYPEOF (SELF)) OR ( SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt;= 3)">
      </where>
    </entity>

    <entity
      name="symmetry_tolerance"
      supertypes="geometric_tolerance_with_datum_reference">
      <where
        label="WR1"
        expression="SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt;= 3">
      </where>
    </entity>

    <entity
      name="total_runout_tolerance"
      supertypes="geometric_tolerance_with_datum_reference">
      <where
        label="WR1"
        expression="SIZEOF (SELF\geometric_tolerance_with_datum_reference.datum_system) &lt;= 2">
      </where>
    </entity>

  </schema>

</express>
