<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.24 2002/10/21 13:28:40 goset1 Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="1"
	reference="ISO 10303-517"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.24"
    source="../data/resources/aic_mechanical_design_geometric_presentation/aic_mechanical_design_geometric_presentation.exp"/>

  <schema name="aic_mechanical_design_geometric_presentation">
    <interface
      kind="use"
      schema="geometry_schema">
      <interfaced.item
        name="axis2_placement_2d"/>
      <interfaced.item
        name="axis2_placement_3d"/>
    </interface>

    <interface
      kind="use"
      schema="measure_schema">
      <interfaced.item
        name="positive_ratio_measure"/>
    </interface>

    <interface
      kind="use"
      schema="presentation_appearance_schema">
      <interfaced.item
        name="curve_style"/>
      <interfaced.item
        name="curve_style_font"/>
      <interfaced.item
        name="curve_style_font_pattern"/>
      <interfaced.item
        name="fill_area_style_colour"/>
      <interfaced.item
        name="invisibility"/>
      <interfaced.item
        name="over_riding_styled_item"/>
      <interfaced.item
        name="point_style"/>
      <interfaced.item
        name="pre_defined_curve_font"/>
      <interfaced.item
        name="presentation_style_by_context"/>
      <interfaced.item
        name="styled_item"/>
      <interfaced.item
        name="surface_side_style"/>
      <interfaced.item
        name="surface_style_boundary"/>
      <interfaced.item
        name="surface_style_control_grid"/>
      <interfaced.item
        name="surface_style_fill_area"/>
      <interfaced.item
        name="surface_style_parameter_line"/>
      <interfaced.item
        name="surface_style_segmentation_curve"/>
      <interfaced.item
        name="surface_style_silhouette"/>
      <interfaced.item
        name="surface_style_usage"/>
      <interfaced.item
        name="u_direction_count"/>
      <interfaced.item
        name="v_direction_count"/>
    </interface>

    <interface
      kind="use"
      schema="presentation_organization_schema">
      <interfaced.item
        name="background_colour"/>
      <interfaced.item
        name="camera_image"/>
      <interfaced.item
        name="camera_model_d3"/>
      <interfaced.item
        name="camera_usage"/>
      <interfaced.item
        name="presentation_area"/>
      <interfaced.item
        name="presentation_representation"/>
      <interfaced.item
        name="presentation_size"/>
      <interfaced.item
        name="presentation_view"/>
    </interface>

    <interface
      kind="use"
      schema="presentation_resource_schema">
      <interfaced.item
        name="colour_rgb"/>
      <interfaced.item
        name="planar_box"/>
      <interfaced.item
        name="planar_extent"/>
      <interfaced.item
        name="pre_defined_colour"/>
    </interface>

    <interface
      kind="use"
      schema="product_property_representation_schema">
      <interfaced.item
        name="shape_representation"/>
    </interface>

    <interface
      kind="use"
      schema="representation_schema">
      <interfaced.item
        name="mapped_item"/>
      <interfaced.item
        name="representation"/>
    </interface>

    <entity
      name="camera_image_3d_with_scale"
      supertypes="camera_image">
      <derived
        name="scale"
        expression="((SELF\mapped_item.mapping_target\         planar_extent.size_in_x) / (SELF\mapped_item.mapping_source.         mapping_origin\camera_model_d3.perspective_of_volume.view_window.         size_in_x))">
        <typename
          name="positive_ratio_measure"/>
      </derived>
      <where
        label="WR1"
        expression="('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CAMERA_MODEL_D3'        IN TYPEOF (SELF\mapped_item.mapping_source.mapping_origin))">
      </where>
      <where
        label="WR2"
        expression="aspect_ratio(SELF\mapped_item.mapping_target) =        aspect_ratio(SELF\mapped_item.mapping_source.mapping_origin\        camera_model_d3.perspective_of_volume.view_window)">
      </where>
      <where
        label="WR3"
        expression="SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3.        perspective_of_volume.front_plane_clipping        AND        SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3.        perspective_of_volume.view_volume_sides_clipping">
      </where>
      <where
        label="WR4"
        expression="(SELF\mapped_item.mapping_target\planar_extent.size_in_x &gt; 0)        AND        (SELF\mapped_item.mapping_target\planar_extent.size_in_y &gt; 0)">
      </where>
      <where
        label="WR5"
        expression="(SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3.        perspective_of_volume.view_window.size_in_x &gt; 0)        AND        (SELF\mapped_item.mapping_source.mapping_origin\camera_model_d3.        perspective_of_volume.view_window.size_in_y &gt; 0)">
      </where>
      <where
        label="WR6"
        expression="('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'AXIS2_PLACEMENT_2D' IN TYPEOF (SELF\mapped_item.        mapping_target\planar_box.placement))        AND NOT ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'AXIS2_PLACEMENT_3D' IN TYPEOF (SELF\mapped_item.        mapping_target\planar_box.placement))">
      </where>
    </entity>

    <entity
      name="draughting_pre_defined_colour"
      supertypes="pre_defined_colour">
      <where
        label="WR1"
        expression="SELF.name IN               ['red',                'green',                'blue',                'yellow',                'magenta',                'cyan',                'black',                'white']">
      </where>
    </entity>

    <entity
      name="draughting_pre_defined_curve_font"
      supertypes="pre_defined_curve_font">
      <where
        label="WR1"
        expression="SELF.name IN               ['continuous',                'chain',                'chain double dash',                'dashed',                'dotted']">
      </where>
    </entity>

    <entity
      name="mechanical_design_geometric_presentation_area"
      supertypes="presentation_area">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(it1 &lt;* SELF.items |        NOT (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.AXIS2_PLACEMENT'        IN TYPEOF(it1))        OR        (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.MAPPED_ITEM'        IN TYPEOF(it1)) AND        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.PRESENTATION_VIEW'        IN TYPEOF        (it1\mapped_item.mapping_source.mapped_representation)))))) = 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(pv &lt;* QUERY(mi1 &lt;* QUERY(it1 &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.MAPPED_ITEM'        IN TYPEOF(it1)) |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.PRESENTATION_VIEW'        IN TYPEOF        (mi1\mapped_item.mapping_source.mapped_representation)) |                                                NOT (SIZEOF(QUERY(it2 &lt;* pv\mapped_item.mapping_source.        mapped_representation\representation.items |        NOT (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.AXIS2_PLACEMENT'        IN TYPEOF(it2))        OR        (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.MAPPED_ITEM'        IN TYPEOF(it2)) AND NOT        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'CAMERA_IMAGE_3D_WITH_SCALE' IN TYPEOF(it2))) AND NOT (        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.PRESENTATION_VIEW'        IN TYPEOF        (it2\mapped_item.mapping_source.mapped_representation)))        OR        (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'CAMERA_IMAGE_3D_WITH_SCALE' IN TYPEOF(it2))        AND NOT (        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION_REPRESENTATION'        IN TYPEOF (it2\mapped_item.mapping_source.mapped_representation) ))        ))) = 0))) = 0">
      </where>
      <where
        label="WR3"
        expression="(SIZEOF(QUERY(ps &lt;* USEDIN (SELF\presentation_area,        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'PRESENTATION_SIZE.UNIT') | ((ps.size\planar_extent.size_in_x &lt;= 0)        OR        (ps.size\planar_extent.size_in_y &lt;= 0)))) = 0)        AND        (SIZEOF(QUERY(ais &lt;* USEDIN (SELF\presentation_area,        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'AREA_IN_SET.AREA') |        (SIZEOF(QUERY(ps &lt;* USEDIN (ais,         'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'PRESENTATION_SIZE.UNIT') |        ((ps.size\planar_extent.size_in_x &lt;= 0)        OR        (ps.size\planar_extent.size_in_y &lt;= 0)))) &gt; 0))) = 0)">
      </where>
      <where
        label="WR4"
        expression="(SIZEOF(QUERY(ps &lt;* USEDIN (SELF\presentation_area,        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'PRESENTATION_SIZE.UNIT') |         ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'AXIS2_PLACEMENT_2D' IN TYPEOF (ps.size.placement)))) = 1)        AND        (SIZEOF(QUERY(ps &lt;* USEDIN (SELF\presentation_area,        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'PRESENTATION_SIZE.UNIT') |         ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'AXIS2_PLACEMENT_3D' IN TYPEOF (ps.size.placement)))) = 0)        OR        ((SIZEOF(QUERY(ais &lt;* USEDIN (SELF\presentation_area,        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'AREA_IN_SET.AREA') |        (SIZEOF(QUERY(ps &lt;* USEDIN (ais,         'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'PRESENTATION_SIZE.UNIT') |        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'AXIS2_PLACEMENT_2D' IN TYPEOF (ps.size.placement)))) = 1))) = 1)        AND        (SIZEOF(QUERY(ais &lt;* USEDIN (SELF\presentation_area,        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'AREA_IN_SET.AREA') |        (SIZEOF(QUERY(ps &lt;* USEDIN (ais,         'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'PRESENTATION_SIZE.UNIT') |        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'AXIS2_PLACEMENT_3D' IN TYPEOF (ps.size.placement)))) = 0))) = 1))">
      </where>
    </entity>

    <entity
      name="mechanical_design_geometric_presentation_representation"
      supertypes="representation">
      <where
        label="WR1"
        expression="SIZEOF(QUERY(it &lt;* SELF.items |        NOT (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.MAPPED_ITEM',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.AXIS2_PLACEMENT',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CAMERA_MODEL_D3']        * TYPEOF(it)) = 1))) = 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(mi &lt;* QUERY(it &lt;* SELF.items |        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.MAPPED_ITEM'        IN TYPEOF(it))) | NOT (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SHAPE_REPRESENTATION',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION_REPRESENTATION']        * TYPEOF(mi\mapped_item.mapping_source.mapped_representation))        = 1))) = 0">
      </where>
      <where
        label="WR3"
        expression="SIZEOF(QUERY(smi &lt;* QUERY(si &lt;* QUERY(it &lt;* SELF.items |        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it))) |        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.MAPPED_ITEM'        IN TYPEOF(si\styled_item.item))) | NOT (        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SHAPE_REPRESENTATION' IN TYPEOF (smi\styled_item.        item\mapped_item.mapping_source.mapped_representation))) )) = 0">
      </where>
      <where
        label="WR4"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(pss &lt;* psa.styles | NOT (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.POINT_STYLE',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.SURFACE_STYLE_USAGE']        * TYPEOF(pss)) = 1))) = 0))) = 0))) = 0">
      </where>
      <where
        label="WR5"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) |        NOT (SIZEOF(QUERY(psbc &lt;* QUERY(psa &lt;* si\styled_item.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'PRESENTATION_STYLE_BY_CONTEXT' IN TYPEOF(psa)) | NOT (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'REPRESENTATION_ITEM',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.REPRESENTATION']        * TYPEOF(psbc\presentation_style_by_context.style_context))        = 1))) = 0))) = 0">
      </where>
      <where
        label="WR6"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(ps &lt;* QUERY(pss &lt;* psa.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.POINT_STYLE'        IN TYPEOF(pss)) | NOT        (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'POSITIVE_LENGTH_MEASURE' IN TYPEOF (ps\point_style.marker_size))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.COLOUR_RGB',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_COLOUR']        * TYPEOF(ps\point_style.marker_colour))        = 1)))) = 0))) = 0))) = 0">
      </where>
      <where
        label="WR7"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(cs &lt;* QUERY(pss &lt;* psa.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE'        IN TYPEOF(pss)) | NOT((SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.COLOUR_RGB',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_COLOUR']        * TYPEOF(cs\curve_style.curve_colour)) = 1)        AND        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'POSITIVE_LENGTH_MEASURE' IN TYPEOF (cs\curve_style.curve_width))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE_FONT',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']        * TYPEOF(cs\curve_style.curve_font)) = 1)))) = 0))) = 0))) = 0">
      </where>
      <where
        label="WR8"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(ssu &lt;* QUERY(pss &lt;* psa.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.SURFACE_STYLE_USAGE'        IN TYPEOF(pss)) |        NOT ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_SIDE_STYLE' IN TYPEOF        (ssu\surface_style_usage.style)))) = 0))) = 0))) = 0">
      </where>
      <where
        label="WR9"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(ssu &lt;* QUERY(pss &lt;* psa.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.SURFACE_STYLE_USAGE'        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sses &lt;*        ssu\surface_style_usage.style\surface_side_style.styles |        NOT (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_PARAMETER_LINE',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_CONTROL_GRID',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_SILHOUETTE',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_SEGMENTATION_CURVE',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_FILL_AREA',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_BOUNDARY']        * TYPEOF(sses)) = 1))) = 0))) = 0))) = 0))) = 0">
      </where>
      <where
        label="WR10"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(ssu &lt;* QUERY(pss &lt;* psa.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.SURFACE_STYLE_USAGE'        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sspl &lt;* QUERY(sses &lt;*        ssu\surface_style_usage.style\surface_side_style.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_PARAMETER_LINE' IN TYPEOF(sses)) |        NOT (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE'        IN TYPEOF        (sspl\surface_style_parameter_line.style_of_parameter_lines))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.COLOUR_RGB',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_COLOUR']        * TYPEOF(sspl\surface_style_parameter_line.        style_of_parameter_lines\curve_style.curve_colour)) = 1)        AND (        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'POSITIVE_LENGTH_MEASURE' IN TYPEOF        (sspl\surface_style_parameter_line.        style_of_parameter_lines\curve_style.curve_width))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE_FONT',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.'+        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']        * TYPEOF(sspl\surface_style_parameter_line.        style_of_parameter_lines\curve_style.curve_font)) = 1))))        = 0))) = 0))) = 0))) = 0">
      </where>
      <where
        label="WR11"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(ssu &lt;* QUERY(pss &lt;* psa.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.SURFACE_STYLE_USAGE'        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sscg &lt;* QUERY(sses &lt;*        ssu\surface_style_usage.style\surface_side_style.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_CONTROL_GRID' IN TYPEOF(sses)) |        NOT (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE'        IN TYPEOF (sscg\surface_style_control_grid.style_of_control_grid))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.COLOUR_RGB',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_COLOUR']        * TYPEOF(sscg\surface_style_control_grid.        style_of_control_grid\curve_style.curve_colour)) = 1)        AND        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'POSITIVE_LENGTH_MEASURE' IN TYPEOF         (sscg\surface_style_control_grid.        style_of_control_grid\curve_style.curve_width))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE_FONT',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']        * TYPEOF(sscg\surface_style_control_grid.        style_of_control_grid\curve_style.curve_font)) = 1))))        = 0))) = 0))) = 0))) = 0">
      </where>
      <where
        label="WR12"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) |        NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(ssu &lt;* QUERY(pss &lt;* psa.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.SURFACE_STYLE_USAGE'        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sssh &lt;* QUERY(sses &lt;*        ssu\surface_style_usage.style\surface_side_style.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_SILHOUETTE' IN TYPEOF(sses)) |        NOT (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE'        IN TYPEOF (sssh\surface_style_silhouette.style_of_silhouette))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.COLOUR_RGB',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_COLOUR']        * TYPEOF(sssh\surface_style_silhouette.        style_of_silhouette\curve_style.curve_colour)) = 1)        AND        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'POSITIVE_LENGTH_MEASURE' IN TYPEOF        (sssh\surface_style_silhouette.style_of_silhouette\curve_style.        curve_width))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE_FONT',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']        * TYPEOF(sssh\surface_style_silhouette.        style_of_silhouette\curve_style.curve_font)) = 1))))        = 0))) = 0))) = 0))) = 0">
      </where>
      <where
        label="WR13"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(ssu &lt;* QUERY(pss &lt;* psa.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.SURFACE_STYLE_USAGE'        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(sssc &lt;* QUERY(sses &lt;*        ssu\surface_style_usage.style\surface_side_style.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_SEGMENTATION_CURVE' IN TYPEOF(sses)) |        NOT (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE'        IN TYPEOF        (sssc\surface_style_segmentation_curve.style_of_segmentation_curve))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.COLOUR_RGB',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_COLOUR']        * TYPEOF(sssc\surface_style_segmentation_curve.        style_of_segmentation_curve\curve_style.curve_colour)) = 1)        AND        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'POSITIVE_LENGTH_MEASURE' IN TYPEOF        (sssc\surface_style_segmentation_curve.        style_of_segmentation_curve\curve_style.curve_width))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE_FONT',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']        * TYPEOF(sssc\surface_style_segmentation_curve.        style_of_segmentation_curve\curve_style.curve_font)) = 1))))        = 0))) = 0))) = 0))) = 0">
      </where>
      <where
        label="WR14"
        expression="SIZEOF(QUERY(si &lt;* QUERY(it &lt;* SELF.items |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.STYLED_ITEM'        IN TYPEOF(it)) | NOT (SIZEOF(QUERY(psa &lt;* si\styled_item.styles |        NOT (SIZEOF(QUERY(ssu &lt;* QUERY(pss &lt;* psa.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.SURFACE_STYLE_USAGE'        IN TYPEOF(pss)) | NOT (SIZEOF(QUERY(ssbd &lt;* QUERY(sses &lt;*        ssu\surface_style_usage.style\surface_side_style.styles |        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'SURFACE_STYLE_BOUNDARY' IN TYPEOF(sses)) |        NOT (('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE'        IN TYPEOF (ssbd\surface_style_boundary.style_of_boundary))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.COLOUR_RGB',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_COLOUR']        * TYPEOF(ssbd\surface_style_boundary.        style_of_boundary\curve_style.curve_colour)) = 1)        AND        ('AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'POSITIVE_LENGTH_MEASURE' IN TYPEOF (ssbd\surface_style_boundary.        style_of_boundary\curve_style.curve_width))        AND (SIZEOF(        ['AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.CURVE_STYLE_FONT',        'AIC_MECHANICAL_DESIGN_GEOMETRIC_PRESENTATION.' +        'DRAUGHTING_PRE_DEFINED_CURVE_FONT']        * TYPEOF(ssbd\surface_style_boundary.        style_of_boundary\curve_style.curve_font)) = 1)))) = 0)))        = 0))) = 0))) = 0">
      </where>
    </entity>

    <function
      name="aspect_ratio">
      <parameter
        name="p">
        <typename
          name="planar_box"/>
      </parameter>
      <typename
        name="positive_ratio_measure"/>
      <algorithm>
  RETURN (p.size_in_x / p.size_in_y);
      </algorithm>

    </function>

  </schema>

</express>
