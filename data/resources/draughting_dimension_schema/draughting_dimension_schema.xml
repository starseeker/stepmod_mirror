<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.4 2001/12/14 11:56:28 robbod Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.4"
    source="../data/resources/draughting_dimension_schema/draughting_dimension_schema.exp"/>

  <schema name="draughting_dimension_schema">
    <interface
      kind="reference"
      schema="draughting_element_schema">
      <interfaced.item
        name="dimension_curve"/>
      <interfaced.item
        name="leader_curve"/>
      <interfaced.item
        name="projection_curve"/>
      <interfaced.item
        name="draughting_callout"/>
      <interfaced.item
        name="draughting_callout_relationship"/>
      <interfaced.item
        name="dimension_curve_directed_callout"/>
      <interfaced.item
        name="leader_directed_callout"/>
      <interfaced.item
        name="projection_directed_callout"/>
      <interfaced.item
        name="dimension_extent_usage"/>
    </interface>

    <entity
      name="dimension_callout"
      supertypes="draughting_callout">
      <where
        label="WR1"
        expression="('DRAUGHTING_ELEMENT_SCHEMA.LEADER_DIRECTED_CALLOUT'        IN (TYPEOF (SELF))) XOR       (SIZEOF (QUERY(dce_1 &lt;* SELF\draughting_callout.contents |       ('DRAUGHTING_ELEMENT_SCHEMA.LEADER_CURVE'        IN (TYPEOF(dce_1))))) = 0)">
      </where>
      <where
        label="WR2"
        expression="('DRAUGHTING_ELEMENT_SCHEMA.PROJECTION_DIRECTED_CALLOUT'        IN (TYPEOF (SELF))) XOR       (SIZEOF (QUERY(dce_1 &lt;* SELF\draughting_callout.contents |       ('DRAUGHTING_ELEMENT_SCHEMA.PROJECTION_CURVE'        IN (TYPEOF(dce_1))))) = 0)">
      </where>
      <where
        label="WR3"
        expression="('DRAUGHTING_ELEMENT_SCHEMA.DIMENSION_CURVE_DIRECTED_CALLOUT'        IN (TYPEOF (SELF))) XOR       (SIZEOF (QUERY(dce_1 &lt;* SELF\draughting_callout.contents |       ('DRAUGHTING_ELEMENT_SCHEMA.DIMENSION_CURVE'        IN (TYPEOF(dce_1))))) = 0)">
      </where>
    </entity>

    <entity
      name="dimension_graph"
      supertypes="dimension_curve_directed_callout">
      <where
        label="WR1"
        expression="SIZEOF(USEDIN(SELF,'DRAUGHTING_DIMENSION_SCHEMA.'+       'DIMENSION_GRAPH_PROJECTION_CURVE_USAGE.GRAPH')) &lt;= 2">
      </where>
      <where
        label="WR2"
        expression="SIZEOF(QUERY(dce &lt;* SELF\draughting_callout.contents |       'DRAUGHTING_ELEMENT_SCHEMA.PROJECTION_CURVE'       IN (TYPEOF(dce)))) = 0">
      </where>
      <where
        label="WR3"
        expression="'DRAUGHTING_DIMENSION_SCHEMA.DIMENSION_CALLOUT'        IN (TYPEOF(SELF))">
      </where>
    </entity>

    <entity
      name="dimension_graph_projection_curve_usage">
      <explicit
        name="graph">
        <typename
          name="dimension_graph"/>
      </explicit>
      <explicit
        name="projection_line">
        <typename
          name="projection_curve"/>
      </explicit>
      <explicit
        name="role">
        <typename
          name="dimension_extent_usage"/>
      </explicit>
      <unique
        label="UR1">
        <unique.attribute
          attribute="graph"/>
        <unique.attribute
          attribute="projection_line"/>
      </unique>
      <unique
        label="UR2">
        <unique.attribute
          attribute="graph"/>
        <unique.attribute
          attribute="role"/>
      </unique>
    </entity>

    <entity
      name="dimension_graph_sequence"
      supertypes="draughting_callout_relationship">
      <where
        label="WR1"
        expression="'DRAUGHTING_DIMENSION_SCHEMA.DIMENSION_GRAPH' IN       TYPEOF (SELF\draughting_callout_relationship.                    relating_draughting_callout)">
      </where>
      <where
        label="WR2"
        expression="'DRAUGHTING_DIMENSION_SCHEMA.DIMENSION_GRAPH' IN       TYPEOF (SELF\draughting_callout_relationship.                    related_draughting_callout)">
      </where>
    </entity>

  </schema>

</express>
