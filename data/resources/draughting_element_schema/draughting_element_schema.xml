<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?><!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express description.file="descriptions.xml" language_version="2" rcs.date="$Date: 2017/07/19 16:31:17 $" rcs.revision="$Revision: 1.17 $" reference="ISO 10303-101">
   <application name="JSDAI" owner="LKSoft" source="draughting_element_schema schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="draughting_element_schema">
      <interface kind="reference" schema="geometry_schema">
         <interfaced.item name="axis2_placement"/>
         <interfaced.item name="axis2_placement_2d"/>
         <interfaced.item name="axis2_placement_3d"/>
         <interfaced.item name="plane"/>
         <interfaced.item name="geometric_representation_item"/>
      </interface>
      <interface kind="reference" schema="geometric_model_schema">
         <interfaced.item name="geometric_set"/>
         <interfaced.item name="tessellated_geometric_set"/>
      </interface>
      <interface kind="reference" schema="support_resource_schema">
         <interfaced.item name="label"/>
         <interfaced.item name="text"/>
         <interfaced.item name="bag_to_set"/>
      </interface>
      <interface kind="reference" schema="presentation_definition_schema">
         <interfaced.item name="annotation_occurrence"/>
         <interfaced.item name="annotation_curve_occurrence"/>
         <interfaced.item name="annotation_fill_area_occurrence"/>
         <interfaced.item name="annotation_point_occurrence"/>
         <interfaced.item name="annotation_text"/>
         <interfaced.item name="annotation_text_occurrence"/>
         <interfaced.item name="annotation_symbol_occurrence"/>
         <interfaced.item name="symbol_representation"/>
      </interface>
      <interface kind="reference" schema="presentation_appearance_schema">
         <interfaced.item name="invisible_item"/>
         <interfaced.item name="presentation_style_assignment"/>
         <interfaced.item name="styled_item"/>
      </interface>
      <interface kind="reference" schema="presentation_organization_schema">
         <interfaced.item name="annotation_representation_select"/>
         <interfaced.item name="area_dependent_annotation_representation"/>
         <interfaced.item name="camera_model"/>
         <interfaced.item name="presentation_area"/>
         <interfaced.item name="presentation_view"/>
         <interfaced.item name="view_dependent_annotation_representation"/>
      </interface>
      <interface kind="reference" schema="presentation_resource_schema">
         <interfaced.item name="planar_box"/>
      </interface>
      <interface kind="reference" schema="product_property_definition_schema">
         <interfaced.item name="product_definition_shape"/>
         <interfaced.item name="property_definition"/>
         <interfaced.item name="shape_aspect"/>
         <interfaced.item name="shape_aspect_relationship"/>
      </interface>
      <interface kind="reference" schema="product_property_representation_schema">
         <interfaced.item name="item_identified_representation_usage"/>
         <interfaced.item name="shape_definition_representation"/>
      </interface>
      <interface kind="reference" schema="representation_schema">
         <interfaced.item name="representation"/>
         <interfaced.item name="representation_item"/>
         <interfaced.item name="mapped_item"/>
         <interfaced.item name="representation_map"/>
         <interfaced.item name="using_representations"/>
      </interface>
      <type name="annotation_plane_element">
         <select selectitems="draughting_callout styled_item"/>
      </type>
      <type name="des_annotation_representation_select">
         <select basedon="annotation_representation_select" extensible="YES" genericentity="YES" selectitems="draughting_model"/>
      </type>
      <type name="des_invisible_item">
         <select basedon="invisible_item" extensible="YES" genericentity="YES" selectitems="draughting_callout"/>
      </type>
      <type name="dimension_extent_usage">
         <enumeration items="origin target"/>
      </type>
      <type name="draughting_callout_element">
         <select extensible="YES" genericentity="YES" selectitems="annotation_curve_occurrence annotation_fill_area_occurrence annotation_symbol_occurrence annotation_text_occurrence tessellated_annotation_occurrence"/>
      </type>
      <type name="draughting_model_item_association_select">
         <select selectitems="annotation_occurrence draughting_callout"/>
      </type>
      <type name="draughting_model_item_definition">
         <select extensible="YES" genericentity="YES" selectitems="product_definition_shape property_definition shape_aspect shape_aspect_relationship"/>
      </type>
      <type name="draughting_model_item_select">
         <select selectitems="mapped_item styled_item axis2_placement camera_model draughting_callout"/>
      </type>
      <type name="plane_or_planar_box">
         <select selectitems="plane planar_box"/>
      </type>
      <entity name="annotation_plane" supertypes="annotation_occurrence geometric_representation_item">
         <explicit name="elements" optional="YES">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="annotation_plane_element"/>
         </explicit>
         <explicit name="item">
            <typename name="plane_or_planar_box"/>
            <redeclaration entity-ref="styled_item"/>
         </explicit>
         <where expression="SELF\geometric_representation_item.dim = 3" label="WR1"/>
         <where expression="NOT('PRESENTATION_RESOURCE_SCHEMA.'+'PLANAR_BOX' IN TYPEOF(SELF\styled_item.item)) OR&#10;        ('GEOMETRY_SCHEMA.'+'AXIS2_PLACEMENT_3D' IN TYPEOF(SELF\styled_item.item\planar_box.placement))" label="WR2"/>
         <where expression="(('PRESENTATION_RESOURCE_SCHEMA.'+'PLANAR_BOX' IN TYPEOF(SELF\styled_item.item)) AND&#10;        ('PRESENTATION_APPEARANCE_SCHEMA.'+'CURVE_STYLE' IN TYPEOF(SELF\styled_item.styles[1]\presentation_style_assignment.styles[1]))) OR&#10;        (('GEOMETRY_SCHEMA.'+'PLANE' IN TYPEOF(SELF\styled_item.item)) AND&#10;        ('PRESENTATION_APPEARANCE_SCHEMA.'+'FILL_AREA_STYLE' IN TYPEOF(SELF\styled_item.styles[1]\presentation_style_assignment.styles[1])))" label="WR3"/>
         <where expression="(SIZEOF(SELF\styled_item.styles) = 1) AND&#10;        (SIZEOF(SELF\styled_item.styles[1]\presentation_style_assignment.styles) = 1)" label="WR4"/>
      </entity>
      <entity name="dimension_curve" supertypes="annotation_curve_occurrence">
         <where expression="(SIZEOF(&#10;          QUERY(dct &lt;* USEDIN(SELF,'DRAUGHTING_ELEMENT_SCHEMA.' +&#10;                'TERMINATOR_SYMBOL.ANNOTATED_CURVE')&#10;               | (('DRAUGHTING_ELEMENT_SCHEMA.'+&#10;                  'DIMENSION_CURVE_TERMINATOR' IN TYPEOF(dct))&#10;                  ))&#10;          ) &lt;= 2)" label="WR1"/>
         <where expression="SIZEOF(&#10;            QUERY( dcdc &lt;* USEDIN(SELF,'DRAUGHTING_ELEMENT_SCHEMA.' +&#10;                   'DRAUGHTING_CALLOUT.CONTENTS') |&#10;                   ('DRAUGHTING_ELEMENT_SCHEMA.'+&#10;                    'DIMENSION_CURVE_DIRECTED_CALLOUT' IN TYPEOF(dcdc)))&#10;          )&gt;= 1" label="WR2"/>
         <where expression="(SIZEOF(&#10;            QUERY(dct1 &lt;* USEDIN(SELF,'DRAUGHTING_ELEMENT_SCHEMA.' +&#10;                  'TERMINATOR_SYMBOL.ANNOTATED_CURVE') &#10;               | (('DRAUGHTING_ELEMENT_SCHEMA.'+&#10;                  'DIMENSION_CURVE_TERMINATOR' IN TYPEOF(dct1)) &#10;                  AND (dct1\dimension_curve_terminator.role = dimension_extent_usage.origin)))&#10;          ) &lt;= 1)&#10;        AND &#10;        (SIZEOF(&#10;            QUERY (dct2 &lt;* USEDIN(SELF,'DRAUGHTING_ELEMENT_SCHEMA.'+&#10;                   'TERMINATOR_SYMBOL.ANNOTATED_CURVE') &#10;                 | (('DRAUGHTING_ELEMENT_SCHEMA.'+&#10;                   'DIMENSION_CURVE_TERMINATOR' IN TYPEOF(dct2))&#10;                   AND (dct2\dimension_curve_terminator.role = dimension_extent_usage.target)))&#10;         ) &lt;= 1)" label="WR3"/>
      </entity>
      <entity name="dimension_curve_directed_callout" supertypes="draughting_callout">
         <where expression="SIZEOF(QUERY(d_c&lt;*SELF\draughting_callout.contents | &#10;        'DRAUGHTING_ELEMENT_SCHEMA.DIMENSION_CURVE' IN (TYPEOF(d_c))))&lt;=2" label="WR1"/>
         <where expression="SIZEOF(SELF\draughting_callout.contents) &gt;= 2" label="WR2"/>
      </entity>
      <entity name="dimension_curve_terminator" supertypes="terminator_symbol">
         <explicit name="role">
            <typename name="dimension_extent_usage"/>
         </explicit>
         <where expression="'DRAUGHTING_ELEMENT_SCHEMA.DIMENSION_CURVE' IN TYPEOF&#10;        (SELF\terminator_symbol.annotated_curve)" label="WR1"/>
      </entity>
      <entity name="draughting_callout" supertypes="geometric_representation_item">
         <explicit name="contents">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="draughting_callout_element"/>
         </explicit>
         <where expression="(SIZEOF (QUERY (l_1 &lt;* SELF\draughting_callout.contents |&#10;        'DRAUGHTING_ELEMENT_SCHEMA.LEADER_CURVE' IN (TYPEOF(l_1)))) = 0) OR&#10;        ('DRAUGHTING_ELEMENT_SCHEMA.LEADER_DIRECTED_CALLOUT' IN (TYPEOF(SELF))) AND&#10;        (SIZEOF (QUERY (l_1 &lt;* SELF\draughting_callout.contents |&#10;        'DRAUGHTING_ELEMENT_SCHEMA.PROJECTION_CURVE' IN (TYPEOF(l_1)))) = 0) OR&#10;        ('DRAUGHTING_ELEMENT_SCHEMA.PROJECTION_DIRECTED_CALLOUT' IN (TYPEOF(SELF))) AND  &#10;        (SIZEOF (QUERY (l_1 &lt;* SELF\draughting_callout.contents |&#10;        'DRAUGHTING_ELEMENT_SCHEMA.DIMENSION_CURVE' IN (TYPEOF(l_1)))) = 0) OR&#10;        ('DRAUGHTING_ELEMENT_SCHEMA.DIMENSION_CURVE_DIRECTED_CALLOUT' IN (TYPEOF(SELF)))" label="WR1"/>
      </entity>
      <entity name="draughting_callout_relationship">
         <explicit name="name">
            <typename name="label"/>
         </explicit>
         <explicit name="description">
            <typename name="text"/>
         </explicit>
         <explicit name="relating_draughting_callout">
            <typename name="draughting_callout"/>
         </explicit>
         <explicit name="related_draughting_callout">
            <typename name="draughting_callout"/>
         </explicit>
      </entity>
      <entity name="draughting_model" supertypes="representation">
         <explicit name="items">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="draughting_model_item_select"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
         <unique label="UR1">
            <unique.attribute attribute="SELF\representation.name"/>
         </unique>
         <where expression="SIZEOF (QUERY (mi &lt;* QUERY (it &lt;* SELF.items |&#10;         ('REPRESENTATION_SCHEMA.MAPPED_ITEM' IN TYPEOF(it))) |&#10;         NOT (&#10;           SIZEOF (['PRODUCT_PROPERTY_REPRESENTATION_SCHEMA.SHAPE_REPRESENTATION',&#10;                    'DRAUGHTING_ELEMENT_SCHEMA.DRAUGHTING_MODEL'] *&#10;              TYPEOF (mi\mapped_item.mapping_source.&#10;                      mapped_representation)) = 1&#10;        ))) = 0" label="WR1"/>
         <where expression="SIZEOF (QUERY (smi &lt;* QUERY (si &lt;* QUERY (it &lt;* SELF.items |&#10;        ('PRESENTATION_APPEARANCE_SCHEMA.STYLED_ITEM' IN TYPEOF(it))) |&#10;        ('REPRESENTATION_SCHEMA.MAPPED_ITEM' IN&#10;            TYPEOF(si\styled_item.item))) |&#10;        (NOT (('PRODUCT_PROPERTY_REPRESENTATION_SCHEMA.SHAPE_REPRESENTATION' IN&#10;                 TYPEOF(smi\styled_item.item\mapped_item.&#10;                        mapping_source.mapped_representation))&#10;            AND&#10;             (SIZEOF (QUERY (sty &lt;* smi\styled_item.styles |&#10;               (NOT (SIZEOF (QUERY (psa &lt;* sty.styles |&#10;                       (NOT ('PRESENTATION_APPEARANCE_SCHEMA.CURVE_STYLE' IN TYPEOF(psa))))) = 1&#10;             )))) = 1)))&#10;        )) = 0" label="WR2"/>
      </entity>
      <entity name="draughting_model_item_association" supertypes="item_identified_representation_usage">
         <explicit name="definition">
            <typename name="draughting_model_item_definition"/>
            <redeclaration entity-ref="item_identified_representation_usage"/>
         </explicit>
         <explicit name="used_representation">
            <typename name="annotation_representation_select"/>
            <redeclaration entity-ref="item_identified_representation_usage"/>
         </explicit>
         <explicit name="identified_item">
            <typename name="draughting_model_item_association_select"/>
            <redeclaration entity-ref="item_identified_representation_usage"/>
         </explicit>
      </entity>
      <entity name="leader_curve" supertypes="annotation_curve_occurrence">
         <where expression="SIZEOF( &#10;          QUERY(ldc &lt;* USEDIN( SELF, 'DRAUGHTING_ELEMENT_SCHEMA.' +&#10;                       'DRAUGHTING_CALLOUT.CONTENTS')&#10;                   |   'DRAUGHTING_ELEMENT_SCHEMA.' +&#10;                       'LEADER_DIRECTED_CALLOUT'  IN TYPEOF(ldc))) &gt;= 1" label="WR1"/>
      </entity>
      <entity name="leader_directed_callout" supertypes="draughting_callout">
         <where expression="SIZEOF (QUERY (l_1 &lt;* SELF\draughting_callout.contents |&#10;        'DRAUGHTING_ELEMENT_SCHEMA.LEADER_CURVE' IN (TYPEOF(l_1)))) &gt;= 1" label="WR1"/>
         <where expression="SIZEOF(SELF\draughting_callout.contents) &gt;=2" label="WR2"/>
      </entity>
      <entity name="leader_terminator" supertypes="terminator_symbol">
         <where expression="'DRAUGHTING_ELEMENT_SCHEMA.LEADER_CURVE' IN TYPEOF&#10;        (SELF\terminator_symbol.annotated_curve)" label="WR1"/>
      </entity>
      <entity name="projection_curve" supertypes="annotation_curve_occurrence"/>
      <entity name="projection_directed_callout" supertypes="draughting_callout">
         <where expression="SIZEOF(QUERY(p_1&lt;*SELF\draughting_callout.contents | &#10;        'DRAUGHTING_ELEMENT_SCHEMA.PROJECTION_CURVE' IN (TYPEOF(p_1))))&lt;=2" label="WR1"/>
         <where expression="SIZEOF(SELF\draughting_callout.contents) &gt;=2" label="WR2"/>
      </entity>
      <entity name="terminator_symbol" supertypes="annotation_symbol_occurrence">
         <explicit name="annotated_curve">
            <typename name="annotation_curve_occurrence"/>
         </explicit>
      </entity>
      <entity name="tessellated_annotation_occurrence" supertypes="annotation_occurrence">
         <explicit name="item">
            <typename name="tessellated_geometric_set"/>
            <redeclaration entity-ref="styled_item"/>
         </explicit>
      </entity>
      <subtype.constraint entity="annotation_curve_occurrence" name="annotation_curve_subtypes" super.expression="ONEOF (dimension_curve, leader_curve, projection_curve)"/>
      <subtype.constraint entity="annotation_occurrence" name="annotation_occurrence_subtypes" super.expression="ONEOF (annotation_curve_occurrence, annotation_fill_area_occurrence, annotation_plane, annotation_point_occurrence, annotation_symbol_occurrence, annotation_text_occurrence, tessellated_annotation_occurrence)"/>
   </schema>
</express>
