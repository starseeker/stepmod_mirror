<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express description.file="descriptions.xml" language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" reference="ISO 10303-107">
   <application name="JSDAI" owner="LKSoft" source="fea_definition_relationships_schema schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="fea_definition_relationships_schema">
      <interface kind="reference" schema="product_property_definition_schema">
         <interfaced.item name="general_property"/>
         <interfaced.item name="property_definition"/>
      </interface>
      <interface kind="reference" schema="structural_response_representation_schema">
         <interfaced.item name="analysis_item_within_representation"/>
         <interfaced.item name="consistent_element_reference"/>
         <interfaced.item name="curve_element_section_definition"/>
         <interfaced.item name="element_aspect"/>
         <interfaced.item name="element_representation"/>
         <interfaced.item name="fea_model"/>
         <interfaced.item name="node_representation"/>
         <interfaced.item name="surface_section"/>
         <interfaced.item name="surface_section_field"/>
      </interface>
      <interface kind="reference" schema="support_resource_schema">
         <interfaced.item name="identifier"/>
         <interfaced.item name="label"/>
         <interfaced.item name="text"/>
      </interface>
      <interface kind="reference" schema="topology_schema"/>
      <entity name="element_topological_relationship">
         <explicit name="aspect">
            <typename name="element_aspect"/>
         </explicit>
         <explicit name="element_ref">
            <typename name="element_representation"/>
         </explicit>
         <explicit name="item">
            <typename name="analysis_item_within_representation"/>
         </explicit>
         <where expression="'TOPOLOGY_SCHEMA.TOPOLOGICAL_REPRESENTATION_ITEM' IN TYPEOF (item.item)" label="WR1"/>
         <where expression="consistent_topological_reference (aspect, item.item)" label="WR2"/>
         <where expression="consistent_element_reference (aspect, element_ref)" label="WR3"/>
      </entity>
      <entity name="fea_beam_section_idealisation_relationship">
         <explicit name="id">
            <typename name="identifier"/>
         </explicit>
         <explicit name="name">
            <typename name="label"/>
         </explicit>
         <explicit name="description" optional="YES">
            <typename name="text"/>
         </explicit>
         <explicit name="idealised">
            <typename name="general_property"/>
         </explicit>
         <explicit name="idealising">
            <typename name="curve_element_section_definition"/>
         </explicit>
      </entity>
      <entity name="fea_model_topological_relationship">
         <explicit name="item">
            <typename name="analysis_item_within_representation"/>
         </explicit>
         <explicit name="model_ref">
            <typename name="fea_model"/>
         </explicit>
         <where expression="'TOPOLOGICAL_DEFINITION_AND_MESH_SCHEMA.MESH' IN TYPEOF (item.item)" label="WR1"/>
      </entity>
      <entity name="fea_shell_section_distribution_idealisation_relationship">
         <explicit name="id">
            <typename name="identifier"/>
         </explicit>
         <explicit name="name">
            <typename name="label"/>
         </explicit>
         <explicit name="description" optional="YES">
            <typename name="text"/>
         </explicit>
         <explicit name="idealised">
            <typename name="property_definition"/>
         </explicit>
         <explicit name="idealising">
            <typename name="surface_section_field"/>
         </explicit>
      </entity>
      <entity name="fea_shell_section_idealisation_relationship">
         <explicit name="id">
            <typename name="identifier"/>
         </explicit>
         <explicit name="name">
            <typename name="label"/>
         </explicit>
         <explicit name="description" optional="YES">
            <typename name="text"/>
         </explicit>
         <explicit name="idealised">
            <typename name="general_property"/>
         </explicit>
         <explicit name="idealising">
            <typename name="surface_section"/>
         </explicit>
      </entity>
      <entity name="node_topological_relationship">
         <explicit name="item">
            <typename name="analysis_item_within_representation"/>
         </explicit>
         <explicit name="node_ref">
            <typename name="node_representation"/>
         </explicit>
         <where expression="'TOPOLOGY_SCHEMA.VERTEX' IN TYPEOF (item.item)" label="WR1"/>
      </entity>
      <function name="consistent_topological_reference">
         <parameter name="aspect">
            <builtintype type="GENERIC"/>
         </parameter>
         <parameter name="item">
            <typename name="topological_representation_item"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>LOCAL
      status : BOOLEAN;
      srrs   : STRING;
    END_LOCAL;

    status := FALSE;
    srrs := 'STRUCTURAL_RESPONSE_REPRESENTATION_SCHEMA.';

    IF (srrs + 'ELEMENT_VOLUME') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.CLOSED_SHELL' IN TYPEOF(item) THEN
        status := TRUE;
      END_IF;
    END_IF;

    IF (srrs + 'VOLUME_3D_FACE') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.FACE' IN TYPEOF(item) THEN
        status := TRUE;
      END_IF;
    END_IF;

    IF (srrs + 'VOLUME_2D_FACE') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.EDGE' IN TYPEOF(item) THEN
        status := TRUE;
      END_IF;
    END_IF;

    IF (srrs + 'SURFACE_3D_FACE') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.FACE' IN TYPEOF(item) THEN
        status := TRUE;
      END_IF;
    END_IF;

    IF (srrs + 'SURFACE_2D_FACE') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.EDGE' IN TYPEOF(item) THEN
        status := TRUE;
      END_IF;
    END_IF;

    IF (srrs + 'VOLUME_3D_EDGE') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.EDGE' IN TYPEOF(item) THEN
        status := TRUE;
      END_IF;
    END_IF;

    IF (srrs + 'VOLUME_2D_EDGE') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.VERTEX' IN TYPEOF(item) THEN
        status := TRUE;
      END_IF;
    END_IF;

    IF (srrs + 'SURFACE_3D_EDGE') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.EDGE' IN TYPEOF(item) THEN
        status := TRUE;
      END_IF;
    END_IF;



    IF (srrs + 'SURFACE_2D_EDGE') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.VERTEX' IN TYPEOF(item) THEN
        status := TRUE;
      END_IF;
    END_IF;

    IF (srrs + 'CURVE_EDGE') IN TYPEOF(aspect) THEN
      IF 'TOPOLOGY_SCHEMA.EDGE' IN TYPEOF(item) THEN
        status := TRUE;

      END_IF;
    END_IF;

    IF 'TOPOLOGICAL_DEFINITION_AND_MESH_SCHEMA.TOPOLOGICAL_REGION' IN TYPEOF(item) THEN
      status := TRUE;
    END_IF;

  RETURN(status);</algorithm>
      </function>
   </schema>
</express>
