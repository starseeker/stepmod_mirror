<?xml version='1.0' encoding='UTF-8'?>
<!-- $Id: express2xml.js,v 1.38 2004/08/24 16:58:55 thendrix Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml2.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.38"
    source="hierarchy_schema.exp"/>

  <schema name="hierarchy_schema">

    <interface
      kind="reference"
      schema="analysis_schema">
      <interfaced.item
        name="model_action_domain"/>
      <interfaced.item
        name="model_product_domain_with_mesh"/>
      <interfaced.item
        name="numerical_model"/>
    </interface>
    <interface
      kind="reference"
      schema="conditions_schema">
      <interfaced.item
        name="fd_zone_bc"/>
      <interfaced.item
        name="mbna_family"/>
      <interfaced.item
        name="mbna_integral_data"/>
      <interfaced.item
        name="mbna_reference_state"/>
      <interfaced.item
        name="mbna_zone_bc"/>
    </interface>
    <interface
      kind="reference"
      schema="domain_schema">
      <interfaced.item
        name="grid_coordinates"/>
    </interface>
    <interface
      kind="reference"
      schema="equations_schema">
      <interfaced.item
        name="flow_equation_set"/>
      <interfaced.item
        name="mbna_equation_set"/>
    </interface>
    <interface
      kind="reference"
      schema="mesh_connectivity_schema">
      <interfaced.item
        name="multiple_mesh_block"/>
    </interface>
    <interface
      kind="reference"
      schema="mesh_topology_schema">
      <interfaced.item
        name="structured_mesh"/>
      <interfaced.item
        name="unstructured_mesh"/>
    </interface>
    <interface
      kind="reference"
      schema="results_schema">
      <interfaced.item
        name="mbna_discrete_data"/>
      <interfaced.item
        name="mbna_history"/>
      <interfaced.item
        name="mbna_solution"/>
    </interface>
    <entity
      name="fd_step"
      supertypes="mbna_step">
      <explicit
        name="equations">
        <aggregate
          type="SET"/>
        <typename
          name="flow_equation_set"/>
        <redeclaration
          entity-ref="mbna_step"/>
        </explicit>
        <explicit
          name="zones">
          <aggregate
            type="LIST"/>
          <typename
            name="fd_zone"/>
          <redeclaration
            entity-ref="mbna_step"/>
          </explicit>
        </entity>

        <entity
          name="fd_zone"
          supertypes="mbna_zone">
          <explicit
            name="conditions">
            <aggregate
              type="SET"/>
            <typename
              name="fd_zone_bc"/>
            <redeclaration
              entity-ref="mbna_zone"/>
            </explicit>
            <explicit
              name="equations">
              <aggregate
                type="SET"/>
              <typename
                name="flow_equation_set"/>
              <redeclaration
                entity-ref="mbna_zone"/>
              </explicit>
            </entity>

            <entity
              name="mbna_model"
              supertypes="numerical_model">
              <explicit
                name="data">
                <aggregate
                  type="SET"/>
                <typename
                  name="mbna_integral_data"/>
              </explicit>
              <explicit
                name="equations">
                <aggregate
                  type="SET"/>
                <typename
                  name="mbna_equation_set"/>
              </explicit>
              <explicit
                name="steps">
                <aggregate
                  type="LIST"/>
                <typename
                  name="mbna_step"/>
              </explicit>
              <inverse
                name="history"
                entity="mbna_history"
                attribute="domain">
                <inverse.aggregate
                  type="SET"
                  lower="0"
                  upper="?"/>
              </inverse>
            </entity>

            <entity
              name="mbna_step"
              supertypes="model_action_domain">
              <explicit
                name="data">
                <aggregate
                  type="SET"/>
                <typename
                  name="mbna_integral_data"/>
              </explicit>
              <explicit
                name="equations">
                <aggregate
                  type="SET"/>
                <typename
                  name="mbna_equation_set"/>
              </explicit>
              <explicit
                name="families">
                <aggregate
                  type="SET"/>
                <typename
                  name="mbna_family"/>
              </explicit>
              <explicit
                name="refstate">
                <aggregate
                  type="SET"/>
                <typename
                  name="mbna_reference_state"/>
              </explicit>
              <explicit
                name="zones">
                <aggregate
                  type="LIST"/>
                <typename
                  name="mbna_zone"/>
              </explicit>
              <inverse
                name="history"
                entity="mbna_history"
                attribute="domain">
                <inverse.aggregate
                  type="SET"
                  lower="0"
                  upper="?"/>
              </inverse>
            </entity>

            <entity
              name="mbna_structured_zone"
              supertypes="mbna_zone">
              <explicit
                name="model_mesh">
                <typename
                  name="structured_mesh"/>
                <redeclaration
                  entity-ref="model_product_domain_with_mesh"/>
                </explicit>
              </entity>

              <entity
                name="mbna_unstructured_zone"
                supertypes="mbna_zone">
                <explicit
                  name="model_mesh">
                  <typename
                    name="unstructured_mesh"/>
                  <redeclaration
                    entity-ref="model_product_domain_with_mesh"/>
                  </explicit>
                </entity>

                <entity
                  name="mbna_zone"
                  supertypes="model_product_domain_with_mesh">
                  <explicit
                    name="cell_dimension">
                    <builtintype
                      type="INTEGER"/>
                  </explicit>
                  <explicit
                    name="conditions">
                    <aggregate
                      type="SET"/>
                    <typename
                      name="mbna_zone_bc"/>
                  </explicit>
                  <explicit
                    name="equations">
                    <aggregate
                      type="SET"/>
                    <typename
                      name="mbna_equation_set"/>
                  </explicit>
                  <explicit
                    name="families">
                    <aggregate
                      type="SET"/>
                    <typename
                      name="mbna_family"/>
                  </explicit>
                  <explicit
                    name="global_data">
                    <aggregate
                      type="SET"/>
                    <typename
                      name="mbna_integral_data"/>
                  </explicit>
                  <explicit
                    name="grid_connectivity"
                    optional="YES">
                    <typename
                      name="multiple_mesh_block"/>
                  </explicit>
                  <explicit
                    name="nindices">
                    <builtintype
                      type="INTEGER"/>
                  </explicit>
                  <explicit
                    name="physical_dimension">
                    <builtintype
                      type="INTEGER"/>
                  </explicit>
                  <explicit
                    name="rstate">
                    <aggregate
                      type="SET"/>
                    <typename
                      name="mbna_reference_state"/>
                  </explicit>
                  <inverse
                    name="coordinates"
                    entity="grid_coordinates"
                    attribute="domain">
                    <inverse.aggregate
                      type="SET"
                      lower="0"
                      upper="?"/>
                  </inverse>
                  <inverse
                    name="field_data"
                    entity="mbna_discrete_data"
                    attribute="domain">
                    <inverse.aggregate
                      type="SET"
                      lower="0"
                      upper="?"/>
                  </inverse>
                  <inverse
                    name="history"
                    entity="mbna_history"
                    attribute="domain">
                    <inverse.aggregate
                      type="SET"
                      lower="0"
                      upper="?"/>
                  </inverse>
                  <inverse
                    name="solution"
                    entity="mbna_solution"
                    attribute="domain">
                    <inverse.aggregate
                      type="SET"
                      lower="0"
                      upper="?"/>
                  </inverse>
                </entity>

                <subtype.constraint name="sc1_mbna_zone"
                  entity="mbna_zone"
                  abstract.supertype="YES"
                  super.expression="ONEOF(mbna_structured_zone, mbna_unstructured_zone)">
                </subtype.constraint>
              </schema>
            </express>
