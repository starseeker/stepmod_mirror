<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express description.file="descriptions.xml" language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" reference="ISO 13584-42">
   <application name="JSDAI" owner="LKSoft" source="iso13584_iec61360_language_resource_schema schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="iso13584_iec61360_language_resource_schema">
      <interface kind="reference" schema="support_resource_schema">
         <interfaced.item name="identifier"/>
         <interfaced.item name="label"/>
         <interfaced.item name="text"/>
      </interface>
      <type name="language_code">
         <typename name="identifier"/>
      </type>
      <type name="translatable_label">
         <select selectitems="label translated_label"/>
      </type>
      <type name="translatable_text">
         <select selectitems="text translated_text"/>
      </type>
      <entity name="global_language_assignment">
         <explicit name="language">
            <typename name="language_code"/>
         </explicit>
      </entity>
      <entity name="present_translations">
         <explicit name="language_codes">
            <aggregate lower="1" type="LIST" unique="YES" upper="?"/>
            <typename name="language_code"/>
         </explicit>
         <unique label="UR1">
            <unique.attribute attribute="language_codes"/>
         </unique>
      </entity>
      <entity name="translated_label">
         <explicit name="labels">
            <aggregate lower="1" type="LIST" upper="?"/>
            <typename name="label"/>
         </explicit>
         <explicit name="languages">
            <typename name="present_translations"/>
         </explicit>
         <where expression="SIZEOF(labels) = SIZEOF(languages.language_codes)" label="WR1"/>
      </entity>
      <entity name="translated_text">
         <explicit name="texts">
            <aggregate lower="1" type="LIST" upper="?"/>
            <typename name="text"/>
         </explicit>
         <explicit name="languages">
            <typename name="present_translations"/>
         </explicit>
         <where expression="SIZEOF(texts) = SIZEOF(languages.language_codes)" label="WR1"/>
      </entity>
      <rule appliesto="global_language_assignment" name="single_language_assignment">
         <where expression="SIZEOF(global_language_assignment) &lt;= 1" label="no_label_1"/>
      </rule>
      <function name="check_label_length">
         <parameter name="l">
            <typename name="translatable_label"/>
         </parameter>
         <parameter name="l_length">
            <builtintype type="INTEGER"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>IF 'ISO13584_IEC61360_LANGUAGE_RESOURCE_SCHEMA.TRANSLATED_LABEL' 
    IN TYPEOF(l) 
THEN 
    REPEAT i :=1 TO SIZEOF(l.labels);
        IF LENGTH(l.labels[i]) &gt; l_length 
        THEN
            RETURN(FALSE);
        END_IF;
    END_REPEAT;

    RETURN(TRUE);

ELSE 
    RETURN(LENGTH(l) &lt;= l_length); 
END_IF;</algorithm>
      </function>
      <function name="check_text_length">
         <parameter name="t">
            <typename name="translatable_text"/>
         </parameter>
         <parameter name="t_length">
            <builtintype type="INTEGER"/>
         </parameter>
         <builtintype type="BOOLEAN"/>
         <algorithm>IF 'ISO13584_IEC61360_LANGUAGE_RESOURCE_SCHEMA.TRANSLATED_TEXT' 
    IN TYPEOF(t) 
THEN 
    REPEAT i :=1 TO SIZEOF(t.texts);
        IF LENGTH(t.texts[i]) &gt; t_length 
        THEN
            RETURN(FALSE);
        END_IF;
    END_REPEAT;

    RETURN(TRUE);

ELSE 
    RETURN(LENGTH(t) &lt;= t_length); 
END_IF;</algorithm>
      </function>
   </schema>
</express>
