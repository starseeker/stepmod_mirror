<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">

<express description.file="descriptions.xml" language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" reference="ISO 10303-105">
   <application name="JSDAI" owner="LKSoft" source="kinematic_motion_representation_schema schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="kinematic_motion_representation_schema">
      <interface kind="reference" schema="geometry_schema">
         <interfaced.item name="axis2_placement"/>
         <interfaced.item name="b_spline_curve"/>
         <interfaced.item name="b_spline_surface"/>
         <interfaced.item name="bounded_curve"/>
         <interfaced.item name="cartesian_point"/>
         <interfaced.item name="curve"/>
         <interfaced.item name="geometric_representation_context"/>
         <interfaced.item name="geometric_representation_item"/>
         <interfaced.item name="placement"/>
         <interfaced.item name="transition_code"/>
      </interface>
      <interface kind="reference" schema="measure_schema">
         <interfaced.item name="length_measure"/>
         <interfaced.item name="measure_with_unit"/>
         <interfaced.item name="parameter_value"/>
         <interfaced.item name="plane_angle_measure"/>
         <interfaced.item name="unit"/>
      </interface>
      <interface kind="reference" schema="representation_schema">
         <interfaced.item name="definitional_representation"/>
         <interfaced.item name="founded_item"/>
         <interfaced.item name="functionally_defined_transformation"/>
         <interfaced.item name="item_defined_transformation"/>
         <interfaced.item name="item_in_context"/>
         <interfaced.item name="parametric_representation_context"/>
         <interfaced.item name="representation"/>
         <interfaced.item name="representation_item"/>
         <interfaced.item name="representation_relationship"/>
         <interfaced.item name="definitional_representation_relationship"/>
         <interfaced.item name="representation_relationship_with_transformation"/>
         <interfaced.item name="using_representations"/>
      </interface>
      <interface kind="reference" schema="kinematic_structure_schema">
         <interfaced.item name="kinematic_link_representation"/>
         <interfaced.item name="rigid_placement"/>
      </interface>
      <interface kind="reference" schema="kinematic_state_schema">
         <interfaced.item name="rotation_about_direction"/>
         <interfaced.item name="spatial_rotation"/>
         <interfaced.item name="ypr_rotation"/>
         <interfaced.item name="mechanism_state_representation"/>
      </interface>
      <interface kind="reference" schema="product_property_representation_schema">
         <interfaced.item name="shape_representation"/>
      </interface>
      <type name="interpolation_type">
         <enumeration extensible="NO" items="undefined discontinuous synchronous linear"/>
      </type>
      <type name="link_or_shape_representation">
         <select extensible="NO" genericentity="NO" selectitems="kinematic_link_representation shape_representation"/>
      </type>
      <entity abstract.entity="NO" abstract.supertype="NO" name="circular_path" supertypes="path_node">
         <explicit name="via_point" optional="NO">
            <typename name="cartesian_point"/>
         </explicit>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="curve_based_path" supertypes="path_node">
         <explicit name="path_curve" optional="NO">
            <typename name="curve"/>
         </explicit>
      <where label="IP1"/>
         <where label="IP2"/>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="curve_based_path_with_orientation" supertypes="kinematic_path_segment">
         <explicit name="position_curve" optional="NO">
            <typename name="bounded_curve"/>
         </explicit>
         <explicit name="orientation_curve" optional="NO">
            <typename name="bounded_curve"/>
         </explicit>
         <where expression="TYPEOF(position_curve) = TYPEOF(orientation_curve)" label="WR1"/>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="geometric_representation_context_with_parameter" supertypes="geometric_representation_context">
         <explicit name="parameter_unit" optional="YES">
            <typename name="unit"/>
         </explicit>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="interpolated_configuration_representation" supertypes="representation">
         <explicit name="context_of_items" optional="NO">
            <typename name="geometric_representation_context_with_parameter"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
         <explicit name="items" optional="NO">
            <aggregate lower="1" optional="NO" type="SET" unique="NO" upper="1"/>
            <typename name="interpolated_configuration_sequence"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="interpolated_configuration_segment" supertypes="founded_item">
         <explicit name="state" optional="NO">
            <typename name="mechanism_state_representation"/>
         </explicit>
         <explicit name="t_parameter" optional="NO">
            <typename name="parameter_value"/>
         </explicit>
         <explicit name="interpolation" optional="NO">
            <typename name="interpolation_type"/>
         </explicit>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="interpolated_configuration_sequence" supertypes="representation_item">
         <explicit name="segments" optional="NO">
            <aggregate lower="1" optional="NO" type="LIST" unique="NO" upper="?"/>
            <typename name="interpolated_configuration_segment"/>
         </explicit>
         <derived expression="SIZEOF(segments)" name="n_segments">
            <builtintype fixed="NO" type="INTEGER"/>
         </derived>
         <derived expression="segments[n_segments].interpolation &lt;&gt; discontinuous" name="closed_interpoltation">
            <builtintype fixed="NO" type="LOGICAL"/>
         </derived>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="kinematic_path" supertypes="geometric_representation_item">
         <explicit name="segments" optional="NO">
            <aggregate lower="1" optional="NO" type="LIST" unique="NO" upper="?"/>
            <typename name="kinematic_path_segment"/>
         </explicit>
         <explicit name="t_start" optional="NO">
            <typename name="parameter_value"/>
         </explicit>
         <derived expression="SIZEOF(segments)" name="n_segments">
            <builtintype fixed="NO" type="INTEGER"/>
         </derived>
         <derived expression="segments[n_segments].transition &lt;&gt; discontinuous" name="closed_path">
            <builtintype fixed="NO" type="LOGICAL"/>
         </derived>
         <where expression="SIZEOF(QUERY(using_rep &lt;* using_representations(SELF)| &#10;        NOT('KINEMATIC_MOTION_REPRESENTATION_SCHEMA.GEOMETRIC_REPRESENTATION_CONTEXT_WITHPARAMETER' IN TYPEOF(using_rep.context_of_items))))= 0" label="WR1"/>
         <where expression="('KINEMATIC_MOTION_REPRESENTATION_SCHEMA.CURVE_BASED_PATH_WITH_ORIENTATION' IN TYPEOF(segments[1]))&#10;      OR (n_segments &gt; 1)" label="WR2"/>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="YES" name="kinematic_path_segment" super.expression="ONEOF (path_node, curve_based_path_with_orientation) ANDOR path_parametrization" supertypes="founded_item">
         <explicit name="t_end" optional="NO">
            <typename name="parameter_value"/>
         </explicit>
         <explicit name="transition" optional="YES">
            <typename name="transition_code"/>
         </explicit>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="linear_path" supertypes="path_node">
         <derived expression="continuous" name="transition">
            <typename name="transition_code"/>
            <redeclaration entity-ref="kinematic_path_segment"/>
         </derived>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="link_motion_relationship" supertypes="representation_relationship_with_transformation definitional_representation_relationship">
         <explicit name="rep_1" optional="NO">
            <typename name="link_or_shape_representation"/>
            <redeclaration entity-ref="representation_relationship"/>
         </explicit>
         <explicit name="rep_2" optional="NO">
            <typename name="link_motion_representation_along_path"/>
            <redeclaration entity-ref="representation_relationship"/>
         </explicit>
         <explicit name="transformation_operator" optional="NO">
            <typename name="link_motion_transformation"/>
            <redeclaration entity-ref="representation_relationship_with_transformation"/>
         </explicit>
         <where expression="transformation_operator\item_defined_transformation.transform_item_1 IN rep_1.items" label="WR1"/>
         <where expression="transformation_operator\item_defined_transformation.transform_item_2 IN rep_2.items" label="WR2"/>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="link_motion_representation_along_path" supertypes="representation">
         <explicit name="items" optional="NO">
            <aggregate lower="1" optional="NO" type="SET" unique="NO" upper="?"/>
            <typename name="kinematic_path"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
         <explicit name="context_of_items" optional="NO">
            <typename name="geometric_representation_context_with_parameter"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="link_motion_transformation" supertypes="item_defined_transformation">
         <explicit name="transform_item_1" optional="NO">
            <typename name="rigid_placement"/>
            <redeclaration entity-ref="item_defined_transformation"/>
         </explicit>
         <explicit name="transform_item_2" optional="NO">
            <typename name="kinematic_path"/>
            <redeclaration entity-ref="item_defined_transformation"/>
         </explicit>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="YES" name="path_node" super.expression="ONEOF (point_to_point_path, circular_path, linear_path, curve_based_path)" supertypes="kinematic_path_segment">
         <explicit name="placement_end" optional="NO">
            <typename name="placement"/>
         </explicit>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="path_parameter_representation" supertypes="definitional_representation">
         <explicit name="context_of_items" optional="NO">
            <typename name="path_parameter_representation_context"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
         <explicit name="items" optional="NO">
            <aggregate lower="1" optional="NO" type="SET" unique="NO" upper="?"/>
            <typename name="bounded_curve"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
         <where expression="SELF\representation.context_of_items\geometric_representation_context.coordinate_space_dimension = 2" label="WR1"/>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="path_parameter_representation_context" supertypes="geometric_representation_context parametric_representation_context"/>
      <entity abstract.entity="NO" abstract.supertype="NO" name="path_parametrization" supertypes="kinematic_path_segment">
         <explicit name="parameters" optional="NO">
            <typename name="path_parameter_representation"/>
         </explicit>
         <where expression="NOT item_in_context(SELF, parameters.context_of_items)" label="WR1"/>
      </entity>
      <entity abstract.entity="NO" abstract.supertype="NO" name="point_to_point_path" supertypes="path_node">
         <derived expression="discontinuous" name="transition">
            <typename name="transition_code"/>
            <redeclaration entity-ref="kinematic_path_segment"/>
         </derived>
      </entity>
      <subtype.constraint abstract.supertype="NO" entity="representation" name="kmr_representation_subtypes" super.expression="ONEOF (interpolated_configuration_representation, link_motion_representation_along_path)"/>
      <subtype.constraint abstract.supertype="NO" entity="geometric_representation_item" name="kmr_geometric_representation_item_subtypes" super.expression="ONEOF (kinematic_path, placement)"/>
      <subtype.constraint abstract.supertype="NO" entity="geometric_representation_context" name="kmr_geometric_representation_context_subtypes" super.expression="ONEOF (geometric_representation_context_with_parameter, path_parameter_representation_context)"/>
   </schema>
</express>
