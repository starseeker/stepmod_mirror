SCHEMA kinematic_property_schema;

REFERENCE FROM kinematic_structure_schema (
  kinematic_link_representation,
  mechanism_representation
);

REFERENCE FROM kinematic_state_schema (
  mechanism_state_representation
);

REFERENCE FROM kinematic_topology_schema (
  kinematic_link,
  kinematic_topology_representation
);

REFERENCE FROM product_property_definition_schema (
  property_definition
);

REFERENCE FROM product_property_representation_schema (
  property_definition_representation
);


TYPE kinematic_representation_select = SELECT (
  mechanism_representation,
  kinematic_topology_representation,
  mechanism_state_representation
  );
END_TYPE;  

TYPE mechanism_representation_select = SELECT (
  mechanism_representation,
  mechanism_state_representation
  );
END_TYPE;  

ENTITY kinematic_property_definition
  SUBTYPE OF (property_definition);
INVERSE
  representation_relation : kinematic_property_representation_relation FOR definition; 
END_ENTITY;

ENTITY kinematic_property_representation_relation
  SUBTYPE OF (property_definition_representation);
  SELF\property_definition_representation.definition : kinematic_property_definition; -- LK
  SELF\property_definition_representation.used_representation  : kinematic_representation_select; -- LK
UNIQUE
  UR1: SELF\property_definition_representation.definition;
(* LK
WHERE
  WR1: 'KINEMATIC_STRUCTURE_SCHEMA.KINEMATIC_PROPERTY_DEFINITION'
         IN TYPEOF (SELF\property_definition_representation.definition);
  WR2: 'KINEMATIC_STRUCTURE_SCHEMA.KINEMATIC_GROUND_REPRESENTATION'
         IN TYPEOF (SELF\property_definition_representation.used_representation);
*)         
END_ENTITY;

ENTITY kinematic_property_topology_representation_with_base
  SUBTYPE OF (kinematic_property_representation_relation);
  SELF\property_definition_representation.used_representation  : kinematic_topology_representation; 
  base : kinematic_link;
END_ENTITY;

ENTITY kinematic_property_mechanism_representation_relation_with_base
  SUBTYPE OF (kinematic_property_representation_relation);
  SELF\property_definition_representation.used_representation  : mechanism_representation_select; 
  base : kinematic_link_representation;
END_ENTITY;


END_SCHEMA;

