<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express
  SYSTEM "../../../dtd/express.dtd">
<express description.file="descriptions.xml" language_version="2" rcs.date="$Date$" rcs.revision="$Revision$" reference="">
   <application name="JSDAI" owner="LKSoft" source="kinematic_state_schema schema_instance" url="www.lksoft.com" version="4.0 beta"/>
   <schema name="kinematic_state_schema">
      <interface kind="reference" schema="kinematic_structure_schema"/>
      <interface kind="reference" schema="geometry_schema">
         <interfaced.item name="axis2_placement_3d"/>
         <interfaced.item name="cartesian_transformation_operator_3d"/>
         <interfaced.item name="curve"/>
         <interfaced.item name="direction"/>
         <interfaced.item name="geometric_representation_context"/>
         <interfaced.item name="geometric_representation_item"/>
         <interfaced.item name="normalise"/>
         <interfaced.item name="point"/>
         <interfaced.item name="point_on_curve"/>
         <interfaced.item name="point_on_surface"/>
         <interfaced.item name="surface"/>
         <interfaced.item name="rectangular_trimmed_surface"/>
         <interfaced.item name="trimmed_curve"/>
      </interface>
      <interface kind="reference" schema="measure_schema">
         <interfaced.item name="conversion_based_unit"/>
         <interfaced.item name="global_unit_assigned_context"/>
         <interfaced.item name="length_measure"/>
         <interfaced.item name="plane_angle_measure"/>
         <interfaced.item name="si_prefix"/>
         <interfaced.item name="si_unit"/>
         <interfaced.item name="si_unit_name"/>
         <interfaced.item name="unit"/>
      </interface>
      <interface kind="reference" schema="representation_schema">
         <interfaced.item name="functionally_defined_transformation"/>
         <interfaced.item name="item_defined_transformation"/>
         <interfaced.item name="representation"/>
         <interfaced.item name="representation_context"/>
         <interfaced.item name="representation_item"/>
         <interfaced.item name="representation_relationship"/>
         <interfaced.item name="representation_relationship_with_transformation"/>
      </interface>
      <entity name="cylindrical_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="cylindrical_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_translation">
            <typename name="length_measure"/>
         </explicit>
         <explicit name="actual_rotation">
            <typename name="plane_angle_measure"/>
         </explicit>
      </entity>
      <entity name="gear_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="gear_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_rotation_1">
            <typename name="plane_angle_measure"/>
         </explicit>
         <derived expression="- actual_rotation_1 *&#xA;                                     SELF\pair_value.applies_to_pair\&#xA;                                     gear_pair.gear_ratio" name="actual_rotation_2">
            <typename name="plane_angle_measure"/>
         </derived>
      </entity>
      <entity name="initial_state">
         <explicit name="applies_to_mechanism">
            <typename name="mechanism"/>
         </explicit>
         <explicit name="pair_values">
            <aggregate lower="1" type="SET" upper="?"/>
            <typename name="pair_value"/>
         </explicit>
         <where expression="SIZEOF (QUERY (joint &lt;* applies_to_mechanism.structure_definition.joints |&#xA;               SIZEOF (QUERY (init_val &lt;* pair_values |&#xA;                       init_val.applies_to_pair.joint :=: joint)) &lt;&gt; 1)) = 0" label="WR1"/>
      </entity>
      <entity name="mechanism_state_representation" supertypes="representation">
         <explicit name="context_of_items">
            <typename name="geometric_representation_context"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
         <explicit name="items">
            <aggregate lower="1" type="SET" upper="1"/>
            <typename name="pair_value"/>
            <redeclaration entity-ref="representation"/>
         </explicit>
      </entity>
      <entity name="mechanism_to_state_relationship" supertypes="representation_relationship">
         <explicit name="rep_1">
            <typename name="mechanism_representation"/>
            <redeclaration entity-ref="representation_relationship"/>
         </explicit>
         <explicit name="rep_2">
            <typename name="mechanism_state_representation"/>
            <redeclaration entity-ref="representation_relationship"/>
         </explicit>
      </entity>
      <entity abstract.supertype="YES" name="pair_value" super.expression="ONEOF (sliding_surface_pair_value, rolling_surface_pair_value, revolute_pair_value, prismatic_pair_value, screw_pair_value, cylindrical_pair_value, spherical_pair_value, sliding_curve_pair_value, rolling_curve_pair_value, gear_pair_value, rack_and_pinion_pair_value, universal_pair_value, planar_pair_value, unconstrained_pair_value, point_on_surface_pair_value, point_on_planar_curve_pair_value)" supertypes="geometric_representation_item">
         <explicit name="applies_to_pair">
            <typename name="kinematic_pair"/>
         </explicit>
      </entity>
      <entity name="planar_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="planar_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_rotation">
            <typename name="plane_angle_measure"/>
         </explicit>
         <explicit name="actual_translation_x">
            <typename name="length_measure"/>
         </explicit>
         <explicit name="actual_translation_y">
            <typename name="length_measure"/>
         </explicit>
      </entity>
      <entity name="point_on_planar_curve_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="point_on_planar_curve_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_point_on_curve">
            <typename name="point_on_curve"/>
         </explicit>
         <explicit name="input_orientation">
            <typename name="spatial_rotation"/>
         </explicit>
         <derived expression="convert_spatial_to_ypr_rotation&#xA;                                     (SELF\pair_value.applies_to_pair,&#xA;                                      input_orientation)" name="actual_orientation">
            <typename name="ypr_rotation"/>
         </derived>
         <where expression="SELF\pair_value.applies_to_pair\point_on_planar_curve_pair.pair_curve&#xA;       :=: actual_point_on_curve.basis_curve" label="WR1"/>
      </entity>
      <entity name="point_on_surface_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="point_on_surface_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_point_on_surface">
            <typename name="point_on_surface"/>
         </explicit>
         <explicit name="input_orientation">
            <typename name="spatial_rotation"/>
         </explicit>
         <derived expression="convert_spatial_to_ypr_rotation&#xA;                                     (SELF\pair_value.applies_to_pair,&#xA;                                      input_orientation)" name="actual_orientation">
            <typename name="ypr_rotation"/>
         </derived>
         <where expression="SELF\pair_value.applies_to_pair\point_on_surface_pair.pair_surface :=:&#xA;       actual_point_on_surface.basis_surface" label="WR1"/>
      </entity>
      <entity name="prismatic_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="prismatic_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_translation">
            <typename name="length_measure"/>
         </explicit>
      </entity>
      <entity name="rack_and_pinion_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="rack_and_pinion_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_displacement">
            <typename name="length_measure"/>
         </explicit>
         <derived expression="convert_plane_angle_for_pair_from_radian&#xA;                     (SELF\pair_value.applies_to_pair,&#xA;                      (- actual_displacement /&#xA;                       SELF\pair_value.applies_to_pair\&#xA;                       rack_and_pinion_pair.pinion_radius))" name="actual_rotation">
            <typename name="plane_angle_measure"/>
         </derived>
      </entity>
      <entity name="revolute_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="revolute_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_rotation">
            <typename name="plane_angle_measure"/>
         </explicit>
      </entity>
      <entity name="rolling_curve_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="rolling_curve_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_point_on_curve_1">
            <typename name="point_on_curve"/>
         </explicit>
         <where expression="SELF\pair_value.applies_to_pair\planar_curve_pair.curve_1 :=:&#xA;       actual_point_on_curve_1.basis_curve" label="WR1"/>
      </entity>
      <entity name="rolling_surface_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="rolling_surface_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_point_on_surface">
            <typename name="point_on_surface"/>
         </explicit>
         <explicit name="actual_rotation">
            <typename name="plane_angle_measure"/>
         </explicit>
         <where expression="SELF\pair_value.applies_to_pair\surface_pair.surface_1 :=:&#xA;       actual_point_on_surface.basis_surface" label="WR1"/>
      </entity>
      <entity name="screw_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="screw_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_rotation">
            <typename name="plane_angle_measure"/>
         </explicit>
         <derived expression="SELF\pair_value.applies_to_pair\&#xA;                                     screw_pair.pitch *&#xA;                                     plane_angle_for_pair_in_radian&#xA;                                      (SELF\pair_value.applies_to_pair,&#xA;                                       actual_rotation) / (2 * PI)" name="actual_translation">
            <typename name="length_measure"/>
         </derived>
      </entity>
      <entity name="sliding_curve_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="sliding_curve_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_point_on_curve_1">
            <typename name="point_on_curve"/>
         </explicit>
         <explicit name="actual_point_on_curve_2">
            <typename name="point_on_curve"/>
         </explicit>
         <where expression="SELF\pair_value.applies_to_pair\planar_curve_pair.curve_1 :=:&#xA;       actual_point_on_curve_1.basis_curve" label="WR1"/>
         <where expression="SELF\pair_value.applies_to_pair\planar_curve_pair.curve_2 :=:&#xA;       actual_point_on_curve_2.basis_curve" label="WR2"/>
      </entity>
      <entity name="sliding_surface_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="sliding_surface_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_point_on_surface_1">
            <typename name="point_on_surface"/>
         </explicit>
         <explicit name="actual_point_on_surface_2">
            <typename name="point_on_surface"/>
         </explicit>
         <explicit name="actual_rotation">
            <typename name="plane_angle_measure"/>
         </explicit>
         <where expression="SELF\pair_value.applies_to_pair\surface_pair.surface_1 :=:&#xA;       actual_point_on_surface_1.basis_surface" label="WR1"/>
         <where expression="SELF\pair_value.applies_to_pair\surface_pair.surface_2 :=:&#xA;       actual_point_on_surface_2.basis_surface" label="WR2"/>
      </entity>
      <entity name="spherical_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="spherical_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="input_orientation">
            <typename name="spatial_rotation"/>
         </explicit>
         <derived expression="convert_spatial_to_ypr_rotation&#xA;                                     (SELF\pair_value.applies_to_pair,&#xA;                                      input_orientation)" name="actual_orientation">
            <typename name="ypr_rotation"/>
         </derived>
      </entity>
      <entity name="unconstrained_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="unconstrained_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="actual_placement">
            <typename name="axis2_placement_3d"/>
         </explicit>
      </entity>
      <entity name="universal_pair_value" supertypes="pair_value">
         <explicit name="applies_to_pair">
            <typename name="universal_pair"/>
            <redeclaration entity-ref="pair_value"/>
         </explicit>
         <explicit name="first_rotation_angle">
            <typename name="plane_angle_measure"/>
         </explicit>
         <explicit name="second_rotation_angle">
            <typename name="plane_angle_measure"/>
         </explicit>
      </entity>
   </schema>
</express>