<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" 
  href="../../../xsl/express.xsl"
?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express language_version="2" rcs.date="$Date: 2003/10/23 20:40:05 $" rcs.revision="$Revision: 1.18 $" reference="ISO 10303-41" description.file="descriptions.xml">
	<application name="GraphicalEXPRESS" owner="Eurostep" url="www.eurostep.com" version="1.3.14" source="Person_organization_schema_v014.vsd"/>
	<schema name="person_organization_schema">
		<interface kind="reference" schema="basic_attribute_schema">
			<interfaced.item name="description_attribute"/>
			<interfaced.item name="get_description_value"/>
			<interfaced.item name="get_id_value"/>
			<interfaced.item name="get_name_value"/>
			<interfaced.item name="get_role"/>
			<interfaced.item name="id_attribute"/>
			<interfaced.item name="name_attribute"/>
			<interfaced.item name="object_role"/>
			<interfaced.item name="role_association"/>
		</interface>
		<interface kind="reference" schema="support_resource_schema">
			<interfaced.item name="bag_to_set"/>
			<interfaced.item name="identifier"/>
			<interfaced.item name="label"/>
			<interfaced.item name="text"/>
		</interface>
		<type name="person_organization_select">
			<select selectitems="organization person person_and_organization"/>
			<graphic.element page="2" xcoord="93" ycoord="786"/>
		</type>
		<entity name="address">
			<explicit name="internal_location" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="street_number" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="street" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="postal_box" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="town" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="region" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="postal_code" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="country" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="facsimile_number" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="telephone_number" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="electronic_mail_address" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="telex_number" optional="YES">
				<typename name="label"/>
			</explicit>
			<derived name="name" expression="get_name_value(SELF)">
				<typename name="label"/>
			</derived>
			<derived name="url" expression="get_id_value(SELF)">
				<typename name="identifier"/>
			</derived>
			<where label="WR1" expression="EXISTS(internal_location) OR EXISTS(street_number) OR EXISTS(street) OR EXISTS(postal_box) OR EXISTS(town) OR EXISTS(region) OR EXISTS(postal_code) OR EXISTS(country) OR EXISTS(facsimile_number) OR EXISTS(telephone_number) OR EXISTS(electronic_mail_address) OR EXISTS(telex_number)"/>
			<graphic.element page="3" xcoord="114" ycoord="439"/>
		</entity>
		<entity name="organization">
			<explicit name="id" optional="YES">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<graphic.element page="2" xcoord="192" ycoord="411"/>
		</entity>
		<entity name="organization_relationship">
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<explicit name="relating_organization">
				<typename name="organization"/>
			</explicit>
			<explicit name="related_organization">
				<typename name="organization"/>
			</explicit>
			<graphic.element page="2" xcoord="497" ycoord="411"/>
		</entity>
		<entity name="organization_role">
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<derived name="description" expression="get_description_value(SELF)">
				<typename name="text"/>
			</derived>
			<where label="WR1" expression="SIZEOF (USEDIN (SELF, 'BASIC_ATTRIBUTE_SCHEMA.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1"/>
			<graphic.element page="4" xcoord="397" ycoord="42"/>
		</entity>
		<entity name="organization_type">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<graphic.element page="5" xcoord="440" ycoord="304"/>
		</entity>
		<entity name="organization_type_relationship">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<explicit name="relating_organization_type">
				<typename name="organization_type"/>
			</explicit>
			<explicit name="related_organization_type">
				<typename name="organization_type"/>
			</explicit>
			<graphic.element page="5" xcoord="440" ycoord="233"/>
		</entity>
		<entity name="organizational_address" supertypes="address">
			<explicit name="organizations">
				<aggregate type="SET" lower="1" upper="?"/>
				<typename name="organization"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<graphic.element page="3" xcoord="185" ycoord="42"/>
		</entity>
		<entity name="organizational_project">
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<explicit name="responsible_organizations">
				<aggregate type="SET" lower="1" upper="?"/>
				<typename name="organization"/>
			</explicit>
			<derived name="id" expression="get_id_value (SELF)">
				<typename name="identifier"/>
			</derived>
			<where label="WR1" expression="SIZEOF (USEDIN (SELF, 'BASIC_ATTRIBUTE_SCHEMA.' + 'ID_ATTRIBUTE.IDENTIFIED_ITEM')) &lt;= 1"/>
			<graphic.element page="2" xcoord="192" ycoord="198"/>
		</entity>
		<entity name="organizational_project_relationship">
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<explicit name="relating_organizational_project">
				<typename name="organizational_project"/>
			</explicit>
			<explicit name="related_organizational_project">
				<typename name="organizational_project"/>
			</explicit>
			<graphic.element page="2" xcoord="192" ycoord="113"/>
		</entity>
		<entity name="person">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="last_name" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="first_name" optional="YES">
				<typename name="label"/>
			</explicit>
			<explicit name="middle_names" optional="YES">
				<aggregate type="LIST" lower="1" upper="?"/>
				<typename name="label"/>
			</explicit>
			<explicit name="prefix_titles" optional="YES">
				<aggregate type="LIST" lower="1" upper="?"/>
				<typename name="label"/>
			</explicit>
			<explicit name="suffix_titles" optional="YES">
				<aggregate type="LIST" lower="1" upper="?"/>
				<typename name="label"/>
			</explicit>
			<where label="WR1" expression="EXISTS(last_name) OR EXISTS(first_name)"/>
			<graphic.element page="2" xcoord="270" ycoord="737"/>
		</entity>
		<entity name="person_and_organization">
			<explicit name="the_person">
				<typename name="person"/>
			</explicit>
			<explicit name="the_organization">
				<typename name="organization"/>
			</explicit>
			<derived name="name" expression="get_name_value (SELF)">
				<typename name="label"/>
			</derived>
			<derived name="description" expression="get_description_value(SELF)">
				<typename name="text"/>
			</derived>
			<where label="WR1" expression="SIZEOF (USEDIN (SELF, 'BASIC_ATTRIBUTE_SCHEMA.' + 'NAME_ATTRIBUTE.NAMED_ITEM')) &lt;= 1"/>
			<where label="WR2" expression="SIZEOF (USEDIN (SELF, 'BASIC_ATTRIBUTE_SCHEMA.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1"/>
			<graphic.element page="2" xcoord="192" ycoord="538"/>
		</entity>
		<entity name="person_and_organization_role">
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<derived name="description" expression="get_description_value (SELF)">
				<typename name="text"/>
			</derived>
			<where label="WR1" expression="SIZEOF (USEDIN (SELF, 'BASIC_ATTRIBUTE_SCHEMA.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1"/>
			<graphic.element page="4" xcoord="114" ycoord="113"/>
		</entity>
		<entity name="person_role">
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<derived name="description" expression="get_description_value (SELF)">
				<typename name="text"/>
			</derived>
			<where label="WR1" expression="SIZEOF (USEDIN (SELF, 'BASIC_ATTRIBUTE_SCHEMA.' + 'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) &lt;= 1"/>
			<graphic.element page="4" xcoord="397" ycoord="184"/>
		</entity>
		<entity name="person_type">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<graphic.element page="6" xcoord="99" ycoord="226"/>
		</entity>
		<entity name="person_type_definition">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<explicit name="formation">
				<typename name="person_type_definition_formation"/>
			</explicit>
			<graphic.element page="6" xcoord="383" ycoord="297"/>
		</entity>
		<entity name="person_type_definition_formation">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<explicit name="of_person_type">
				<typename name="person_type"/>
			</explicit>
			<graphic.element page="6" xcoord="99" ycoord="297"/>
		</entity>
		<entity name="person_type_definition_relationship">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<explicit name="relating_person_type_definition">
				<typename name="person_type_definition"/>
			</explicit>
			<explicit name="related_person_type_definition">
				<typename name="person_type_definition"/>
			</explicit>
			<graphic.element page="6" xcoord="383" ycoord="226"/>
		</entity>
		<entity name="personal_address" supertypes="address">
			<explicit name="people">
				<aggregate type="SET" lower="1" upper="?"/>
				<typename name="person"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<graphic.element page="3" xcoord="185" ycoord="184"/>
		</entity>
		<entity name="position_in_organization">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<graphic.element page="5" xcoord="170" ycoord="233"/>
		</entity>
		<entity name="position_in_organization_relationship">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<explicit name="relating_position_in_organization">
				<typename name="position_in_organization"/>
			</explicit>
			<explicit name="related_position_in_organization">
				<typename name="position_in_organization"/>
			</explicit>
			<graphic.element page="5" xcoord="170" ycoord="162"/>
		</entity>
		<entity name="position_in_organization_type">
			<explicit name="id">
				<typename name="identifier"/>
			</explicit>
			<explicit name="name">
				<typename name="label"/>
			</explicit>
			<explicit name="description" optional="YES">
				<typename name="text"/>
			</explicit>
			<graphic.element page="6" xcoord="241" ycoord="552"/>
		</entity>
		<function name="acyclic_organization_relationship">
			<parameter name="relation">
				<typename name="organization_relationship"/>
			</parameter>
			<parameter name="relatives">
				<aggregate type="SET"/>
				<typename name="organization"/>
			</parameter>
			<parameter name="specific_relation">
				<builtintype type="STRING"/>
			</parameter>
			<builtintype type="BOOLEAN"/>
			<algorithm>
  LOCAL
      x : SET OF organization_relationship;
    END_LOCAL;

    IF relation.relating_organization IN relatives THEN
      RETURN (FALSE);
    END_IF;
    x := QUERY(org &lt;* bag_to_set(USEDIN(relation.relating_organization, 'PERSON_ORGANIZATION_SCHEMA.' + 'ORGANIZATION_RELATIONSHIP.' + 'RELATED_ORGANIZATION')) | specific_relation IN TYPEOF(org));
    REPEAT i := 1 TO HIINDEX(x);
      IF NOT acyclic_organization_relationship(x[i], relatives + relation.relating_organization, specific_relation) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
    RETURN (TRUE);

     			</algorithm>
		</function>
		<function name="acyclic_organizational_project_relationship">
			<parameter name="relation">
				<typename name="organizational_project_relationship"/>
			</parameter>
			<parameter name="relatives">
				<aggregate type="SET"/>
				<typename name="organizational_project"/>
			</parameter>
			<parameter name="specific_relation">
				<builtintype type="STRING"/>
			</parameter>
			<builtintype type="BOOLEAN"/>
			<algorithm>
   LOCAL
      x : SET OF organizational_project_relationship;
    END_LOCAL;

    IF relation.relating_organizational_project IN relatives THEN
      RETURN (FALSE);
    END_IF;
    x := QUERY(op &lt;* bag_to_set(USEDIN(relation.relating_organizational_project, 'PERSON_ORGANIZATION_SCHEMA.' + 'ORGANIZATIONAL_PROJECT_RELATIONSHIP.' + 'RELATED_ORGANIZATIONAL_PROJECT')) | specific_relation IN TYPEOF(op));
    REPEAT i := 1 TO HIINDEX(x);
      IF NOT acyclic_organizational_project_relationship(x[i], relatives + relation.relating_organizational_project, specific_relation) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
    RETURN (TRUE);
      			</algorithm>
		</function>
		<function name="acyclic_organization_type_relationship">
			<parameter name="relation">
				<typename name="organization_type_relationship"/>
			</parameter>
			<parameter name="relatives">
				<aggregate type="SET"/>
				<typename name="organization_type"/>
			</parameter>
			<parameter name="specific_relation">
				<builtintype type="STRING"/>
			</parameter>
			<builtintype type="BOOLEAN"/>
			<algorithm>
   LOCAL
      x : SET OF organization_type_relationship;
    END_LOCAL;

    IF relation.relating_organization_type IN relatives THEN
      RETURN (FALSE);
    END_IF;
    x := QUERY(orgtyp &lt;* bag_to_set(USEDIN(relation.relating_organization_type, 'PERSON_ORGANIZATION_SCHEMA.' + 'ORGANIZATION_TYPE_RELATIONSHIP.' + 'RELATED_ORGANIZATION_TYPE')) | specific_relation IN TYPEOF(orgtyp));
    REPEAT i := 1 TO HIINDEX(x);
      IF NOT acyclic_organization_type_relationship(x[i], relatives + relation.relating_organization_type, specific_relation) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
    RETURN (TRUE);
			</algorithm>
		</function>
		<function name="acyclic_person_type_definition_relationship">
			<parameter name="relation">
				<typename name="person_type_definition_relationship"/>
			</parameter>
			<parameter name="relatives">
				<aggregate type="SET"/>
				<typename name="person_type_definition"/>
			</parameter>
			<parameter name="specific_relation">
				<builtintype type="STRING"/>
			</parameter>
			<builtintype type="BOOLEAN"/>
			<algorithm>
   LOCAL
      x : SET OF person_type_definition_relationship;
    END_LOCAL;

    IF relation.relating_person_type_definition IN relatives THEN
      RETURN (FALSE);
    END_IF;
    x := QUERY(ptdef &lt;* bag_to_set(USEDIN(relation.relating_person_type_definition, 'PERSON_ORGANIZATION_SCHEMA.' + 'PERSON_TYPE_DEFINITION_RELATIONSHIP.' + 'RELATED_PERSON_TYPE_DEFINITION')) | specific_relation IN TYPEOF(ptdef));
    REPEAT i := 1 TO HIINDEX(x);
      IF NOT acyclic_person_type_definition_relationship(x[i], relatives + relation.relating_person_type_definition, specific_relation) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
    RETURN (TRUE);
			</algorithm>
		</function>
		<function name="acyclic_position_in_organization_relationship">
			<parameter name="relation">
				<typename name="position_in_organization_relationship"/>
			</parameter>
			<parameter name="relatives">
				<aggregate type="SET"/>
				<typename name="position_in_organization"/>
			</parameter>
			<parameter name="specific_relation">
				<builtintype type="STRING"/>
			</parameter>
			<builtintype type="BOOLEAN"/>
			<algorithm>
   LOCAL
      x : SET OF position_in_organization_relationship;
    END_LOCAL;

    IF relation.relating_position_in_organization IN relatives THEN
      RETURN (FALSE);
    END_IF;
    x := QUERY(piorg &lt;* bag_to_set(USEDIN(relation.relating_position_in_organization, 'PERSON_ORGANIZATION_SCHEMA.' + 'POSITION_IN_ORGANIZATION_RELATIONSHIP.' + 'RELATED_POSITION_IN_ORGANIZATION')) | specific_relation IN TYPEOF(piorg));
    REPEAT i := 1 TO HIINDEX(x);
      IF NOT acyclic_position_in_organization_relationship(x[i], relatives + relation.relating_position_in_organization, specific_relation) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
    RETURN (TRUE);
			</algorithm>
		</function>
		<graphic.element page="1" xcoord="156" ycoord="220"/>
	</schema>
</express>
