<?xml version='1.0' encoding='UTF-8'?>
<!-- $Id: presentation_appearance_schema.xml,v 1.9 2006/02/14 14:30:03 liutkuviene Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  reference="ISO 10303-46"
  rcs.date="$Date: 2006/02/14 14:30:03 $"
  rcs.revision="$Revision: 1.9 $"
  description.file="descriptions.xml">

  <application
    name="express2xml2.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.7"
    source="../data/resources/presentation_appearance_schema/presentation_appearance_schema.exp"/>

  <schema name="presentation_appearance_schema">

    <interface
      kind="reference"
      schema="external_reference_schema">
      <interfaced.item
        name="externally_defined_item"/>
      <interfaced.item
        name="pre_defined_item"/>
    </interface>
    <interface
      kind="reference"
      schema="geometry_schema">
      <interfaced.item
        name="axis2_placement"/>
      <interfaced.item
        name="cartesian_point"/>
      <interfaced.item
        name="curve"/>
      <interfaced.item
        name="geometric_representation_item"/>
      <interfaced.item
        name="point"/>
      <interfaced.item
        name="vector"/>
    </interface>
    <interface
      kind="reference"
      schema="group_schema">
      <interfaced.item
        name="group"/>
    </interface>
    <interface
      kind="reference"
      schema="measure_schema">
      <interfaced.item
        name="descriptive_measure"/>
      <interfaced.item
        name="length_measure"/>
      <interfaced.item
        name="measure_with_unit"/>
      <interfaced.item
        name="plane_angle_measure"/>
      <interfaced.item
        name="positive_length_measure"/>
      <interfaced.item
        name="ratio_measure"/>
      <interfaced.item
        name="positive_ratio_measure"/>
    </interface>
    <interface
      kind="reference"
      schema="presentation_organization_schema">
      <interfaced.item
        name="area_dependent_annotation_representation"/>
      <interfaced.item
        name="presentation_area"/>
      <interfaced.item
        name="presentation_layer_assignment"/>
      <interfaced.item
        name="presentation_layer_usage"/>
      <interfaced.item
        name="presentation_representation"/>
      <interfaced.item
        name="presentation_set"/>
      <interfaced.item
        name="presentation_view"/>
      <interfaced.item
        name="product_data_representation_view"/>
      <interfaced.item
        name="view_dependent_annotation_representation"/>
    </interface>
    <interface
      kind="reference"
      schema="presentation_definition_schema">
      <interfaced.item
        name="annotation_curve_occurrence"/>
      <interfaced.item
        name="annotation_fill_area"/>
      <interfaced.item
        name="annotation_symbol_occurrence"/>
      <interfaced.item
        name="annotation_text_with_delineation"/>
      <interfaced.item
        name="symbol_representation_with_blanking_box"/>
    </interface>
    <interface
      kind="reference"
      schema="presentation_resource_schema">
      <interfaced.item
        name="character_glyph_symbol_outline"/>
      <interfaced.item
        name="character_glyph_symbol_stroke"/>
      <interfaced.item
        name="colour"/>
    </interface>
    <interface
      kind="reference"
      schema="representation_schema">
      <interfaced.item
        name="mapped_item"/>
      <interfaced.item
        name="representation"/>
      <interfaced.item
        name="representation_item"/>
      <interfaced.item
        name="representation_map"/>
      <interfaced.item
        name="using_representations"/>
    </interface>
    <interface
      kind="reference"
      schema="support_resource_schema">
      <interfaced.item
        name="label"/>
      <interfaced.item
        name="bag_to_set"/>
    </interface>
    
    
    
    
   	 <type name="approximation_method">
      <enumeration
        items="chordal_deviation chordal_length">
      </enumeration>
   	 </type>
   	 
   	 <entity
      name="approximation_tolerance">
      <explicit
        name="tolerance">
        <typename
          name="tolerance_select"/>
      </explicit>
    </entity>

    <entity
      name="approximation_tolerance_deviation">
      <explicit
        name="tessellation_type">
        <typename
          name="approximation_method"/>
      </explicit>
      <explicit
        name="tolerances">
        <aggregate
          type="SET"
          lower="1"
          upper="2"/>
        <typename
          name="tolerance_deviation_select"/>
      </explicit>
      <explicit
        name="definition_space">
        <typename
          name="product_or_presentation_space"/>
      </explicit>
      <where
        label="WR1"
        expression="(HIINDEX(SELF.tolerances) = 1) XOR(TYPEOF(SELF.tolerances[1]) &lt;&gt; TYPEOF(SELF.tolerances[2]))">
      </where>
    </entity>

    <entity
      name="approximation_tolerance_parameter">
      <explicit
        name="tolerances">
        <aggregate
          type="SET"
          lower="1"
          upper="2"/>
        <typename
          name="tolerance_parameter_select"/>
      </explicit>
      <where
        label="WR1"
        expression="(HIINDEX (SELF.tolerances) = 1) XOR(TYPEOF (SELF.tolerances[1]) &lt;&gt; TYPEOF (SELF.tolerances[2]))">
      </where>
    </entity>
     
     <type name="box_characteristic_select">
      <select
        selectitems="box_height box_width box_slant_angle box_rotate_angle">
      </select>
    </type>
    
    <type name="box_height">
      <typename
        name="positive_ratio_measure"/>
    </type>
    
    <type name="box_rotate_angle">
      <typename
        name="plane_angle_measure"/>
    </type>
    
    <type name="box_slant_angle">
      <typename
        name="plane_angle_measure"/>
        <where label="IP1"/>
    </type>

    <type name="box_width">
      <typename
        name="positive_ratio_measure"/>
    </type>

     <type name="character_spacing_select">
      <select
        selectitems="length_measure ratio_measure measure_with_unit descriptive_measure pre_defined_character_spacing">
      </select>
    </type>
     
     <type name="character_style_select">
      <select
        selectitems="character_glyph_style_stroke character_glyph_style_outline text_style_for_defined_font">
      </select>
    </type>
    
    <type name="curve_font_or_scaled_curve_font_select">
      <select
        selectitems="curve_style_font_select curve_style_font_and_scaling">
      </select>
    </type>
    
    <type name="curve_or_annotation_curve_occurrence">
      <select
        selectitems="curve annotation_curve_occurrence">
      </select>
    </type>
    
     <type name="curve_or_render">
      <select
        selectitems="curve_style curve_style_rendering">
      </select>
    </type>

    <type name="curve_style_font_select">
      <select
        selectitems="curve_style_font pre_defined_curve_font externally_defined_curve_font">
      </select>
    </type>
    
    <type name="curve_tolerance_deviation">
      <typename
        name="positive_length_measure"/>
    </type>
    
    <type name="curve_tolerance_parameter">
      <builtintype
        type="REAL">
      </builtintype>
    </type>
    
    <type name="direction_count_select">
      <select
        selectitems="u_direction_count v_direction_count">
      </select>
    </type>
    
    <type name="fill_area_style_tile_shape_select">
      <select
        selectitems="fill_area_style_tile_curve_with_style fill_area_style_tile_coloured_region fill_area_style_tile_symbol_with_style pre_defined_tile externally_defined_tile">
      </select>
    </type>
    
     <type name="fill_style_select">
      <select
        selectitems="fill_area_style_colour pre_defined_tile_style externally_defined_tile_style fill_area_style_tiles pre_defined_hatch_style externally_defined_hatch_style fill_area_style_hatching">
      </select>
    </type>
    
    <type name="hiding_or_blanking_select">
      <select
        selectitems="presentation_area presentation_view product_data_representation_view annotation_fill_area area_dependent_annotation_representation view_dependent_annotation_representation annotation_text_with_delineation character_glyph_symbol_stroke character_glyph_symbol_outline symbol_representation_with_blanking_box">
      </select>
    </type>
    
    <type name="invisibility_context">
      <select
        selectitems="presentation_layer_usage presentation_representation presentation_set">
      </select>
    </type>

    <type name="invisible_item">
      <select
        selectitems="styled_item presentation_layer_assignment representation">
      </select>
    </type>
    
    <type name="marker_select">
      <select
        selectitems="marker_type pre_defined_marker">
      </select>
    </type>

    <type name="marker_type">
      <enumeration
        items="dot x plus asterisk ring square triangle">
      </enumeration>
    </type>
    
    <type name="null_style">
      <enumeration
        items="null">
      </enumeration>
    </type>
    
    <type name="presentation_style_select">
      <select
        selectitems="pre_defined_presentation_style point_style curve_style surface_style_usage symbol_style fill_area_style text_style approximation_tolerance externally_defined_style null_style">
      </select>
    </type>
    
    <type name="product_or_presentation_space">
      <enumeration
        items="product_shape_space presentation_area_space">
      </enumeration>
    </type>
    
    <type name="rendering_properties_select">
      <select
        selectitems="surface_style_reflectance_ambient surface_style_transparent">
      </select>
    </type>
    
    <type name="shading_curve_method">
      <enumeration
        items="constant_colour linear_colour">
      </enumeration>
    </type>
    
    <type name="shading_surface_method">
      <enumeration
        items="constant_shading colour_shading dot_shading normal_shading">
      </enumeration>
    </type>

    <type name="size_select">
      <select
        selectitems="positive_length_measure measure_with_unit descriptive_measure pre_defined_size">
      </select>
    </type>
    
    <type name="squared_or_rounded">
      <enumeration
        items="squared rounded">
      </enumeration>
    </type>
    
    <type name="style_context_select">
      <select
        selectitems="group presentation_layer_assignment representation representation_item presentation_set">
      </select>
    </type>

    <type name="surface_side">
      <enumeration
        items="positive negative both">
      </enumeration>
    </type>

    <type name="surface_side_style_select">
      <select
        selectitems="surface_side_style pre_defined_surface_side_style">
      </select>
    </type>

    <type name="surface_style_element_select">
      <select
        selectitems="surface_style_fill_area surface_style_boundary surface_style_silhouette surface_style_segmentation_curve surface_style_control_grid surface_style_parameter_line surface_style_rendering">
      </select>
    </type>
        
    <type name="surface_tolerance_deviation">
      <typename
        name="positive_length_measure"/>
    </type>
    
    <type name="surface_tolerance_parameter">
      <builtintype
        type="REAL">
      </builtintype>
    </type>
    
    <type name="symbol_style_select">
      <select
        selectitems="symbol_element_style symbol_colour">
      </select>
    </type>
    
    <type name="text_justification">
      <typename
        name="label"/>
    </type>
    
    <type name="tolerance_deviation_select">
      <select
        selectitems="curve_tolerance_deviation surface_tolerance_deviation">
      </select>
    </type>
    
    <type name="tolerance_parameter_select">
      <select
        selectitems="curve_tolerance_parameter surface_tolerance_parameter">
      </select>
    </type>
    
    <type name="tolerance_select">
      <select
        selectitems="approximation_tolerance_deviation approximation_tolerance_parameter">
      </select>
    </type>

    <type name="u_direction_count">
      <builtintype
        type="INTEGER">
      </builtintype>
      <where
        label="WR1"
        expression="SELF &gt; 1">
      </where>
    </type>

    <type name="v_direction_count">
      <builtintype
        type="INTEGER">
      </builtintype>
      <where
        label="WR1"
        expression="SELF &gt; 1">
      </where>
    </type>

   
   
    <entity
      name="character_glyph_style_outline">
      <explicit
        name="outline_style">
        <typename
          name="curve_style"/>
      </explicit>
    </entity>
    
    <entity
      name="character_glyph_style_outline_with_characteristics"
      supertypes="character_glyph_style_outline">
      <explicit
        name="characteristics">
        <typename
          name="fill_area_style"/>
      </explicit>
    </entity>
    
    <entity
      name="character_glyph_style_stroke">
      <explicit
        name="stroke_style">
        <typename
          name="curve_style"/>
      </explicit>
    </entity>
    
    <entity
      name="context_dependent_invisibility"
      supertypes="invisibility">
      <explicit
        name="presentation_context">
        <typename
          name="invisibility_context"/>
      </explicit>
    </entity>
    
    <entity
      name="context_dependent_over_riding_styled_item"
      supertypes="over_riding_styled_item">
      <explicit
        name="style_context">
        <aggregate
          type="SET"
          lower="1"
          upper="2"/>
        <typename
          name="style_context_select"/>
      </explicit>
      <where
        label="WR1"
        expression="(SIZEOF(QUERY(sc &lt;* SELF.style_context |'REPRESENTATION_SCHEMA.REPRESENTATION' IN TYPEOF(sc))) = 1) AND(SIZEOF(QUERY(sc &lt;* SELF.style_context |'REPRESENTATION_SCHEMA.REPRESENTATION_ITEM' IN TYPEOF(sc))) = 1)">
      </where>
    </entity>
    
    <entity
      name="curve_style">
      <explicit
        name="name">
        <typename
          name="label"/>
      </explicit>
      <explicit
        name="curve_font">
        <typename
          name="curve_font_or_scaled_curve_font_select"/>
      </explicit>
      <explicit
        name="curve_width">
        <typename
          name="size_select"/>
      </explicit>
      <explicit
        name="curve_colour">
        <typename
          name="colour"/>
      </explicit>
    </entity>
    
    <entity
      name="curve_style_curve_pattern"
      supertypes="geometric_representation_item">
      <explicit
        name="pattern">
        <typename
          name="annotation_curve_occurrence"/>
      </explicit>
      <explicit
        name="pattern_length">
        <typename
          name="positive_length_measure"/>
      </explicit>
    </entity>
    
     <entity
      name="curve_style_curve_pattern_set"
      supertypes="curve_style_font geometric_representation_item">
      <explicit
        name="pattern_set">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="curve_style_curve_pattern"/>
      </explicit>
      <where label="IP1"/>
      <where label="IP2"/>
    </entity>
    
    <entity
      name="curve_style_font">
      <explicit
        name="name">
        <typename
          name="label"/>
      </explicit>
      <explicit
        name="pattern_list">
        <aggregate
          type="LIST"
          lower="1"
          upper="?"/>
        <typename
          name="curve_style_font_pattern"/>
      </explicit>
      <where label="IP1"/>
      <where label="IP2"/>
    </entity>
    
    <entity
      name="curve_style_font_and_scaling">
      <explicit
        name="name">
        <typename
          name="label"/>
      </explicit>
      <explicit
        name="curve_font">
        <typename
          name="curve_style_font_select"/>
      </explicit>
      <explicit
        name="curve_font_scaling">
        <builtintype
          type="REAL"/>
      </explicit>
    </entity>

    <entity
      name="curve_style_font_pattern">
      <explicit
        name="visible_segment_length">
        <typename
          name="positive_length_measure"/>
      </explicit>
      <explicit
        name="invisible_segment_length">
        <typename
          name="positive_length_measure"/>
      </explicit>
    </entity>
    
    <entity
      name="curve_style_rendering">
      <explicit
        name="rendering_method">
        <typename
          name="shading_curve_method"/>
      </explicit>
      <explicit
        name="rendering_properties">
        <typename
          name="surface_rendering_properties"/>
      </explicit>
    </entity>

    <entity
      name="curve_style_wide"
      supertypes="curve_style_font">
      <explicit
        name="interior_style">
        <typename
          name="fill_area_style"/>
      </explicit>
    </entity>

    <entity
      name="curve_style_with_ends_and_corners"
      supertypes="curve_style">
      <explicit
        name="curve_ends">
        <typename
          name="squared_or_rounded"/>
      </explicit>
      <explicit
        name="curve_corners">
        <typename
          name="squared_or_rounded"/>
      </explicit>
    </entity>

    <entity
      name="curve_style_with_extension"
      supertypes="curve_style">
      <explicit
        name="curve_extensions">
        <typename
          name="length_measure"/>
      </explicit>
    </entity>
    
    <entity
      name="draughting_pre_defined_curve_font"
      supertypes="pre_defined_curve_font">
      <where
        label="WR1"
        expression="SELF.name IN['continuous','chain','chain double dash','dashed','dotted']">
      </where>
    </entity>
    
    <entity
      name="externally_defined_curve_font"
      supertypes="externally_defined_item">
    </entity>
    
    <entity
      name="externally_defined_hatch_style"
      supertypes="externally_defined_item geometric_representation_item">
    </entity>
    
    <entity
      name="externally_defined_style"
      supertypes="externally_defined_item">
    </entity>
    
    <entity
      name="externally_defined_tile"
      supertypes="externally_defined_item">
    </entity>
    
    <entity
      name="externally_defined_tile_style"
      supertypes="externally_defined_item geometric_representation_item">
    </entity>
    
    <entity
      name="fill_area_style">
      <explicit
        name="name">
        <typename
          name="label"/>
      </explicit>
      <explicit
        name="fill_styles">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="fill_style_select"/>
      </explicit>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(fill_style &lt;* SELF.fill_styles |'PRESENTATION_APPEARANCE_SCHEMA.'+'FILL_AREA_STYLE_COLOUR' IN TYPEOF(fill_style))) &lt;= 1">
      </where>
    </entity>

    <entity
      name="fill_area_style_colour">
      <explicit
        name="name">
        <typename
          name="label"/>
      </explicit>
      <explicit
        name="fill_colour">
        <typename
          name="colour"/>
      </explicit>
    </entity>
    
    <entity
      name="fill_area_style_hatching"
      supertypes="geometric_representation_item">
      <explicit
        name="hatch_line_appearance">
        <typename
          name="curve_style"/>
      </explicit>
      <explicit
        name="start_of_next_hatch_line">
        <typename
          name="one_direction_repeat_factor"/>
      </explicit>
      <explicit
        name="point_of_reference_hatch_line">
        <typename
          name="cartesian_point"/>
      </explicit>
      <explicit
        name="pattern_start">
        <typename
          name="cartesian_point"/>
      </explicit>
      <explicit
        name="hatch_line_angle">
        <typename
          name="plane_angle_measure"/>
      </explicit>
    </entity>
    
     <entity
      name="fill_area_style_tile_curve_with_style"
      supertypes="geometric_representation_item">
      <explicit
        name="styled_curve">
        <typename
          name="annotation_curve_occurrence"/>
      </explicit>
    </entity>

    <entity
      name="fill_area_style_tile_coloured_region"
      supertypes="geometric_representation_item">
      <explicit
        name="closed_curve">
        <typename
          name="curve_or_annotation_curve_occurrence"/>
      </explicit>
      <explicit
        name="region_colour">
        <typename
          name="colour"/>
      </explicit>
      <where label="IP1"/>
    </entity>

    <entity
      name="fill_area_style_tile_symbol_with_style"
      supertypes="geometric_representation_item">
      <explicit
        name="symbol">
        <typename
          name="annotation_symbol_occurrence"/>
      </explicit>
    </entity>
    
    <entity
      name="fill_area_style_tiles"
      supertypes="geometric_representation_item">
      <explicit
        name="tiling_pattern">
        <typename
          name="two_direction_repeat_factor"/>
      </explicit>
      <explicit
        name="tiles">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="fill_area_style_tile_shape_select"/>
      </explicit>
      <explicit
        name="tiling_scale">
        <typename
          name="positive_ratio_measure"/>
      </explicit>
    </entity>
    
    
    
    <entity
      name="invisibility">
      <explicit
        name="invisible_items">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="invisible_item"/>
      </explicit>
    </entity>
    
    <entity
      name="occlusion_precedence">
      <explicit
        name="higher_precedence">
        <typename
          name="hiding_or_blanking_select"/>
      </explicit>
      <explicit
        name="lower_precedence">
        <typename
          name="hiding_or_blanking_select"/>
      </explicit>
      <explicit
        name="occlusion_context">
        <typename
          name="representation"/>
      </explicit>
      <where
        label="WR1"
        expression="acyclic_occlusion_precedence (SELF, [SELF.lower_precedence])">
      </where>
    </entity>
    
    <entity
      name="one_direction_repeat_factor"
      supertypes="geometric_representation_item">
      <explicit
        name="repeat_factor">
        <typename
          name="vector"/>
      </explicit>
    </entity>
    
    <entity
      name="over_riding_styled_item"
      supertypes="styled_item">
      <explicit
        name="over_ridden_style">
        <typename
          name="styled_item"/>
      </explicit>
    </entity>
    
    <entity
      name="point_style">
      <explicit
        name="name">
        <typename
          name="label"/>
      </explicit>
      <explicit
        name="marker">
        <typename
          name="marker_select"/>
      </explicit>
      <explicit
        name="marker_size">
        <typename
          name="size_select"/>
      </explicit>
      <explicit
        name="marker_colour">
        <typename
          name="colour"/>
      </explicit>
    </entity>
    
    <entity
      name="pre_defined_character_spacing"
      supertypes="pre_defined_item">
    </entity>
    
    <entity
      name="pre_defined_curve_font"
      supertypes="pre_defined_item">
    </entity>
    
    <entity
      name="pre_defined_hatch_style"
      supertypes="pre_defined_item geometric_representation_item">
    </entity>
    
    <entity
      name="pre_defined_marker"
      supertypes="pre_defined_item">
    </entity>
    
    <entity
      name="pre_defined_presentation_style"
      supertypes="pre_defined_item">
    </entity>
    
    <entity
      name="pre_defined_size"
      supertypes="pre_defined_item">
    </entity>
    
    <entity
      name="pre_defined_surface_side_style"
      supertypes="pre_defined_item">
    </entity>
    
    <entity
      name="pre_defined_tile"
      supertypes="pre_defined_item">
    </entity>
    
    <entity
      name="pre_defined_tile_style"
      supertypes="pre_defined_item geometric_representation_item">
    </entity>
    
    <entity
      name="presentation_style_assignment">
      <explicit
        name="styles">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="presentation_style_select"/>
      </explicit>
      <where
        label="WR1"
        expression="SIZEOF (QUERY (style1 &lt;* SELF.styles | NOT (SIZEOF (QUERY (style2 &lt;* (SELF.styles - style1) | NOT ((TYPEOF (style1) &lt;&gt; TYPEOF (style2)) OR(SIZEOF (['PRESENTATION_APPEARANCE_SCHEMA.' +'SURFACE_STYLE_USAGE','PRESENTATION_APPEARANCE_SCHEMA.'+'EXTERNALLY_DEFINED_STYLE'] * TYPEOF (style1)) = 1)))) = 0))) = 0">
      </where>
      <where
        label="WR2"
        expression="SIZEOF (QUERY (style1 &lt;* SELF.styles |'PRESENTATION_APPEARANCE_SCHEMA.SURFACE_STYLE_USAGE' IN TYPEOF(style1))) &lt;= 2">
      </where>
      <where label="IP1"/>
      <where label="IP2"/>
      <where label="IP3"/>
    </entity>

    <entity
      name="presentation_style_by_context"
      supertypes="presentation_style_assignment">
      <explicit
        name="style_context">
        <typename
          name="style_context_select"/>
      </explicit>
    </entity>
    
    <entity
      name="styled_item"
      supertypes="representation_item">
      <explicit
        name="styles">
        <aggregate
          type="SET"
          lower="1"
          upper="?"/>
        <typename
          name="presentation_style_assignment"/>
      </explicit>
      <explicit
        name="item">
        <typename
          name="representation_item"/>
      </explicit>
      <where
        label="WR1"
        expression="(SIZEOF(SELF.styles) = 1) XOR(SIZEOF(QUERY(pres_style &lt;* SELF.styles | NOT ('PRESENTATION_APPEARANCE_SCHEMA.' +'PRESENTATION_STYLE_BY_CONTEXT' IN TYPEOF(pres_style)))) = 0)">
      </where>
    </entity>
    
    <entity
      name="surface_rendering_properties">
      <explicit
        name="rendered_colour">
        <typename
          name="colour"/>
      </explicit>
    </entity>
    
    <entity
      name="surface_side_style">
      <explicit
        name="name">
        <typename
          name="label"/>
      </explicit>
      <explicit
        name="styles">
        <aggregate
          type="SET"
          lower="1"
          upper="7"/>
        <typename
          name="surface_style_element_select"/>
      </explicit>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(style1 &lt;* SELF.styles | SIZEOF(QUERY(style2 &lt;* SELF.styles - style1 | TYPEOF(style1) = TYPEOF(style2))) &gt; 0)) = 0">
      </where>
    </entity>
    
    <entity
      name="surface_style_control_grid">
      <explicit
        name="style_of_control_grid">
        <typename
          name="curve_or_render"/>
      </explicit>
    </entity>
    
    <entity
      name="surface_style_boundary">
      <explicit
        name="style_of_boundary">
        <typename
          name="curve_or_render"/>
      </explicit>
    </entity>
    
    <entity
      name="surface_style_fill_area">
      <explicit
        name="fill_area">
        <typename
          name="fill_area_style"/>
      </explicit>
    </entity>
    
    <entity
      name="surface_style_parameter_line">
      <explicit
        name="style_of_parameter_lines">
        <typename
          name="curve_or_render"/>
      </explicit>
      <explicit
        name="direction_counts">
        <aggregate
          type="SET"
          lower="1"
          upper="2"/>
        <typename
          name="direction_count_select"/>
      </explicit>
      <where
        label="WR1"
        expression="(HIINDEX(SELF.direction_counts) = 1) XOR(TYPEOF(SELF.direction_counts[1]) &lt;&gt; TYPEOF(SELF.direction_counts[2]))">
      </where>
    </entity>
    
    <entity
      name="surface_style_reflectance_ambient">
      <explicit
        name="ambient_reflectance">
        <builtintype
          type="REAL"/>
      </explicit>
    </entity>
    
    <entity
      name="surface_style_reflectance_ambient_diffuse"
      supertypes="surface_style_reflectance_ambient">
      <explicit
        name="diffuse_reflectance">
        <builtintype
          type="REAL"/>
      </explicit>
    </entity>

    <entity
      name="surface_style_reflectance_ambient_diffuse_specular"
      supertypes="surface_style_reflectance_ambient_diffuse">
      <explicit
        name="specular_reflectance">
        <builtintype
          type="REAL"/>
      </explicit>
      <explicit
        name="specular_exponent">
        <builtintype
          type="REAL"/>
      </explicit>
      <explicit
        name="specular_colour">
        <typename
          name="colour"/>
      </explicit>
    </entity>
    
    <entity
      name="surface_style_rendering">
      <explicit
        name="rendering_method">
        <typename
          name="shading_surface_method"/>
      </explicit>
      <explicit
        name="surface_colour">
        <typename
          name="colour"/>
      </explicit>
    </entity>

    <entity
      name="surface_style_rendering_with_properties"
      supertypes="surface_style_rendering">
      <explicit
        name="properties">
        <aggregate
          type="SET"
          lower="1"
          upper="2"/>
        <typename
          name="rendering_properties_select"/>
      </explicit>
      <where
        label="WR1"
        expression="(HIINDEX(SELF.properties) = 1) XOR(TYPEOF(SELF.properties[1]) &lt;&gt; TYPEOF(SELF.properties[2]))">
      </where>
    </entity>
    
    <entity
      name="surface_style_segmentation_curve">
      <explicit
        name="style_of_segmentation_curve">
        <typename
          name="curve_or_render"/>
      </explicit>
    </entity>
    
    <entity
      name="surface_style_silhouette">
      <explicit
        name="style_of_silhouette">
        <typename
          name="curve_or_render"/>
      </explicit>
    </entity>
    
     <entity
      name="surface_style_transparent">
      <explicit
        name="transparency">
        <builtintype
          type="REAL"/>
      </explicit>
      <where
        label="WR1"
        expression="{0.0 &lt;= transparency &lt;= 1.0}">
      </where>
    </entity>
    
    <entity
      name="surface_style_usage">
      <explicit
        name="side">
        <typename
          name="surface_side"/>
      </explicit>
      <explicit
        name="style">
        <typename
          name="surface_side_style_select"/>
      </explicit>
    </entity>
    
    <entity
      name="symbol_colour">
      <explicit
        name="colour_of_symbol">
        <typename
          name="colour"/>
      </explicit>
    </entity>
    
    <entity
      name="symbol_element_style">
      <explicit
        name="style_of_symbol">
        <typename
          name="presentation_style_assignment"/>
      </explicit>
      <where
        label="WR1"
        expression="SIZEOF (QUERY (style &lt;* SELF.style_of_symbol.styles |'PRESENTATION_APPEARANCE_SCHEMA.SYMBOL_STYLE' IN TYPEOF (style))) = 0">
      </where>
      <where
        label="WR2"
        expression="NOT ('PRESENTATION_APPEARANCE_SCHEMA.' +'PRESENTATION_STYLE_BY_CONTEXT' IN TYPEOF (SELF.style_of_symbol))">
      </where>
    </entity>
    
    <entity
      name="symbol_style">
      <explicit
        name="name">
        <typename
          name="label"/>
      </explicit>
      <explicit
        name="style_of_symbol">
        <typename
          name="symbol_style_select"/>
      </explicit>
    </entity>
    
    <entity
      name="text_style">
      <explicit
        name="name">
        <typename
          name="label"/>
      </explicit>
      <explicit
        name="character_appearance">
        <typename
          name="character_style_select"/>
      </explicit>
    </entity>
    
    <entity
      name="text_style_for_defined_font">
      <explicit
        name="text_colour">
        <typename
          name="colour"/>
      </explicit>
    </entity>
    
    <entity
      name="text_style_with_box_characteristics"
      supertypes="text_style">
      <explicit
        name="characteristics">
        <aggregate
          type="SET"
          lower="1"
          upper="4"/>
        <typename
          name="box_characteristic_select"/>
      </explicit>
      <where
        label="WR1"
        expression="SIZEOF(QUERY(c1 &lt;* SELF.characteristics | SIZEOF(QUERY(c2 &lt;* SELF.characteristics - c1 | TYPEOF (c1) = TYPEOF (c2))) &gt; 0)) = 0">
      </where>
    </entity>
    
    <entity
      name="text_style_with_justification"
      supertypes="text_style">
      <explicit
        name="justification">
        <typename
          name="text_justification"/>
      </explicit>
    </entity>
    
    <entity
      name="text_style_with_mirror"
      supertypes="text_style">
      <explicit
        name="mirror_placement">
        <typename
          name="axis2_placement"/>
      </explicit>
      <where label="IP1"/>
    </entity>
    
    <entity
      name="text_style_with_spacing"
      supertypes="text_style">
      <explicit
        name="character_spacing">
        <typename
          name="character_spacing_select"/>
      </explicit>
    </entity>

    <entity
      name="two_direction_repeat_factor"
      supertypes="one_direction_repeat_factor">
      <explicit
        name="second_repeat_factor">
        <typename
          name="vector"/>
      </explicit>
    </entity>


    <function
      name="acyclic_occlusion_precedence">
      <parameter
        name="relation">
        <typename
          name="occlusion_precedence"/>
      </parameter>
      <parameter
        name="set_of_lower">
        <aggregate
          type="SET"/>
        <typename
          name="hiding_or_blanking_select"/>
      </parameter>
      <builtintype
        type="BOOLEAN"/>
      <algorithm>
LOCAL
x : SET OF occlusion_precedence;
local_set_of_lower : SET OF hiding_or_blanking_select;
END_LOCAL;
REPEAT i:=1 TO HIINDEX(set_of_lower);
IF relation.higher_precedence :=: set_of_lower[i] THEN
RETURN(FALSE);
END_IF;
END_REPEAT;
x := bag_to_set (USEDIN (relation.higher_precedence,
'PRESENTATION_APPEARANCE_SCHEMA.'+
'OCCLUSION_PRECEDENCE.LOWER_PRECEDENCE'));
local_set_of_lower := set_of_lower + relation.higher_precedence;
IF SIZEOF (x) &gt; 0 THEN
REPEAT i:=1 TO HIINDEX (x);
If NOT acyclic_occlusion_precedence(x[i] ,
local_set_of_lower) THEN
RETURN (FALSE);
END_IF;
END_REPEAT;
END_IF;
RETURN (TRUE);
      </algorithm>
    </function>

  </schema>
</express>
