<?xml version='1.0' encoding='UTF-8'?>
<!-- $Id: procedural_shape_model_schema.xml,v 1.6 2006/12/12 08:10:35 robbod Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  reference="ISO 10303-55"
  rcs.date="$Date: 2006/05/02 08:10:35 $"
  rcs.revision="$Revision: 1.6 $">
  
  <schema name="procedural_shape_model_schema">
  
      <interface
        kind="reference"
        schema="geometry_schema">
      <interfaced.item
          name="geometric_representation_item"/>
       </interface>
      <interface
        kind="reference"
        schema="topology_schema">
       <interfaced.item
          name="topological_representation_item"/>
      </interface>
      <interface
        kind="reference"
        schema="geometric_model_schema">
      <interfaced.item
          name="edge_based_wireframe_model"/>
       <interfaced.item
          name="face_based_surface_model"/>
      <interfaced.item
          name="shell_based_surface_model"/>
      <interfaced.item
          name="shell_based_wireframe_model"/>
      <interfaced.item
          name="solid_model"/>
      </interface>
       <interface
        kind="reference"
        schema="product_property_representation_schema">
        <interfaced.item
          name="shape_representation"/>
        </interface>
        <interface
        kind="reference"
        schema="representation_schema">
        <interfaced.item
          name="representation"/>
        <interfaced.item
          name="representation_item_relationship"/>
        <interfaced.item
          name="representation_relationship"/>
        </interface>
        <interface
            kind="reference"
        schema="procedural_model_schema">
        </interface>
        
    <type name="shape_representation_item">
          <select
            selectitems="geometric_representation_item topological_representation_item">
          </select>
        </type>

 
 
 
 
   <entity
        name="explicit_procedural_shape_representation_relationship"
        supertypes="explicit_procedural_representation_relationship">
        <explicit
          name="">rep_1
          <typename
            name="procedural_shape_representation"/>
        <redeclaration
	      entity-ref="representation_relationship"/>
	 </explicit>
        <explicit
          name="">rep_1
          <typename
            name="procedural_shape_representation"/>
        <redeclaration
	      entity-ref="representation_relationship"/>
	 </explicit>
  </entity>
   
  <entity
        name="explicit_procedural_geometric_representation_item_relationship"
        supertypes="explicit_procedural_representation_item_relationship">
        <explicit
          name="relating_representation_item">
          <typename
            name="procedural_shape_representation_sequence"/>
        <redeclaration
	      entity-ref="representation_item_relationship"/>
	</explicit>
        <explicit
          name="related_representation_item">
          <typename
            name="geometric_representation_item"/>
        <redeclaration
	      entity-ref="representation_item_relationship"/>
	</explicit>
	<where
          label="WR1"
          expression="NOT (
         'PROCEDURAL_SHAPE_MODEL_SCHEMA.PROCEDURAL_SHAPE_REPRESENTATION_SEQUENCE'
        IN TYPEOF(SELF\representation_item_relationship.related_representation_item))">
        </where>
    </entity>
  
 
 
  <entity
          name="procedural_shape_representation"
          supertypes="procedural_representation shape_representation">
          <explicit
            name="items">
            <aggregate
          type="SET"
          lower="1"
          upper="?"/>
          <typename  name="procedural_shape_representation_sequence"/>
          <redeclaration
	      entity-ref="representation"/>
	</explicit>
   </entity>
  
  <entity
          name="procedural_shape_representation_sequence"
          supertypes="geometric_representation_item">
          <where
            label="WR1"
            expression="SIZEOF(QUERY(q &lt;* SELF\procedural_representation_sequence.elements
             | NOT ('PROCEDURAL_SHAPE_MODEL_SCHEMA.SHAPE_REPRESENTATION_ITEM'
            IN TYPEOF(q)))) = 0">
          </where>
   </entity>
  
  
  
  <entity
          name="procedural_solid_representation_sequence"
          supertypes="procedural_shape_representation_sequence">
         <where
            label="WR1"
            expression="'GEOMETRIC_MODEL_SCHEMA.SOLID_MODEL' IN TYPEOF(SELF)">
          </where>
  </entity>
  
  
  <entity
            name="procedural_surface_representation_sequence"
            supertypes="procedural_shape_representation_sequence">
            <where
              label="WR1"
              expression="('GEOMETRIC_MODEL_SCHEMA.FACE_BASED_SURFACE_MODEL' IN TYPEOF(SELF))
                  XOR
               ('GEOMETRIC_MODEL_SCHEMA.SHELL_BASED_SURFACE_MODEL' IN TYPEOF(SELF))">
        </where>
    </entity>
  
  
  <entity
              name="procedural_wireframe_representation_sequence"
              supertypes="procedural_shape_representation_sequence">
              <where
                label="WR1"
                expression="('GEOMETRIC_MODEL_SCHEMA.EDGE_BASED_WIREFRAME_MODEL' IN TYPEOF(SELF))
              XOR
               ('GEOMETRIC_MODEL_SCHEMA.SHELL_BASED_WIREFRAME_MODEL' IN TYPEOF(SELF))">
              </where>
      </entity>
  
 
  
     <entity
              name="user_selected_shape_elements"
              supertypes="user_selected_elements">
              <where
                label="WR1"
                expression="SIZEOF(QUERY(q &lt;*
                SELF\user_selected_elements.picked_items | NOT
                  ('PROCEDURAL_SHAPE_MODEL_SCHEMA.SHAPE_REPRESENTATION_ITEM'
                 IN TYPEOF(q)))) = 0">
              </where>
     </entity>
  
  
   
  
  <entity
                name="indirectly_selected_shape_elements"
                supertypes="indirectly_selected_elements user_selected_shape_elements">
                 <where
                  label="WR1"
                  expression="SIZEOF(QUERY(q &lt;*
                  SELF\indirectly_selected_elements.indirectly_picked_items
                  | NOT ('PROCEDURAL_SHAPE_MODEL_SCHEMA.SHAPE_REPRESENTATION_ITEM'
                   IN TYPEOF(q)))) = 0">
                </where>
    </entity>
    
 
   </schema>
  </express>

  
  
  
  
  
