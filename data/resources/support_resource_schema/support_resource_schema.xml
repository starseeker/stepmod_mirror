<?xml version="1.0"?>
<!-- $Id: express2xml.js,v 1.9 2002/02/25 12:10:19 robbod Exp $ -->
<?xml-stylesheet type="text/xsl" href="../../../xsl/express.xsl"?>
<!DOCTYPE express SYSTEM "../../../dtd/express.dtd">
<express
  language_version="2"
  reference="ISO 10303-41"
  rcs.date="$Date: $"
  rcs.revision="$Revision: $">

  <application
    name="express2xml.js"
    owner="Eurostep Limited"
    url="http://www.eurostep.com"
    version="1.9"
    source="../data/resources/support_resource_schema/support_resource_schema.exp"/>

  <schema name="support_resource_schema">
    <type name="identifier">
      <builtintype
        type="STRING">
      </builtintype>


    </type>
    <type name="label">
      <builtintype
        type="STRING">
      </builtintype>


    </type>
    <type name="text">
      <builtintype
        type="STRING">
      </builtintype>


    </type>
    <function
      name="bag_to_set">
      <parameter
        name="the_bag">
        <aggregate
          type="BAG"/>
        <typename
          name="GENERIC"/>
      </parameter>
      <aggregate
        type="SET"/>
      <typename
        name="GENERIC"/>
      <algorithm>
  LOCAL
    the_set: SET OF GENERIC : intype := [];
  END_LOCAL;
  IF SIZEOF (the_bag) &gt; 0 THEN
    REPEAT i := 1 to HIINDEX (the_bag);
      the_set := the_set + the_bag [i];
    END_REPEAT;
  END_IF;
  RETURN (the_set);
      </algorithm>

    </function>

    <function
      name="type_check_function">
      <parameter
        name="the_type">
        <builtintype
          type="GENERIC"/>
      </parameter>
      <parameter
        name="sub_names">
        <aggregate
          type="SET"/>
        <typename
          name="STRING"/>
      </parameter>
      <parameter
        name="criterion">
        <builtintype
          type="INTEGER"/>
      </parameter>
      <builtintype
        type="LOGICAL"/>
      <algorithm>

--first, check the correctness of function arguments
IF (( NOT EXISTS ( the_type ) ) OR (NOT ({0&lt;= criterion &lt;=3})) OR
(SIZEOF ( sub_names ) = 0 ) ) THEN RETURN (UNKNOWN);
ELSE
  CASE criterion OF
       0: RETURN (SIZEOF ( sub_names * TYPEOF (the_type) ) &gt; 0);
       1: RETURN (SIZEOF ( sub_names * TYPEOF (the_type) ) = 0);
       2: RETURN (SIZEOF ( sub_names * TYPEOF (the_type) ) = 1);
       3: RETURN (SIZEOF ( sub_names * TYPEOF (the_type) ) &lt;= 1);
  END_CASE;
END_IF;
      </algorithm>

    </function>

  </schema>

</express>
