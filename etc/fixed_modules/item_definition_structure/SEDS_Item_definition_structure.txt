Section 1.  GENERAL INFORMATION (completed by SC4 Secretariat/WG Convener):

SEDS Report Number:
Date Submitted:
Status:
Assigned WG:
SEDS Team Leader: 
SEDS Team Members: 


Section 2.  ENHANCEMENT AND DISCREPANCY INFORMATION (completed by Author of SEDS Report):

Author: Giedrius Liutkus
Email Address: giedrius.liutkus@lksoft.lt
Part and Clause where Issue Originates: ISO/TS 10303-1345, clause 5.1, clause 4.2.
Other Parts Affected by the Issue: 
Related Issues:
Summary/Abstract/Keywords: Multiple mapping errors, update EXPRESS according changes in Contextual_shape_positioning.

Problem Description: 
Multiple mapping errors reported by build and build script:
1)    [style] Error APmapindex3: Unable to locate mapping for select item, entity: Part_definition_relationship XX items YY effectivity_application ZZ Effectivity_assignment WW 
2)    [style] Error APmapindex3: Unable to locate mapping for select item, entity: Geometric_placement_operation XX definition_placement YY item_definition_structure ZZ Geometrical_relationship WW 
3)    [style] Error APmapindex3: Unable to locate mapping for select item, entity: Geometric_model_relationship_with_transformation XX definition_placement YY item_definition_structure ZZ Geometrical_relationship WW 
4) Error Sel6: Mapping not defined in module  for Effectivity_assignment.items for SELECT extensions:  Part_definition_relationship 
5) Error Map34: ERROR in subtyping in PATH: representation_item is not a supertype of product_definition_relationship.related_product_definition
6) Error Map34: ERROR in subtyping in PATH: representation_item is not a supertype of product_definition_relationship.related_product_definition
7) Geometrical_relationship.definition_placement can't go to template_instance but allows only Geometric_model_relationship_with_transformation. 
The mapped_item approach can't be used here because mapped_item makes one representation part of the definition of the other which is wrong here. 
To be complient with AP214 we can only use Geometric_model_relationship_with_transformation from Contextual_shape_positioning ed2."


Conditions Under Which the Issue Was Discovered: Running regular stepmod build, running build script.

Proposed Solution (Optional):
Proposed solution for 1st and 4th errors:

		<ae entity="Effectivity_assignment" original_module="effectivity_application">
			<aa attribute="items" assertion_to="Part_definition_relationship">
				<aimelt>PATH</aimelt>
				<refpath_extend extended_select="effectivity_item">
					effectivity_item *> effectivity_item_for_replacement
					effectivity_item_for_replacement = product_definition_relationship
       			</refpath_extend>
			</aa>
		</ae>
---------------------------------------------------
Proposed solution for 2nd and 3rd errors:
Change current mapping of Geometric_relationship so that it matches changes on classification_with_attributes module:
		<ae entity="Geometrical_relationship">
			<aimelt>product_definition_relationship</aimelt>
			<source>ISO 10303-41</source>
			<refpath>{product_definition_relationship.name = 'geometrical relationship'} 	</refpath>
			<aa attribute="definition_placement" assertion_to="Mapping_based_template_instance">
				<alt_map id="1">
					<description> 	 use of the mapped_item approach 	 </description>
					<aimelt>PATH</aimelt>
					<refpath> 	product_definition_relationship 
{product_definition_relationship.name = 'geometrical relationship' } 	
[product_definition_relationship.relating_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation  
{representation =&gt; shape_representation} 
representation.items[i] -&gt; representation_item =&gt;] 
[product_definition_relationship.related_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation &lt;-  {representation =&gt; shape_representation} 
representation_map.mapped_representation 
representation_map &lt;- mapped_item.mapping_source] 
[characterized_product_definition = product_definition_relationship 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation 
{representation =&gt; shape_representation} 
representation.items[i] -&gt; representation_item =&gt;]  
mapped_item 	</refpath>
				</alt_map>
				<alt_map id="2">
					<description> 	 use of the representation_relationship approach 	 </description>
					<refpath> 	 product_definition_relationship 
{product_definition_relationship.name = 'geometrical relationship' }  
[product_definition_relationship.relating_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation &lt;- {representation =&gt; shape_representation} 
representation_relationship.rep_2] 
[product_definition_relationship.related_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation &lt;-  {representation =&gt; shape_representation} 
representation_relationship.rep_1] 
[characterized_product_definition = product_definition_relationship 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition =&gt; product_definition_shape &lt;-  context_dependent_shape_representation.represented_product_relation 
context_dependent_shape_representation 
context_dependent_shape_representation.representation_relation -&gt; shape_representation_relationship &lt;=]  
representation_relationship =&gt;  representation_relationship_with_transformation 	 </refpath>
				</alt_map>
			</aa>
			<aa attribute="definition_placement" assertion_to="Transformation_based_template_instance">
				<alt_map id="1">
					<description> 	 use of the mapped_item approach 	 </description>
					<aimelt>PATH</aimelt>
					<refpath> 	product_definition_relationship 
{product_definition_relationship.name = 'geometrical relationship' } 	
[product_definition_relationship.relating_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation  
{representation =&gt; shape_representation} 
representation.items[i] -&gt; representation_item =&gt;] 
[product_definition_relationship.related_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation &lt;-  {representation =&gt; shape_representation} 
representation_map.mapped_representation 
representation_map &lt;- mapped_item.mapping_source] 
[characterized_product_definition = product_definition_relationship 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation 
{representation =&gt; shape_representation} 
representation.items[i] -&gt; representation_item =&gt;]  
mapped_item 	</refpath>
				</alt_map>
				<alt_map id="2">
					<description> 	 use of the representation_relationship approach 	 </description>
					<refpath> 	 product_definition_relationship 
{product_definition_relationship.name = 'geometrical relationship' }  
[product_definition_relationship.relating_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation &lt;- {representation =&gt; shape_representation} 
representation_relationship.rep_2] 
[product_definition_relationship.related_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation &lt;-  {representation =&gt; shape_representation} 
representation_relationship.rep_1] 
[characterized_product_definition = product_definition_relationship 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition =&gt; product_definition_shape &lt;-  context_dependent_shape_representation.represented_product_relation 
context_dependent_shape_representation 
context_dependent_shape_representation.representation_relation -&gt; shape_representation_relationship &lt;=]  
representation_relationship =&gt;  representation_relationship_with_transformation 	 </refpath>
				</alt_map>
			</aa>
		</ae>
		
to the following:
		<ae entity="Geometrical_relationship">
			<aimelt>product_definition_relationship</aimelt>
			<source>ISO 10303-41</source>
			<refpath>{product_definition_relationship.name = 'geometrical relationship'} 	</refpath>
			<aa attribute="definition_placement" assertion_to="Geometric_placement_operation">
					<aimelt>PATH</aimelt>
					<refpath> 	product_definition_relationship 
{product_definition_relationship.name = 'geometrical relationship' } 	
[product_definition_relationship.relating_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation  
{representation =&gt; shape_representation} 
representation.items[i] -&gt; representation_item =&gt;] 
[product_definition_relationship.related_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation &lt;-  {representation =&gt; shape_representation} 
representation_map.mapped_representation 
representation_map &lt;- mapped_item.mapping_source] 
[characterized_product_definition = product_definition_relationship 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation 
{representation =&gt; shape_representation} 
representation.items[i] -&gt; representation_item =&gt;]  
mapped_item 	</refpath>
			</aa>
			<aa attribute="definition_placement" assertion_to="Geometric_model_relationship_with_transformation">
					<refpath> 	 product_definition_relationship 
{product_definition_relationship.name = 'geometrical relationship' }  
[product_definition_relationship.relating_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation &lt;- {representation =&gt; shape_representation} 
representation_relationship.rep_2] 
[product_definition_relationship.related_product_definition -&gt; product_definition 
characterized_product_definition = product_definition 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition  
{property_definition =&gt; product_definition_shape} 
represented_definition = property_definition 
represented_definition &lt;- property_definition_representation.definition 
property_definition_representation  
{property_definition_representation =&gt; shape_definition_representation} 
property_definition_representation.used_representation -&gt; representation &lt;-  {representation =&gt; shape_representation} 
representation_relationship.rep_1] 
[characterized_product_definition = product_definition_relationship 
characterized_definition = characterized_product_definition 
characterized_definition &lt;- property_definition.definition 
property_definition =&gt; product_definition_shape &lt;-  context_dependent_shape_representation.represented_product_relation 
context_dependent_shape_representation 
context_dependent_shape_representation.representation_relation -&gt; shape_representation_relationship &lt;=]  
representation_relationship =&gt;  representation_relationship_with_transformation 	 </refpath>
			</aa>
		</ae>
---------------------------------------------------
Proposed solution for 5th, 6th and  7th errors:
Change this entity:
ENTITY Geometrical_relationship
  SUBTYPE OF (Part_definition_relationship);
-- Change here
--  definition_placement: template_instance;
--to
  definition_placement: Geometric_model_relationship_with_transformation;
DERIVE
  SELF\View_definition_relationship.relation_type : STRING := 'geometrical relationship';
END_ENTITY;

Section 3.  RESPONSE INFORMATION (completed by SEDS Resolution Team Leader):


If Accepted, Resolution:


Section 4.  FOLLOW-UP INFORMATION (completed by WG Convener):

Class:
Priority:
Impact of Change: 
Further Action Required:
Action Required by SEDS Coordinator/WG Conveners/QC/SC4:

