<?xml version="1.0" encoding="iso-8859-1"?>
<?xml-stylesheet href="../../make-menu.xsl" type="text/xsl"?><html>
   <head>
      <this-is section="changes" page="s90" subpage="namepool90"/>
      <!--
           Generated at 2010-10-29T18:20:48.427+01:00--><title>Saxonica: XSLT and XQuery Processing: NamePool changes</title>
      <meta name="coverage" content="Worldwide"/>
      <meta name="copyright" content="Copyright Saxonica Ltd"/>
      <meta name="title" content="Saxonica: XSLT and XQuery Processing: NamePool changes"/>
      <meta name="robots" content="noindex,nofollow"/>
      <link rel="stylesheet" href="../../saxondocs.css" type="text/css"/>
   </head>
   <body class="main">
      <h1>NamePool changes</h1>
      <p>The <code>NamePool</code> is no longer used for names such as variable names which are not used at run-time. 
This change is made to ease pressure on
the NamePool as a shared resource which can become a bottleneck for some high-throughput applications, and
which can gradually fill for long-running applications. The problem can arise particularly because the Saxon
optimizer generates variable names at random for internal variables, meaning that there is a slow but steady increase
in the number of entries in the NamePool even under a very stable workload. The name of a variable is
now held internally in a <code>StructuredQName</code> object, which holds the prefix, URI, and local name
in a structure that is designed for economy in space usage combined with an efficient equals() test.</p>
      <p>The same change has been made for other kinds of name such as function names, template names, attribute set
names, character map names, mode names, output format names, decimal format names, and key names. 
In the vast majority of cases these names are resolved at compile time so there was little benefit from using
the shared name pool.</p>
      <p>Local parameters to XSLT templates, which are matched by name at run-time, still use numeric identifiers
for efficient matching, but these are no longer fingerprints allocated from the namepool, they are numbers
allocated by the stylesheet compiler locally to a stylesheet.</p>
      <p>User applications are unlikely to be affected by the change unless they probe rather deeply into Saxon
system-programming interfaces, for example interfaces provided for debuggers, or for defining your own extension
function binding factories. But if you provide your own implementation of the <code>StaticContext</code>
interface, you will need to change the method <code>bindVariable()</code> to accept a <code>StructuredQName</code>
rather than an integer fingerprint.</p>
      <table width="100%">
         <tr>
            <td>
               <p align="right"><a class="nav" href="expressiontree90.xml">Next</a></p>
            </td>
         </tr>
      </table>
   </body>
</html>