<!-- $Id: build.xml,v 1.48 2003/05/29 21:30:04 robbod Exp $ -->

<!-- ================================================= -->
<!-- build.xml for the STEP modules repository         -->
<!-- Generates HTML from XML source files              -->
<!--                                                   -->
<!-- written by Josh Lubell, NIST                      -->
<!-- lubell@nist.gov                                   -->
<!--                                                   -->
<!-- Additions by Rob Bodingon, Eurostep Limited       -->
<!--  rob.bodington@eurostep.com                       -->
<!--                                                   -->
<!-- For use with the Ant build tool                   -->
<!-- (http://jakarta.apache.org/ant)                   -->
<!--                                                   -->
<!-- Requires a TrAX-compliant XSLT processor (such    -->
<!-- as Saxon or Xalan) and the Sun Java JDK           -->
<!-- ================================================= -->
<!--
============================================================
  NOTE - The XSL for navigation uses a number of XSL parser 
         specific extensiions, (node-set), hence only the 
         MSXML and Saxon are supported.

         Ant/Java may well run out of memory when running 
         "ant all" To avoid this set the system environment 
         variable  ANT_OPTS to '-Xmx256m'
         This will increase Java heap size.

============================================================

Usage:

"ant" or "ant all"
generates HTML for everything in the module repository

"ant clean" 
deletes all generated HTML files

"ant wf"
checks all XML documents for well-formedness

"ant wf_basic"
checks basic XML files for well-formedness

"ant wf_xsl"
checks XSLT stylesheet files for well-formedness

"ant wf_resources"
checks resource XML files for well-formedness

"ant wf_modules"
checks XML files of all modules for well-formedness (this take several
minutes)

"ant wf_resdocs"
checks XML files of all resource parts for well-formedness

"ant -DMODULESDIR=data/modules/[module-name] wf_modules"
checks a module's XML files for well-formedness

"ant wf_aps"
checks AP XML files for well-formedness

"ant wf_nav"
checks navigation XML and XSL files for well-formedness

"ant valid_modules"
checks module XML for well-formedness and conformance to DTD

"ant valid_resdocs"
checks all resource part  XML for well-formedness and conformance to DTD

"ant valid_resources"
checks all resource  XML for well-formedness and conformance to DTD

"ant -DMODULESDIR=data/modules/[module-name] valid_modules"
check a single module XML for well-formedness and conformance to DTD

"ant -DRESDIR=data/resource_docs/[resdoc-name] valid_resdocs"
check a single resource part XML for well-formedness and conformance to DTD

"ant -DRESOURCESDIR=data/resources/[resource-name] valid_resources"
check a single resource part XML for well-formedness and conformance to DTD


"ant index" 
generates HTML for repository_index.xml


"ant modules" 
generates HTML for all the modules

"ant -DMODULES=data/modules/[module-name] modules" 
generates HTML for a single module

"ant -DMODULES=data/modules/[module-name] clean_module" 
deletes all HTML generated for a single module

"ant resources" 
generates HTML for all the resource schemas

"ant -DRESOURCES=data/resources/[schema-name] resources" 
generates HTML for a single resource schema

"ant -DRESOURCES=data/resources/[schema-name] clean_resource" 
deletes all HTML generated for a single resource

"ant aps"
generate Application protocol documents

"ant -DAPDOCS=data/application_protocols/[ap-name] aps" 
generates HTML for a single application protocol

"ant -DAPDOCS=data/application_protocols/[ap-name] clean_aps" 
deletes all HTML generated for a single application protocol

"ant "resdocs"
generate resource documents

"ant -DRESDOCS=data/resource_docs/[resdoc-name] resdocs" 
generates all HTML  for a single resource documents

"ant -DRESDOCS=data/resource_docs/[resdoc-name] clean_resdocs" 
deletes all HTML generated for a single resource documents


"ant nav"
generates all the navigation indices for the repository

"ant ballots" 
generates HTML for ballot indices

"ant tgz" 
creates a GNU-compatible .tar.gz file, suitable for distribution,
containing all HTML files


"ant zip" 
creates a .zip file, suitable for distribution, containing all HTML
files

The following build targets are intended for automatic backups,
mirroring, and such. Most developers should have no need to use them.

"ant cvsupdate"
does an anonymous (pserver) CVS update of your local copy of the
repository. USE THIS TARGET ONLY WITH AN ANONYMOUSLY CHECKED OUT LOCAL
COPY. DO NOT USE IF YOUR LOCAL REPOSITORY WAS CHECKED OUT USING SSH.

"ant cvstarball"
downloads most recent CVS repository backup from SourceForge (in
tar.gz format)

-->

<project name="repohtml" default="all" basedir="..">

  <target name="init" description="initialize variables">
    <tstamp/>
    <property name="STYLES"  value="xsl"/>
    <!-- YES means that the rcs info is displayed on every module -->
    <property name="OUTPUT_RCS" value="NO"/>
    <property name="DTDDIR" value="dtd"/>
    <property name="BASICDIR" value="data/basic"/>
    <property name="RESOURCESDIR" value="data/resources"/>
    <property name="RESOURCES" value="${RESOURCESDIR}/**"/>
    <property name="MODULESDIR" value="data/modules"/>
    <property name="MODULES" value="${MODULESDIR}/**"/>

    <property name="APDIR" value="data/application_protocols"/>
    <property name="APDOCS" value="${APDIR}/**"/>
    <property name="APXSL" value="xsl/ap_doc"/>

    <property name="RESDIR" value="data/resource_docs"/>
    <property name="RESDOCS" value="${RESDIR}/**"/>
    <property name="RESXSL" value="xsl/res_doc"/>

    <property name="NAVDIR" value="nav"/>
    <property name="NAV" value="${NAVDIR}/**"/>
    <property name="NAVXSL" value="nav/xsl"/>
    <property name="MODNAV" value="${MODULES}/nav"/>
    <property name="DVLPXSL" value="xsl/projmg"/>
    <property name="MODDVLP" value="${MODULES}/dvlp"/>

    <property name="SYS" value="${MODULES}/sys"/>
    <property name="ARCHIVE" value="stepmod-html-${DSTAMP}"/>
    <property name="ARCHIVEALL" value="stepmod-${DSTAMP}"/>
    <property name="SFTARBALL"
	      value="http://cvs.sourceforge.net/cvstarballs/stepmod-cvsroot.tar.gz"/>
    <property name="SFCVSROOT"
      value="cvs.stepmod.sourceforge.net:/cvsroot/stepmod"/>
    <property name="BALLOTSTYLES" value="ballots/xsl"/>
    <property name="BALLOTDTDDIR" value="ballots/dtd"/>
    <property name="BALLOTS" value="ballots/ballots/**"/>
  </target>

  <target name="clean" depends="init" description="delete generated files">
    <delete>
      <fileset dir="." includes="repository_index.htm*"/>
      <fileset dir="${RESOURCESDIR}" includes="**/*.htm*"/>
      <fileset dir="${MODULESDIR}" includes="**/*.htm*"/>
      <fileset dir="${APDIR}" includes="**/*.htm*"/>
      <fileset dir="${RESDIR}" includes="**/*.htm*"/>
      <fileset dir="${NAVDIR}" includes="**/*.htm*"/>
      <fileset dir="ballots" includes="**/*.htm*"/>
    </delete>
  </target>

  <target name="clean_module" depends="init" 
    description="delete generated files">
    <delete>
      <fileset dir="${MODULES}" includes="**/*.htm*"/>
    </delete>
  </target>

  <target name="clean_resource" depends="init" 
    description="delete generated files">
    <delete>
      <fileset dir="${RESOURCES}" includes="**/*.htm*"/>
    </delete>
  </target>

  <target name="clean_aps" depends="init" 
    description="delete generated files">
    <delete>
      <fileset dir="${APDOCS}" includes="**/*.htm*"/>
    </delete>
  </target>

  <target name="clean_resdocs" depends="init" 
    description="delete generated files">
    <delete>
      <fileset dir="${RESDOCS}" includes="**/*.htm*"/>
    </delete>
  </target>

  <target name="wf" depends="wf_basic, wf_xsl, wf_resources,
	  wf_modules, wf_aps, wf_nav" 
	  description="check well-formedness"/>

  <target name="wf_basic" depends="init" 
	  description="check basic files for well-formedness">
    <echo level="info">Checking files in ${BASICDIR} for well-formedness...</echo>
    <xmlvalidate lenient="yes" warn="yes" failonerror="no">
      <fileset dir="${BASICDIR}" includes="**/*.xml, **/*.xsl"/>
    </xmlvalidate>
  </target>

  <target name="wf_xsl" depends="init" 
	  description="check XSL files for well-formedness">
    <echo level="info">Checking files in ${STYLES} for well-formedness...</echo>
    <xmlvalidate lenient="yes" warn="yes" failonerror="no">
      <fileset dir="${STYLES}" includes="**/*.xml, **/*.xsl"/>
    </xmlvalidate>
  </target>

  <target name="wf_resources" depends="init" 
	  description="check resources for well-formedness">
    <echo level="info">Checking files in ${RESOURCESDIR} for well-formedness...</echo>
    <xmlvalidate lenient="yes" warn="yes" failonerror="no">
      <fileset dir="${RESOURCESDIR}" includes="**/*.xml, **/*.xsl"/>
    </xmlvalidate>
  </target>

  <target name="wf_modules" depends="init" 
	  description="check modules for well-formedness">
    <echo level="info">Checking files in ${MODULESDIR} for well-formedness...</echo>
    <xmlvalidate lenient="yes" warn="yes" failonerror="no">
      <fileset dir="${MODULESDIR}" includes="**/*.xml, **/*.xsl"/>
    </xmlvalidate>
  </target>

  <target name="wf_aps" depends="init" 
	  description="check APs for well-formedness">
    <echo level="info">Checking files in ${APDIR} for well-formedness...</echo>
    <xmlvalidate lenient="yes" warn="yes" failonerror="no">
      <fileset dir="${APDIR}" includes="**/*.xml, **/*.xsl"/>
    </xmlvalidate>
  </target>

  <target name="wf_nav" depends="init" 
	  description="check navigation files for well-formedness">
    <echo level="info">Checking files in ${NAVDIR} for well-formedness...</echo>
    <xmlvalidate lenient="yes" warn="yes" failonerror="no">
      <fileset dir="${NAVDIR}" includes="**/*.xml, **/*.xsl"/>
    </xmlvalidate>
  </target>

  <target name="wf_resdocs" depends="init" 
	  description="check navigation files for well-formedness">
    <echo level="info">Checking files in ${RESDIR} for well-formedness...</echo>
    <xmlvalidate lenient="yes" warn="yes" failonerror="no">
      <fileset dir="${RESDIR}" includes="**/*.xml, **/*.xsl"/>
    </xmlvalidate>
  </target>


  <target name="valid_modules" depends="init" 
	  description="check modules for well-formedness">
    <echo message="____________________________________________________________"/>
    <echo message="Checking files in ${MODULESDIR} for well-formedness and conformance to DTD"/>
    <xmlvalidate lenient="no" warn="no" failonerror="no">
      <fileset dir="${MODULESDIR}">
        <include name="**/*.xml"/>
        <exclude name="**/nav/*.xml"/>
      </fileset>
    </xmlvalidate>
    <echo message="EndValid"/> 
  </target>

  <target name="valid_resdocs" depends="init" 
	  description="check modules for well-formedness">
    <echo message="____________________________________________________________"/>
    <echo message="Checking files in ${RESDIR} for well-formedness and conformance to DTD"/>
    <xmlvalidate lenient="no" warn="no" failonerror="no">
      <fileset dir="${RESDIR}">
        <include name="**/*.xml"/>
        <exclude name="**/nav/*.xml"/>
      </fileset>
    </xmlvalidate>
  </target>

  <target name="valid_resources" depends="init" 
	  description="check modules for well-formedness">
    <echo message="____________________________________________________________"/>
    <echo message="Checking files in ${RESOURCESDIR} for well-formedness and conformance to DTD"/>
    <xmlvalidate lenient="no" warn="no" failonerror="no">
      <fileset dir="${RESOURCESDIR}">
        <include name="**/*.xml"/>
        <exclude name="**/resource_map.xml" />
        <exclude name="**/developer.xml" />
      </fileset>
    </xmlvalidate>
  </target>



  <target name="index" depends="init, ballots, nav" 
          description="generate repository index">
    <dependset>
      <srcfileset dir="${DTDDIR}" includes="**/*.dtd, **/*.ent"/>
      <srcfileset dir="${STYLES}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="repository_index.htm*"/>
    </dependset>
    <style includes="repository_index.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/repository_index.xsl">
      <param name="output_type" expression="HTM"/>
    </style>
  </target>

  <target name="resources" depends="init" 
          description="generate integrated resources">
    <dependset>
      <srcfileset dir="${DTDDIR}" includes="**/*.dtd, **/*.ent"/>
      <srcfileset dir="${STYLES}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="${RESOURCES}/*.htm*"/>
    </dependset>

    <style includes="${RESOURCES}/developer.xml"
           destdir="." extension=".htm"
	   style="${NAVXSL}/schema_developer.xsl">
      <param name="output_type" expression="HTM"/>
    </style>


    <style 
      includes="${RESOURCES}/*.xml"
      destdir="." extension=".htm"
      excludes="${RESOURCES}/developer.xml"
      style="${STYLES}/express.xsl">
      <param name="output_type" expression="HTM"/>
    </style>
  </target>


  <target name="mapping" depends="init" 
          description="perform mapping test on modules">
    <dependset>
      <srcfileset dir="${DTDDIR}" includes="**/*.dtd, **/*.ent"/>
      <srcfileset dir="${STYLES}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="${MODULES}/*.htm*"/>
    </dependset>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/mapping_view.xml"/>
    <style includes="${MODNAV}/mapping_view.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/mapping_view.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/mapping_view.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/mapping_view_with_test.xml"/>
    <style includes="${MODNAV}/mapping_view_with_test.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/mapping_view_with_test.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/mapping_view_with_test.xml"/>
    
  </target>


  <target name="repository_dependencies" depends="init" 
    description="generate modules dependencies">
    <dependset>      
      <srcfileset dir="${DTDDIR}" includes="**/*.dtd, **/*.ent"/>
      <srcfileset dir="${STYLES}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="${MODULES}/*.htm*"/>
    </dependset>
    <style includes="${NAV}/repository_dependencies.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/repository_dependencies.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
  </target>


  <target name="modules" depends="init" 
          description="generate modules">
    <dependset>

      <srcfileset dir="${DTDDIR}" includes="**/*.dtd, **/*.ent"/>
      <srcfileset dir="${STYLES}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="${MODULES}/*.htm*"/>
    </dependset>

    <echo message="BuildModules"/>
    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODULES}/index.xml"/>
    <style includes="${MODULES}/index.xml" 
      destdir="." extension=".htm"
      style="${STYLES}/index.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODULES}/index.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/arm_descriptions.xml"/>
    <style includes="${MODNAV}/arm_descriptions.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/arm_descriptions.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/arm_descriptions.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/arm_long_form.xml"/>
    <style includes="${MODNAV}/arm_long_form.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/arm_long_form.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/arm_long_form.xml"/>
    
    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/developer.xml"/>
    <style includes="${MODNAV}/developer.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/developer.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/developer.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/issues_dvlp.xml"/>
    <style includes="${MODNAV}/issues_dvlp.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/issues_dvlp.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/issues_dvlp.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/mapping_view.xml"/>
    <style includes="${MODNAV}/mapping_view.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/mapping_view.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/mapping_view.xml"/>

    <!-- removed to reduce processing time 
    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/mapping_view_with_test.xml"/>
    <style includes="${MODNAV}/mapping_view_with_test.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/mapping_view_with_test.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/mapping_view_with_test.xml"/>
    -->

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/mim_descriptions.xml"/>
    <style includes="${MODNAV}/mim_descriptions.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/mim_descriptions.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/mim_descriptions.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/module_index.xml"/>
    <style includes="${MODNAV}/module_index.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/mim_descriptions.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/module_index.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/select_view.xml"/>
    <style includes="${MODNAV}/select_view.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/select_view.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/select_view.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/select_matrix_view.xml"/>
    <style includes="${MODNAV}/select_view.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/select_matrix_view.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/select_matrix_view.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODNAV}/summary.xml"/>
    <style includes="${MODNAV}/summary.xml" destdir="."
	   extension=".htm"
	   style="${NAVXSL}/summary.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODNAV}/summary.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODDVLP}/issues.xml"/>
    <style includes="${MODDVLP}/issues.xml" destdir="."
	   extension=".htm"
	   style="${DVLPXSL}/issues_file.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODDVLP}/issues.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODDVLP}/projmg.xml"/>
    <style includes="${MODDVLP}/projmg.xml" destdir="."
	   extension=".htm"
	   style="${DVLPXSL}/projmg.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODDVLP}/projmg.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODULES}/arm.xml, mim.xml"/>
    <style includes="${MODULES}/arm.xml, ${MODULES}/mim.xml" 
      destdir="." extension=".htm"
      style="${STYLES}/express.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODULES}/arm.xml, mim.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODULES}/arm_descriptions.xml, ${MODULES}/mim_descriptions.xml"/>
    <style includes="${MODULES}/arm_descriptions.xml,
	   ${MODULES}/mim_descriptions.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/descriptions.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${MODULES}/arm_descriptions.xml,${MODULES}/mim_descriptions.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${MODULES}/armexpg*.xml, ${MODULES}/mimexpg*.xml"/>
    <style includes="${MODULES}/armexpg*.xml,
	   ${MODULES}/mimexpg*.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/imgfile.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>    
    <echo message="EndProcessing: ${MODULES}/armexpg*.xml, ${MODULES}/mimexpg*.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/contents.xml"/>
    <style includes="${SYS}/contents.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_contents.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/contents.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/abstract.xml"/>
    <style includes="${SYS}/abstract.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_abstract.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/abstract.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/1_scope.xml"/>
    <style includes="${SYS}/1_scope.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_1_scope.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/1_scope.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/2_refs.xml"/>
    <style includes="${SYS}/2_refs.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_2_refs.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/2_refs.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/3_defs.xml"/>
    <style includes="${SYS}/3_defs.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_3_defs.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/3_defs.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/4_info_reqs.xml"/>
    <style includes="${SYS}/4_info_reqs.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_4_info_reqs.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/4_info_reqs.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/5_main.xml"/>
    <style includes="${SYS}/5_main.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_5_main.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/5_main.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/5_mapping.xml"/>
    <style includes="${SYS}/5_mapping.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_5_mapping.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/5_mapping.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/5_mim.xml"/>
    <style includes="${SYS}/5_mim.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_5_mim.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/5_mim.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/a_short_names.xml"/>
    <style includes="${SYS}/a_short_names.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_a_short_names.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/a_short_names.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/b_obj_reg.xml"/>
    <style includes="${SYS}/b_obj_reg.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_b_obj_reg.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/b_obj_reg.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/biblio.xml"/>
    <style includes="${SYS}/biblio.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_biblio.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/biblio.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/c_arm_expg.xml"/>
    <style includes="${SYS}/c_arm_expg.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_c_arm_expg.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/c_arm_expg.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/cover.xml"/>
    <style includes="${SYS}/cover.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_cover.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/cover.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/d_mim_expg.xml"/>
    <style includes="${SYS}/d_mim_expg.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_d_mim_expg.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/d_mim_expg.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/e_exp.xml"/>
    <style includes="${SYS}/e_exp.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_e_exp.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/e_exp.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/e_exp_arm.xml"/>
    <style includes="${SYS}/e_exp_arm.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_e_exp_arm.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/e_exp_arm.xml"/>

    <style includes="${SYS}/e_exp_arm_lf.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_e_exp_arm_lf.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/e_exp_mim.xml"/>
    <style includes="${SYS}/e_exp_mim.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_e_exp_mim.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/e_exp_mim.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/e_exp_mim_lf.xml"/>
    <style includes="${SYS}/e_exp_mim_lf.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_e_exp_mim_lf.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/e_exp_mim_lf.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/f_guide.xml"/>
    <style includes="${SYS}/f_guide.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_f_guide.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/f_guide.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/foreword.xml"/>
    <style includes="${SYS}/foreword.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_foreword.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/foreword.xml"/>

    <echo message=""/>
    <echo message="____________________________________________________________"/>
    <echo message="Processing: ${SYS}/introduction.xml"/>
    <style includes="${SYS}/introduction.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_introduction.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    <echo message="EndProcessing: ${SYS}/introduction.xml"/>

    <!-- not used yet
    <style includes="${SYS}/main.xml" destdir="."
	   extension=".htm"
	   style="${STYLES}/sect_main.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    -->
    <echo message="EndBuildModule"/>
  </target>

  <target name="ballot_index" depends="init"
    description="Create HTML for ballot index">
    <dependset>
      <srcfileset dir="${BALLOTDTDDIR}" includes="**/*.dtd, **/*.ent"/>
      <srcfileset dir="${BALLOTSTYLES}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="ballots/index.htm"/>
    </dependset>
    
    <style includes="ballots/index.xml" 
      destdir="." extension=".htm"
      style="${BALLOTSTYLES}/index.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="stepmodhome" expression="."/>
    </style>
  </target>

  <target name="ballots" depends="init, ballot_index"
    description="Create HTML for all ballot indices">
    <dependset>
      <srcfileset dir="${BALLOTDTDDIR}" includes="**/*.dtd, **/*.ent"/>
      <srcfileset dir="${BALLOTSTYLES}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="${BALLOTS}/*.htm*"/>
    </dependset>
    
    <style includes="${BALLOTS}/ballot_summary.xml" 
      destdir="." extension=".htm"
      style="${BALLOTSTYLES}/ballot_summary.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="stepmodhome" expression="."/>
    </style>

    <style includes="${BALLOTS}/ballot_checklist.xml" 
      destdir="." extension=".htm"
      style="${BALLOTSTYLES}/ballot_checklist.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="stepmodhome" expression="."/>
    </style>

    <style includes="${BALLOTS}/ballot_list.xml" 
      destdir="." extension=".htm"
      style="${BALLOTSTYLES}/ballot_list.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="stepmodhome" expression="."/>
    </style>

    <style includes="${BALLOTS}/ballot_shortnames.xml" 
      destdir="." extension=".htm"
      style="${BALLOTSTYLES}/ballot_shortnames.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="stepmodhome" expression="."/>
    </style>

    <style includes="${BALLOTS}/ballot_cvs_tags.xml" 
      destdir="." extension=".htm"
      style="${BALLOTSTYLES}/ballot_cvs_tags.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="stepmodhome" expression="."/>
    </style>

    <style includes="${BALLOTS}/start.xml" 
      destdir="." extension=".htm"
      style="${BALLOTSTYLES}/ballot_start.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="stepmodhome" expression="."/>
    </style>

  </target>


  <target name="nav" depends="init" 
    description="generate navigation indices">
    <dependset>
      <srcfileset dir="${NAVXSL}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="${NAV}/*.htm*"/>
    </dependset>

    <!-- Main navigation frames -->
    <style includes="${NAV}/index.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/index.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/banner.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/banner.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/titlebar.xml" destdir="."

      extension=".htm"
      style="${NAVXSL}/titlebar.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/introduction.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/introduction.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <!-- Modules menu -->
    <style includes="${NAV}/modules_alpha.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/modules_alpha.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/modules_project.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/modules_project.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/modules_status.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/modules_status.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/modules_numbers.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/modules_numbers.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/modules_project.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/modules_project.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/modules_project_lead.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/modules_project_lead.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/definitions.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/definitions.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/keywords.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/keywords.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/repository_dependencies.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/repository_dependencies.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <!-- EXPRESS menu -->
    <style includes="${NAV}/arm_objects.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/arm_objects.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/mim_objects.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/mim_objects.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/resource_objects.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/resource_objects.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <!-- Application protocol menu -->
    <style includes="${NAV}/ap_alpha.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/ap_alpha.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <!-- resource parts menu -->
    <style includes="${NAV}/resource_part_alpha.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/resource_part_alpha.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


    <!-- Common resources menu -->
    <style includes="${NAV}/resource_schema_alpha.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/resource_schema_alpha.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${NAV}/resource_mappings.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/resource_mappings.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <!-- Ballots menu -->
    <style includes="${NAV}/ballot_modules.xml" destdir="."
      extension=".htm"
      style="${NAVXSL}/ballot_modules.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

  </target>


  <target name="aps" depends="init" 
          description="generate Application protocol documents">
    <dependset>

      <srcfileset dir="${DTDDIR}" includes="**/*.dtd, **/*.ent"/>
      <srcfileset dir="${STYLES}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="${APDOCS}/*.htm*"/>
    </dependset>

    <style includes="${APDOCS}/home.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/home.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/aam.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/aam_descriptions.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/aamidef*.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/imgfile.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/data_plan_*.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/imgfile.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/1_scope.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_1_scope.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/2_refs.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_2_refs.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


    <style includes="${APDOCS}/sys/3_defs.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_3_defs.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


    <style includes="${APDOCS}/sys/4_info_reqs.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_4_info_reqs.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


    <style includes="${APDOCS}/sys/5_main.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_5_main.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


    <style includes="${APDOCS}/sys/6_ccs.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_6_ccs.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_aam.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_aam.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_arm_expg.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_arm_expg.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_changes.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_changes.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_comp_int.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_comp_int.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_exp_lf.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_exp_lf.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_guide.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_guide.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_imp_meth.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_imp_meth.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_obj_reg.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_obj_reg.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_pics.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_pics.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_shortnames.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_shortnames.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/annex_tech_disc.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_annex_tech_disc.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/biblio.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_biblio.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/contents.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_contents.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/cover.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_cover.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/foreword.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_foreword.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/introduction.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/sect_introduction.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/frame_aptitle.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/frame_aptitle.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/frame_contenttitle.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/frame_contenttitle.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/frame_index.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/frame_index.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/frame_toc.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/frame_toc.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_arm_express.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_arm_express.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_arm_express_inner.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_arm_express_inner.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_arm_express_top.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_arm_express_top.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_arm_mappings.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_arm_mappings.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_arm_mappings_inner.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_arm_mappings_inner.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_arm_mappings_top.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_arm_mappings_top.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_arm_modules.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_arm_modules.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_arm_modules_inner.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_arm_modules_inner.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_arm_modules_top.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_arm_modules_top.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_mim_express.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_mim_express.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_mim_express_inner.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_mim_express_inner.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_mim_express_top.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_mim_express_top.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_mim_modules.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_mim_modules.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_mim_modules_inner.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_mim_modules_inner.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_mim_modules_top.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_mim_modules_top.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_resources.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_resources.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_resources_inner.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_resources_inner.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/sys/index_resources_top.xml" 
      destdir="." extension=".htm"
      style="${APXSL}/index_resources_top.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${APDOCS}/issues.xml" destdir="."
	   extension=".htm"
	   style="${DVLPXSL}/issues_file.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


  </target>

  <target name="resdocs" depends="init" 
          description="generate resource  documents">
    <dependset>

      <srcfileset dir="${DTDDIR}" includes="**/*.dtd, **/*.ent"/>
      <srcfileset dir="${STYLES}" includes="**/*.xsl"/>
      <targetfileset dir="." includes="${RESDOCS}/*.htm*"/>
    </dependset>


    <style includes="${RESDOCS}/sys/introduction.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_introduction.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/foreword.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_foreword.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/schema_diagexpg*.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/imgfile.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>



    <style includes="${RESDOCS}/sys/1_scope.xml" destdir="."
      extension=".htm"
      style="${RESXSL}/sect_1_scope.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


    <style includes="${RESDOCS}/sys/2_refs.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_2_refs.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/3_defs.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_3_defs.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/4_schema.xml" destdir="."
      extension=".htm"
      style="${RESXSL}/sect_schema.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/5_schema.xml" destdir="."
      extension=".htm"
      style="${RESXSL}/sect_schema.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/6_schema.xml" destdir="."
      extension=".htm"
      style="${RESXSL}/sect_schema.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/a_short_names.xml" destdir="."
      extension=".htm"
      style="${RESXSL}/sect_a_short_names.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


    <style includes="${RESDOCS}/sys/b_obj_reg.xml" destdir="."
      extension=".htm"
	   style="${RESXSL}/sect_b_obj_reg.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/c_exp.xml" destdir="."
      extension=".htm"
	   style="${RESXSL}/sect_c_exp.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/c_exp_schema_4.xml" destdir="."
      extension=".htm"
	   style="${RESXSL}/sect_c_exp_schema.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/c_exp_schema_5.xml" destdir="."
      extension=".htm"
	   style="${RESXSL}/sect_c_exp_schema.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/c_exp_schema_6.xml" destdir="."
      extension=".htm"
	   style="${RESXSL}/sect_c_exp_schema.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/biblio.xml" destdir="."
      extension=".htm"
      style="${RESXSL}/sect_biblio.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


    <style includes="${RESDOCS}/sys/contents.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_contents.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>
    
    <style includes="${RESDOCS}/sys/cover.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_cover.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/d_expg.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_d_expg.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>


    <style includes="${RESDOCS}/sys/tech_discussion.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_tech_discussion.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/examples.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_examples.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/sys/add_scope.xml" destdir="."
	   extension=".htm"
	   style="${RESXSL}/sect_add_scope.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

    <style includes="${RESDOCS}/dvlp/issues.xml" destdir="."
	   extension=".htm"
	   style="${DVLPXSL}/resource_issues_file.xsl">
      <param name="output_type" expression="HTM"/>
      <param name="output_rcs" expression="${OUTPUT_RCS}"/>
    </style>

  </target>


  <target name="all" depends="index, resources, modules, resdocs"
	  description="create HTML for everything"/>

  <target name="tgz" depends="all" 
          description="create .tar.gz file">
    <tar tarfile="../${ARCHIVE}.tar"
         basedir=".."
         includes="stepmod/repository_index.htm, stepmod/css/**,
stepmod/data/**, stepmod/help/**, stepmod/images/**"
         excludes="**/*.xml"
    />
    <gzip src="../${ARCHIVE}.tar"
	  zipfile="../${ARCHIVE}.tar.gz"/>
    <delete file="../${ARCHIVE}.tar"/>
  </target>

  <target name="zip" depends="all" description="create .zip file">
    <zip zipfile="../${ARCHIVE}.zip" basedir=".."
         includes="stepmod/repository_index.htm, stepmod/css/**,
                   stepmod/data/**, stepmod/help/**, stepmod/images/**, stepmod/ballots/**, stepmod/nav/**"
      excludes="**/*.xml, **/*.zip"
    />
  </target>

  <target name="zipall" depends="all" description="create .zip file">
    <zip zipfile="../${ARCHIVEALL}.zip" basedir=".."
      includes="stepmod/**"
    />
  </target>

  <target name="cvsupdate" depends="init" 
          description="update local copy of repository through anonymous CVS">
    <cvs
	 cvsRoot=":pserver:anonymous@${SFCVSROOT}" 
         command="update" compression="true" dest=".."
	 package="stepmod" />
  </target>

  <target name="cvstarball" depends="init" 
          description="download most recent SourceForge CVS repository backup">
    <get
	 src="${SFTARBALL}" dest="../stepmod-cvsroot-${DSTAMP}.tar.gz"
	 verbose="true"/>
  </target>




</project>

